!function(e,t,o){"use strict";t.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){var r,s={},i={},a=!1,c=t.copy,u=t.isUndefined;return n.addPollFn(function(){var t=n.cookies();r!=t&&(r=t,c(t,i),c(t,s),a&&e.$apply())})(),a=!0,e.$watch(function(){var e,r,a;for(e in i)u(s[e])&&n.cookies(e,o);for(e in s)r=s[e],t.isString(r)||(r=""+r,s[e]=r),r!==i[e]&&(n.cookies(e,r),a=!0);if(a)for(e in r=n.cookies(),s)s[e]!==r[e]&&(u(r[e])?delete s[e]:s[e]=r[e])}),s}]).factory("$cookieStore",["$cookies",function(e){return{get:function(o){return(o=e[o])?t.fromJson(o):o},put:function(o,n){e[o]=t.toJson(n)},remove:function(t){delete e[t]}}}])}(window,window.angular),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig",function(e){return{require:"?ngModel",link:function(t,o,n,r){function s(e,t){return t&&"function"==typeof t?function(o,n){e(o,n),t(o,n)}:e}var i={},a={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(i,e),r&&(r.$render=function(){o.sortable(i)},a.start=function(e,t){t.item.sortable={index:t.item.index()}},a.update=function(e,t){t.item.sortable.resort=r},a.receive=function(e,t){t.item.sortable.relocate=!0,r.$modelValue.splice(t.item.index(),0,t.item.sortable.moved)},a.remove=function(e,t){t.item.sortable.moved=1===r.$modelValue.length?r.$modelValue.splice(0,1)[0]:r.$modelValue.splice(t.item.sortable.index,1)[0]},a.stop=function(e,o){if(o.item.sortable.resort&&!o.item.sortable.relocate){var n,r;r=o.item.sortable.index,n=o.item.index(),o.item.sortable.resort.$modelValue.splice(n,0,o.item.sortable.resort.$modelValue.splice(r,1)[0])}(o.item.sortable.resort||o.item.sortable.relocate)&&t.$apply()}),t.$watch(n.uiSortable,function(e){angular.forEach(e,function(e,t){a[t]&&(e=s(a[t],e)),o.sortable("option",t,e)})},!0),angular.forEach(a,function(e,t){i[t]=s(e,i[t])}),o.sortable(i)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0}).directive("uiMask",["uiMaskConfig","$parse",function(e,t){"use strict";return{priority:100,require:"ngModel",restrict:"A",compile:function(){var o=e;return function(e,n,r,s){function i(e){return angular.isDefined(e)?(b(e),B?(l(),p(),!0):d()):d()}function a(e){angular.isDefined(e)&&(I=e,B&&C())}function c(e){return B?(D=g(e||""),E=f(D),s.$setValidity("mask",E),E&&D.length?h(D):void 0):e}function u(e){return B?(D=g(e||""),E=f(D),s.$viewValue=D.length?h(D):"",s.$setValidity("mask",E),""===D&&r.required&&s.$setValidity("required",!s.$error.required),E?D:void 0):e}function d(){return B=!1,m(),angular.isDefined(V)?n.attr("placeholder",V):n.removeAttr("placeholder"),angular.isDefined(U)?n.attr("maxlength",U):n.removeAttr("maxlength"),n.val(s.$modelValue),s.$viewValue=s.$modelValue,!1}function l(){D=R=g(s.$viewValue||""),O=L=h(D),E=f(D);var e=E&&D.length?O:"";r.maxlength&&n.attr("maxlength",2*M[M.length-1]),n.attr("placeholder",I),n.val(e),s.$viewValue=e}function p(){N||(n.bind("blur",k),n.bind("mousedown mouseup",_),n.bind("input keyup click focus",C),N=!0)}function m(){N&&(n.unbind("blur",k),n.unbind("mousedown",_),n.unbind("mouseup",_),n.unbind("input",C),n.unbind("keyup",C),n.unbind("click",C),n.unbind("focus",C),N=!1)}function f(e){return e.length?e.length>=F:!0}function g(e){var t="",o=P.slice();return e=e.toString(),angular.forEach(q,function(t){e=e.replace(t,"")}),angular.forEach(e.split(""),function(e){o.length&&o[0].test(e)&&(t+=e,o.shift())}),t}function h(e){var t="",o=M.slice();return angular.forEach(I.split(""),function(n,r){e.length&&r===o[0]?(t+=e.charAt(0)||"_",e=e.substr(1),o.shift()):t+=n}),t}function v(e){var t=r.placeholder;return"undefined"!=typeof t&&t[e]?t[e]:"_"}function y(){return I.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function b(e){var t=0;if(M=[],P=[],I="","string"==typeof e){F=0;var o=!1,n=e.split("");angular.forEach(n,function(e,n){A.maskDefinitions[e]?(M.push(t),I+=v(n),P.push(A.maskDefinitions[e]),t++,o||F++):"?"===e?o=!0:(I+=e,t++)})}M.push(M.slice().pop()+1),q=y(),B=M.length>1?!0:!1}function k(){A.clearOnBlur&&(z=0,H=0,E&&0!==D.length||(O="",n.val(""),e.$apply(function(){s.$setViewValue("")})))}function _(e){"mousedown"===e.type?n.bind("mouseout",w):n.unbind("mouseout",w)}function w(){H=T(this),n.unbind("mouseout",w)}function C(t){t=t||{};var o=t.which,r=t.type;if(16!==o&&91!==o){var i,a=n.val(),c=L,u=g(a),d=R,l=!1,p=S(this)||0,m=z||0,f=p-m,v=M[0],y=M[u.length]||M.slice().shift(),b=H||0,k=T(this)>0,_=b>0,w=a.length>c.length||b&&a.length>c.length-b,C=a.length<c.length||b&&a.length===c.length-b,P=o>=37&&40>=o&&t.shiftKey,I=37===o,q=8===o||"keyup"!==r&&C&&-1===f,F=46===o||"keyup"!==r&&C&&0===f&&!_,D=(I||q||"click"===r)&&p>v;if(H=T(this),!P&&(!k||"click"!==r&&"keyup"!==r)){if("input"===r&&C&&!_&&u===d){for(;q&&p>v&&!x(p);)p--;for(;F&&y>p&&-1===M.indexOf(p);)p++;var O=M.indexOf(p);u=u.substring(0,O)+u.substring(O+1),l=!0}for(i=h(u),L=i,R=u,n.val(i),l&&e.$apply(function(){s.$setViewValue(u)}),w&&v>=p&&(p=v+1),D&&p--,p=p>y?y:v>p?v:p;!x(p)&&p>v&&y>p;)p+=D?-1:1;(D&&y>p||w&&!x(m))&&p++,z=p,$(this,p)}}}function x(e){return M.indexOf(e)>-1}function S(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function $(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",t),o.moveStart("character",t),o.select()}}function T(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var M,P,I,q,F,D,O,E,L,R,z,H,B=!1,N=!1,V=r.placeholder,U=r.maxlength,A={};r.uiOptions?(A=e.$eval("["+r.uiOptions+"]"),angular.isObject(A[0])&&(A=function(e,t){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(void 0===t[o]?t[o]=angular.copy(e[o]):angular.extend(t[o],e[o]));return t}(o,A[0]))):A=o,r.$observe("uiMask",i),r.$observe("placeholder",a);var j=!1;r.$observe("modelViewValue",function(e){"true"===e&&(j=!0)}),e.$watch(r.ngModel,function(o){if(j&&o){var n=t(r.ngModel);n.assign(e,s.$viewValue)}}),s.$formatters.push(c),s.$parsers.push(u),n.bind("mousedown mouseup",_),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),o=t.length>>>0;if(0===o)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=o)return-1;for(var r=n>=0?n:Math.max(o-Math.abs(n),0);o>r;r++)if(r in t&&t[r]===e)return r;return-1})}}}}]),angular.module("mobispot",["ngCookies","ui.sortable","ui.mask"]),angular.module("mobispot").filter("tel",function(){return function(e){if(!e)return"";var t=e.toString().trim().replace(/^\+/,""),o=t.slice(0,1),n=t.slice(1,4),r=t.slice(4);return r=r.slice(0,3)+" "+r.slice(3,5)+" "+r.slice(5),("+"+o+" ("+n+") "+r).trim()}}),angular.module("mobispot").service("contentService",function(){this.desktopModal=function(e,t){if(angular.isUndefined(t)&&(t=500),angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open"),"none"==e)return $(".show-block.active").removeClass("active").fadeOut(t),!1;var o=angular.element("#"+e);$(".show-block").hasClass("active")&&$(".show-block.active").attr("id")!=e?$(".show-block.active").removeClass("active").fadeOut(t,function(){o.fadeIn(t).addClass("active")}):o.fadeIn(t).addClass("active")},this.mobileModal=function(e,t){var o=angular.element(".m-result"),n=o.find("p");o.removeClass("m-negative"),"error"==t&&o.addClass("m-negative"),o.hide(),o.show(),n.text(e),setTimeout(function(){o.hide()},5e3)},this.messageModal=function(e,t){if(speed=500,"mobile"===t)this.mobileModal(e,"none");else{angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var o=angular.element("#message");o.removeClass("negative"),o.removeClass("alert");var n=angular.element("#message p");$(".show-block").hasClass("active")?$(".show-block.active").removeClass("active").fadeOut(speed,function(){n.html(e),o.fadeIn(speed).addClass("active")}):(n.html(e),o.fadeIn(speed).addClass("active"))}},this.scrollPage=function(e,t){angular.isUndefined(t)&&(t=600);var o=$(e).offset().top;$("html, body").animate({scrollTop:o},t)};var e={};this.setSpot=function(t){e=t},this.getSpot=function(){return e}}),angular.module("mobispot").service("dialogService",function(){var e=function(e,t,o,n,r){function s(){e("yes"),a()}function i(){e("no"),a()}function a(){d.unbind("click",s),l.unbind("click",i),$(document).unbind("click",i),c.removeClass("active").fadeOut(speed)}speed=500,angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var c=angular.element("#b-dialog"),u=angular.element("#b-dialog p"),d=angular.element("#b-dialog .yes-button"),l=angular.element("#b-dialog .no-button");$(".show-block").hasClass("active")&&$(".show-block.active").removeClass("active").fadeOut(0),u.html(n),d.text(t),l.text(o),c.removeClass("alert"),c.removeClass("negative"),"undefined"!=typeof r&&c.addClass(r),c.fadeIn(speed).addClass("active"),d.bind("click",s),l.bind("click",i),$(document).bind("click",i)};return{yesNoDialog:e}}),angular.module("mobispot").controller("DemokitController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,r){e.error={},e.$watch("order.name + order.email + order.phone + order.address + order.city + order.zip + order.country + order.shipping + order.payment",function(){e.error.field=!1}),e.order={name:"",email:"",phone:"",address:"",city:"",zip:"",country:"",shipping:1,payment:1},e.products={},e.max_product_id=0,e.prices={},e.shippings={},e.payments={},e.total=0,e.toMain=!1,e.registerProduct=function(t,o){e.products[t]=0,t>e.max_product_id&&(e.max_product_id=t),e.prices[t]=o},e.addProduct=function(t){e.products[t]<9&&e.products[t]++,e.calculateSumm()},e.deductProduct=function(t){e.products[t]>0&&e.products[t]--,e.calculateSumm()},e.registerShipping=function(t,o){e.shippings[t]=o},e.setShipping=function(t,o){e.order.shipping=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click(),e.calculateSumm()},e.registerPayment=function(t,o){e.payments[t]=o},e.setPayment=function(t,o){e.order.payment=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click()},e.calculateSumm=function(){e.summ=120,e.total=e.summ,e.order.shipping&&"undefined"!=typeof e.shippings[e.order.shipping]&&(e.total+=e.shippings[e.order.shipping])},e.buyDemoKit=function(n){return e.orderForm.$valid?void(e.toMain?window.location.href="/":(n.products=e.products,t.post("/service/buyDemoKit",n).success(function(t){"no"==t.error?"email"==t.action?(e.result.message=t.message,r.desktopModal("message"),e.toMain=!0,e.finishButton=e.toMainMessage):(angular.element("#demo-kit-block").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):(e.result.message=t.message,r.desktopModal("message"),e.error.field=!0)}))):(e.error.field=!0,!1)}}]),angular.module("mobispot").controller("HelpController",["$scope","$http","contentService",function(e,t,o){e.error={},e.send=function(n,r){return r?(n.email=n.help_email,void t.post("/service/sendQuestion",n).success(function(t){"no"==t.error&&(e.user.name="",e.user.help_email="",e.user.question="",e.user.phone="",e.result.message=t.content,o.viewModal("message"))})):!1}}]),angular.module("mobispot").controller("PhonesController",["$scope",function(e){e.initPhones=function(t){e.phonesList=t},e.initDevices=function(t){e.devicesList=t},e.phonesList=[],e.devicesList=[]}]),angular.module("mobispot").controller("SlideController",["$scope","$timeout",function(e,t){e.IMAGE_WIDTH=300,e.FADE_SPEED=0,e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.spots={},e.spots.name="spots",e.spots.listposition={left:"0px"},e.spots.slides=[{id:1,img:"brace_blue.jpg"}],e.spots.wristbands=[1],e.spots.wristbands_current=e.spots.wristbands[0],e.spots.cards=[],e.spots.cards_current=-1,e.spots.keys=[],e.spots.keys_current=-1,e.spots.current=e.spots.wristbands_current,e.spots.current_type="wristband",e.spots.color_rotation=!1,e.spots.timer_rotation=!1,e.scrollTo=function(t,o){t.listposition={left:e.IMAGE_WIDTH*o*-1+"px"}},angular.element(window).bind("load",function(){e.sliderInit()}),e.sliderInit=function(){e.spots.slides=[{id:0,img:"brace_black.png"},{id:1,img:"brace_blue.png"},{id:2,img:"brace_green.png"},{id:3,img:"brace_patt01.png"},{id:4,img:"brace_patt02.png"},{id:5,img:"brace_patt03.png"},{id:6,img:"brace_patt04.png"},{id:7,img:"brace_patt05.png"},{id:8,img:"brace_patt06.png"},{id:9,img:"brace_patt07.png"},{id:10,img:"brace_red.png"},{id:11,img:"brace_white.png"},{id:12,img:"card_black.png"},{id:13,img:"card_blue.png"},{id:14,img:"card_green.png"},{id:15,img:"card_red.png"},{id:16,img:"card_white.png"},{id:17,img:"card_yellow.png"},{id:18,img:"key_black.png"},{id:19,img:"key_blue.png"},{id:20,img:"key_green.png"},{id:21,img:"key_red.png"},{id:22,img:"key_white.png"},{id:23,img:"key_yellow.png"},{id:24,img:"brace_yellow.png"}],e.spots.wristbands=[0,1,4,2,3,5,6,7,8,9,10,11,24],e.spots.wristbands_current=e.spots.wristbands[e.getRandomInt(0,e.spots.wristbands.length-1)],e.spots.cards=[12,13,14,15,16,17],e.spots.cards_current=15,e.spots.keys=[18,19,20,21,22,23],e.spots.keys_current=20,e.spots.inited=!0},e.fadeTo=function(t,o){if(t.current==o)return!1;angular.element("#slider-"+t.name+" .f-slide").stop();var n="#"+t.name+"_"+o;return angular.element(n).length?(t.current=o,angular.element("#slider-"+t.name+" .f-slide[id!="+n+"]").fadeOut(0),angular.element(n).fadeIn(e.FADE_SPEED),!0):!1},e.fadeToWistbrands=function(){e.fadeTo(e.spots,e.spots.wristbands_current)&&(e.spots.current_type="wristband")},e.fadeToCards=function(){e.fadeTo(e.spots,e.spots.cards_current)&&(e.spots.current_type="card")},e.fadeToKeys=function(){e.fadeTo(e.spots,e.spots.keys_current)&&(e.spots.current_type="key")},e.startColors=function(){return e.spots.color_rotation?!1:(e.spots.color_rotation=!0,e.spots.timer_rotation?!1:(e.spots.timer_rotation=!0,void t(function(){e.colorRotation()},100)))},e.stopColors=function(){e.spots.color_rotation=!1},e.colorRotation=function(){if(!e.spots.color_rotation)return e.spots.timer_rotation=!1,!1;if("wristband"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.wristbands.length;n++)e.spots.wristbands[n]==e.spots.wristbands_current&&(o=n);if(0>o)return!1;e.spots.wristbands_current=e.spots.wristbands.length-1==o?e.spots.wristbands[0]:e.spots.wristbands[o+1],e.fadeToWistbrands()}else if("card"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.cards.length;n++)e.spots.cards[n]==e.spots.cards_current&&(o=n);if(0>o)return!1;e.spots.cards_current=e.spots.cards.length-1==o?e.spots.cards[0]:e.spots.cards[o+1],e.fadeToCards()}else{if("key"!=e.spots.current_type)return!1;for(var o=-1,n=0;n<e.spots.keys.length;n++)e.spots.keys[n]==e.spots.keys_current&&(o=n);if(0>o)return!1;e.spots.keys_current=e.spots.keys.length-1==o?e.spots.keys[0]:e.spots.keys[o+1],e.fadeToKeys()}e.spots.timer_rotation=!0,t(function(){e.colorRotation()},1300)},e.randomSlide=function(t){e.fadeTo(t,e.getRandomInt(0,t.slides.length-1))}}]),angular.module("mobispot").controller("SpotController",["$scope","$http","$compile","$timeout","contentService","dialogService",function(e,t,o,n,r,s){function i(e){e.stopPropagation(),e.preventDefault(),"dragover"==e.type?angular.element("#dropbox").addClass("hover"):angular.element("#dropbox").removeClass("hover")}function a(t){i(t);for(var o,n=t.target.files||t.dataTransfer.files,r=0;o=n[r];r++)e.uploadFile(o)}function c(t){e.$apply(function(){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"})}e.maxSize=26214400,e.popup_width=500,e.popup_height=550,e.progress=0,e.keys=[],e.action=!1,e.error={},e.result={},e.spot={},e.spot.discodes=0,e.general={},e.general.views=!1,e.host_mobile=0,e.wallet={},e.wallet.cards={},e.scroll_key=-1,e.actions={},e.actions.page="",e.actions.phrase="",e.actions.in_progress=!1,e.actions.offset=0,e.actions.count_all=0,e.text={},e.transport_types=[],e.custom_card={},e.prev_custom_card={},e.selected_type={},e.in_request=!1,e.wallet_history={},e.wallet_history.date="",e.wallet_history.empty_date=!1,e.date_history_shown=!1,e.$watch("spot.code + spot.terms",function(){e.error.code=!1,e.error.terms=!1}),e.addSpot=function(n){return n.code?e.spot.terms?void t.post("/spot/add",n).success(function(t){"no"==t.error?(e.spot.discodes=t.discodes,angular.element(".spot-list").prepend(o(t.content)(e)),angular.element("#actSpot").click(),delete e.spot.code,delete e.spot.terms,(e.host_mobile||1==n.need_reload)&&(window.location.href="http://"+window.location.hostname+"/spot/list")):"yes"==t.error&&(e.error.code=!0)}):!1:(e.error.code=!0,!1)},e.$watch("general.views + spot.discodes",function(){e.actions.page="",angular.element(window).unbind("scroll",e.loadMoreCoupons),"spot"==e.general.views?e.viewSpot(e.spot):"wallet"==e.general.views?e.viewWallet(e.spot):"coupon"==e.general.views?e.viewCoupons(e.spot,e.actions):"settings"==e.general.views?e.viewsSettings(e.spot):"transport"==e.general.views&&e.viewTransport(e.spot)}),e.bodyMinHeight=function(){var e=angular.element(".spot-list").height();angular.element(".spot-content").css("min-height",e+200)},e.viewSpot=function(n){if(0===n.discodes)return!1;var s=angular.element("#spot-block");t.post("/spot/view",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.keys=[],e.content_iteration=0,e.fileUploadInit(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500),r.scrollPage(e.scroll_key&&e.scroll_key>1?"#block-"+e.scroll_key:"body"),e.scroll_key=-1)})},e.addContent=function(){e.addValue(e.spot.content)},e.addValue=function(n){e.spot.content=n,t.post("/spot/spotAddContent",e.spot).success(function(t){if("no"==t.error){angular.element("#add-content").append(o(t.content)(e)),e.spot.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),angular.element("#extraMediaForm").hasClass("open")&&(angular.element("#extraMediaForm").slideUp(0,function(){angular.element("#extraMediaForm a").removeClass("blackout"),angular.element("#extraMediaForm a").fadeTo(0,1)}),angular.element("#extraMediaForm").removeClass("open"));var n=angular.element("#block-"+t.key).offset().top;angular.element("html, body").animate({scrollTop:n},600)}}),e.resetCursor()},e.saveOrder=function(){t.post("/spot/saveOrder",e.spot).success(function(e){"no"==e.error})},e.sortableOptions={update:function(){e.saveOrder()},containment:".spot-content",handle:".move",scrollSensitivity:5,tolerance:"pointer",opacity:.8},e.removeContent=function(o,n,r){o.key=n,t.post("/spot/spotRemoveContent",o).success(function(t){if("no"==t.error){var o=angular.element(r.currentTarget).parents(".spot-item");o.remove(),e.keys=t.keys,t.netDown&&e.netDown(t.netDown)}})},e.editContent=function(t,n,r){if(t.content_new)e.hideSpotEdit();else{t.key=n;var s=angular.element(r.currentTarget).parents(".spot-item"),i=angular.element("#spot-edit").clone();if(s.find("a.type-link").size()>0){var a=s.find("a.type-link");e.spot.content_new=a.find("span.link").text()}else{var c=s.find("p.item-type__text");e.spot.content_new=c.text()}i.removeClass("hide"),i.find("textarea").focus(1),s.hide().before(o(i)(e))}},e.saveContent=function(n,r){var s=angular.element(r.currentTarget).parents(".spot-item"),i=s.next();t.post("/spot/spotSaveContent",n).success(function(t){"no"==t.error?(s.before(o(t.content)(e)),s.remove(),i.remove()):(s.remove(),i.show()),delete e.spot.content_new})},e.hideSpotEdit=function(){if(!e.spot.content&&!e.spot.content_new)return!1;var n=angular.element("#spot-edit"),r=n.next();t.post("/spot/spotSaveContent",e.spot).success(function(t){"no"==t.error?(n.before(o(t.content)(e)),n.remove(),r.remove()):(n.remove(),r.show()),delete e.spot.content_new})},e.renameSpot=function(o){return o.name?void t.post("/spot/rename",o).success(function(t){"no"==t.error&&(angular.element("#"+o.discodes+" h3").text(o.name),r.messageModal(t.content,e.host_type))}):!1},e.cleanSpot=function(o){s.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/clean",o).success(function(t){"no"==t.error&&(e.general.views="spot")})},e.text.yes_btn,e.text.no_btn,e.text.clean_spot,"negative")},e.removeSpot=function(o){s.yesNoDialog(function(e){return"yes"!=e?!1:void t.post("/spot/remove",o).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")})},e.text.yes_btn,e.text.no_btn,e.text.rm_spot,"negative")},e.ivisibleSpot=function(o){var n=e.text.mk_invisible,r=e.text.mk_invisible_descr;6==o.status&&(n=e.text.mk_visible,r=e.text.mk_visible_descr),s.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/invisible",o).success(function(t){"no"==t.error&&(e.spot.status=t.status,angular.element("#"+o.discodes).toggleClass("invisible"))})},e.text.yes_btn,e.text.no_btn,n,"negative")},e.viewsSettings=function(n){var r=angular.element("#spot-block");t.post("/spot/settings",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewWallet=function(n){var r=angular.element("#spot-block");t.post("/spot/wallet",n).success(function(t){"no"==t.error?(r.empty(),r.html(o(t.content)(e)),e.getListCard(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500),angular.element("#date_history").datepicker({yearRange:"1900:-0",maxDate:0,dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.wallet_history.date=t})},onClose:function(){e.$apply(function(){e.date_history_shown=!1})}})):e.viewSpot(e.spot)})},e.viewCoupons=function(n){var r=angular.element("#spot-block");t.post("/spot/coupons",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewTransport=function(n){var r=angular.element("#spot-block");t.post("/spot/transport",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.listCoupons=function(n,r){if(!r.page)return!1;var s=angular.element("#coupons-list"),i={discodes:n.discodes,token:n.token,page:r.page,phrase:r.phrase,offset:r.offset};e.actions.in_progress=!0,t.post("/spot/listCoupons",i).success(function(t){"no"==t.error&&(e.actions.offset+=t.count,e.actions.count_all=t.count_all,s.append(o(t.content)(e)),e.actions.in_progress=!1)}).error(function(){e.actions.in_progress=!1})},e.filterCoupons=function(t,o){e.actions.offset=0,e.actions.count_all=0,e.listCoupons(t,o)},e.getListCard=function(){return"wallet"!=e.general.views?!1:(t.post("/spot/listCard",e.wallet).success(function(t){"no"==t.error&&(e.wallet.cards=t.cards,e.wallet.cards_count=t.cards_count,e.wallet.linking_card=t.linking_card)}),void n(function(){e.getListCard()},5e3))},e.showCustomCard=function(){$("#customCard").addClass("show"),$("body").css("overflow","hidden")},e.hideCustomCard=function(){$("#customCard").removeClass("show"),$("body").css("overflow","")},e.blockedWallet=function(){t.post("/spot/blockedWallet",e.wallet).success(function(t){"no"==t.error&&(e.wallet.status=t.status)})},e.linkingCard=function(e){return e.terms?void angular.element("#linking_card").submit():!1},e.setPaymentCard=function(o,n){if(e.in_request)return!1;var r={token:e.spot.token,card_id:o};e.in_request=!0,t.post("/spot/setPaymentCard",r).success(function(t){"no"==t.error&&(angular.element(".main-card").removeClass("main-card"),angular.element(n.currentTarget).parent().parent().addClass("main-card"),e.wallet.blacklist=1,e.listHistory(e.wallet_history.date)),e.in_request=!1}).error(function(){e.in_request=!1})},e.editCardList=function(){$(".table-card").toggleClass("edit"),e.wallet.card_edit=0===e.wallet.card_edit?1:0},e.removeCard=function(o){var n={token:e.spot.token,card_id:o};t.post("/spot/removeCard",n).success(function(t){"no"==t.error&&(e.wallet.cards_count-=1,delete e.wallet.cards[o])})};var u;e.countReset=function(){e.reset_time="undefined"!=typeof e.reset_time?e.reset_time:30,u=n(function(){0===e.reset_time?$(location).attr("href",window.location.pathname):e.reset_time--,e.countReset()},1e3)},e.fileUploadInit=function(){var e=document.getElementById("dropbox"),t=document.getElementById("add-file");if(e&&t){var o=new XMLHttpRequest;o.upload&&(e.addEventListener("dragover",i,!1),e.addEventListener("dragleave",i,!1),e.addEventListener("drop",a,!1),t.addEventListener("change",a,!1))}},e.uploadComplete=function(t){var n=t.target.responseText;if(n){var r=angular.fromJson(n);if("no"==r.error){angular.element("#progress-content").hide(),angular.element("#add-content").append(o(r.content)(e)),e.keys.push(r.key),angular.element("#add-file").val("");var s=$("#block-"+r.key).offset().top;angular.element("html, body").animate({scrollTop:s},600)}}},e.uploadFailed=function(){angular.element("#error-upload").show().delay(800).slideUp("slow")},e.uploadFile=function(t){var o=new XMLHttpRequest;o.upload&&t.size<=e.maxSize&&(angular.element("#progress-content").show(),o.upload.onprogress=function(t){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"},o.upload.addEventListener("progress",c,!1),o.addEventListener("error",e.uploadFailed,!1),o.addEventListener("load",e.uploadComplete,!1),o.open("POST","/spot/upload",!0),o.setRequestHeader("X-File-Name",unescape(encodeURIComponent(t.name))),o.setRequestHeader("X-Discodes",e.spot.discodes),o.send(t))},e.loadSocContent=function(n){var r={discodes:e.spot.discodes,key:n,token:e.user.token};t.post("/spot/SocNetContent",r).success(function(t){if("no"==t.error){var n=angular.element("#block-"+t.key),r=n.height(),s=n.offset().top;if(n.before(o(t.content)(e)),n.remove(),e.setVideoSize(t.key),s<$("html, body").scrollTop()){var i=$("html, body").scrollTop()+$("#block-"+t.key).height()-r;$("html, body").animate({scrollTop:i},0)}}})},e.netCheck=function(o){var n={token:e.user.token,netName:o};t.post("/spot/netCheck",n).success(function(e){if("no"==e.error){var t=angular.element("#extraMediaForm a[net='"+e.netName+"']");e.binded?t.addClass("binded"):t.removeClass("binded")}})},e.netUp=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.addClass("binded")},e.netDown=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.removeClass("binded")};var d,l,p,m,f;e.bindByPanel=function(s){var i=s,a={spot:e.spot,token:e.user.token,netName:i};if("undefined"!=typeof e.spot.content&&e.spot.content.length){a.link=e.spot.content;for(var c=0;c<e.soc_patterns.length;c++)if(-1!=e.spot.content.indexOf(e.soc_patterns[c].baseUrl)){i=e.soc_patterns[c].name,a.netName=e.soc_patterns[c].name;break}}t.post("/spot/BindByPanel",a).success(function(t){if("no"==t.error)if(0===t.profileHint.length)if(t.loggedIn)if("ok"==t.linkCorrect){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.setVideoSize(t.key);var s=$("#block-"+t.key).offset().top;$("html, body").animate({scrollTop:s},600),e.netUp(t.socnet);var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else r.messageModal(t.linkCorrect,e.host_type);else{var c=$.extend({id:"",popup:{width:e.popup_width,height:e.popup_height}},c),u="http://"+window.location.hostname+"/user/BindSocLogin?service="+i,p=u;p+=p.indexOf("?")>=0?"&":"?",-1===p.indexOf("redirect_uri=")&&(p+="redirect_uri="+encodeURIComponent(u));var m=(window.screen.width-c.popup.width)/2,g=(window.screen.height-c.popup.height)/2;if(e.host_mobile||(d=window.open(p+"&js","yii_eauth_popup","width="+c.popup.width+",height="+c.popup.height+",left="+m+",top="+g+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var h=p+"&discodes="+e.spot.discodes+"&newField=1&synch=true";"undefined"!=typeof e.spot.content&&e.spot.content.length&&(h+="&link="+encodeURIComponent(e.spot.content)),window.location.href=h}else d.focus(),e.bindNet={name:t.socnet,discodes:e.spot.discodes,newField:1},"undefined"!=typeof e.spot.content&&e.spot.content.length&&(e.bindNet.link=e.spot.content),l=n(e.loginTimer,1e3)}else n.cancel(f),f=n(e.hintTimer,1e4),angular.element("#socLinkHolder h4").html(t.profileHint),angular.element("#noteHolder").addClass("hide"),angular.element("#socLinkHolder").removeClass("hide"),angular.element("#socLinkHolder h4").stop(),angular.element("#socLinkHolder h4").fadeTo(800,.5,function(){angular.element("#socLinkHolder h4").fadeTo(800,1,function(){angular.element("#socLinkHolder h4").fadeTo(800,.5,function(){angular.element("#socLinkHolder h4").fadeTo(800,1)})})})})},e.hintTimer=function(){angular.element("#socLinkHolder h4").stop(),angular.element("#socLinkHolder h4").html(""),angular.element("#noteHolder").hasClass("hide")&&(angular.element("#socLinkHolder").addClass("hide"),angular.element("#noteHolder").removeClass("hide"))},e.getPatternInd=function(t){for(var o=-1,n=0;n<e.soc_patterns.length;n++)if(e.soc_patterns[n].name==t){o=n;break}return o},e.bindSocial=function(s,i,a){var c=angular.element(a.currentTarget).parents(".spot-item");s.key=i,t.post("/spot/bindSocial",s).success(function(t){if("no"==t.error)if("no"!=t.socnet&&t.socnet.length>0)if(t.loggedIn)if("ok"==t.linkCorrect){c.before(o(t.content)(e)),c.remove();var i=e.getPatternInd(t.socnet);i>-1&&(e.soc_patterns[i].BindByPaste=!0),e.setVideoSize(s.key),e.netUp(t.socnet)}else r.messageModal(t.linkCorrect,e.host_type);else{var u=$.extend({id:"",popup:{width:e.popup_width,height:e.popup_height}},u),p="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.socnet,m=p;m+=m.indexOf("?")>=0?"&":"?",-1===m.indexOf("redirect_uri=")&&(m+="redirect_uri="+encodeURIComponent(p));var f=(window.screen.width-u.popup.width)/2,g=(window.screen.height-u.popup.height)/2;d=window.open(m+"&js","yii_eauth_popup","width="+u.popup.width+",height="+u.popup.height+",left="+f+",top="+g+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes"),null===d||"undefined"==typeof d?window.location.href=m+"&discodes="+s.discodes+"&key="+s.key+"&synch=true":(d.focus(),e.bindNet={name:t.socnet,discodes:s.discodes,key:s.key,spotEdit:angular.element(a.currentTarget).parents(".spot-item")},l=n(e.loginTimer,1e3))}else"ok"!=t.linkCorrect&&r.messageModal(t.linkCorrect,e.host_type)})},e.checkLike=function(r,s){var i,a={token:e.user.token,id:r,discodes:e.spot.discodes};t.post("/user/checkLike",a).success(function(t){if("no"==t.error)if(t.isSocLogged)"undefined"!=typeof t.content&&(e.host_mobile||angular.isUndefined(s)?angular.isUndefined(s)||(i=angular.element(s.currentTarget).parent().parent().parent().parent()):i=angular.element(s.currentTarget).parent().parent("div.spot-item"),i.before(o(t.content)(e)),i.remove());else{var a=$.extend({id:"",popup:{width:e.popup_width,height:e.popup_height}},a),c="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.service,u=c;u+=u.indexOf("?")>=0?"&":"?",-1===u.indexOf("redirect_uri=")&&(u+="redirect_uri="+encodeURIComponent(c)+"&"),u+="js";var l=(window.screen.width-a.popup.width)/2,m=(window.screen.height-a.popup.height)/2;if(e.host_mobile||(d=window.open(u,"yii_eauth_popup","width="+a.popup.width+",height="+a.popup.height+",left="+l+",top="+m+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var f=u+"&discodes="+e.spot.discodes+"&chek_like="+r;window.location.href=f}else d.focus(),e.checkingAction={id:r,sharing_ind:t.ind},angular.isUndefined(s)||(e.actionDiv=angular.element(s.currentTarget).parent().parent("div.spot-item")),p=n(e.likesTimer,1e3)
}})},e.likesTimer=function(){if(!d.closed){var r={token:e.user.token,id:e.checkingAction.id,sharing_ind:e.checkingAction.sharing_ind,discodes:e.spot.discodes};t.post("/user/checkLike",r).success(function(t){t.isSocLogged?(d.close(),e.actionDiv.before(o(t.content)(e)),e.actionDiv.remove()):t.sharing_logged?(d.close(),e.checkLike(e.checkingAction.id)):p=n(e.likesTimer,1e3)})}},e.loyaltyTimer=function(){for(var t=angular.element(".connecting"),o=0;o<t.length;o++){var r=angular.element(t[o]).attr("id").substring(7);e.checkLoyaltyConnection(r)}m=n(e.loyaltyTimer,1e3)},e.setLoyaltyTimer=function(){m=n(e.loyaltyTimer,1e3)},e.checkLoyaltyConnection=function(n){var r={token:e.user.token,id:n,discodes:e.spot.discodes},s=angular.element("#coupon-"+n);t.post("/user/checkLoyaltyConnection",r).success(function(t){"undefined"!=typeof t.connected&&t.connected&&(s.before(o(t.content)(e)),s.remove())})},e.disableAction=function(n,r){var s,i={token:e.user.token,id:r,discodes:e.spot.discodes};t.post("/user/disableLoyalty",i).success(function(t){"no"==t.error&&(s=e.host_mobile?angular.element(n.currentTarget).parent().parent().parent().parent():angular.element(n.currentTarget).parent().parent("div.spot-item"),s.before(o(t.content)(e)),s.remove())})},e.loginTimer=function(){if(!d.closed){var s={name:e.bindNet.name,discodes:e.bindNet.discodes,key:e.bindNet.key};"undefined"!=typeof e.bindNet.newField&&1==e.bindNet.newField&&(s.newField=1),"undefined"!=typeof e.bindNet.link&&e.bindNet.link.length&&(s.link=e.bindNet.link);var i={token:e.user.token,bindNet:s};t.post("/spot/bindedContent",i).success(function(t){if("undefined"!=typeof t.loggedIn&&"undefined"!=typeof t.linkCorrect)if(t.loggedIn)if(d.close(),"ok"==t.linkCorrect){if(t.newField){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.netUp(t.socnet),e.setVideoSize(t.key);var s=$("#block-"+t.key).offset().top-100;angular.element("html, body").animate({scrollTop:s},600)}else{var i=e.bindNet.spotEdit;i.before(o(t.content)(e)),i.remove(),e.setVideoSize(t.key),e.netUp(t.socnet)}e.bindNet={};var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else r.messageModal(t.linkCorrect,e.host_type);else l=n(e.loginTimer,1e3)})}},e.unBindSocial=function(n,r,s){n.key=r,t.post("/spot/UnBindSocial",n).success(function(t){if("no"==t.error){var n=angular.element(s.currentTarget).parents(".spot-item");n.before(o(t.content)(e)),n.remove(),t.netDown&&e.netDown(t.netDown)}})},e.getSocPatterns=function(){if(e.freeSocial=!0,"undefined"==typeof e.soc_patterns){var o={token:e.user.token};t.post("/spot/SocPatterns",o).success(function(t){e.soc_patterns=t.soc_patterns;for(var o=0;o<e.soc_patterns.length;o++)"undefined"==typeof e.soc_patterns[o].BindByPaste&&(e.soc_patterns[o].BindByPaste=!1)})}},e.setVideoSize=function(e){var t;1==angular.element("#block-"+e+" .video-vimeo").length?(t=angular.element("#block-"+e+" .video-vimeo"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px")):1==angular.element("#block-"+e+" .yt_player").length&&(t=angular.element("#block-"+e+" .yt_player"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px"))},e.setNewPass=function(o){t.post("/spot/setSpotPass",o).success(function(t){"no"==t.error&&"undefined"!=typeof t.saved?(angular.element("#savePassButton").text(t.saved),"undefined"!=typeof e.spot.pass&&o.pass.length?angular.element("#resetPassButton").show():angular.element("#resetPassButton").hide()):"yes"==t.error&&angular.element("#setPassForm input[name=newPass]").addClass("error")})},e.resetPass=function(t){t.pass="",e.setNewPass(t)},e.savePassButtonText=function(e){angular.element("#savePassButton").text(e),angular.element("#setPassForm input[name=newPass]").removeClass("error")},e.checkStatusSpot=function(){return!0},e.resetCursor=function(){"undefined"!=typeof e.cursorBody&&e.cursorBody.length?(angular.element("body").css("cursor",e.cursorBody),delete e.cursorBody):angular.element("body").css("cursor","default"),"undefined"!=typeof e.cursorTextarea&&e.cursorTextarea.length?(angular.element("#dropbox textarea").css("cursor",e.cursorTextarea),delete e.cursorTextarea):angular.element("#dropbox textarea").css("cursor","text")},e.$watch("actions.page",function(){e.actions.offset=0,e.actions.count_all=0;var t=angular.element("#coupons-list");t.empty(),e.listCoupons(e.spot,e.actions)}),e.couponsScroll=function(){e.actions.in_progress=!1,angular.element(window).bind("scroll",e.loadMoreCoupons)},e.loadMoreCoupons=function(){angular.element(window).scrollTop()+angular.element(window).height()>=angular.element(document).height()-200&&!e.actions.in_progress&&e.actions.offset<e.actions.count_all&&e.listCoupons(e.spot,e.actions)},e.initTransportType=function(t,o,n){e.transport_types[e.transport_types.length]={id:t,name:o,img:n}},e.setType=function(t){e.custom_card.back=t.id,t.img&&$("#card-back").css("background-image","url(/uploads/transport/"+t.img+")")},e.sendImg=function(t){var o=$(t).parents("form");if(""===$(t).val())return!1;var n=o.children("input[name=discodes_id]"),s=o.children("input[name=token]"),i=o.children("input[name=img_type]"),a=o.find("span.upload-holder"),c=o.find("i.upload-holder"),u=o.find("img.upload-holder"),d=r.getSpot();n.length&&n.val(d.discodes),s.length&&s.val(d.token),o.ajaxSubmit({type:"POST",success:function(t){var o=angular.fromJson(t);(o.error="no")?(a.length&&a.addClass("hide"),c.length&&c.addClass("hide"),u.removeClass("hide"),u.attr("src",o.path+"?ver="+(new Date).getTime()),e.$apply(function(){"transport_photo"==i.val()?e.custom_card.photo=o.path:"transport_logo"==i.val()&&(e.custom_card.logo=o.path),e.error.custom_card=!1})):e.error.custom_card=!0}})},e.showImageCropper=!1,e.showLogoCropper=!1,e.setSpot=function(){r.setSpot(e.spot)},e.orderTransportCard=function(o,n,s){if(!n)return e.error.custom_card=!0,!1;var i=r.getSpot();o.token=i.token,o.discodes=i.discodes,t.post("/spot/orderTransportCard",o).success(function(t){"no"==t.error?(e.hideCustomCard(),r.messageModal(s,e.host_type)):e.error.custom_card=!0})},e.orderCustomCard=function(o,s,i){return s?e.isDoubleCard(o)?(e.error.custom_card=!0,r.messageModal("Вы уже заказали эту карту",e.host_type),n(function(){e.error.custom_card=!1},1e3),!1):(e.saveCardParams(o),void t.post("/spot/orderCustomCard",o).success(function(t){"no"==t.error?(r.messageModal(i,e.host_type),o.number=t.number):e.error.custom_card=!0})):(e.error.custom_card=!0,!1)},e.saveCardParams=function(t){for(property in t)e.prev_custom_card[property]=t[property]},e.isDoubleCard=function(t){for(property in t)if("number"!=property&&e.prev_custom_card[property]!=t[property])return!1;return!0},e.$watch("custom_card.shipping_name + custom_card.phone + custom_card.address + custom_card.city + custom_card.zip + custom_card.email",function(){e.error.custom_card=!1}),e.$watch("wallet_history.date",function(){e.listHistory(e.wallet_history.date)}),e.listHistory=function(n){var r={discodes:e.spot.discodes,token:e.spot.token,date:n};block_history=angular.element("#history-wrapper"),block_history.empty(),e.wallet_history.empty_date=!1,t.post("/spot/listHistory",r).success(function(t){"no"==t.error&&(block_history.append(o(t.content)(e)),t.empty_for_date&&(e.wallet_history.empty_date=!0))})},e.customCardInit=function(t){e.custom_card=angular.fromJson(t)},e.showDatepicker=function(t){return e.date_history_shown?!1:(e.date_history_shown=!0,void angular.element(t).datepicker("show"))},e.addPhone=function(n,r){if(!r)return!1;var s={discodes:e.spot.discodes,token:e.spot.token,phone:n};t.post("/spot/addPhone",s).success(function(t){"no"==t.error&&(e.new_phone="",angular.element("#phones-list").append(o(t.content)(e)))})},e.removePhone=function(o,n){var r={discodes:e.spot.discodes,token:e.spot.token,phone:o};t.post("/spot/removePhone",r).success(function(e){if("no"==e.error){var t=angular.element(n.currentTarget).parents(".phone-row");t.remove()}})},e.activateSchoolExtended=function(n){var r={discodes:e.spot.discodes,token:e.spot.token,address:n};t.post("/spot/activateSchoollExtended",r).success(function(t){if("no"==t.error){e.home_address="";var n=angular.element("#phone_services");n.empty(),n.append(o(t.content)(e))}})},e.removeSchoolExtended=function(){var n={discodes:e.spot.discodes,token:e.spot.token};t.post("/spot/removeSchoollExtended",n).success(function(t){if("no"==t.error){e.home_address="";var n=angular.element("#phone_services");n.empty(),n.append(o(t.content)(e))}})},e.blockTroika=function(o){s.yesNoDialog(function(e){return"yes"!=e?!1:void t.post("/spot/blockTroika",o).success(function(e){"no"==e.error&&(angular.element("#blockTroika").addClass("disabled"),angular.element("#"+o.discodes).addClass("invisible"),window.location.reload())})},e.text.yes_btn,e.text.no_btn,e.text.block_troika,"negative")}}]),angular.module("mobispot").controller("ProductController",["$scope","$http","$compile","$timeout","contentService",function(e,t){e.host_type="desktop",e.transport_card={},e.simple_card={},e.transport_types=[],e.StoreInit=function(){var n={token:e.user.token};t.post("/store/product/getPriceList",n).success(function(t){e.products=t.products,e.settings=t.settings;for(var n=0;n<e.products.length;n++)if(e.products[n].jsID=n,e.products[n].selectedSize=e.products[n].size[0],e.products[n].selectedColor=e.products[n].color[0],e.products[n].selectedSurface=e.products[n].surface[0],e.products[n].quantity=1,e.products[n].listposition={left:"0px"},e.products[n].addText=e.settings.addToCart,"undefined"!=typeof e.products[n].selectedColor&&"undefined"!=typeof e.products[n].photo&&e.products[n].photo.length>0)for(var r="_"+e.products[n].selectedColor,s=0;s<e.products[n].photo.length;s++){var i=e.products[n].photo[s].substring(0,e.products[n].photo[s].lastIndexOf("."));if(i.substr(i.length-r.length)==r){e.products[n].listposition={left:o*s*-1+"px"};break}}e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var o=242;e.scrollTo=function(t,n,r){e.products[r].listposition={left:o*n*-1+"px"}},e.addToCart=function(o){if(e.products[o].quantity<1)return!1;if(e.inRequest)return!1;if("troika"==e.products[o].type)return e.showConstructorTroika(e.products[o],o),!1;if("simple"==e.products[o].type)return e.showConstructorSimple(e.products[o],o),!1;e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:parseInt(e.products[o].quantity),selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/addToCart",n).success(function(t){if("no"==t.error){e.products[o].addText=e.settings.added,e.items.count+=parseInt(e.products[o].quantity);var n=angular.element("a.icon-bag-link span");n.text(e.items.count)}e.inRequest=!1}).error(function(){e.inRequest=!1})},e.addTransportCard=function(o){o.token=e.user.token,t.post("/store/product/addCustomCard",o).success(function(t){if("no"==t.error){angular.isUndefined(e.transportId)||(e.products[e.transportId].addText=e.settings.added),e.items.count+=1;var o=angular.element("a.icon-bag-link span");o.text(e.items.count)}}),e.hideConstructorTroika()},e.addSimpleCard=function(o){t.post("/store/product/addCustomCard",o).success(function(t){if("no"==t.error){angular.isUndefined(e.simpleId)||(e.products[e.simpleId].addText=e.settings.added),e.items.count+=1;var o=angular.element("a.icon-bag-link span");o.text(e.items.count)}}),e.hideConstructorSimple()},e.showConstructorTroika=function(t,o){e.transport_card.id=t.id,e.transportId=o,$("#constructor-troika").addClass("show"),$("body").css("overflow","hidden")},e.hideConstructorTroika=function(){$("#constructor-troika").removeClass("show"),$("body").css("overflow","")},e.showConstructorSimple=function(t,o){e.simple_card.id=t.id,e.simpleId=o,$("#constructor-simple").addClass("show"),$("body").css("overflow","hidden")},e.hideConstructorSimple=function(){$("#constructor-simple").removeClass("show"),$("body").css("overflow","")},e.initTransportType=function(t,o,n){e.transport_types[e.transport_types.length]={id:t,name:o,img:n}},e.showCardPattern=function(){angular.element("#card-menu").hide(),angular.element("#card-pattern").show()},e.hideCardPattern=function(){angular.element("#card-menu").show(),angular.element("#card-pattern").hide(),e.clearFormImg("#form-photo"),e.clearFormImg("#form-logo"),delete e.transport_card.name,delete e.transport_card.position,delete e.transport_card.photo,delete e.transport_card.logo},e.clearFormImg=function(e){var t=angular.element(e),o=t.find("label.face-holder"),n=t.find(".ng-image-crop"),r=t.find(".upload-photo");o.removeClass("hide"),n.addClass("hide"),r.length&&r.removeClass("noborder")},e.setType=function(t){e.transport_card.back=t.id,t.img&&$("#card-back").css("background-image","url(/uploads/transport/"+t.img+")")},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.setSize=function(t,o){e.products[t].selectedSize=o,e.products[t].addText=e.settings.addToCart},e.setColor=function(t,n){if(e.products[t].selectedColor=n,e.products[t].addText=e.settings.addToCart,"undefined"!=typeof e.products[t].photo&&e.products[t].photo.length>0)for(var r="_"+n,s=0;s<e.products[t].photo.length;s++){var i=e.products[t].photo[s].substring(0,e.products[t].photo[s].lastIndexOf("."));if(i.substr(i.length-r.length)==r){e.products[t].listposition={left:o*s*-1+"px"};break}}},e.setSurface=function(t,o){e.products[t].selectedSurface=o,e.products[t].addText=e.settings.addToCart},e.resetAddedText=function(t){e.products[t].addText=e.settings.addToCart,e.products[t].quantity<0&&(e.products[t].quantity=0)},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"}}]),angular.module("mobispot").controller("CartController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,r){e.promoError=!1,e.customerError=!1,e.CartInit=function(){e.summ=0;var o={token:e.user.token};t.post("/store/product/GetCart",o).success(function(t){e.products=t.products,e.discount=t.discount,e.products.length<=0&&(window.location="/store");for(var o=0;o<e.products.length;o++)if(e.products[o].jsID=o,e.products[o].quantity=parseInt(e.products[o].quantity),e.summ+=parseFloat(e.products[o].selectedSize.price)*e.products[o].quantity,e.products[o].listposition={left:"0px"},"undefined"!=typeof e.products[o].selectedColor&&"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var n="_"+e.products[o].selectedColor,r=0;r<e.products[o].photo.length;r++){var i=e.products[o].photo[r].substring(0,e.products[o].photo[r].lastIndexOf("."));if(i.substr(i.length-n.length)==n){e.products[o].listposition={left:s*r*-1+"px"};break}}if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var o=0;o<e.products.length;o++)for(var r=0;r<e.discount.products.length;r++)if(e.products[o].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[o].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.checkingOut=!1,e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var s=242;e.scrollTo=function(t,o,n){e.products[n].listposition={left:s*o*-1+"px"}},e.emptyClass=function(){return e.products?e.products.length>0?"hide":"":void 0},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.chekingOutClass=function(){return e.checkingOut?"":"hide"},e.setSize=function(t,o){e.summ-=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity,e.products[t].selectedSize=o,e.summ+=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity},e.setColor=function(o,n){var r={id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor};if("undefined"!=typeof e.products[o].selectedSize&&(r.selectedSize=e.products[o].selectedSize),"undefined"!=typeof e.products[o].selectedSurface&&(r.selectedSurface=e.products[o].selectedSurface),e.products[o].selectedColor=n,"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var i="_"+n,a=0;a<e.products[o].photo.length;a++){var c=e.products[o].photo[a].substring(0,e.products[o].photo[a].lastIndexOf("."));if(c.substr(c.length-i.length)==i){e.products[o].listposition={left:s*a*-1+"px"};break}}var u={token:e.user.token,oldProduct:r,newProduct:e.products[o]};t.post("/store/product/SaveProduct",u).success(function(e){"no"!=e.error})},e.setSurface=function(t,o){e.products[t].selectedSurface=o},e.setDelivery=function(t){e.selectedDelivery=e.deliveries[t]},e.setPayment=function(t){e.selectedPayment=e.payments[t]},e.changeQuantity=function(o){if(parseInt(e.products[o].quantity)<=0)e.deleteItem(o);else{e.summ=0;for(var n=0;n<e.products.length;n++)e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if("undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var r=0;r<e.discount.products.length;r++)if(e.products[n].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}var s={token:e.user.token,oldProduct:e.products[o],newProduct:e.products[o]};t.post("/store/product/SaveProduct",s).success(function(e){"no"!=e.error})}},e.checkOut=function(){if(0===e.summ)return!1;if(!e.checkingOut){var o={token:e.user.token};t.post("/store/product/getCustomer",o).success(function(t){e.deliveries=t.delivery,e.payments=t.payment,e.customer=t.customer;for(var o=0;o<e.deliveries.length;o++)e.deliveries[o].jsID=o;for(var o=0;o<e.payments.length;o++)e.payments[o].jsID=o;e.selectedDelivery=e.deliveries[0],e.selectedPayment=e.payments[0]}),e.checkingOut=!0}angular.element("#proceedNextForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedNextForm").offset().top},600)},e.deleteItem=function(o){if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/deleteFromCart",n).success(function(t){if("no"==t.error){e.products.splice(o,1),e.summ=0;for(var n=0;n<e.products.length;n++)e.products[n].jsID=n,e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var r=0;r<e.discount.products.length;r++)if(e.products[n].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.products.length<=0&&(window.location="/store")}}),e.inRequest=!1}},e.confirmPromo=function(){if(!e.inRequest){e.inRequest=!0;var o={token:e.user.token,promoCode:e.discount.promoCode};t.post("/store/product/ConfirmPromo",o).success(function(t){if("no"==t.error){e.promoError=!1;var o=e.discount.summ;if(e.discount=t.discount,"undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0?(o>0&&(e.summ+=parseFloat(o)),e.summ-=e.discount.summ):o>0&&(e.summ+=parseFloat(o))}}else e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0),e.result.message=t.error,r.desktopModal("message")}).error(function(){e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0)})}e.inRequest=!1},e.$watch("discount.promoCode",function(){e.promoError=!1}),e.saveCustomer=function(o){if(!o)return e.customerError=!0,e.result.message=e.customerHint,r.desktopModal("message"),!1;if(0===e.summ)return!1;if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,customer:e.customer};t.post("/store/product/saveCustomer",n).success(function(t){"no"==t.error?(angular.element("#proceedFinishForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedFinishForm").offset().top},600)):(e.customerError=!0,e.result.message=t.error,r.desktopModal("message"))}),e.inRequest=!1}},e.$watch("customer.first_name + customer.last_name + customer.email + customer.target_first_name + customer.target_last_name + customer.phone + customer.address + customer.city + customer.zip + customer.country",function(){e.customerError=!1}),e.buy=function(){if(0===e.summ)return!1;var n={token:e.user.token,customer:e.customer,products:e.products,delivery:e.selectedDelivery,payment:e.selectedPayment,discount:e.discount};t.post("/store/product/buy",n).success(function(t){"no"==t.error?"email"==t.payment?r.messageModal(t.message,e.host_type):(angular.element("#proceedFinishForm").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):r.messageModal(t.error,e.host_type)})},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"},e.valClass=function(e){return e?"":"error"}}]),angular.module("mobispot").controller("UserController",["$scope","$http","$compile","$cookies","contentService",function(e,t,o,n,r){e.error={},e.result={},e.modal="none",e.host_type="mobile",e.setEmpty=function(){e.user.password="",e.user.terms=0,e.error={},e.result={}},e.hideModal=function(){e.modal="none"},angular.element("#birthday").datepicker({yearRange:"1900:-0",dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.user.birthday=t})}}),e.$watch("modal",function(){e.setEmpty(e.modal),r.desktopModal(e.modal)}),e.setProfile=function(o){t.post("/user/editProfile",o).success(function(t){"no"==t.error&&(e.result.message=t.content,r.desktopModal("message"))})},e.getResolution=function(){var t=n.resolution;if(!t){for(var o=Math.max(screen.width,screen.height),r=[1920,1400,1280],s=0;s<r.length;s++)if(o>=r[s]){t=r[s];break}n.resolution=""+t,e.resolution=t}},e.login=function(o,n){return n?void t.post("/service/login",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content):"no"==t.error?angular.isUndefined(t.access_url)||!t.access_url.length?angular.element(location).attr("href","/spot/list/"):angular.element(location).attr("href",t.access_url):angular.element(location).attr("href","/")}):!1},e.$watch("user.email + user.password + user.code",function(){e.error.email=!1,e.error.code=!1,e.error.password=!1,e.error.content=""}),e.activation=function(o,n){return n?0===o.terms?!1:void t.post("/service/registration",o).success(function(t){"no"==t.error?(e.user.email="",e.user.password="",e.user.activ_code="",e.user.terms=0,"mobile"===e.host_type?r.mobileModal(t.content,"none"):(e.result.message=t.content,r.desktopModal("message"))):("email"===t.error?e.error.email=!0:e.error.code=!0,e.error.content=t.content,"mobile"===e.host_type&&r.mobileModal(t.content,"error"))}):!1},e.recovery=function(o,n){return n?void t.post("/service/recovery",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content,"mobile"===e.host_type&&r.mobileModal(t.content,"error")):"no"==t.error&&(e.user.email="",e.result.message=t.content,"mobile"===e.host_type?r.mobileModal(t.content,"none"):r.desktopModal("message"))}):!1},e.change=function(e,o){return o?void t.post(window.location.pathname,e).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")}):!1},e.messageModal=function(t){return angular.isUndefined(t)||!t.length?!1:(e.result.message=t,void("mobile"===e.host_type?r.mobileModal(t,"none"):r.desktopModal("message")))},e.loadFront=function(){var e=1920;screen.width<=1400&&(e=1400),screen.width<=1280&&(e=1280);var t=angular.element(".splash .first-screen");t.css("background-image","url(../themes/mobispot/img/info/front_"+e+".jpg)")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXMiOlsiYW5ndWxhci1jb29raWVzLm1pbi5qcyIsInNvcnRhYmxlLmpzIiwibWFzay5qcyIsImFwcC5qcyIsInNlcnZpY2UuanMiLCJkZW1va2l0LmpzIiwiaGVscC5qcyIsInBob25lLmpzIiwic2xpZGUuanMiLCJzcG90LmpzIiwic3RvcmUuanMiLCJ1c2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUtBLFNBQUEsRUFBQSxFQUFBLEdBQUEsWUFBQSxHQUFBLE9BQUEsYUFBQSxPQUFBLFFBQUEsWUFBQSxhQUFBLFdBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFdBQUEsT0FBQSxHQUFBLFVBQUEsV0FBQSxHQUFBLEdBQUEsRUFBQSxTQUFBLElBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLGNBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxXQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLFNBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsVUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLFFBQUEsZ0JBQ0EsV0FBQSxTQUFBLEdBQUEsT0FBQSxJQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUEsSUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLElBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLE9BQUEsT0FBQSxTQ0RBLFFBQUEsT0FBQSxrQkFDQSxNQUFBLHVCQUNBLFVBQUEsY0FBQSxtQkFDQSxTQUFBLEdBQ0EsT0FDQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsa0JBQUEsR0FDQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsSUFHQSxFQUdBLEdBQUEsTUFFQSxHQUNBLFFBQUEsS0FDQSxPQUFBLEtBQ0EsTUFBQSxLQUNBLEtBQUEsS0FDQSxPQUFBLEtBR0EsU0FBQSxPQUFBLEVBQUEsR0FFQSxJQUVBLEVBQUEsUUFBQSxXQUNBLEVBQUEsU0FBQSxJQUdBLEVBQUEsTUFBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsVUFBQSxNQUFBLEVBQUEsS0FBQSxVQUdBLEVBQUEsT0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsU0FBQSxPQUFBLEdBR0EsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxTQUFBLFVBQUEsRUFFQSxFQUFBLFlBQUEsT0FBQSxFQUFBLEtBQUEsUUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLFFBR0EsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUdBLEVBQUEsS0FBQSxTQUFBLE1BREEsSUFBQSxFQUFBLFlBQUEsT0FDQSxFQUFBLFlBQUEsT0FBQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFlBQUEsT0FBQSxFQUFBLEtBQUEsU0FBQSxNQUFBLEdBQUEsSUFJQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLEtBQUEsU0FBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsQ0FHQSxHQUFBLEdBQUEsQ0FDQSxHQUFBLEVBQUEsS0FBQSxTQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQUEsUUFHQSxFQUFBLEtBQUEsU0FBQSxPQUFBLFlBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxZQUFBLE9BQUEsRUFBQSxHQUFBLEtBR0EsRUFBQSxLQUFBLFNBQUEsUUFBQSxFQUFBLEtBQUEsU0FBQSxXQUNBLEVBQUEsV0FNQSxFQUFBLE9BQUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxRQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEtBRUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxJQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsT0FFQSxHQUVBLFFBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxNQUtBLEVBQUEsU0FBQSxRQ3RHQSxRQUFBLE9BQUEsY0FDQSxNQUFBLGdCQUNBLGlCQUNBLEVBQUEsS0FDQSxFQUFBLFdBQ0EsSUFBQSxlQUVBLGFBQUEsSUFFQSxVQUFBLFVBQUEsZUFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLFlBRUEsUUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLFNBQUEsSUFDQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLENBRUEsT0FBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEdBWUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxTQUFBLFVBQUEsSUFHQSxFQUFBLEdBQ0EsR0FHQSxJQUNBLEtBQ0EsR0FKQSxLQUpBLElBV0EsUUFBQSxHQUFBLEdBQ0EsUUFBQSxVQUFBLEtBSUEsRUFBQSxFQUdBLEdBQ0EsS0FJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLElBR0EsRUFBQSxFQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGFBQUEsT0FBQSxHQUNBLEdBQUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxRQUxBLEVBUUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxJQUdBLEVBQUEsRUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLEdBS0EsRUFBQSxXQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLGFBQUEsT0FBQSxHQUNBLEtBQUEsR0FBQSxFQUFBLFVBQ0EsRUFBQSxhQUFBLFlBQUEsRUFBQSxPQUFBLFVBRUEsRUFBQSxFQUFBLFFBYkEsRUF3REEsUUFBQSxLQWtCQSxNQWpCQSxJQUFBLEVBQ0EsSUFFQSxRQUFBLFVBQUEsR0FDQSxFQUFBLEtBQUEsY0FBQSxHQUVBLEVBQUEsV0FBQSxlQUdBLFFBQUEsVUFBQSxHQUNBLEVBQUEsS0FBQSxZQUFBLEdBRUEsRUFBQSxXQUFBLGFBR0EsRUFBQSxJQUFBLEVBQUEsYUFDQSxFQUFBLFdBQUEsRUFBQSxhQUNBLEVBR0EsUUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsWUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsRUFDQSxHQUFBLFdBQ0EsRUFBQSxLQUFBLFlBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUVBLEVBQUEsS0FBQSxjQUFBLEdBQ0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxXQUFBLEVBS0EsUUFBQSxLQUNBLElBR0EsRUFBQSxLQUFBLE9BQUEsR0FDQSxFQUFBLEtBQUEsb0JBQUEsR0FDQSxFQUFBLEtBQUEsMEJBQUEsR0FDQSxHQUFBLEdBR0EsUUFBQSxLQUNBLElBR0EsRUFBQSxPQUFBLE9BQUEsR0FDQSxFQUFBLE9BQUEsWUFBQSxHQUNBLEVBQUEsT0FBQSxVQUFBLEdBQ0EsRUFBQSxPQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsUUFBQSxHQUNBLEVBQUEsT0FBQSxRQUFBLEdBQ0EsRUFBQSxPQUFBLFFBQUEsR0FDQSxHQUFBLEdBR0EsUUFBQSxHQUFBLEdBRUEsTUFBQSxHQUFBLE9BQUEsRUFBQSxRQUFBLEdBQUEsRUFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsT0FZQSxPQVZBLEdBQUEsRUFBQSxXQUNBLFFBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsUUFBQSxFQUFBLE1BRUEsUUFBQSxRQUFBLEVBQUEsTUFBQSxJQUFBLFNBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEtBQUEsS0FDQSxHQUFBLEVBQ0EsRUFBQSxXQUdBLEVBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE9BWUEsT0FWQSxTQUFBLFFBQUEsRUFBQSxNQUFBLElBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLElBQUEsRUFBQSxJQUNBLEdBQUEsRUFBQSxPQUFBLElBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsU0FHQSxHQUFBLElBR0EsRUFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxXQUVBLE9BQUEsbUJBQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUVBLElBWUEsUUFBQSxLQUNBLE1BQUEsR0FBQSxRQUFBLFFBQUEsS0FBQSxRQUFBLDhCQUFBLFdBQUEsTUFBQSxLQUdBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxDQU1BLElBSkEsS0FDQSxLQUNBLEVBQUEsR0FFQSxnQkFBQSxHQUFBLENBQ0EsRUFBQSxDQUVBLElBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEdBRUEsU0FBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxnQkFBQSxJQUVBLEVBQUEsS0FBQSxHQUVBLEdBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLGdCQUFBLElBRUEsSUFDQSxHQUNBLEtBR0EsTUFBQSxFQUNBLEdBQUEsR0FHQSxHQUFBLEVBQ0EsT0FLQSxFQUFBLEtBQUEsRUFBQSxRQUFBLE1BQUEsR0FFQSxFQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLEVBR0EsUUFBQSxLQUNBLEVBQUEsY0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEdBQUEsSUFBQSxFQUFBLFNBQ0EsRUFBQSxHQUNBLEVBQUEsSUFBQSxJQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsY0FBQSxRQU1BLFFBQUEsR0FBQSxHQUNBLGNBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxXQUFBLEdBRUEsRUFBQSxPQUFBLFdBQUEsR0FNQSxRQUFBLEtBRUEsRUFBQSxFQUFBLE1BQ0EsRUFBQSxPQUFBLFdBQUEsR0FHQSxRQUFBLEdBQUEsR0FFQSxFQUFBLEtBRUEsSUFBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsSUFHQSxJQUFBLEtBQUEsR0FBQSxLQUFBLEVBQUEsQ0FFQSxHQUVBLEdBRkEsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUVBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFDQSxHQUFBLEVBRUEsRUFBQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxRQUVBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxFQUFBLEVBR0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUVBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEdBQUEsSUFBQSxJQUFBLEdBQUEsRUFBQSxTQUVBLEVBQUEsS0FBQSxFQUVBLEVBQUEsSUFBQSxHQUFBLFVBQUEsR0FBQSxHQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsR0FBQSxVQUFBLEdBQUEsR0FBQSxJQUFBLElBQUEsRUFNQSxHQUFBLEdBQUEsR0FBQSxVQUFBLElBQUEsRUFBQSxDQUtBLElBSEEsRUFBQSxFQUFBLE9BR0EsS0FBQSxHQUFBLFVBQUEsR0FBQSxVQUFBLEdBQUEsQ0FRQSxHQUFBLFVBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxFQUFBLENBQ0EsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQ0EsR0FFQSxNQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxRQUFBLElBQ0EsR0FFQSxJQUFBLEdBQUEsRUFBQSxRQUFBLEVBRUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEdBQ0EsR0FBQSxFQWlDQSxJQTdCQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsSUFBQSxHQUNBLEdBRUEsRUFBQSxPQUFBLFdBQ0EsRUFBQSxjQUFBLEtBU0EsR0FBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLEdBR0EsR0FDQSxJQUlBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsR0FBQSxHQUdBLEdBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxLQUNBLElBRUEsRUFBQSxFQUNBLEVBQUEsS0FBQSxLQUdBLFFBQUEsR0FBQSxHQUFBLE1BQUEsR0FBQSxRQUFBLEdBQUEsR0FFQSxRQUFBLEdBQUEsR0FDQSxJQUFBLEVBQUEsTUFBQSxFQUNBLElBQUEsU0FBQSxFQUFBLGVBQ0EsTUFBQSxHQUFBLGNBQ0EsSUFBQSxTQUFBLFVBQUEsQ0FFQSxFQUFBLE9BQ0EsSUFBQSxHQUFBLFNBQUEsVUFBQSxhQUVBLE9BREEsR0FBQSxVQUFBLFlBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxPQUFBLEdBQ0EsRUFBQSxLQUFBLE9BRUEsTUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLE1BQUEsRUFDQSxJQUFBLElBQUEsRUFBQSxhQUFBLElBQUEsRUFBQSxhQUdBLEdBQUEsRUFBQSxrQkFDQSxFQUFBLFFBQ0EsRUFBQSxrQkFBQSxFQUFBLE9BRUEsSUFBQSxFQUFBLGdCQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsaUJBQ0EsR0FBQSxVQUFBLEdBQ0EsRUFBQSxRQUFBLFlBQUEsR0FDQSxFQUFBLFVBQUEsWUFBQSxHQUNBLEVBQUEsVUFJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLEdBQ0EsU0FBQSxFQUFBLGVBQ0EsRUFBQSxhQUFBLEVBQUEsZUFFQSxTQUFBLFVBQ0EsU0FBQSxVQUFBLGNBQUEsS0FBQSxPQUVBLEVBUEEsRUEzYkEsR0FDQSxHQUFBLEVBQUEsRUFBQSxFQUVBLEVBQ0EsRUFBQSxFQUFBLEVBS0EsRUFBQSxFQUFBLEVBQUEsRUFUQSxHQUFBLEVBQUEsR0FBQSxFQU1BLEVBQUEsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQTBEQSxJQUVBLEdBQUEsV0FDQSxFQUFBLEVBQUEsTUFBQSxJQUFBLEVBQUEsVUFBQSxLQUNBLFFBQUEsU0FBQSxFQUFBLE1BRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQUEsS0FBQSxHQUNBLE9BQUEsVUFBQSxlQUFBLEtBQUEsRUFBQSxLQUNBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxRQUFBLEtBQUEsRUFBQSxJQUVBLFFBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUlBLE9BQUEsSUFDQSxFQUFBLEVBQUEsTUFHQSxFQUFBLEVBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsY0FBQSxFQUNBLElBQUEsSUFBQSxDQUNBLEdBQUEsU0FBQSxpQkFBQSxTQUFBLEdBQ0EsU0FBQSxJQUNBLEdBQUEsS0FHQSxFQUFBLE9BQUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsUUFDQSxHQUFBLE9BQUEsRUFBQSxFQUFBLGVBR0EsRUFBQSxZQUFBLEtBQUEsR0FDQSxFQUFBLFNBQUEsS0FBQSxHQTJMQSxFQUFBLEtBQUEsb0JBQUEsR0FvS0EsTUFBQSxVQUFBLFVBQ0EsTUFBQSxVQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsT0FBQSxLQUNBLEtBQUEsSUFBQSxVQUVBLElBQUEsR0FBQSxPQUFBLE1BQ0EsRUFBQSxFQUFBLFNBQUEsQ0FDQSxJQUFBLElBQUEsRUFDQSxNQUFBLEVBRUEsSUFBQSxHQUFBLENBU0EsSUFSQSxVQUFBLE9BQUEsSUFDQSxFQUFBLE9BQUEsVUFBQSxJQUNBLElBQUEsRUFDQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLE1BQ0EsR0FBQSxFQUFBLEdBQUEsSUFBQSxLQUFBLE1BQUEsS0FBQSxJQUFBLE1BR0EsR0FBQSxFQUNBLE1BQUEsRUFHQSxLQURBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxJQUNBLEdBQUEsSUFBQSxJQUFBLEVBQUEsS0FBQSxFQUNBLE1BQUEsRUFHQSxPQUFBLFdDeGZBLFFBQUEsT0FBQSxZQUFBLFlBQUEsY0FBQSxZQUVBLFFBQUEsT0FBQSxZQUFBLE9BQUEsTUFBQSxXQUNBLE1BQUEsVUFBQSxHQUNBLElBQUEsRUFBQSxNQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsV0FBQSxPQUFBLFFBQUEsTUFBQSxJQUVBLEVBQUEsRUFBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsRUFJQSxPQUZBLEdBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLE1BQUEsSUFFQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsR0FBQSxVQ2JBLFFBQUEsT0FBQSxZQUFBLFFBQUEsaUJBQUEsV0FHQSxLQUFBLGFBQUEsU0FBQSxFQUFBLEdBTUEsR0FMQSxRQUFBLFlBQUEsS0FBQSxFQUFBLEtBRUEsUUFBQSxRQUFBLGNBQUEsVUFDQSxRQUFBLFFBQUEsU0FBQSxZQUFBLFFBRUEsUUFBQSxFQUVBLE1BREEsR0FBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxJQUNBLENBRUEsSUFBQSxHQUFBLFFBQUEsUUFBQSxJQUFBLEVBRUEsR0FBQSxlQUFBLFNBQUEsV0FBQSxFQUFBLHNCQUFBLEtBQUEsT0FBQSxFQUNBLEVBQUEsc0JBQUEsWUFBQSxVQUFBLFFBQUEsRUFBQSxXQUNBLEVBQUEsT0FBQSxHQUFBLFNBQUEsWUFHQSxFQUFBLE9BQUEsR0FBQSxTQUFBLFdBSUEsS0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsYUFDQSxFQUFBLEVBQUEsS0FBQSxJQUVBLEdBQUEsWUFBQSxjQUNBLFNBQUEsR0FDQSxFQUFBLFNBQUEsY0FFQSxFQUFBLE9BQ0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxHQUNBLFdBQUEsV0FDQSxFQUFBLFFBQ0EsTUFHQSxLQUFBLGFBQUEsU0FBQSxFQUFBLEdBRUEsR0FEQSxNQUFBLElBQ0EsV0FBQSxFQUNBLEtBQUEsWUFBQSxFQUFBLFlBQ0EsQ0FDQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsT0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLFdBQ0EsR0FBQSxZQUFBLFlBQ0EsRUFBQSxZQUFBLFFBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxhQUVBLEdBQUEsZUFBQSxTQUFBLFVBQ0EsRUFBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxNQUFBLFdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxPQUFBLE9BQUEsU0FBQSxhQUdBLEVBQUEsS0FBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLFNBQUEsYUFNQSxLQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxZQUFBLEtBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxHQUdBLElBQUEsS0FFQSxNQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsR0FHQSxLQUFBLFFBQUEsV0FDQSxNQUFBLE1BS0EsUUFBQSxPQUFBLFlBQUEsUUFBQSxnQkFBQSxXQUVBLEdBQUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0EyQkEsUUFBQSxLQUNBLEVBQUEsT0FDQSxJQUdBLFFBQUEsS0FDQSxFQUFBLE1BQ0EsSUFHQSxRQUFBLEtBQ0EsRUFBQSxPQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsUUFBQSxHQUNBLEVBQUEsVUFBQSxPQUFBLFFBQUEsR0FFQSxFQUFBLFlBQUEsVUFBQSxRQUFBLE9BekNBLE1BQUEsSUFFQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsT0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGFBQ0EsRUFBQSxRQUFBLFFBQUEsZUFDQSxFQUFBLFFBQUEsUUFBQSx5QkFDQSxFQUFBLFFBQUEsUUFBQSx1QkFFQSxHQUFBLGVBQUEsU0FBQSxXQUNBLEVBQUEsc0JBQUEsWUFBQSxVQUFBLFFBQUEsR0FFQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFlBQUEsU0FDQSxFQUFBLFlBQUEsWUFDQSxtQkFBQSxJQUNBLEVBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLFNBQUEsVUFFQSxFQUFBLEtBQUEsUUFBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsRUFBQSxVQUFBLEtBQUEsUUFBQSxHQXNCQSxRQUNBLFlBQUEsS0N4SUEsUUFBQSxPQUFBLFlBQUEsV0FBQSxxQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FFQSxFQUFBLE9BQUEsbUlBQUEsV0FDQSxFQUFBLE1BQUEsT0FBQSxJQUdBLEVBQUEsT0FDQSxLQUFBLEdBQ0EsTUFBQSxHQUNBLE1BQUEsR0FDQSxRQUFBLEdBQ0EsS0FBQSxHQUNBLElBQUEsR0FDQSxRQUFBLEdBQ0EsU0FBQSxFQUNBLFFBQUEsR0FHQSxFQUFBLFlBQ0EsRUFBQSxlQUFBLEVBQ0EsRUFBQSxVQUNBLEVBQUEsYUFDQSxFQUFBLFlBRUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxRQUFBLEVBRUEsRUFBQSxnQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLGVBQUEsR0FDQSxFQUFBLE9BQUEsR0FBQSxHQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLFNBQUEsS0FDQSxFQUFBLGlCQUdBLEVBQUEsY0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLFNBQUEsS0FDQSxFQUFBLGlCQUdBLEVBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFDQSxtQkFBQSxJQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFDQSxFQUFBLGlCQUdBLEVBQUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FHQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFFBQUEsRUFDQSxtQkFBQSxJQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FHQSxFQUFBLGNBQUEsV0FDQSxFQUFBLEtBQUEsSUFFQSxFQUFBLE1BQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxVQUFBLG1CQUFBLEdBQUEsVUFBQSxFQUFBLE1BQUEsWUFDQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsTUFBQSxZQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQUEsWUFLQSxFQUFBLE9BQ0EsT0FBQSxTQUFBLEtBQUEsS0FFQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsS0FBQSxzQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxNQUNBLFNBQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFBQSxnQkFFQSxRQUFBLFFBQUEsbUJBQUEsTUFBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLFFBQUEsUUFBQSxnQkFBQSxXQUdBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLE1BQUEsT0FBQSxRQXRCQSxFQUFBLE1BQUEsT0FBQSxHQUNBLE9DakZBLFFBQUEsT0FBQSxZQUFBLFdBQUEsa0JBQ0EsU0FBQSxRQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUVBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQ0EsRUFBQSxNQUFBLEVBQUEsZUFDQSxHQUFBLEtBQUEsd0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxXQUFBLEdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxHQUVBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLFVBQUEsZ0JBVkEsTUNQQSxRQUFBLE9BQUEsWUFBQSxXQUFBLG9CQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsV0FBQSxTQUFBLEdBRUEsRUFBQSxXQUFBLEdBR0EsRUFBQSxZQUFBLFNBQUEsR0FFQSxFQUFBLFlBQUEsR0FHQSxFQUFBLGNBRUEsRUFBQSxrQkNkQSxRQUFBLE9BQUEsWUFBQSxXQUFBLG1CQUNBLFNBQUEsV0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLFlBQUEsSUFFQSxFQUFBLFdBQUEsRUFFQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxVQUFBLEVBQUEsRUFBQSxJQUFBLEdBR0EsRUFBQSxTQUNBLEVBQUEsTUFBQSxLQUFBLFFBQ0EsRUFBQSxNQUFBLGNBQUEsS0FBQSxPQUNBLEVBQUEsTUFBQSxTQUNBLEdBQUEsRUFBQSxJQUFBLG1CQUdBLEVBQUEsTUFBQSxZQUFBLEdBQ0EsRUFBQSxNQUFBLG1CQUFBLEVBQUEsTUFBQSxXQUFBLEdBRUEsRUFBQSxNQUFBLFNBQ0EsRUFBQSxNQUFBLGNBQUEsR0FFQSxFQUFBLE1BQUEsUUFDQSxFQUFBLE1BQUEsYUFBQSxHQUVBLEVBQUEsTUFBQSxRQUFBLEVBQUEsTUFBQSxtQkFDQSxFQUFBLE1BQUEsYUFBQSxZQUNBLEVBQUEsTUFBQSxnQkFBQSxFQUNBLEVBQUEsTUFBQSxnQkFBQSxFQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGNBQUEsS0FBQSxFQUFBLFlBQUEsRUFBQSxHQUFBLE9BR0EsUUFBQSxRQUFBLFFBQUEsS0FBQSxPQUFBLFdBRUEsRUFBQSxlQUdBLEVBQUEsV0FBQSxXQUVBLEVBQUEsTUFBQSxTQUNBLEdBQUEsRUFBQSxJQUFBLG9CQUNBLEdBQUEsRUFBQSxJQUFBLG1CQUNBLEdBQUEsRUFBQSxJQUFBLG9CQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLG9CQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLGlCQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLG9CQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLGlCQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLGdCQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLHFCQUdBLEVBQUEsTUFBQSxZQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLElBQ0EsRUFBQSxNQUFBLG1CQUFBLEVBQUEsTUFBQSxXQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsTUFBQSxXQUFBLE9BQUEsSUFFQSxFQUFBLE1BQUEsT0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFDQSxFQUFBLE1BQUEsY0FBQSxHQUVBLEVBQUEsTUFBQSxNQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUNBLEVBQUEsTUFBQSxhQUFBLEdBRUEsRUFBQSxNQUFBLFFBQUEsR0FLQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLENBRUEsU0FBQSxRQUFBLFdBQUEsRUFBQSxLQUFBLGFBQUEsTUFDQSxJQUFBLEdBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxDQUNBLE9BQUEsU0FBQSxRQUFBLEdBQUEsUUFHQSxFQUFBLFFBQUEsRUFDQSxRQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsaUJBQUEsRUFBQSxLQUFBLFFBQUEsR0FDQSxRQUFBLFFBQUEsR0FBQSxPQUFBLEVBQUEsYUFFQSxJQU5BLEdBU0EsRUFBQSxpQkFBQSxXQUNBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLHNCQUNBLEVBQUEsTUFBQSxhQUFBLGNBR0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsaUJBQ0EsRUFBQSxNQUFBLGFBQUEsU0FHQSxFQUFBLFdBQUEsV0FDQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxnQkFDQSxFQUFBLE1BQUEsYUFBQSxRQUdBLEVBQUEsWUFBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLGdCQUNBLEdBRUEsRUFBQSxNQUFBLGdCQUFBLEVBRUEsRUFBQSxNQUFBLGdCQUNBLEdBRUEsRUFBQSxNQUFBLGdCQUFBLE1BQ0EsR0FBQSxXQUNBLEVBQUEsaUJBQ0EsUUFHQSxFQUFBLFdBQUEsV0FDQSxFQUFBLE1BQUEsZ0JBQUEsR0FHQSxFQUFBLGNBQUEsV0FDQSxJQUFBLEVBQUEsTUFBQSxlQUVBLE1BREEsR0FBQSxNQUFBLGdCQUFBLEdBQ0EsQ0FHQSxJQUFBLGFBQUEsRUFBQSxNQUFBLGFBQUEsQ0FHQSxJQUFBLEdBRkEsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxXQUFBLE9BQUEsSUFDQSxFQUFBLE1BQUEsV0FBQSxJQUFBLEVBQUEsTUFBQSxxQkFDQSxFQUFBLEVBRUEsSUFBQSxFQUFBLEVBQ0EsT0FBQSxDQUlBLEdBQUEsTUFBQSxtQkFEQSxFQUFBLE1BQUEsV0FBQSxPQUFBLEdBQUEsRUFDQSxFQUFBLE1BQUEsV0FBQSxHQUVBLEVBQUEsTUFBQSxXQUFBLEVBQUEsR0FFQSxFQUFBLHVCQUVBLElBQUEsUUFBQSxFQUFBLE1BQUEsYUFBQSxDQUdBLElBQUEsR0FGQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLE1BQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxNQUFBLGdCQUNBLEVBQUEsRUFFQSxJQUFBLEVBQUEsRUFDQSxPQUFBLENBSUEsR0FBQSxNQUFBLGNBREEsRUFBQSxNQUFBLE1BQUEsT0FBQSxHQUFBLEVBQ0EsRUFBQSxNQUFBLE1BQUEsR0FFQSxFQUFBLE1BQUEsTUFBQSxFQUFBLEdBRUEsRUFBQSxrQkFFQSxDQUFBLEdBQUEsT0FBQSxFQUFBLE1BQUEsYUFtQkEsT0FBQSxDQWhCQSxLQUFBLEdBRkEsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsSUFDQSxFQUFBLE1BQUEsS0FBQSxJQUFBLEVBQUEsTUFBQSxlQUNBLEVBQUEsRUFFQSxJQUFBLEVBQUEsRUFDQSxPQUFBLENBSUEsR0FBQSxNQUFBLGFBREEsRUFBQSxNQUFBLEtBQUEsT0FBQSxHQUFBLEVBQ0EsRUFBQSxNQUFBLEtBQUEsR0FFQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxhQUtBLEVBQUEsTUFBQSxnQkFBQSxFQUNBLEVBQUEsV0FDQSxFQUFBLGlCQUNBLE9BSUEsRUFBQSxZQUFBLFNBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLE9BQUEsT0FBQSxRQzdNQSxRQUFBLE9BQUEsWUFBQSxXQUFBLGtCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0E4aUJBLFFBQUEsR0FBQSxHQUNBLEVBQUEsa0JBQ0EsRUFBQSxpQkFDQSxZQUFBLEVBQUEsS0FDQSxRQUFBLFFBQUEsWUFBQSxTQUFBLFNBRUEsUUFBQSxRQUFBLFlBQUEsWUFBQSxTQUtBLFFBQUEsR0FBQSxHQUNBLEVBQUEsRUFHQSxLQUFBLEdBQUEsR0FGQSxFQUFBLEVBQUEsT0FBQSxPQUFBLEVBQUEsYUFBQSxNQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxJQUNBLEVBQUEsV0FBQSxHQXlCQSxRQUFBLEdBQUEsR0FDQSxFQUFBLE9BQUEsV0FFQSxFQUFBLFNBREEsRUFBQSxpQkFDQSxLQUFBLE1BQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUVBLHNCQXhsQkEsRUFBQSxRQUFBLFNBQ0EsRUFBQSxZQUFBLElBQ0EsRUFBQSxhQUFBLElBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxRQUNBLEVBQUEsUUFBQSxFQUVBLEVBQUEsU0FDQSxFQUFBLFVBRUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxTQUFBLEVBRUEsRUFBQSxXQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxZQUFBLEVBRUEsRUFBQSxVQUNBLEVBQUEsT0FBQSxTQUVBLEVBQUEsV0FBQSxHQUVBLEVBQUEsV0FDQSxFQUFBLFFBQUEsS0FBQSxHQUNBLEVBQUEsUUFBQSxPQUFBLEdBQ0EsRUFBQSxRQUFBLGFBQUEsRUFDQSxFQUFBLFFBQUEsT0FBQSxFQUNBLEVBQUEsUUFBQSxVQUFBLEVBRUEsRUFBQSxRQUVBLEVBQUEsbUJBQ0EsRUFBQSxlQUNBLEVBQUEsb0JBQ0EsRUFBQSxpQkFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLGtCQUNBLEVBQUEsZUFBQSxLQUFBLEdBQ0EsRUFBQSxlQUFBLFlBQUEsRUFDQSxFQUFBLG9CQUFBLEVBS0EsRUFBQSxPQUFBLHlCQUFBLFdBQ0EsRUFBQSxNQUFBLE1BQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxJQUlBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEtBS0EsRUFBQSxLQUFBLFVBR0EsR0FBQSxLQUFBLFlBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsU0FBQSxFQUFBLFNBQ0EsUUFBQSxRQUFBLGNBQUEsUUFBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLFFBQUEsUUFBQSxZQUFBLGNBQ0EsR0FBQSxLQUFBLFdBQ0EsR0FBQSxLQUFBLE9BQ0EsRUFBQSxhQUFBLEdBQUEsRUFBQSxlQUNBLE9BQUEsU0FBQSxLQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsZUFDQSxPQUFBLEVBQUEsUUFDQSxFQUFBLE1BQUEsTUFBQSxNQVpBLEdBTEEsRUFBQSxNQUFBLE1BQUEsR0FDQSxJQXNCQSxFQUFBLE9BQUEsZ0NBQUEsV0FDQSxFQUFBLFFBQUEsS0FBQSxHQUNBLFFBQUEsUUFBQSxRQUFBLE9BQUEsU0FBQSxFQUFBLGlCQUVBLFFBQUEsRUFBQSxRQUFBLE1BQ0EsRUFBQSxTQUFBLEVBQUEsTUFDQSxVQUFBLEVBQUEsUUFBQSxNQUNBLEVBQUEsV0FBQSxFQUFBLE1BQ0EsVUFBQSxFQUFBLFFBQUEsTUFDQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsU0FDQSxZQUFBLEVBQUEsUUFBQSxNQUNBLEVBQUEsY0FBQSxFQUFBLE1BQ0EsYUFBQSxFQUFBLFFBQUEsT0FDQSxFQUFBLGNBQUEsRUFBQSxRQUlBLEVBQUEsY0FBQSxXQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsY0FBQSxRQUNBLFNBQUEsUUFBQSxpQkFBQSxJQUFBLGFBQUEsRUFBQSxNQUdBLEVBQUEsU0FBQSxTQUFBLEdBQ0EsR0FBQSxJQUFBLEVBQUEsU0FBQSxPQUFBLENBRUEsSUFBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxhQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsUUFDQSxFQUFBLGtCQUFBLEVBQ0EsRUFBQSxpQkFFQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLEtBR0EsRUFBQSxXQURBLEVBQUEsWUFBQSxFQUFBLFdBQUEsRUFDQSxVQUFBLEVBQUEsV0FFQSxRQUNBLEVBQUEsV0FBQSxPQU1BLEVBQUEsV0FBQSxXQUNBLEVBQUEsU0FBQSxFQUFBLEtBQUEsVUFJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLEVBQ0EsRUFBQSxLQUFBLHVCQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsUUFBQSxRQUFBLGdCQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLEtBQUEsS0FBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxHQUNBLFFBQUEsUUFBQSxZQUFBLFlBQUEsT0FFQSxRQUFBLFFBQUEsbUJBQUEsU0FBQSxVQUVBLFFBQUEsUUFBQSxtQkFBQSxRQUFBLEVBQUEsV0FBQSxRQUFBLFFBQUEscUJBQUEsWUFBQSxZQUFBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLEVBQUEsS0FDQSxRQUFBLFFBQUEsbUJBQUEsWUFBQSxRQUdBLElBQUEsR0FBQSxRQUFBLFFBQUEsVUFBQSxFQUFBLEtBQUEsU0FBQSxHQUNBLFNBQUEsUUFBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLFFBR0EsRUFBQSxlQUlBLEVBQUEsVUFBQSxXQUNBLEVBQUEsS0FBQSxrQkFBQSxFQUFBLE1BQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFNBT0EsRUFBQSxpQkFDQSxPQUFBLFdBQ0EsRUFBQSxhQUVBLFlBQUEsZ0JBQ0EsT0FBQSxRQUNBLGtCQUFBLEVBQ0EsVUFBQSxVQUNBLFFBQUEsSUFJQSxFQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsRUFDQSxFQUFBLEtBQUEsMEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxhQUNBLEdBQUEsU0FDQSxFQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsU0FDQSxFQUFBLFFBQUEsRUFBQSxhQU1BLEVBQUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxZQW1CQSxFQUFBLG1CQW5CQSxDQUNBLEVBQUEsSUFBQSxDQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsY0FDQSxFQUFBLFFBQUEsUUFBQSxjQUFBLE9BRUEsSUFBQSxFQUFBLEtBQUEsZUFBQSxPQUFBLEVBQUEsQ0FFQSxHQUFBLEdBQUEsRUFBQSxLQUFBLGNBQ0EsR0FBQSxLQUFBLFlBQUEsRUFBQSxLQUFBLGFBQUEsV0FDQSxDQUVBLEdBQUEsR0FBQSxFQUFBLEtBQUEsb0JBQ0EsR0FBQSxLQUFBLFlBQUEsRUFBQSxPQUdBLEVBQUEsWUFBQSxRQUNBLEVBQUEsS0FBQSxZQUFBLE1BQUEsR0FDQSxFQUFBLE9BQUEsT0FBQSxFQUFBLEdBQUEsTUFPQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxjQUNBLEVBQUEsRUFBQSxNQUVBLEdBQUEsS0FBQSx3QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxTQUNBLEVBQUEsY0FFQSxHQUFBLEtBQUEsZUFLQSxFQUFBLGFBQUEsV0FDQSxJQUFBLEVBQUEsS0FBQSxVQUFBLEVBQUEsS0FBQSxZQUFBLE9BQUEsQ0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsRUFBQSxFQUFBLE1BRUEsR0FBQSxLQUFBLHdCQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFNBQ0EsRUFBQSxXQUdBLEVBQUEsU0FDQSxFQUFBLGNBRUEsR0FBQSxLQUFBLGVBS0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsU0FDQSxHQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLFFBQUEsUUFBQSxJQUFBLEVBQUEsU0FBQSxPQUFBLEtBQUEsRUFBQSxNQUNBLEVBQUEsYUFBQSxFQUFBLFFBQUEsRUFBQSxlQUpBLEdBVUEsRUFBQSxVQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsT0FBQSxHQUNBLE1BRUEsR0FBQSxLQUFBLGNBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQUEsTUFBQSxXQUlBLEVBQUEsS0FBQSxRQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsS0FBQSxXQUNBLGFBS0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsT0FBQSxHQUNBLE1BRUEsR0FBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsVUFBQSxLQUFBLE9BQUEsa0JBSUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxLQUFBLFFBQ0EsYUFLQSxFQUFBLGFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsYUFDQSxFQUFBLEVBQUEsS0FBQSxrQkFFQSxJQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsS0FBQSxXQUNBLEVBQUEsRUFBQSxLQUFBLGtCQUdBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxPQUFBLEdBQ0EsTUFFQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsT0FBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLElBQUEsRUFBQSxVQUFBLFlBQUEsaUJBSUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFDQSxhQUtBLEVBQUEsY0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxpQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLFNBTUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxjQUVBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsS0FFQSxRQUFBLFFBQUEsaUJBQUEsWUFDQSxVQUFBLFVBQ0EsUUFBQSxFQUNBLFdBQUEsV0FDQSxTQUFBLFNBQUEsR0FDQSxFQUFBLE9BQUEsV0FDQSxFQUFBLGVBQUEsS0FBQSxLQUdBLFFBQUEsV0FDQSxFQUFBLE9BQUEsV0FDQSxFQUFBLG9CQUFBLFFBS0EsRUFBQSxTQUFBLEVBQUEsU0FPQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxHQUFBLEtBQUEsZ0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxnQkFDQSxRQUFBLFFBQUEscUJBQUEsT0FBQSxTQUNBLFFBQUEsR0FDQSxTQU1BLEVBQUEsY0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLFNBTUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGlCQUVBLEdBQUEsU0FBQSxFQUFBLFNBQUEsTUFBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLE9BQUEsT0FBQSxFQUFBLE9BRUEsR0FBQSxRQUFBLGFBQUEsRUFDQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQUEsUUFBQSxFQUFBLE1BQ0EsRUFBQSxRQUFBLFVBQUEsRUFBQSxVQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsUUFBQSxhQUFBLEtBRUEsTUFBQSxXQUNBLEVBQUEsUUFBQSxhQUFBLEtBS0EsRUFBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxRQUFBLFVBQUEsRUFDQSxFQUFBLFlBQUEsRUFBQSxJQUlBLEVBQUEsWUFBQSxXQUNBLE1BQUEsVUFBQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsS0FBQSxpQkFBQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxZQUFBLEVBQUEsWUFDQSxFQUFBLE9BQUEsYUFBQSxFQUFBLG9CQUdBLEdBQUEsV0FDQSxFQUFBLGVBQ0EsT0FJQSxFQUFBLGVBQUEsV0FDQSxFQUFBLGVBQUEsU0FBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsV0FHQSxFQUFBLGVBQUEsV0FDQSxFQUFBLGVBQUEsWUFBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsS0FJQSxFQUFBLGNBQUEsV0FDQSxFQUFBLEtBQUEsc0JBQUEsRUFBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxPQUFBLEVBQUEsV0FNQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxVQUNBLFNBQUEsUUFBQSxpQkFBQSxVQURBLEdBS0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxXQUNBLE9BQUEsQ0FFQSxJQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBQ0EsR0FBQSxZQUFBLEVBQ0EsRUFBQSxLQUFBLHVCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsUUFBQSxRQUFBLGNBQUEsWUFBQSxhQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxTQUFBLFNBQUEsYUFDQSxFQUFBLE9BQUEsVUFBQSxFQUVBLEVBQUEsWUFBQSxFQUFBLGVBQUEsT0FFQSxFQUFBLFlBQUEsSUFDQSxNQUFBLFdBQUEsRUFBQSxZQUFBLEtBR0EsRUFBQSxhQUFBLFdBQ0EsRUFBQSxlQUFBLFlBQUEsUUFHQSxFQUFBLE9BQUEsVUFEQSxJQUFBLEVBQUEsT0FBQSxVQUNBLEVBRUEsR0FLQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFDQSxHQUFBLEtBQUEsbUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsYUFBQSxRQUNBLEdBQUEsT0FBQSxNQUFBLE1BTUEsSUFBQSxFQUNBLEdBQUEsV0FBQSxXQUNBLEVBQUEsV0FBQSxtQkFBQSxHQUFBLFdBQUEsRUFBQSxXQUFBLEdBQ0EsRUFBQSxFQUFBLFdBQ0EsSUFBQSxFQUFBLFdBQ0EsRUFBQSxVQUFBLEtBQUEsT0FBQSxPQUFBLFNBQUEsVUFDQSxFQUFBLGFBQ0EsRUFBQSxjQUNBLE1BT0EsRUFBQSxlQUFBLFdBQ0EsR0FBQSxHQUFBLFNBQUEsZUFBQSxXQUNBLEVBQUEsU0FBQSxlQUFBLFdBQ0EsSUFBQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxlQUNBLEdBQUEsU0FDQSxFQUFBLGlCQUFBLFdBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQUEsWUFBQSxHQUFBLEdBQ0EsRUFBQSxpQkFBQSxPQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUFBLFNBQUEsR0FBQSxNQTJCQSxFQUFBLGVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsWUFDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxTQUFBLEVBQ0EsSUFBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUNBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxLQUFBLEtBQUEsRUFBQSxLQUVBLFFBQUEsUUFBQSxhQUFBLElBQUEsR0FFQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsU0FBQSxRQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsUUFpQkEsRUFBQSxhQUFBLFdBQ0EsUUFBQSxRQUFBLGlCQUFBLE9BQUEsTUFBQSxLQUFBLFFBQUEsU0FHQSxFQUFBLFdBQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxHQUFBLGVBQ0EsR0FBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLFVBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BRUEsRUFBQSxPQUFBLFdBQUEsU0FBQSxHQUVBLEVBQUEsU0FEQSxFQUFBLGlCQUNBLEtBQUEsTUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BRUEscUJBSUEsRUFBQSxPQUFBLGlCQUFBLFdBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQUEsUUFBQSxFQUFBLGNBQUEsR0FDQSxFQUFBLGlCQUFBLE9BQUEsRUFBQSxnQkFBQSxHQUNBLEVBQUEsS0FBQSxPQUFBLGdCQUFBLEdBQ0EsRUFBQSxpQkFBQSxjQUFBLFNBQUEsbUJBQUEsRUFBQSxRQUNBLEVBQUEsaUJBQUEsYUFBQSxFQUFBLEtBQUEsVUFDQSxFQUFBLEtBQUEsS0FPQSxFQUFBLGVBQUEsU0FBQSxHQUVBLEdBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxNQUVBLEdBQUEsS0FBQSxzQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxTQUFBLEdBS0EsSUFIQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFNBQ0EsRUFBQSxhQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsY0FBQSxZQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsY0FBQSxZQUNBLEVBQUEsVUFBQSxFQUFBLEtBQUEsU0FDQSxDQUVBLEdBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxRQU9BLEVBQUEsU0FBQSxTQUFBLEdBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxpQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLDBCQUFBLEVBQUEsUUFBQSxLQUNBLEdBQUEsT0FDQSxFQUFBLFNBQUEsVUFFQSxFQUFBLFlBQUEsY0FNQSxFQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsMEJBQUEsRUFBQSxLQUNBLEdBQUEsU0FBQSxXQUlBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSwwQkFBQSxFQUFBLEtBQ0EsR0FBQSxZQUFBLFVBSUEsSUFBQSxHQUNBLEVBQ0EsRUFDQSxFQUNBLENBR0EsR0FBQSxZQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxHQUFBLEtBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUVBLElBQUEsbUJBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsT0FDQSxDQUNBLEVBQUEsS0FBQSxFQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxHQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsUUFBQSxFQUFBLGFBQUEsR0FBQSxTQUNBLENBQ0EsRUFBQSxFQUFBLGFBQUEsR0FBQSxLQUNBLEVBQUEsUUFBQSxFQUFBLGFBQUEsR0FBQSxJQUNBLFFBTUEsRUFBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxHQUFBLElBQUEsRUFBQSxZQUFBLE9BRUEsR0FBQSxFQUFBLFNBMENBLEdBQUEsTUFBQSxFQUFBLFlBQ0EsQ0FFQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsS0FBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxHQUNBLFFBQUEsUUFBQSxZQUFBLFlBQUEsT0FDQSxFQUFBLGNBRUEsRUFBQSxhQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLEtBRUEsRUFBQSxNQUFBLEVBQUEsT0FDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLEVBQUEsT0FDQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEdBQUEsYUFBQSxPQUlBLEdBQUEsYUFBQSxFQUFBLFlBQUEsRUFBQSxlQWpFQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsR0FBQSxHQUNBLE9BQ0EsTUFBQSxFQUFBLFlBQ0EsT0FBQSxFQUFBLGVBRUEsR0FFQSxFQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsOEJBQUEsRUFDQSxFQUFBLENBRUEsSUFBQSxFQUFBLFFBQUEsTUFBQSxFQUFBLElBQUEsSUFDQSxLQUFBLEVBQUEsUUFBQSxtQkFDQSxHQUFBLGdCQUFBLG1CQUFBLEdBRUEsSUFBQSxJQUFBLE9BQUEsT0FBQSxNQUFBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsR0FBQSxPQUFBLE9BQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxDQU1BLElBSkEsRUFBQSxjQUNBLEVBQUEsT0FBQSxLQUFBLEVBQUEsTUFBQSxrQkFBQSxTQUFBLEVBQUEsTUFBQSxNQUFBLFdBQUEsRUFBQSxNQUFBLE9BQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSw2RkFHQSxPQUFBLEdBQUEsbUJBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGFBQUEsRUFBQSxLQUFBLFNBQUEsd0JBRUEsb0JBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsU0FDQSxHQUFBLFNBQUEsbUJBQUEsRUFBQSxLQUFBLFVBRUEsT0FBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxTQUFBLEtBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxHQUNBLG1CQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxRQUFBLFNBQ0EsRUFBQSxRQUFBLEtBQUEsRUFBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxTQWlDQSxHQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUFBLEtBQ0EsUUFBQSxRQUFBLHFCQUFBLEtBQUEsRUFBQSxhQUNBLFFBQUEsUUFBQSxlQUFBLFNBQUEsUUFDQSxRQUFBLFFBQUEsa0JBQUEsWUFBQSxRQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsR0FDQSxXQUFBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsRUFDQSxXQUFBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsR0FBQSxXQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsWUFPQSxFQUFBLFVBQUEsV0FFQSxRQUFBLFFBQUEscUJBQUEsT0FDQSxRQUFBLFFBQUEscUJBQUEsS0FBQSxJQUNBLFFBQUEsUUFBQSxlQUFBLFNBQUEsVUFFQSxRQUFBLFFBQUEsa0JBQUEsU0FBQSxRQUNBLFFBQUEsUUFBQSxlQUFBLFlBQUEsVUFLQSxFQUFBLGNBQUEsU0FBQSxHQUVBLElBQUEsR0FEQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxHQUFBLEVBQUEsYUFBQSxHQUFBLE1BQUEsRUFDQSxDQUNBLEVBQUEsQ0FDQSxPQUdBLE1BQUEsSUFJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxJQUFBLEVBQ0EsRUFBQSxLQUFBLG1CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxHQUFBLE1BQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxPQUFBLEVBQ0EsR0FBQSxFQUFBLFNBZ0NBLEdBQUEsTUFBQSxFQUFBLFlBQ0EsQ0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFFBQ0EsSUFBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLE9BQ0EsR0FBQSxLQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsR0FDQSxFQUFBLGFBQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxFQUFBLFlBSUEsR0FBQSxhQUFBLEVBQUEsWUFBQSxFQUFBLGVBNUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEdBQ0EsT0FDQSxNQUFBLEVBQUEsWUFDQSxPQUFBLEVBQUEsZUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUFBLE9BQ0EsRUFBQSxDQUVBLElBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFFBQUEsbUJBQ0EsR0FBQSxnQkFBQSxtQkFBQSxHQUVBLElBQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxNQUFBLFFBQUEsQ0FFQSxHQUFBLE9BQUEsS0FBQSxFQUFBLE1BQUEsa0JBQUEsU0FBQSxFQUFBLE1BQUEsTUFBQSxXQUFBLEVBQUEsTUFBQSxPQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsNEZBRUEsT0FBQSxHQUFBLG1CQUFBLEdBQ0EsT0FBQSxTQUFBLEtBQUEsRUFBQSxhQUFBLEVBQUEsU0FBQSxRQUFBLEVBQUEsSUFBQSxlQUdBLEVBQUEsUUFFQSxFQUFBLFNBQUEsS0FBQSxFQUFBLE9BQUEsU0FBQSxFQUFBLFNBQUEsSUFBQSxFQUFBLElBQUEsU0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxXQUFBLFVBbUJBLE1BQUEsRUFBQSxhQUNBLEVBQUEsYUFBQSxFQUFBLFlBQUEsRUFBQSxjQU9BLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FFQSxHQUNBLEdBREEsR0FBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxTQUdBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUVBLEdBQUEsTUFBQSxFQUFBLE1BRUEsR0FBQSxFQUFBLFlBeUNBLG1CQUFBLEdBQUEsVUFFQSxFQUFBLGFBQUEsUUFBQSxZQUFBLEdBRUEsUUFBQSxZQUFBLEtBQ0EsRUFBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsU0FBQSxTQUFBLFVBRkEsRUFBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsT0FBQSxpQkFJQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGNBaERBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEdBQ0EsT0FDQSxNQUFBLEVBQUEsWUFDQSxPQUFBLEVBQUEsZUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUFBLFFBQ0EsRUFBQSxDQUVBLElBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFFBQUEsbUJBQ0EsR0FBQSxnQkFBQSxtQkFBQSxHQUFBLEtBQ0EsR0FBQSxJQUVBLElBQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxNQUFBLFFBQUEsQ0FNQSxJQUpBLEVBQUEsY0FDQSxFQUFBLE9BQUEsS0FBQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDZGQUdBLE9BQUEsR0FBQSxtQkFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsU0FBQSxjQUFBLENBRUEsUUFBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxnQkFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEtBQ0EsUUFBQSxZQUFBLEtBQ0EsRUFBQSxVQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxPQUFBLGtCQUNBLEVBQUEsRUFBQSxFQUFBLFdBQUE7S0FvQkEsRUFBQSxXQUFBLFdBRUEsSUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsZUFBQSxHQUFBLFlBQUEsRUFBQSxlQUFBLFlBQUEsU0FBQSxFQUFBLEtBQUEsU0FDQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGFBRUEsRUFBQSxRQUVBLEVBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxVQUFBLFVBRUEsRUFBQSxnQkFFQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLEVBQUEsZUFBQSxLQUlBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0FPQSxFQUFBLGFBQUEsV0FHQSxJQUFBLEdBREEsR0FBQSxRQUFBLFFBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxJQUFBLEtBQUEsTUFBQSxVQUFBLEVBQ0EsR0FBQSx1QkFBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLGFBQUEsTUFHQSxFQUFBLGdCQUFBLFdBRUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxNQUdBLEVBQUEsdUJBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxVQUNBLEVBQUEsUUFBQSxRQUFBLFdBQUEsRUFDQSxHQUFBLEtBQUEsK0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxtQkFBQSxHQUFBLFdBQUEsRUFBQSxZQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsYUFLQSxFQUFBLGNBQUEsU0FBQSxFQUFBLEdBRUEsR0FDQSxHQURBLEdBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsU0FFQSxHQUFBLEtBQUEsdUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFLQSxFQUhBLEVBQUEsWUFHQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsU0FBQSxTQUFBLFNBRkEsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLE9BQUEsaUJBSUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxhQU1BLEVBQUEsV0FBQSxXQUVBLElBQUEsRUFBQSxPQUFBLENBQ0EsR0FBQSxJQUFBLEtBQUEsRUFBQSxRQUFBLEtBQUEsU0FBQSxFQUFBLFFBQUEsU0FBQSxJQUFBLEVBQUEsUUFBQSxJQUNBLG9CQUFBLEdBQUEsUUFBQSxVQUFBLEdBQUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxTQUFBLEdBQ0EsbUJBQUEsR0FBQSxRQUFBLE1BQUEsRUFBQSxRQUFBLEtBQUEsU0FDQSxFQUFBLEtBQUEsRUFBQSxRQUFBLEtBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxzQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsbUJBQUEsR0FBQSxVQUFBLG1CQUFBLEdBQUEsWUFDQSxHQUFBLEVBQUEsU0FFQSxHQURBLEVBQUEsUUFDQSxNQUFBLEVBQUEsWUFBQSxDQUNBLEdBQUEsRUFBQSxTQUFBLENBQ0EsUUFBQSxRQUFBLGdCQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsR0FDQSxRQUFBLFFBQUEsWUFBQSxZQUFBLE9BRUEsRUFBQSxjQUVBLEVBQUEsTUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLElBQUEsR0FDQSxTQUFBLFFBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxTQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFBQSxRQUNBLEdBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLGFBQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxFQUFBLFFBR0EsRUFBQSxVQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxPQUNBLEdBQUEsS0FDQSxFQUFBLGFBQUEsR0FBQSxhQUFBLE9BRUEsR0FBQSxhQUFBLEVBQUEsWUFBQSxFQUFBLGVBRUEsR0FBQSxFQUFBLEVBQUEsV0FBQSxTQU9BLEVBQUEsYUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsS0FBQSxxQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsU0FDQSxFQUFBLFFBQUEsRUFBQSxhQUtBLEVBQUEsZUFBQSxXQUVBLEdBREEsRUFBQSxZQUFBLEVBQ0EsbUJBQUEsR0FBQSxhQUNBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxhQUFBLEVBQUEsWUFDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxtQkFBQSxHQUFBLGFBQUEsR0FBQSxjQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsT0FPQSxFQUFBLGFBQUEsU0FBQSxHQUVBLEdBQUEsRUFDQSxJQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsaUJBQUEsUUFFQSxFQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsaUJBQ0EsRUFBQSxJQUFBLFFBQUEsUUFDQSxFQUFBLElBQUEsU0FBQSxTQUFBLEVBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsT0FDQSxHQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsZUFBQSxTQUNBLEVBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLFFBQ0EsRUFBQSxJQUFBLFNBQUEsU0FBQSxFQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLFFBSUEsRUFBQSxXQUFBLFNBQUEsR0FFQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FBQSxtQkFBQSxHQUFBLE9BQ0EsUUFBQSxRQUFBLG1CQUFBLEtBQUEsRUFBQSxPQUNBLG1CQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxPQUNBLFFBQUEsUUFBQSxvQkFBQSxPQUVBLFFBQUEsUUFBQSxvQkFBQSxRQUNBLE9BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxvQ0FBQSxTQUFBLFlBS0EsRUFBQSxVQUFBLFNBQUEsR0FFQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFdBQUEsSUFHQSxFQUFBLG1CQUFBLFNBQUEsR0FFQSxRQUFBLFFBQUEsbUJBQUEsS0FBQSxHQUNBLFFBQUEsUUFBQSxvQ0FBQSxZQUFBLFVBR0EsRUFBQSxnQkFBQSxXQUNBLE9BQUEsR0FHQSxFQUFBLFlBQUEsV0FFQSxtQkFBQSxHQUFBLFlBQUEsRUFBQSxXQUFBLFFBRUEsUUFBQSxRQUFBLFFBQUEsSUFBQSxTQUFBLEVBQUEsa0JBQ0EsR0FBQSxZQUdBLFFBQUEsUUFBQSxRQUFBLElBQUEsU0FBQSxXQUVBLG1CQUFBLEdBQUEsZ0JBQUEsRUFBQSxlQUFBLFFBRUEsUUFBQSxRQUFBLHFCQUFBLElBQUEsU0FBQSxFQUFBLHNCQUNBLEdBQUEsZ0JBR0EsUUFBQSxRQUFBLHFCQUFBLElBQUEsU0FBQSxTQUlBLEVBQUEsT0FBQSxlQUFBLFdBQ0EsRUFBQSxRQUFBLE9BQUEsRUFDQSxFQUFBLFFBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsZ0JBQ0EsR0FBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxXQUdBLEVBQUEsY0FBQSxXQUNBLEVBQUEsUUFBQSxhQUFBLEVBQ0EsUUFBQSxRQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsa0JBR0EsRUFBQSxnQkFBQSxXQUNBLFFBQUEsUUFBQSxRQUFBLFlBQUEsUUFBQSxRQUFBLFFBQUEsVUFBQSxRQUFBLFFBQUEsVUFBQSxTQUFBLE1BQUEsRUFBQSxRQUFBLGFBQUEsRUFBQSxRQUFBLE9BQUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLFVBSUEsRUFBQSxrQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxnQkFBQSxTQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxJQUlBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLEtBQUEsRUFBQSxHQUVBLEVBQUEsS0FDQSxFQUFBLGNBQUEsSUFBQSxtQkFBQSwwQkFBQSxFQUFBLElBQUEsTUFLQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxPQUNBLElBQUEsS0FBQSxFQUFBLEdBQUEsTUFDQSxPQUFBLENBR0EsSUFBQSxHQUFBLEVBQUEsU0FBQSwyQkFDQSxFQUFBLEVBQUEsU0FBQSxxQkFDQSxFQUFBLEVBQUEsU0FBQSx3QkFDQSxFQUFBLEVBQUEsS0FBQSxzQkFDQSxFQUFBLEVBQUEsS0FBQSxtQkFDQSxFQUFBLEVBQUEsS0FBQSxxQkFFQSxFQUFBLEVBQUEsU0FFQSxHQUFBLFFBQ0EsRUFBQSxJQUFBLEVBQUEsVUFFQSxFQUFBLFFBQ0EsRUFBQSxJQUFBLEVBQUEsT0FFQSxFQUFBLFlBQ0EsS0FBQSxPQUNBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFNBQUEsSUFFQSxFQUFBLE1BQUEsT0FDQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsU0FBQSxRQUVBLEVBQUEsWUFBQSxRQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxTQUFBLEdBQUEsT0FBQSxXQUNBLEVBQUEsT0FBQSxXQUNBLG1CQUFBLEVBQUEsTUFDQSxFQUFBLFlBQUEsTUFBQSxFQUFBLEtBQ0Esa0JBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxLQUFBLEVBQUEsTUFDQSxFQUFBLE1BQUEsYUFBQSxLQUdBLEVBQUEsTUFBQSxhQUFBLE1BTUEsRUFBQSxrQkFBQSxFQUNBLEVBQUEsaUJBQUEsRUFFQSxFQUFBLFFBQUEsV0FDQSxFQUFBLFFBQUEsRUFBQSxPQUlBLEVBQUEsbUJBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEVBRUEsTUFEQSxHQUFBLE1BQUEsYUFBQSxHQUNBLENBR0EsSUFBQSxHQUFBLEVBQUEsU0FDQSxHQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsU0FBQSxFQUFBLFNBRUEsRUFBQSxLQUFBLDJCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxpQkFDQSxFQUFBLGFBQUEsRUFBQSxFQUFBLFlBRUEsRUFBQSxNQUFBLGFBQUEsS0FNQSxFQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUtBLEVBQUEsYUFBQSxJQUNBLEVBQUEsTUFBQSxhQUFBLEVBQ0EsRUFBQSxhQUFBLDRCQUFBLEVBQUEsV0FDQSxFQUFBLFdBQ0EsRUFBQSxNQUFBLGFBQUEsR0FDQSxNQUNBLElBR0EsRUFBQSxlQUFBLE9BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxhQUFBLEVBQUEsRUFBQSxXQUNBLEVBQUEsT0FBQSxFQUFBLFFBRUEsRUFBQSxNQUFBLGFBQUEsTUFwQkEsRUFBQSxNQUFBLGFBQUEsR0FDQSxJQXdCQSxFQUFBLGVBQUEsU0FBQSxHQUNBLElBQUEsV0FBQSxHQUNBLEVBQUEsaUJBQUEsVUFBQSxFQUFBLFdBSUEsRUFBQSxhQUFBLFNBQUEsR0FDQSxJQUFBLFdBQUEsR0FDQSxHQUFBLFVBQUEsVUFBQSxFQUFBLGlCQUFBLFdBQUEsRUFBQSxVQUVBLE9BQUEsQ0FLQSxRQUFBLEdBSUEsRUFBQSxPQUFBLCtIQUFBLFdBQ0EsRUFBQSxNQUFBLGFBQUEsSUFHQSxFQUFBLE9BQUEsc0JBQUEsV0FDQSxFQUFBLFlBQUEsRUFBQSxlQUFBLFFBR0EsRUFBQSxZQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsU0FBQSxFQUFBLEtBQUEsU0FBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEtBQUEsRUFFQSxlQUFBLFFBQUEsUUFBQSxvQkFFQSxjQUFBLFFBQ0EsRUFBQSxlQUFBLFlBQUEsRUFFQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxjQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGlCQUNBLEVBQUEsZUFBQSxZQUFBLE9BS0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsUUFBQSxTQUFBLElBR0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsb0JBQ0EsR0FFQSxFQUFBLG9CQUFBLE1BQ0EsU0FBQSxRQUFBLEdBQUEsV0FBQSxVQUlBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEVBQ0EsT0FBQSxDQUVBLElBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsTUFBQSxFQUNBLEdBQUEsS0FBQSxpQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsVUFBQSxHQUNBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLFFBS0EsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsTUFBQSxFQUNBLEdBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxhQUtBLEVBQUEsdUJBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxnQ0FBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxFQUFBLGFBQUEsRUFDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGtCQUNBLEdBQUEsUUFDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsUUFLQSxFQUFBLHFCQUFBLFdBQ0EsR0FBQSxJQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxhQUFBLEVBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxrQkFDQSxHQUFBLFFBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLFFBTUEsRUFBQSxZQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsT0FBQSxHQUNBLE1BRUEsR0FBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsUUFBQSxRQUFBLGdCQUFBLFNBQUEsWUFDQSxRQUFBLFFBQUEsSUFBQSxFQUFBLFVBQUEsU0FBQSxhQUNBLE9BQUEsU0FBQSxhQUlBLEVBQUEsS0FBQSxRQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsS0FBQSxhQUNBLGdCQ2o2Q0EsUUFBQSxPQUFBLFlBQUEsV0FBQSxxQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsVUFBQSxVQUNBLEVBQUEsa0JBQ0EsRUFBQSxlQUNBLEVBQUEsbUJBRUEsRUFBQSxVQUFBLFdBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BRUEsR0FBQSxLQUFBLDhCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQVNBLEdBUkEsRUFBQSxTQUFBLEdBQUEsS0FBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLGFBQUEsRUFBQSxTQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLFFBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxTQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLE9BQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFFQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxlQUFBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLEVBR0EsSUFBQSxHQURBLEdBQUEsSUFBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxJQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsS0FDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEVBQ0EsQ0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsS0FDQSxRQWVBLEVBQUEsV0FBQSxJQUdBLFFBQUEsUUFBQSxRQUFBLFlBQUEsY0FDQSxRQUFBLFFBQUEsb0JBQUEsUUFBQSxLQUdBLElBQUEsR0FBQSxHQUVBLEdBQUEsU0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxPQUdBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxTQUFBLEVBQUEsT0FBQSxDQUVBLElBQUEsRUFBQSxVQUFBLE9BQUEsQ0FFQSxJQUFBLFVBQUEsRUFBQSxTQUFBLEdBQUEsS0FFQSxNQURBLEdBQUEsc0JBQUEsRUFBQSxTQUFBLEdBQUEsSUFDQSxDQUdBLElBQUEsVUFBQSxFQUFBLFNBQUEsR0FBQSxLQUVBLE1BREEsR0FBQSxzQkFBQSxFQUFBLFNBQUEsR0FBQSxJQUNBLENBR0EsR0FBQSxXQUFBLENBQ0EsSUFBQSxJQUNBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUNBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxVQUNBLGNBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxnQkFBQSxFQUFBLFNBQUEsR0FBQSxnQkFDQSxhQUFBLEVBQUEsU0FBQSxHQUFBLGFBRUEsR0FBQSxLQUFBLDJCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEVBQUEsU0FBQSxHQUFBLFFBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxNQUFBLE9BQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsdUJBQ0EsR0FBQSxLQUFBLEVBQUEsTUFBQSxPQUVBLEVBQUEsV0FBQSxJQUNBLE1BQUEsV0FBQSxFQUFBLFdBQUEsS0FJQSxFQUFBLGlCQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsRUFBQSxLQUFBLCtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLFFBQUEsWUFBQSxFQUFBLGVBQ0EsRUFBQSxTQUFBLEVBQUEsYUFBQSxRQUFBLEVBQUEsU0FBQSxPQUNBLEVBQUEsTUFBQSxPQUFBLENBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSx1QkFDQSxHQUFBLEtBQUEsRUFBQSxNQUFBLFVBSUEsRUFBQSx5QkFHQSxFQUFBLGNBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSwrQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxRQUFBLFlBQUEsRUFBQSxZQUNBLEVBQUEsU0FBQSxFQUFBLFVBQUEsUUFBQSxFQUFBLFNBQUEsT0FDQSxFQUFBLE1BQUEsT0FBQSxDQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsdUJBQ0EsR0FBQSxLQUFBLEVBQUEsTUFBQSxVQUlBLEVBQUEseUJBSUEsRUFBQSxzQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGVBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSx1QkFBQSxTQUFBLFFBQ0EsRUFBQSxRQUFBLElBQUEsV0FBQSxXQUdBLEVBQUEsc0JBQUEsV0FDQSxFQUFBLHVCQUFBLFlBQUEsUUFDQSxFQUFBLFFBQUEsSUFBQSxXQUFBLEtBSUEsRUFBQSxzQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFlBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSx1QkFBQSxTQUFBLFFBQ0EsRUFBQSxRQUFBLElBQUEsV0FBQSxXQUdBLEVBQUEsc0JBQUEsV0FDQSxFQUFBLHVCQUFBLFlBQUEsUUFDQSxFQUFBLFFBQUEsSUFBQSxXQUFBLEtBR0EsRUFBQSxrQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxnQkFBQSxTQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxJQUdBLEVBQUEsZ0JBQUEsV0FDQSxRQUFBLFFBQUEsY0FBQSxPQUNBLFFBQUEsUUFBQSxpQkFBQSxRQUdBLEVBQUEsZ0JBQUEsV0FDQSxRQUFBLFFBQUEsY0FBQSxPQUNBLFFBQUEsUUFBQSxpQkFBQSxPQUVBLEVBQUEsYUFBQSxlQUNBLEVBQUEsYUFBQSxvQkFFQSxHQUFBLGVBQUEsV0FDQSxHQUFBLGVBQUEsZUFDQSxHQUFBLGVBQUEsWUFDQSxHQUFBLGVBQUEsTUFHQSxFQUFBLGFBQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxRQUFBLFFBQUEsR0FDQSxFQUFBLEVBQUEsS0FBQSxxQkFDQSxFQUFBLEVBQUEsS0FBQSxrQkFDQSxFQUFBLEVBQUEsS0FBQSxnQkFFQSxHQUFBLFlBQUEsUUFDQSxFQUFBLFNBQUEsUUFDQSxFQUFBLFFBQ0EsRUFBQSxZQUFBLGFBSUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGVBQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxLQUNBLEVBQUEsY0FBQSxJQUFBLG1CQUFBLDBCQUFBLEVBQUEsSUFBQSxNQUlBLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxhQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsV0FHQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBSUEsR0FIQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFFQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUVBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsVUFNQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxXQUdBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsR0FBQSxTQUFBLElBQ0EsRUFBQSxTQUFBLEdBQUEsU0FBQSxJQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsMEJBRUEsb0JBYUEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsZUFBQSxFQUVBLEVBQUEsU0FBQSxXQUNBLEVBQUEsS0FBQSxDQUNBLElBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUVBLEdBQUEsS0FBQSx5QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsUUFBQSxJQUNBLE9BQUEsU0FBQSxTQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUtBLEdBSkEsRUFBQSxTQUFBLEdBQUEsS0FBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxVQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxPQUNBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGVBQUEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsRUFHQSxJQUFBLEdBREEsR0FBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLGNBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLElBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxLQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFDQSxDQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxLQUNBLFFBTUEsR0FBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFJQSxFQUFBLGFBQUEsRUFDQSxFQUFBLFdBQUEsSUFHQSxRQUFBLFFBQUEsUUFBQSxZQUFBLGNBQ0EsUUFBQSxRQUFBLG9CQUFBLFFBQUEsS0FHQSxJQUFBLEdBQUEsR0FFQSxHQUFBLFNBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsT0FHQSxFQUFBLFdBQUEsV0FDQSxNQUFBLEdBQUEsU0FDQSxFQUFBLFNBQUEsT0FBQSxFQUNBLE9BRUEsR0FKQSxRQVNBLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsZ0JBQUEsV0FDQSxNQUFBLEdBQUEsWUFHQSxHQUZBLFFBTUEsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxHQUFBLGFBQUEsRUFDQSxFQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxhQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsVUFHQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQUEsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQVFBLElBUEEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsZUFDQSxFQUFBLGFBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxrQkFDQSxFQUFBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGlCQUVBLEVBQUEsU0FBQSxHQUFBLGNBQUEsRUFFQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUVBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsUUFLQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxXQUFBLEVBQUEsV0FBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEtBQUEsNkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsU0FLQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsaUJBQUEsRUFBQSxXQUFBLElBR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLGdCQUFBLEVBQUEsU0FBQSxJQUdBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFdBQUEsRUFFQSxFQUFBLFdBQUEsT0FHQSxDQUNBLEVBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxRQUdBLElBQUEsbUJBQUEsR0FBQSxTQUFBLFVBQUEsRUFBQSxTQUFBLFNBQUEsT0FBQSxFQUFBLENBQ0EsRUFBQSxTQUFBLEtBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLFNBQUEsT0FBQSxJQUNBLEdBQUEsRUFBQSxTQUFBLEdBQUEsSUFBQSxFQUFBLFNBQUEsU0FBQSxHQUFBLFdBQUEsQ0FDQSxFQUFBLFNBQUEsTUFBQSxFQUFBLFNBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLE9BSUEsRUFBQSxTQUFBLEtBQUEsSUFDQSxFQUFBLE1BQUEsRUFBQSxTQUFBLE1BSUEsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxXQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsS0FBQSw2QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxVQU9BLEVBQUEsU0FBQSxXQUNBLEdBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUVBLEtBQUEsRUFBQSxZQUFBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxPQUFBLElBQ0EsRUFBQSxXQUFBLEdBQUEsS0FBQSxDQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsU0FBQSxHQUFBLEtBQUEsQ0FFQSxHQUFBLGlCQUFBLEVBQUEsV0FBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxTQUFBLEtBRUEsRUFBQSxhQUFBLEVBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsb0JBQ0EsRUFBQSxjQUFBLFNBQ0EsVUFBQSxFQUFBLG9CQUFBLFNBQUEsS0FDQSxNQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsSUFBQSxFQUFBLFVBQUEsQ0FDQSxFQUFBLFdBQUEsQ0FDQSxJQUFBLElBRUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLGNBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxnQkFBQSxFQUFBLFNBQUEsR0FBQSxnQkFDQSxhQUFBLEVBQUEsU0FBQSxHQUFBLGFBR0EsR0FBQSxLQUFBLGdDQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEVBQUEsU0FBQSxPQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFFBRUEsSUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFNQSxFQUFBLFNBQUEsUUFBQSxJQUNBLE9BQUEsU0FBQSxhQUlBLEVBQUEsV0FBQSxJQUlBLEVBQUEsYUFBQSxXQUNBLElBQUEsRUFBQSxVQUFBLENBQ0EsRUFBQSxXQUFBLENBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsVUFBQSxFQUFBLFNBQUEsVUFDQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxZQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsU0FBQSxJQUVBLElBREEsRUFBQSxTQUFBLEVBQUEsU0FDQSxtQkFBQSxHQUFBLFNBQUEsVUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLE1BQUEsV0FBQSxJQUVBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFFQSxFQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsU0FNQSxHQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxNQUNBLEVBQUEsU0FBQSxLQUFBLEdBRUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxNQUNBLEVBQUEsYUFBQSxhQUVBLE1BQUEsV0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxNQUNBLEVBQUEsU0FBQSxLQUFBLEtBS0EsRUFBQSxXQUFBLEdBR0EsRUFBQSxPQUFBLHFCQUFBLFdBRUEsRUFBQSxZQUFBLElBR0EsRUFBQSxhQUFBLFNBQUEsR0FDQSxJQUFBLEVBSUEsTUFIQSxHQUFBLGVBQUEsRUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLGFBQ0EsRUFBQSxhQUFBLFlBQ0EsQ0FFQSxJQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FFQSxLQUFBLEVBQUEsVUFBQSxDQUNBLEVBQUEsV0FBQSxDQUVBLElBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFNBQUEsRUFBQSxTQUVBLEdBQUEsS0FBQSw4QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxzQkFBQSxZQUFBLG9CQUNBLEVBQUEsY0FBQSxTQUNBLFVBQUEsRUFBQSxzQkFBQSxTQUFBLEtBQ0EsT0FHQSxFQUFBLGVBQUEsRUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLE1BQ0EsRUFBQSxhQUFBLGNBSUEsRUFBQSxXQUFBLElBSUEsRUFBQSxPQUFBLDJNQUFBLFdBRUEsRUFBQSxlQUFBLElBR0EsRUFBQSxJQUFBLFdBRUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLENBRUEsSUFBQSxJQUNBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsU0FBQSxFQUFBLFNBQ0EsU0FBQSxFQUFBLFNBQ0EsU0FBQSxFQUFBLGlCQUNBLFFBQUEsRUFBQSxnQkFDQSxTQUFBLEVBQUEsU0FHQSxHQUFBLEtBQUEscUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFDQSxTQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsWUFRQSxRQUFBLFFBQUEsc0JBQUEsTUFBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLFFBQUEsUUFBQSxnQkFBQSxVQUlBLEVBQUEsYUFBQSxFQUFBLE1BQUEsRUFBQSxjQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsMEJBRUEsaUJBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEdBQ0EsR0FFQSxZQ25xQkEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FDQSxFQUFBLFVBQ0EsRUFBQSxNQUFBLE9BQ0EsRUFBQSxVQUFBLFNBR0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUVBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxVQUFBLFdBQ0EsRUFBQSxNQUFBLFFBSUEsUUFBQSxRQUFBLGFBQUEsWUFDQSxVQUFBLFVBQ0EsV0FBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsS0FBQSxTQUFBLE9BTUEsRUFBQSxPQUFBLFFBQUEsV0FDQSxFQUFBLFNBQUEsRUFBQSxPQUNBLEVBQUEsYUFBQSxFQUFBLFNBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLGVBTUEsRUFBQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFDQSxLQUFBLEVBQUEsQ0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLElBQUEsT0FBQSxNQUFBLE9BQUEsUUFDQSxHQUFBLEtBQUEsS0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsQ0FDQSxFQUFBLEVBQUEsRUFDQSxPQUdBLEVBQUEsV0FBQSxHQUFBLEVBQ0EsRUFBQSxXQUFBLElBS0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FDQSxHQUFBLEtBQUEsaUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxPQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLEVBQUEsU0FFQSxNQUFBLEVBQUEsTUFDQSxRQUFBLFlBQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxPQUNBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxlQUVBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxFQUFBLFlBR0EsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLFFBYkEsR0FrQkEsRUFBQSxPQUFBLHlDQUFBLFdBQ0EsRUFBQSxNQUFBLE9BQUEsRUFDQSxFQUFBLE1BQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxVQUFBLEVBQ0EsRUFBQSxNQUFBLFFBQUEsS0FJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUNBLElBQUEsRUFBQSxPQUFBLE1BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBRUEsTUFBQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxXQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsRUFDQSxXQUFBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLFNBRUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxRQUNBLEVBQUEsYUFBQSxjQUlBLFVBQUEsRUFBQSxNQUNBLEVBQUEsTUFBQSxPQUFBLEVBRUEsRUFBQSxNQUFBLE1BQUEsRUFFQSxFQUFBLE1BQUEsUUFBQSxFQUFBLFFBQ0EsV0FBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQUEsUUFBQSxhQXpCQSxHQStCQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxPQUVBLEdBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE9BQUEsRUFBQSxPQUNBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsRUFBQSxNQUFBLFFBQUEsRUFBQSxRQUNBLFdBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLFFBQUEsVUFFQSxNQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsTUFBQSxHQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxXQUFBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLFFBRUEsRUFBQSxhQUFBLGVBZkEsR0FxQkEsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FFQSxHQUFBLEtBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsVUFBQSxLQUFBLE9BQUEsa0JBSkEsR0FTQSxFQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsU0FBQSxZQUFBLEtBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxPQUFBLFFBQUEsT0FDQSxXQUFBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFBQSxRQUVBLEVBQUEsYUFBQSxjQUdBLEVBQUEsVUFBQSxXQUNBLEdBQUEsR0FBQSxJQUVBLFFBQUEsT0FBQSxPQUNBLEVBQUEsTUFDQSxPQUFBLE9BQUEsT0FDQSxFQUFBLEtBRUEsSUFBQSxHQUFBLFFBQUEsUUFBQSx3QkFFQSxHQUFBLElBQUEsbUJBQUEseUNBQUEsRUFBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiBBbmd1bGFySlMgdjEuMi4yMlxyXG4gKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcclxuIExpY2Vuc2U6IE1JVFxyXG4qL1xyXG4oZnVuY3Rpb24ocCxmLG4peyd1c2Ugc3RyaWN0JztmLm1vZHVsZShcIm5nQ29va2llc1wiLFtcIm5nXCJdKS5mYWN0b3J5KFwiJGNvb2tpZXNcIixbXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGUsYil7dmFyIGM9e30sZz17fSxoLGs9ITEsbD1mLmNvcHksbT1mLmlzVW5kZWZpbmVkO2IuYWRkUG9sbEZuKGZ1bmN0aW9uKCl7dmFyIGE9Yi5jb29raWVzKCk7aCE9YSYmKGg9YSxsKGEsZyksbChhLGMpLGsmJmUuJGFwcGx5KCkpfSkoKTtrPSEwO2UuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGEsZCxlO2ZvcihhIGluIGcpbShjW2FdKSYmYi5jb29raWVzKGEsbik7Zm9yKGEgaW4gYylkPWNbYV0sZi5pc1N0cmluZyhkKXx8KGQ9XCJcIitkLGNbYV09ZCksZCE9PWdbYV0mJihiLmNvb2tpZXMoYSxkKSxlPSEwKTtpZihlKWZvcihhIGluIGQ9Yi5jb29raWVzKCksYyljW2FdIT09ZFthXSYmKG0oZFthXSk/ZGVsZXRlIGNbYV06Y1thXT1kW2FdKX0pO3JldHVybiBjfV0pLmZhY3RvcnkoXCIkY29va2llU3RvcmVcIixcclxuW1wiJGNvb2tpZXNcIixmdW5jdGlvbihlKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKGIpe3JldHVybihiPWVbYl0pP2YuZnJvbUpzb24oYik6Yn0scHV0OmZ1bmN0aW9uKGIsYyl7ZVtiXT1mLnRvSnNvbihjKX0scmVtb3ZlOmZ1bmN0aW9uKGIpe2RlbGV0ZSBlW2JdfX19XSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLWNvb2tpZXMubWluLmpzLm1hcFxyXG4iLCIvKlxyXG4galF1ZXJ5IFVJIFNvcnRhYmxlIHBsdWdpbiB3cmFwcGVyXHJcblxyXG4gQHBhcmFtIFt1aS1zb3J0YWJsZV0ge29iamVjdH0gT3B0aW9ucyB0byBwYXNzIHRvICQuZm4uc29ydGFibGUoKSBtZXJnZWQgb250byB1aS5jb25maWdcclxuKi9cclxuYW5ndWxhci5tb2R1bGUoJ3VpLnNvcnRhYmxlJywgW10pXHJcbiAgLnZhbHVlKCd1aVNvcnRhYmxlQ29uZmlnJyx7fSlcclxuICAuZGlyZWN0aXZlKCd1aVNvcnRhYmxlJywgWyAndWlTb3J0YWJsZUNvbmZpZycsXHJcbiAgICAgICAgZnVuY3Rpb24odWlTb3J0YWJsZUNvbmZpZykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxyXG4gICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbWJpbmVDYWxsYmFja3MoZmlyc3Qsc2Vjb25kKXtcclxuICAgICAgICAgICAgICAgICAgaWYoIHNlY29uZCAmJiAodHlwZW9mIHNlY29uZCA9PT0gXCJmdW5jdGlvblwiKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsdWkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0KGUsdWkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZChlLHVpKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBvcHRzID0ge307XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tzID0ge1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHJlbW92ZTpudWxsLFxyXG4gICAgICAgICAgICAgICAgc3RhcnQ6bnVsbCxcclxuICAgICAgICAgICAgICAgIHN0b3A6bnVsbCxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTpudWxsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChvcHRzLCB1aVNvcnRhYmxlQ29uZmlnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zb3J0YWJsZShvcHRzKTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3Muc3RhcnQgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBwb3NpdGlvbiBvZiBkcmFnZ2VkIGl0ZW1cclxuICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUgPSB7IGluZGV4OiB1aS5pdGVtLmluZGV4KCkgfTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3MudXBkYXRlID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiB0aGUgcmVmZXJlbmNlIHRvIG5nTW9kZWwgaW4gc3RvcCgpIGlzIHdyb25nXHJcbiAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlLnJlc29ydCA9IG5nTW9kZWw7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnJlY2VpdmUgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5yZWxvY2F0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGRlZCBpdGVtIHRvIGFycmF5IGludG8gY29ycmVjdCBwb3NpdGlvbiBhbmQgc2V0IHVwIGZsYWdcclxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJG1vZGVsVmFsdWUuc3BsaWNlKHVpLml0ZW0uaW5kZXgoKSwgMCwgdWkuaXRlbS5zb3J0YWJsZS5tb3ZlZCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnJlbW92ZSA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb3B5IGRhdGEgaW50byBpdGVtXHJcbiAgICAgICAgICAgICAgICBpZiAobmdNb2RlbC4kbW9kZWxWYWx1ZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5tb3ZlZCA9IG5nTW9kZWwuJG1vZGVsVmFsdWUuc3BsaWNlKDAsIDEpWzBdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5tb3ZlZCA9ICBuZ01vZGVsLiRtb2RlbFZhbHVlLnNwbGljZSh1aS5pdGVtLnNvcnRhYmxlLmluZGV4LCAxKVswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3Muc3RvcCA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkaWdlc3QgYWxsIHByZXBhcmVkIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIGlmICh1aS5pdGVtLnNvcnRhYmxlLnJlc29ydCAmJiAhdWkuaXRlbS5zb3J0YWJsZS5yZWxvY2F0ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggc2F2ZWQgYW5kIGN1cnJlbnQgcG9zaXRpb24gb2YgZHJvcHBlZCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgIHZhciBlbmQsIHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICBzdGFydCA9IHVpLml0ZW0uc29ydGFibGUuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgIGVuZCA9IHVpLml0ZW0uaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIC8vIFJlb3JkZXIgYXJyYXkgYW5kIGFwcGx5IGNoYW5nZSB0byBzY29wZVxyXG4gICAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlLnJlc29ydC4kbW9kZWxWYWx1ZS5zcGxpY2UoZW5kLCAwLCB1aS5pdGVtLnNvcnRhYmxlLnJlc29ydC4kbW9kZWxWYWx1ZS5zcGxpY2Uoc3RhcnQsIDEpWzBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQgfHwgdWkuaXRlbS5zb3J0YWJsZS5yZWxvY2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0cnMudWlTb3J0YWJsZSwgZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpe1xyXG4gICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobmV3VmFsLCBmdW5jdGlvbih2YWx1ZSwga2V5KXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiggY2FsbGJhY2tzW2tleV0gKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3cmFwIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29tYmluZUNhbGxiYWNrcyggY2FsbGJhY2tzW2tleV0sIHZhbHVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zb3J0YWJsZSgnb3B0aW9uJywga2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY2FsbGJhY2tzLCBmdW5jdGlvbih2YWx1ZSwga2V5ICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHNba2V5XSA9IGNvbWJpbmVDYWxsYmFja3ModmFsdWUsIG9wdHNba2V5XSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBzb3J0YWJsZVxyXG4gICAgICAgICAgICAvL2VsZW1lbnQuc29ydGFibGUoJ2Rlc3Ryb3knKTtcclxuICAgICAgICAgICAgZWxlbWVudC5zb3J0YWJsZShvcHRzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbl0pO1xyXG4iLCIvKlxyXG4gQXR0YWNoZXMgaW5wdXQgbWFzayBvbnRvIGlucHV0IGVsZW1lbnRcclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCd1aS5tYXNrJywgW10pXHJcbiAgLnZhbHVlKCd1aU1hc2tDb25maWcnLCB7XHJcbiAgICAnbWFza0RlZmluaXRpb25zJzoge1xyXG4gICAgICAnOSc6IC9cXGQvLFxyXG4gICAgICAnQSc6IC9bYS16QS1aXS8sXHJcbiAgICAgICcqJzogL1thLXpBLVowLTldL1xyXG4gICAgfSxcclxuICAgICdjbGVhck9uQmx1cic6IHRydWVcclxuICB9KVxyXG4gIC5kaXJlY3RpdmUoJ3VpTWFzaycsIFsndWlNYXNrQ29uZmlnJywgJyRwYXJzZScsIGZ1bmN0aW9uIChtYXNrQ29uZmlnLCAkcGFyc2UpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcmlvcml0eTogMTAwLFxyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIHVpTWFza0NvbXBpbGluZ0Z1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBtYXNrQ29uZmlnO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gdWlNYXNrTGlua2luZ0Z1bmN0aW9uKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKXtcclxuICAgICAgICAgIHZhciBtYXNrUHJvY2Vzc2VkID0gZmFsc2UsIGV2ZW50c0JvdW5kID0gZmFsc2UsXHJcbiAgICAgICAgICAgIG1hc2tDYXJldE1hcCwgbWFza1BhdHRlcm5zLCBtYXNrUGxhY2Vob2xkZXIsIG1hc2tDb21wb25lbnRzLFxyXG4gICAgICAgICAgLy8gTWluaW11bSByZXF1aXJlZCBsZW5ndGggb2YgdGhlIHZhbHVlIHRvIGJlIGNvbnNpZGVyZWQgdmFsaWRcclxuICAgICAgICAgICAgbWluUmVxdWlyZWRMZW5ndGgsXHJcbiAgICAgICAgICAgIHZhbHVlLCB2YWx1ZU1hc2tlZCwgaXNWYWxpZCxcclxuICAgICAgICAgIC8vIFZhcnMgZm9yIGluaXRpYWxpemluZy91bmluaXRpYWxpemluZ1xyXG4gICAgICAgICAgICBvcmlnaW5hbFBsYWNlaG9sZGVyID0gaUF0dHJzLnBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICBvcmlnaW5hbE1heGxlbmd0aCA9IGlBdHRycy5tYXhsZW5ndGgsXHJcbiAgICAgICAgICAvLyBWYXJzIHVzZWQgZXhjbHVzaXZlbHkgaW4gZXZlbnRIYW5kbGVyKClcclxuICAgICAgICAgICAgb2xkVmFsdWUsIG9sZFZhbHVlVW5tYXNrZWQsIG9sZENhcmV0UG9zaXRpb24sIG9sZFNlbGVjdGlvbkxlbmd0aDtcclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplKG1hc2tBdHRyKXtcclxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzRGVmaW5lZChtYXNrQXR0cikpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdW5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvY2Vzc1Jhd01hc2sobWFza0F0dHIpO1xyXG4gICAgICAgICAgICBpZiAoIW1hc2tQcm9jZXNzZWQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdW5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5pdGlhbGl6ZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgYmluZEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGluaXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlckF0dHIpIHtcclxuICAgICAgICAgICAgaWYoISBhbmd1bGFyLmlzRGVmaW5lZChwbGFjZWhvbGRlckF0dHIpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtYXNrUGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlckF0dHI7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgbWFzayBpcyBwcm9jZXNzZWQsIHRoZW4gd2UgbmVlZCB0byB1cGRhdGUgdGhlIHZhbHVlXHJcbiAgICAgICAgICAgIGlmIChtYXNrUHJvY2Vzc2VkKSB7XHJcbiAgICAgICAgICAgICAgZXZlbnRIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBmb3JtYXR0ZXIoZnJvbU1vZGVsVmFsdWUpe1xyXG4gICAgICAgICAgICBpZiAoIW1hc2tQcm9jZXNzZWQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZnJvbU1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFsdWUgPSB1bm1hc2tWYWx1ZShmcm9tTW9kZWxWYWx1ZSB8fCAnJyk7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB2YWxpZGF0ZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0VmFsaWRpdHkoJ21hc2snLCBpc1ZhbGlkKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgdmFsdWUubGVuZ3RoID8gbWFza1ZhbHVlKHZhbHVlKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBwYXJzZXIoZnJvbVZpZXdWYWx1ZSl7XHJcbiAgICAgICAgICAgIGlmICghbWFza1Byb2Nlc3NlZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmcm9tVmlld1ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhbHVlID0gdW5tYXNrVmFsdWUoZnJvbVZpZXdWYWx1ZSB8fCAnJyk7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB2YWxpZGF0ZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBzZXQgdmlld1ZhbHVlIG1hbnVhbGx5IGFzIHRoZSByZWZvcm1hdHRpbmcgb2YgdGhlIGlucHV0XHJcbiAgICAgICAgICAgIC8vIHZhbHVlIHBlcmZvcm1lZCBieSBldmVudEhhbmRsZXIoKSBkb2Vzbid0IGhhcHBlbiB1bnRpbCBhZnRlclxyXG4gICAgICAgICAgICAvLyB0aGlzIHBhcnNlciBpcyBjYWxsZWQsIHdoaWNoIGNhdXNlcyB3aGF0IHRoZSB1c2VyIHNlZXMgaW4gdGhlIGlucHV0XHJcbiAgICAgICAgICAgIC8vIHRvIGJlIG91dC1vZi1zeW5jIHdpdGggd2hhdCB0aGUgY29udHJvbGxlcidzICR2aWV3VmFsdWUgaXMgc2V0IHRvLlxyXG4gICAgICAgICAgICBjb250cm9sbGVyLiR2aWV3VmFsdWUgPSB2YWx1ZS5sZW5ndGggPyBtYXNrVmFsdWUodmFsdWUpIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCdtYXNrJywgaXNWYWxpZCk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycgJiYgaUF0dHJzLnJlcXVpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgncmVxdWlyZWQnLCAhY29udHJvbGxlci4kZXJyb3IucmVxdWlyZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkID8gdmFsdWUgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGxpbmtPcHRpb25zID0ge307XHJcblxyXG4gICAgICAgICAgaWYgKGlBdHRycy51aU9wdGlvbnMpIHtcclxuICAgICAgICAgICAgbGlua09wdGlvbnMgPSBzY29wZS4kZXZhbCgnWycgKyBpQXR0cnMudWlPcHRpb25zICsgJ10nKTtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNPYmplY3QobGlua09wdGlvbnNbMF0pKSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgY2FuJ3QgdXNlIGFuZ3VsYXIuY29weSBub3IgYW5ndWxhci5leHRlbmQsIHRoZXkgbGFjayB0aGUgcG93ZXIgdG8gZG8gYSBkZWVwIG1lcmdlXHJcbiAgICAgICAgICAgICAgbGlua09wdGlvbnMgPSAoZnVuY3Rpb24ob3JpZ2luYWwsIGN1cnJlbnQpe1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIG9yaWdpbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3JpZ2luYWwsIGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtpXSA9IGFuZ3VsYXIuY29weShvcmlnaW5hbFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGN1cnJlbnRbaV0sIG9yaWdpbmFsW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xyXG4gICAgICAgICAgICAgIH0pKG9wdGlvbnMsIGxpbmtPcHRpb25zWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGlua09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlBdHRycy4kb2JzZXJ2ZSgndWlNYXNrJywgaW5pdGlhbGl6ZSk7XHJcbiAgICAgICAgICBpQXR0cnMuJG9ic2VydmUoJ3BsYWNlaG9sZGVyJywgaW5pdFBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgIHZhciBtb2RlbFZpZXdWYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgaUF0dHJzLiRvYnNlcnZlKCdtb2RlbFZpZXdWYWx1ZScsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICBpZih2YWwgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgIG1vZGVsVmlld1ZhbHVlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBzY29wZS4kd2F0Y2goaUF0dHJzLm5nTW9kZWwsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICBpZihtb2RlbFZpZXdWYWx1ZSAmJiB2YWwpIHtcclxuICAgICAgICAgICAgICB2YXIgbW9kZWwgPSAkcGFyc2UoaUF0dHJzLm5nTW9kZWwpO1xyXG4gICAgICAgICAgICAgIG1vZGVsLmFzc2lnbihzY29wZSwgY29udHJvbGxlci4kdmlld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb250cm9sbGVyLiRmb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuJHBhcnNlcnMucHVzaChwYXJzZXIpO1xyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIHVuaW5pdGlhbGl6ZSgpe1xyXG4gICAgICAgICAgICBtYXNrUHJvY2Vzc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHVuYmluZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQob3JpZ2luYWxQbGFjZWhvbGRlcikpIHtcclxuICAgICAgICAgICAgICBpRWxlbWVudC5hdHRyKCdwbGFjZWhvbGRlcicsIG9yaWdpbmFsUGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlFbGVtZW50LnJlbW92ZUF0dHIoJ3BsYWNlaG9sZGVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChvcmlnaW5hbE1heGxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICBpRWxlbWVudC5hdHRyKCdtYXhsZW5ndGgnLCBvcmlnaW5hbE1heGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaUVsZW1lbnQucmVtb3ZlQXR0cignbWF4bGVuZ3RoJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlFbGVtZW50LnZhbChjb250cm9sbGVyLiRtb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kdmlld1ZhbHVlID0gY29udHJvbGxlci4kbW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVFbGVtZW50KCl7XHJcbiAgICAgICAgICAgIHZhbHVlID0gb2xkVmFsdWVVbm1hc2tlZCA9IHVubWFza1ZhbHVlKGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSB8fCAnJyk7XHJcbiAgICAgICAgICAgIHZhbHVlTWFza2VkID0gb2xkVmFsdWUgPSBtYXNrVmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICBpc1ZhbGlkID0gdmFsaWRhdGVWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciB2aWV3VmFsdWUgPSBpc1ZhbGlkICYmIHZhbHVlLmxlbmd0aCA/IHZhbHVlTWFza2VkIDogJyc7XHJcbiAgICAgICAgICAgIGlmIChpQXR0cnMubWF4bGVuZ3RoKSB7IC8vIERvdWJsZSBtYXhsZW5ndGggdG8gYWxsb3cgcGFzdGluZyBuZXcgdmFsIGF0IGVuZCBvZiBtYXNrXHJcbiAgICAgICAgICAgICAgaUVsZW1lbnQuYXR0cignbWF4bGVuZ3RoJywgbWFza0NhcmV0TWFwW21hc2tDYXJldE1hcC5sZW5ndGggLSAxXSAqIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlFbGVtZW50LmF0dHIoJ3BsYWNlaG9sZGVyJywgbWFza1BsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQudmFsKHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSA9IHZpZXdWYWx1ZTtcclxuICAgICAgICAgICAgLy8gTm90IHVzaW5nICRzZXRWaWV3VmFsdWUgc28gd2UgZG9uJ3QgY2xvYmJlciB0aGUgbW9kZWwgdmFsdWUgYW5kIGRpcnR5IHRoZSBmb3JtXHJcbiAgICAgICAgICAgIC8vIHdpdGhvdXQgYW55IGtpbmQgb2YgdXNlciBpbnRlcmFjdGlvbi5cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBiaW5kRXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICAgICAgaWYgKGV2ZW50c0JvdW5kKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlFbGVtZW50LmJpbmQoJ2JsdXInLCBibHVySGFuZGxlcik7XHJcbiAgICAgICAgICAgIGlFbGVtZW50LmJpbmQoJ21vdXNlZG93biBtb3VzZXVwJywgbW91c2VEb3duVXBIYW5kbGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQuYmluZCgnaW5wdXQga2V5dXAgY2xpY2sgZm9jdXMnLCBldmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBldmVudHNCb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gdW5iaW5kRXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICAgICAgaWYgKCFldmVudHNCb3VuZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpRWxlbWVudC51bmJpbmQoJ2JsdXInLCBibHVySGFuZGxlcik7XHJcbiAgICAgICAgICAgIGlFbGVtZW50LnVuYmluZCgnbW91c2Vkb3duJywgbW91c2VEb3duVXBIYW5kbGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQudW5iaW5kKCdtb3VzZXVwJywgbW91c2VEb3duVXBIYW5kbGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQudW5iaW5kKCdpbnB1dCcsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgIGlFbGVtZW50LnVuYmluZCgna2V5dXAnLCBldmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpRWxlbWVudC51bmJpbmQoJ2NsaWNrJywgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQudW5iaW5kKCdmb2N1cycsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgIGV2ZW50c0JvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVWYWx1ZSh2YWx1ZSl7XHJcbiAgICAgICAgICAgIC8vIFplcm8tbGVuZ3RoIHZhbHVlIHZhbGlkaXR5IGlzIG5nUmVxdWlyZWQncyBkZXRlcm1pbmF0aW9uXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPyB2YWx1ZS5sZW5ndGggPj0gbWluUmVxdWlyZWRMZW5ndGggOiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIHVubWFza1ZhbHVlKHZhbHVlKXtcclxuICAgICAgICAgICAgdmFyIHZhbHVlVW5tYXNrZWQgPSAnJyxcclxuICAgICAgICAgICAgICBtYXNrUGF0dGVybnNDb3B5ID0gbWFza1BhdHRlcm5zLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIC8vIFByZXByb2Nlc3MgYnkgc3RyaXBwaW5nIG1hc2sgY29tcG9uZW50cyBmcm9tIHZhbHVlXHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1hc2tDb21wb25lbnRzLCBmdW5jdGlvbiAoY29tcG9uZW50KXtcclxuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoY29tcG9uZW50LCAnJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godmFsdWUuc3BsaXQoJycpLCBmdW5jdGlvbiAoY2hyKXtcclxuICAgICAgICAgICAgICBpZiAobWFza1BhdHRlcm5zQ29weS5sZW5ndGggJiYgbWFza1BhdHRlcm5zQ29weVswXS50ZXN0KGNocikpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlVW5tYXNrZWQgKz0gY2hyO1xyXG4gICAgICAgICAgICAgICAgbWFza1BhdHRlcm5zQ29weS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVVubWFza2VkO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIG1hc2tWYWx1ZSh1bm1hc2tlZFZhbHVlKXtcclxuICAgICAgICAgICAgdmFyIHZhbHVlTWFza2VkID0gJycsXHJcbiAgICAgICAgICAgICAgICBtYXNrQ2FyZXRNYXBDb3B5ID0gbWFza0NhcmV0TWFwLnNsaWNlKCk7XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobWFza1BsYWNlaG9sZGVyLnNwbGl0KCcnKSwgZnVuY3Rpb24gKGNociwgaSl7XHJcbiAgICAgICAgICAgICAgaWYgKHVubWFza2VkVmFsdWUubGVuZ3RoICYmIGkgPT09IG1hc2tDYXJldE1hcENvcHlbMF0pIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlTWFza2VkICArPSB1bm1hc2tlZFZhbHVlLmNoYXJBdCgwKSB8fCAnXyc7XHJcbiAgICAgICAgICAgICAgICB1bm1hc2tlZFZhbHVlID0gdW5tYXNrZWRWYWx1ZS5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgICAgICBtYXNrQ2FyZXRNYXBDb3B5LnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVNYXNrZWQgKz0gY2hyO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZU1hc2tlZDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBnZXRQbGFjZWhvbGRlckNoYXIoaSkge1xyXG4gICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBpQXR0cnMucGxhY2Vob2xkZXI7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBsYWNlaG9sZGVyICE9PSAndW5kZWZpbmVkJyAmJiBwbGFjZWhvbGRlcltpXSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBwbGFjZWhvbGRlcltpXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gJ18nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gR2VuZXJhdGUgYXJyYXkgb2YgbWFzayBjb21wb25lbnRzIHRoYXQgd2lsbCBiZSBzdHJpcHBlZCBmcm9tIGEgbWFza2VkIHZhbHVlXHJcbiAgICAgICAgICAvLyBiZWZvcmUgcHJvY2Vzc2luZyB0byBwcmV2ZW50IG1hc2sgY29tcG9uZW50cyBmcm9tIGJlaW5nIGFkZGVkIHRvIHRoZSB1bm1hc2tlZCB2YWx1ZS5cclxuICAgICAgICAgIC8vIEUuZy4sIGEgbWFzayBwYXR0ZXJuIG9mICcrNyA5OTk5JyB3b24ndCBoYXZlIHRoZSA3IGJsZWVkIGludG8gdGhlIHVubWFza2VkIHZhbHVlLlxyXG4gICAgICAgICAgLy8gSWYgYSBtYXNrYWJsZSBjaGFyIGlzIGZvbGxvd2VkIGJ5IGEgbWFzayBjaGFyIGFuZCBoYXMgYSBtYXNrXHJcbiAgICAgICAgICAvLyBjaGFyIGJlaGluZCBpdCwgd2UnbGwgc3BsaXQgaXQgaW50byBpdCdzIG93biBjb21wb25lbnQgc28gaWZcclxuICAgICAgICAgIC8vIGEgdXNlciBpcyBhZ2dyZXNzaXZlbHkgZGVsZXRpbmcgaW4gdGhlIGlucHV0IGFuZCBhIGNoYXIgYWhlYWRcclxuICAgICAgICAgIC8vIG9mIHRoZSBtYXNrYWJsZSBjaGFyIGdldHMgZGVsZXRlZCwgd2UnbGwgc3RpbGwgYmUgYWJsZSB0byBzdHJpcFxyXG4gICAgICAgICAgLy8gaXQgaW4gdGhlIHVubWFza1ZhbHVlKCkgcHJlcHJvY2Vzc2luZy5cclxuICAgICAgICAgIGZ1bmN0aW9uIGdldE1hc2tDb21wb25lbnRzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFza1BsYWNlaG9sZGVyLnJlcGxhY2UoL1tfXSsvZywgJ18nKS5yZXBsYWNlKC8oW15fXSspKFthLXpBLVowLTldKShbXl9dKS9nLCAnJDEkMl8kMycpLnNwbGl0KCdfJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1Jhd01hc2sobWFzayl7XHJcbiAgICAgICAgICAgIHZhciBjaGFyYWN0ZXJDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICBtYXNrQ2FyZXRNYXAgICAgPSBbXTtcclxuICAgICAgICAgICAgbWFza1BhdHRlcm5zICAgID0gW107XHJcbiAgICAgICAgICAgIG1hc2tQbGFjZWhvbGRlciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXNrID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgIG1pblJlcXVpcmVkTGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIGlzT3B0aW9uYWwgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgc3BsaXRNYXNrICA9IG1hc2suc3BsaXQoJycpO1xyXG5cclxuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goc3BsaXRNYXNrLCBmdW5jdGlvbiAoY2hyLCBpKXtcclxuICAgICAgICAgICAgICAgIGlmIChsaW5rT3B0aW9ucy5tYXNrRGVmaW5pdGlvbnNbY2hyXSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgbWFza0NhcmV0TWFwLnB1c2goY2hhcmFjdGVyQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgbWFza1BsYWNlaG9sZGVyICs9IGdldFBsYWNlaG9sZGVyQ2hhcihpKTtcclxuICAgICAgICAgICAgICAgICAgbWFza1BhdHRlcm5zLnB1c2gobGlua09wdGlvbnMubWFza0RlZmluaXRpb25zW2Nocl0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgaWYgKCFpc09wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluUmVxdWlyZWRMZW5ndGgrKztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hyID09PSAnPycpIHtcclxuICAgICAgICAgICAgICAgICAgaXNPcHRpb25hbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgbWFza1BsYWNlaG9sZGVyICs9IGNocjtcclxuICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyQ291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDYXJldCBwb3NpdGlvbiBpbW1lZGlhdGVseSBmb2xsb3dpbmcgbGFzdCBwb3NpdGlvbiBpcyB2YWxpZC5cclxuICAgICAgICAgICAgbWFza0NhcmV0TWFwLnB1c2gobWFza0NhcmV0TWFwLnNsaWNlKCkucG9wKCkgKyAxKTtcclxuXHJcbiAgICAgICAgICAgIG1hc2tDb21wb25lbnRzID0gZ2V0TWFza0NvbXBvbmVudHMoKTtcclxuICAgICAgICAgICAgbWFza1Byb2Nlc3NlZCAgPSBtYXNrQ2FyZXRNYXAubGVuZ3RoID4gMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBibHVySGFuZGxlcigpe1xyXG4gICAgICAgICAgICBpZiAobGlua09wdGlvbnMuY2xlYXJPbkJsdXIpIHtcclxuICAgICAgICAgICAgICBvbGRDYXJldFBvc2l0aW9uID0gMDtcclxuICAgICAgICAgICAgICBvbGRTZWxlY3Rpb25MZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgIGlmICghaXNWYWxpZCB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlTWFza2VkID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpRWxlbWVudC52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKCcnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIG1vdXNlRG93blVwSGFuZGxlcihlKXtcclxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicpIHtcclxuICAgICAgICAgICAgICBpRWxlbWVudC5iaW5kKCdtb3VzZW91dCcsIG1vdXNlb3V0SGFuZGxlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaUVsZW1lbnQudW5iaW5kKCdtb3VzZW91dCcsIG1vdXNlb3V0SGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpRWxlbWVudC5iaW5kKCdtb3VzZWRvd24gbW91c2V1cCcsIG1vdXNlRG93blVwSGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gbW91c2VvdXRIYW5kbGVyKCl7XHJcbiAgICAgICAgICAgIC8qanNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgICAgICBvbGRTZWxlY3Rpb25MZW5ndGggPSBnZXRTZWxlY3Rpb25MZW5ndGgodGhpcyk7XHJcbiAgICAgICAgICAgIGlFbGVtZW50LnVuYmluZCgnbW91c2VvdXQnLCBtb3VzZW91dEhhbmRsZXIpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGV2ZW50SGFuZGxlcihlKXtcclxuICAgICAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgICAgIGUgPSBlIHx8IHt9O1xyXG4gICAgICAgICAgICAvLyBBbGxvd3MgbW9yZSBlZmZpY2llbnQgbWluaWZpY2F0aW9uXHJcbiAgICAgICAgICAgIHZhciBldmVudFdoaWNoID0gZS53aGljaCxcclxuICAgICAgICAgICAgICBldmVudFR5cGUgPSBlLnR5cGU7XHJcblxyXG4gICAgICAgICAgICAvLyBQcmV2ZW50IHNoaWZ0IGFuZCBjdHJsIGZyb20gbXVja2luZyB3aXRoIG9sZCB2YWx1ZXNcclxuICAgICAgICAgICAgaWYgKGV2ZW50V2hpY2ggPT09IDE2IHx8IGV2ZW50V2hpY2ggPT09IDkxKSB7IHJldHVybjt9XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsID0gaUVsZW1lbnQudmFsKCksXHJcbiAgICAgICAgICAgICAgdmFsT2xkID0gb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgdmFsTWFza2VkLFxyXG4gICAgICAgICAgICAgIHZhbFVubWFza2VkID0gdW5tYXNrVmFsdWUodmFsKSxcclxuICAgICAgICAgICAgICB2YWxVbm1hc2tlZE9sZCA9IG9sZFZhbHVlVW5tYXNrZWQsXHJcbiAgICAgICAgICAgICAgdmFsQWx0ZXJlZCA9IGZhbHNlLFxyXG5cclxuICAgICAgICAgICAgICBjYXJldFBvcyA9IGdldENhcmV0UG9zaXRpb24odGhpcykgfHwgMCxcclxuICAgICAgICAgICAgICBjYXJldFBvc09sZCA9IG9sZENhcmV0UG9zaXRpb24gfHwgMCxcclxuICAgICAgICAgICAgICBjYXJldFBvc0RlbHRhID0gY2FyZXRQb3MgLSBjYXJldFBvc09sZCxcclxuICAgICAgICAgICAgICBjYXJldFBvc01pbiA9IG1hc2tDYXJldE1hcFswXSxcclxuICAgICAgICAgICAgICBjYXJldFBvc01heCA9IG1hc2tDYXJldE1hcFt2YWxVbm1hc2tlZC5sZW5ndGhdIHx8IG1hc2tDYXJldE1hcC5zbGljZSgpLnNoaWZ0KCksXHJcblxyXG4gICAgICAgICAgICAgIHNlbGVjdGlvbkxlbk9sZCA9IG9sZFNlbGVjdGlvbkxlbmd0aCB8fCAwLFxyXG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSBnZXRTZWxlY3Rpb25MZW5ndGgodGhpcykgPiAwLFxyXG4gICAgICAgICAgICAgIHdhc1NlbGVjdGVkID0gc2VsZWN0aW9uTGVuT2xkID4gMCxcclxuXHJcbiAgICAgICAgICAgIC8vIENhc2U6IFR5cGluZyBhIGNoYXJhY3RlciB0byBvdmVyd3JpdGUgYSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICBpc0FkZGl0aW9uID0gKHZhbC5sZW5ndGggPiB2YWxPbGQubGVuZ3RoKSB8fCAoc2VsZWN0aW9uTGVuT2xkICYmIHZhbC5sZW5ndGggPiB2YWxPbGQubGVuZ3RoIC0gc2VsZWN0aW9uTGVuT2xkKSxcclxuICAgICAgICAgICAgLy8gQ2FzZTogRGVsZXRlIGFuZCBiYWNrc3BhY2UgYmVoYXZlIGlkZW50aWNhbGx5IG9uIGEgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgaXNEZWxldGlvbiA9ICh2YWwubGVuZ3RoIDwgdmFsT2xkLmxlbmd0aCkgfHwgKHNlbGVjdGlvbkxlbk9sZCAmJiB2YWwubGVuZ3RoID09PSB2YWxPbGQubGVuZ3RoIC0gc2VsZWN0aW9uTGVuT2xkKSxcclxuICAgICAgICAgICAgICBpc1NlbGVjdGlvbiA9IChldmVudFdoaWNoID49IDM3ICYmIGV2ZW50V2hpY2ggPD0gNDApICYmIGUuc2hpZnRLZXksIC8vIEFycm93IGtleSBjb2Rlc1xyXG5cclxuICAgICAgICAgICAgICBpc0tleUxlZnRBcnJvdyA9IGV2ZW50V2hpY2ggPT09IDM3LFxyXG4gICAgICAgICAgICAvLyBOZWNlc3NhcnkgZHVlIHRvIFwiaW5wdXRcIiBldmVudCBub3QgcHJvdmlkaW5nIGEga2V5IGNvZGVcclxuICAgICAgICAgICAgICBpc0tleUJhY2tzcGFjZSA9IGV2ZW50V2hpY2ggPT09IDggfHwgKGV2ZW50VHlwZSAhPT0gJ2tleXVwJyAmJiBpc0RlbGV0aW9uICYmIChjYXJldFBvc0RlbHRhID09PSAtMSkpLFxyXG4gICAgICAgICAgICAgIGlzS2V5RGVsZXRlID0gZXZlbnRXaGljaCA9PT0gNDYgfHwgKGV2ZW50VHlwZSAhPT0gJ2tleXVwJyAmJiBpc0RlbGV0aW9uICYmIChjYXJldFBvc0RlbHRhID09PSAwICkgJiYgIXdhc1NlbGVjdGVkKSxcclxuXHJcbiAgICAgICAgICAgIC8vIEhhbmRsZXMgY2FzZXMgd2hlcmUgY2FyZXQgaXMgbW92ZWQgYW5kIHBsYWNlZCBpbiBmcm9udCBvZiBpbnZhbGlkIG1hc2tDYXJldE1hcCBwb3NpdGlvbi4gTG9naWMgYmVsb3dcclxuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0LCBvbiBjbGljayBvciBsZWZ0d2FyZCBjYXJldCBwbGFjZW1lbnQsIGNhcmV0IGlzIG1vdmVkIGxlZnR3YXJkIHVudGlsIGRpcmVjdGx5IHJpZ2h0IG9mXHJcbiAgICAgICAgICAgIC8vIG5vbi1tYXNrIGNoYXJhY3Rlci4gQWxzbyBhcHBsaWVkIHRvIGNsaWNrIHNpbmNlIHVzZXJzIGFyZSAoYXJndWFibHkpIG1vcmUgbGlrZWx5IHRvIGJhY2tzcGFjZVxyXG4gICAgICAgICAgICAvLyBhIGNoYXJhY3RlciB3aGVuIGNsaWNraW5nIHdpdGhpbiBhIGZpbGxlZCBpbnB1dC5cclxuICAgICAgICAgICAgICBjYXJldEJ1bXBCYWNrID0gKGlzS2V5TGVmdEFycm93IHx8IGlzS2V5QmFja3NwYWNlIHx8IGV2ZW50VHlwZSA9PT0gJ2NsaWNrJykgJiYgY2FyZXRQb3MgPiBjYXJldFBvc01pbjtcclxuXHJcbiAgICAgICAgICAgIG9sZFNlbGVjdGlvbkxlbmd0aCA9IGdldFNlbGVjdGlvbkxlbmd0aCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZXNlIGV2ZW50cyBkb24ndCByZXF1aXJlIGFueSBhY3Rpb25cclxuICAgICAgICAgICAgaWYgKGlzU2VsZWN0aW9uIHx8IChpc1NlbGVjdGVkICYmIChldmVudFR5cGUgPT09ICdjbGljaycgfHwgZXZlbnRUeXBlID09PSAna2V5dXAnKSkpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFZhbHVlIEhhbmRsaW5nXHJcbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09XHJcblxyXG4gICAgICAgICAgICAvLyBVc2VyIGF0dGVtcHRlZCB0byBkZWxldGUgYnV0IHJhdyB2YWx1ZSB3YXMgdW5hZmZlY3RlZC0tY29ycmVjdCB0aGlzIGdyaWV2b3VzIG9mZmVuc2VcclxuICAgICAgICAgICAgaWYgKChldmVudFR5cGUgPT09ICdpbnB1dCcpICYmIGlzRGVsZXRpb24gJiYgIXdhc1NlbGVjdGVkICYmIHZhbFVubWFza2VkID09PSB2YWxVbm1hc2tlZE9sZCkge1xyXG4gICAgICAgICAgICAgIHdoaWxlIChpc0tleUJhY2tzcGFjZSAmJiBjYXJldFBvcyA+IGNhcmV0UG9zTWluICYmICFpc1ZhbGlkQ2FyZXRQb3NpdGlvbihjYXJldFBvcykpIHtcclxuICAgICAgICAgICAgICAgIGNhcmV0UG9zLS07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHdoaWxlIChpc0tleURlbGV0ZSAmJiBjYXJldFBvcyA8IGNhcmV0UG9zTWF4ICYmIG1hc2tDYXJldE1hcC5pbmRleE9mKGNhcmV0UG9zKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNhcmV0UG9zKys7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHZhciBjaGFySW5kZXggPSBtYXNrQ2FyZXRNYXAuaW5kZXhPZihjYXJldFBvcyk7XHJcbiAgICAgICAgICAgICAgLy8gU3RyaXAgb3V0IG5vbi1tYXNrIGNoYXJhY3RlciB0aGF0IHVzZXIgd291bGQgaGF2ZSBkZWxldGVkIGlmIG1hc2sgaGFkbid0IGJlZW4gaW4gdGhlIHdheS5cclxuICAgICAgICAgICAgICB2YWxVbm1hc2tlZCA9IHZhbFVubWFza2VkLnN1YnN0cmluZygwLCBjaGFySW5kZXgpICsgdmFsVW5tYXNrZWQuc3Vic3RyaW5nKGNoYXJJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgIHZhbEFsdGVyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdmFsdWVzXHJcbiAgICAgICAgICAgIHZhbE1hc2tlZCA9IG1hc2tWYWx1ZSh2YWxVbm1hc2tlZCk7XHJcblxyXG4gICAgICAgICAgICBvbGRWYWx1ZSA9IHZhbE1hc2tlZDtcclxuICAgICAgICAgICAgb2xkVmFsdWVVbm1hc2tlZCA9IHZhbFVubWFza2VkO1xyXG4gICAgICAgICAgICBpRWxlbWVudC52YWwodmFsTWFza2VkKTtcclxuICAgICAgICAgICAgaWYgKHZhbEFsdGVyZWQpIHtcclxuICAgICAgICAgICAgICAvLyBXZSd2ZSBhbHRlcmVkIHRoZSByYXcgdmFsdWUgYWZ0ZXIgaXQncyBiZWVuICRkaWdlc3QnZWQsIHdlIG5lZWQgdG8gJGFwcGx5IHRoZSBuZXcgdmFsdWUuXHJcbiAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0Vmlld1ZhbHVlKHZhbFVubWFza2VkKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2FyZXQgUmVwb3NpdGlvbmluZ1xyXG4gICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB0eXBpbmcgYWx3YXlzIHBsYWNlcyBjYXJldCBhaGVhZCBvZiB0eXBlZCBjaGFyYWN0ZXIgaW4gY2FzZXMgd2hlcmUgdGhlIGZpcnN0IGNoYXIgb2ZcclxuICAgICAgICAgICAgLy8gdGhlIGlucHV0IGlzIGEgbWFzayBjaGFyIGFuZCB0aGUgY2FyZXQgaXMgcGxhY2VkIGF0IHRoZSAwIHBvc2l0aW9uLlxyXG4gICAgICAgICAgICBpZiAoaXNBZGRpdGlvbiAmJiAoY2FyZXRQb3MgPD0gY2FyZXRQb3NNaW4pKSB7XHJcbiAgICAgICAgICAgICAgY2FyZXRQb3MgPSBjYXJldFBvc01pbiArIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjYXJldEJ1bXBCYWNrKSB7XHJcbiAgICAgICAgICAgICAgY2FyZXRQb3MtLTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGNhcmV0IGlzIHdpdGhpbiBtaW4gYW5kIG1heCBwb3NpdGlvbiBsaW1pdHNcclxuICAgICAgICAgICAgY2FyZXRQb3MgPSBjYXJldFBvcyA+IGNhcmV0UG9zTWF4ID8gY2FyZXRQb3NNYXggOiBjYXJldFBvcyA8IGNhcmV0UG9zTWluID8gY2FyZXRQb3NNaW4gOiBjYXJldFBvcztcclxuXHJcbiAgICAgICAgICAgIC8vIFNjb290IHRoZSBjYXJldCBiYWNrIG9yIGZvcnRoIHVudGlsIGl0J3MgaW4gYSBub24tbWFzayBwb3NpdGlvbiBhbmQgd2l0aGluIG1pbi9tYXggcG9zaXRpb24gbGltaXRzXHJcbiAgICAgICAgICAgIHdoaWxlICghaXNWYWxpZENhcmV0UG9zaXRpb24oY2FyZXRQb3MpICYmIGNhcmV0UG9zID4gY2FyZXRQb3NNaW4gJiYgY2FyZXRQb3MgPCBjYXJldFBvc01heCkge1xyXG4gICAgICAgICAgICAgIGNhcmV0UG9zICs9IGNhcmV0QnVtcEJhY2sgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgoY2FyZXRCdW1wQmFjayAmJiBjYXJldFBvcyA8IGNhcmV0UG9zTWF4KSB8fCAoaXNBZGRpdGlvbiAmJiAhaXNWYWxpZENhcmV0UG9zaXRpb24oY2FyZXRQb3NPbGQpKSkge1xyXG4gICAgICAgICAgICAgIGNhcmV0UG9zKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2xkQ2FyZXRQb3NpdGlvbiA9IGNhcmV0UG9zO1xyXG4gICAgICAgICAgICBzZXRDYXJldFBvc2l0aW9uKHRoaXMsIGNhcmV0UG9zKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBpc1ZhbGlkQ2FyZXRQb3NpdGlvbihwb3MpeyByZXR1cm4gbWFza0NhcmV0TWFwLmluZGV4T2YocG9zKSA+IC0xOyB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0Q2FyZXRQb3NpdGlvbihpbnB1dCl7XHJcbiAgICAgICAgICAgIGlmICghaW5wdXQpIHJldHVybiAwO1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQuc2VsZWN0aW9uU3RhcnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBpbnB1dC5zZWxlY3Rpb25TdGFydDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAvLyBDdXJzZSB5b3UgSUVcclxuICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcclxuICAgICAgICAgICAgICBzZWxlY3Rpb24ubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBpbnB1dC52YWx1ZSA/IC1pbnB1dC52YWx1ZS5sZW5ndGggOiAwKTtcclxuICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uLnRleHQubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIHNldENhcmV0UG9zaXRpb24oaW5wdXQsIHBvcyl7XHJcbiAgICAgICAgICAgIGlmICghaW5wdXQpIHJldHVybiAwO1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQub2Zmc2V0V2lkdGggPT09IDAgfHwgaW5wdXQub2Zmc2V0SGVpZ2h0ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuOyAvLyBJbnB1dCdzIGhpZGRlblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UocG9zLCBwb3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0LmNyZWF0ZVRleHRSYW5nZSkge1xyXG4gICAgICAgICAgICAgIC8vIEN1cnNlIHlvdSBJRVxyXG4gICAgICAgICAgICAgIHZhciByYW5nZSA9IGlucHV0LmNyZWF0ZVRleHRSYW5nZSgpO1xyXG4gICAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgICAgICAgICAgIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIHBvcyk7XHJcbiAgICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBwb3MpO1xyXG4gICAgICAgICAgICAgIHJhbmdlLnNlbGVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0aW9uTGVuZ3RoKGlucHV0KXtcclxuICAgICAgICAgICAgaWYgKCFpbnB1dCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5zZWxlY3Rpb25TdGFydCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChpbnB1dC5zZWxlY3Rpb25FbmQgLSBpbnB1dC5zZWxlY3Rpb25TdGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgIHJldHVybiAoZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dC5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5kZXhPZlxyXG4gICAgICAgICAgaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xyXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChzZWFyY2hFbGVtZW50IC8qLCBmcm9tSW5kZXggKi8pe1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHZhciB0ID0gT2JqZWN0KHRoaXMpO1xyXG4gICAgICAgICAgICAgIHZhciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDtcclxuICAgICAgICAgICAgICBpZiAobGVuID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIG4gPSBOdW1iZXIoYXJndW1lbnRzWzFdKTtcclxuICAgICAgICAgICAgICAgIGlmIChuICE9PSBuKSB7IC8vIHNob3J0Y3V0IGZvciB2ZXJpZnlpbmcgaWYgaXQncyBOYU5cclxuICAgICAgICAgICAgICAgICAgbiA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG4gIT09IDAgJiYgbiAhPT0gSW5maW5pdHkgJiYgbiAhPT0gLUluZmluaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgIG4gPSAobiA+IDAgfHwgLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhuKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChuID49IGxlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB2YXIgayA9IG4gPj0gMCA/IG4gOiBNYXRoLm1heChsZW4gLSBNYXRoLmFicyhuKSwgMCk7XHJcbiAgICAgICAgICAgICAgZm9yICg7IGsgPCBsZW47IGsrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGsgaW4gdCAmJiB0W2tdID09PSBzZWFyY2hFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5dKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnLCBbJ25nQ29va2llcycsICd1aS5zb3J0YWJsZScsJ3VpLm1hc2snXSk7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5maWx0ZXIoJ3RlbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGVsKSB7XHJcbiAgICAgICAgaWYgKCF0ZWwpIHsgcmV0dXJuICcnOyB9XHJcblxyXG4gICAgICAgIHZhciB2YWx1ZSA9IHRlbC50b1N0cmluZygpLnRyaW0oKS5yZXBsYWNlKC9eXFwrLywgJycpO1xyXG5cclxuICAgICAgICB2YXIgY291bnRyeSA9IHZhbHVlLnNsaWNlKDAsIDEpO1xyXG4gICAgICAgIHZhciBjb2RlID0gdmFsdWUuc2xpY2UoMSwgNCk7XHJcbiAgICAgICAgdmFyIG51bWJlciA9IHZhbHVlLnNsaWNlKDQpO1xyXG5cclxuICAgICAgICBudW1iZXIgPSBudW1iZXIuc2xpY2UoMCwgMykgKyAnICcgKyBudW1iZXIuc2xpY2UoMywgNSkgKyAnICcgKyBudW1iZXIuc2xpY2UoNSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoJysnICsgY291bnRyeSArIFwiIChcIiArIGNvZGUgKyBcIikgXCIgKyBudW1iZXIpLnRyaW0oKTtcclxuICAgIH07XHJcbn0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5zZXJ2aWNlKCdjb250ZW50U2VydmljZScsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIC8v0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsFxyXG4gICAgdGhpcy5kZXNrdG9wTW9kYWwgPSBmdW5jdGlvbihhY3Rpb24sIHNwZWVkKXtcclxuICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoc3BlZWQpKSBzcGVlZCA9IDUwMDtcclxuXHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmctbGlzdCcpLmZhZGVPdXQoKTtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZycpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcblxyXG4gICAgICBpZiAoYWN0aW9uID09ICdub25lJykge1xyXG4gICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KHNwZWVkKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIG1vZGFsID0gYW5ndWxhci5lbGVtZW50KCcjJyArIGFjdGlvbik7XHJcblxyXG4gICAgICBpZigkKCcuc2hvdy1ibG9jaycpLmhhc0NsYXNzKCdhY3RpdmUnKSAgJiYgKCQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLmF0dHIoJ2lkJykgIT0gYWN0aW9uKSl7XHJcbiAgICAgICAgJCgnLnNob3ctYmxvY2suYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZhZGVPdXQoc3BlZWQsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlICB7XHJcbiAgICAgICAgbW9kYWwuZmFkZUluKHNwZWVkKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5tb2JpbGVNb2RhbCA9IGZ1bmN0aW9uKGNvbnRlbnQsIHR5cGUpe1xyXG4gICAgICB2YXIgcmVzdWx0TW9kYWwgPSBhbmd1bGFyLmVsZW1lbnQoJy5tLXJlc3VsdCcpO1xyXG4gICAgICB2YXIgcmVzdWx0Q29udGVudCA9IHJlc3VsdE1vZGFsLmZpbmQoJ3AnKTtcclxuXHJcbiAgICAgIHJlc3VsdE1vZGFsLnJlbW92ZUNsYXNzKCdtLW5lZ2F0aXZlJyk7XHJcbiAgICAgIGlmICh0eXBlID09ICdlcnJvcicpIHtcclxuICAgICAgICAgIHJlc3VsdE1vZGFsLmFkZENsYXNzKCdtLW5lZ2F0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzdWx0TW9kYWwuaGlkZSgpO1xyXG4gICAgICByZXN1bHRNb2RhbC5zaG93KCk7XHJcbiAgICAgIHJlc3VsdENvbnRlbnQudGV4dChjb250ZW50KTtcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIHJlc3VsdE1vZGFsLmhpZGUoKTtcclxuICAgICAgfSwgNTAwMCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLm1lc3NhZ2VNb2RhbCA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGhvc3RfdHlwZSl7XHJcbiAgICAgIHNwZWVkID0gNTAwO1xyXG4gICAgICBpZiAoaG9zdF90eXBlID09PSAnbW9iaWxlJykge1xyXG4gICAgICAgICAgdGhpcy5tb2JpbGVNb2RhbChtZXNzYWdlLCAnbm9uZScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmctbGlzdCcpLmZhZGVPdXQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgXHJcbiAgICAgICAgdmFyIG1vZGFsID0gYW5ndWxhci5lbGVtZW50KCcjbWVzc2FnZScpO1xyXG4gICAgICAgIG1vZGFsLnJlbW92ZUNsYXNzKCduZWdhdGl2ZScpO1xyXG4gICAgICAgIG1vZGFsLnJlbW92ZUNsYXNzKCdhbGVydCcpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gYW5ndWxhci5lbGVtZW50KCcjbWVzc2FnZSBwJyk7XHJcbiAgICAgIFxyXG4gICAgICAgIGlmKCQoJy5zaG93LWJsb2NrJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuICAgICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KHNwZWVkLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjb250ZW50Lmh0bWwobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIG1vZGFsLmZhZGVJbihzcGVlZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlICB7XHJcbiAgICAgICAgICBjb250ZW50Lmh0bWwobWVzc2FnZSk7XHJcbiAgICAgICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9ICAgIFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8v0JDQstGC0L7RgdC60YDQvtC70LjQvdCzINC00L4g0L3Rg9C20L3QvtCz0L4g0LHQu9C+0LrQsFxyXG4gICAgdGhpcy5zY3JvbGxQYWdlID0gZnVuY3Rpb24oaWQsIHNwZWVkKXtcclxuICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoc3BlZWQpKSBzcGVlZCA9IDYwMDtcclxuICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKGlkKS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgfSwgc3BlZWQpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdmFyIGN1cnJlbnRfc3BvdCA9IHt9O1xyXG4gICAgXHJcbiAgICB0aGlzLnNldFNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICAgICAgY3VycmVudF9zcG90ID0gc3BvdDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5nZXRTcG90ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRfc3BvdDtcclxuICAgIH1cclxuICAgIFxyXG59KTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLnNlcnZpY2UoJ2RpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4gICAgdmFyIHllc05vRGlhbG9nID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRleHRZZXMsIHRleHRObywgbWVzc2FnZSwgZGlhbG9nX2NsYXNzKSB7XHJcbiAgICAgIHNwZWVkID0gNTAwO1xyXG5cclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZy1saXN0JykuZmFkZU91dCgpO1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgIFxyXG4gICAgICB2YXIgbW9kYWwgPSBhbmd1bGFyLmVsZW1lbnQoJyNiLWRpYWxvZycpO1xyXG4gICAgICB2YXIgY29udGVudCA9IGFuZ3VsYXIuZWxlbWVudCgnI2ItZGlhbG9nIHAnKTtcclxuICAgICAgdmFyIGJ0blllcyA9IGFuZ3VsYXIuZWxlbWVudCgnI2ItZGlhbG9nIC55ZXMtYnV0dG9uJyk7XHJcbiAgICAgIHZhciBidG5ObyA9IGFuZ3VsYXIuZWxlbWVudCgnI2ItZGlhbG9nIC5uby1idXR0b24nKTtcclxuICAgICAgXHJcbiAgICAgIGlmKCQoJy5zaG93LWJsb2NrJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxyXG4gICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KDApO1xyXG4gICAgICBcclxuICAgICAgY29udGVudC5odG1sKG1lc3NhZ2UpO1xyXG4gICAgICBidG5ZZXMudGV4dCh0ZXh0WWVzKTtcclxuICAgICAgYnRuTm8udGV4dCh0ZXh0Tm8pO1xyXG4gICAgICBtb2RhbC5yZW1vdmVDbGFzcygnYWxlcnQnKTtcclxuICAgICAgbW9kYWwucmVtb3ZlQ2xhc3MoJ25lZ2F0aXZlJyk7XHJcbiAgICAgIGlmICh0eXBlb2YgZGlhbG9nX2NsYXNzICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICBtb2RhbC5hZGRDbGFzcyhkaWFsb2dfY2xhc3MpO1xyXG4gICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgXHJcbiAgICAgIGJ0blllcy5iaW5kKFwiY2xpY2tcIiwgY2JZZXMpOyAgIFxyXG4gICAgICBidG5Oby5iaW5kKFwiY2xpY2tcIiwgY2JObyk7XHJcbiAgICAgICQoZG9jdW1lbnQpLmJpbmQoXCJjbGlja1wiLCBjYk5vKTtcclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGNiWWVzKCkge1xyXG4gICAgICAgIGNhbGxiYWNrKCd5ZXMnKTtcclxuICAgICAgICBjbG9zZURpYWxvZygpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBjYk5vKCkge1xyXG4gICAgICAgIGNhbGxiYWNrKCdubycpO1xyXG4gICAgICAgIGNsb3NlRGlhbG9nKCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkge1xyXG4gICAgICAgIGJ0blllcy51bmJpbmQoXCJjbGlja1wiLCBjYlllcyk7ICBcclxuICAgICAgICBidG5Oby51bmJpbmQoXCJjbGlja1wiLCBjYk5vKTtcclxuICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoXCJjbGlja1wiLCBjYk5vKTtcclxuICAgICAgICBcclxuICAgICAgICBtb2RhbC5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmFkZU91dChzcGVlZCk7ICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHllc05vRGlhbG9nOiB5ZXNOb0RpYWxvZ1xyXG4gICAgfTtcclxuXHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ0RlbW9raXRDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJHRpbWVvdXQsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG5cclxuICAkc2NvcGUuJHdhdGNoKCdvcmRlci5uYW1lICsgb3JkZXIuZW1haWwgKyBvcmRlci5waG9uZSArIG9yZGVyLmFkZHJlc3MgKyBvcmRlci5jaXR5ICsgb3JkZXIuemlwICsgb3JkZXIuY291bnRyeSArIG9yZGVyLnNoaXBwaW5nICsgb3JkZXIucGF5bWVudCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuZmllbGQgPSBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLm9yZGVyID0ge1xyXG4gICAgbmFtZTonJyxcclxuICAgIGVtYWlsOicnLFxyXG4gICAgcGhvbmU6JycsXHJcbiAgICBhZGRyZXNzOicnLFxyXG4gICAgY2l0eTonJyxcclxuICAgIHppcDonJyxcclxuICAgIGNvdW50cnk6JycsXHJcbiAgICBzaGlwcGluZzogMSxcclxuICAgIHBheW1lbnQ6IDFcclxuICB9O1xyXG5cclxuICAkc2NvcGUucHJvZHVjdHMgPSB7fTtcclxuICAkc2NvcGUubWF4X3Byb2R1Y3RfaWQgPSAwO1xyXG4gICRzY29wZS5wcmljZXMgPSB7fTtcclxuICAkc2NvcGUuc2hpcHBpbmdzID0ge307XHJcbiAgJHNjb3BlLnBheW1lbnRzID0ge307XHJcblxyXG4gICRzY29wZS50b3RhbCA9IDA7XHJcbiAgJHNjb3BlLnRvTWFpbiA9IGZhbHNlO1xyXG5cclxuICAkc2NvcGUucmVnaXN0ZXJQcm9kdWN0ID0gZnVuY3Rpb24ocHJvZHVjdF9pZCwgcHJpY2UpIHtcclxuICAgICRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSA9IDA7XHJcbiAgICBpZiAocHJvZHVjdF9pZCA+ICRzY29wZS5tYXhfcHJvZHVjdF9pZClcclxuICAgICAgICAkc2NvcGUubWF4X3Byb2R1Y3RfaWQgPSBwcm9kdWN0X2lkO1xyXG4gICAgJHNjb3BlLnByaWNlc1twcm9kdWN0X2lkXSA9IHByaWNlO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5hZGRQcm9kdWN0ID0gZnVuY3Rpb24ocHJvZHVjdF9pZCkge1xyXG4gICAgaWYgKCRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSA8IDkpXHJcbiAgICAgICRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSsrO1xyXG4gICAgJHNjb3BlLmNhbGN1bGF0ZVN1bW0oKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZGVkdWN0UHJvZHVjdCA9IGZ1bmN0aW9uKHByb2R1Y3RfaWQpIHtcclxuICAgIGlmICgkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0gPiAwKVxyXG4gICAgICAkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0tLTtcclxuICAgICRzY29wZS5jYWxjdWxhdGVTdW1tKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlZ2lzdGVyU2hpcHBpbmcgPSBmdW5jdGlvbihzaGlwcGluZ19pZCwgcHJpY2UpIHtcclxuICAgICRzY29wZS5zaGlwcGluZ3Nbc2hpcHBpbmdfaWRdID0gcHJpY2U7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNldFNoaXBwaW5nID0gZnVuY3Rpb24oc2hpcHBpbmdfaWQsIGUpIHtcclxuICAgICAgJHNjb3BlLm9yZGVyLnNoaXBwaW5nID0gc2hpcHBpbmdfaWQ7XHJcbiAgICAgIGlmICh0eXBlb2YgZSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLmNsaWNrKCk7XHJcbiAgICAgICRzY29wZS5jYWxjdWxhdGVTdW1tKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlZ2lzdGVyUGF5bWVudCA9IGZ1bmN0aW9uKHBheW1lbnRfaWQsIGFjdGlvbikge1xyXG4gICAgICAkc2NvcGUucGF5bWVudHNbcGF5bWVudF9pZF0gPSBhY3Rpb247XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNldFBheW1lbnQgPSBmdW5jdGlvbihwYXltZW50X2lkLCBlKSB7XHJcbiAgICAgICRzY29wZS5vcmRlci5wYXltZW50ID0gcGF5bWVudF9pZDtcclxuICAgICAgaWYgKHR5cGVvZiBlICE9ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkuY2xpY2soKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuY2FsY3VsYXRlU3VtbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnN1bW0gPSAxMjA7XHJcblxyXG4gICAgJHNjb3BlLnRvdGFsID0gJHNjb3BlLnN1bW07XHJcbiAgICBpZiAoJHNjb3BlLm9yZGVyLnNoaXBwaW5nICYmIHR5cGVvZiAkc2NvcGUuc2hpcHBpbmdzWyRzY29wZS5vcmRlci5zaGlwcGluZ10gIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAkc2NvcGUudG90YWwgKz0gJHNjb3BlLnNoaXBwaW5nc1skc2NvcGUub3JkZXIuc2hpcHBpbmddO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5idXlEZW1vS2l0ID0gZnVuY3Rpb24ob3JkZXIpIHtcclxuICAgIGlmICghJHNjb3BlLm9yZGVyRm9ybS4kdmFsaWQpIHtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuZmllbGQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoJHNjb3BlLnRvTWFpbilcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XHJcbiAgICBlbHNlIHtcclxuICAgICAgb3JkZXIucHJvZHVjdHM9JHNjb3BlLnByb2R1Y3RzO1xyXG4gICAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9idXlEZW1vS2l0Jywgb3JkZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgaWYgKCdlbWFpbCcgPT0gZGF0YS5hY3Rpb24pIHtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICAgJHNjb3BlLnRvTWFpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS5maW5pc2hCdXR0b24gPSAkc2NvcGUudG9NYWluTWVzc2FnZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2RlbW8ta2l0LWJsb2NrJykuYWZ0ZXIoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZm9ybS15bS1wYXknKS5zdWJtaXQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuZmllbGQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ0hlbHBDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBjb250ZW50U2VydmljZSkge1xyXG5cclxuICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuXHJcbiAgJHNjb3BlLnNlbmQgPSBmdW5jdGlvbih1c2VyLCB2YWxpZCl7XHJcbiAgICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcbiAgICB1c2VyLmVtYWlsID0gdXNlci5oZWxwX2VtYWlsO1xyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2Uvc2VuZFF1ZXN0aW9uJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICRzY29wZS51c2VyLm5hbWUgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5oZWxwX2VtYWlsID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIucXVlc3Rpb24gPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5waG9uZSA9ICcnO1xyXG5cclxuICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgY29udGVudFNlcnZpY2Uudmlld01vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignUGhvbmVzQ29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAkc2NvcGUuaW5pdFBob25lcyA9IGZ1bmN0aW9uKGluaXRWYWx1ZSlcclxuICAgIHtcclxuICAgICAgICAkc2NvcGUucGhvbmVzTGlzdCA9IGluaXRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmluaXREZXZpY2VzID0gZnVuY3Rpb24oaW5pdFZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgICRzY29wZS5kZXZpY2VzTGlzdCA9IGluaXRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnBob25lc0xpc3QgPSBbXTtcclxuXHJcbiAgICAkc2NvcGUuZGV2aWNlc0xpc3QgPSBbXTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignU2xpZGVDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0KSB7XHJcblxyXG4gICRzY29wZS5JTUFHRV9XSURUSCA9IDMwMDtcclxuICAvLyRzY29wZS5GQURFX1NQRUVEID0gNjAwO1xyXG4gICRzY29wZS5GQURFX1NQRUVEID0gMDtcclxuXHJcbiAgJHNjb3BlLmdldFJhbmRvbUludCA9IGZ1bmN0aW9uKG1pbiwgbWF4KXtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5zcG90cyA9IHt9O1xyXG4gICRzY29wZS5zcG90cy5uYW1lID0gJ3Nwb3RzJztcclxuICAkc2NvcGUuc3BvdHMubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgJHNjb3BlLnNwb3RzLnNsaWRlcyA9IFtcclxuICAgIHtpZDoxLCBpbWc6J2JyYWNlX2JsdWUuanBnJ30sXHJcbiAgXTtcclxuICBcclxuICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kcyA9IFsxXTtcclxuICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNbMF07XHJcbiAgXHJcbiAgJHNjb3BlLnNwb3RzLmNhcmRzID0gW107XHJcbiAgJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQgID0gLTE7XHJcbiAgXHJcbiAgJHNjb3BlLnNwb3RzLmtleXMgPSBbXTtcclxuICAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50ICA9IC0xO1xyXG4gIFxyXG4gICRzY29wZS5zcG90cy5jdXJyZW50ID0gJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNfY3VycmVudDtcclxuICAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlID0gJ3dyaXN0YmFuZCc7XHJcbiAgJHNjb3BlLnNwb3RzLmNvbG9yX3JvdGF0aW9uID0gZmFsc2U7XHJcbiAgJHNjb3BlLnNwb3RzLnRpbWVyX3JvdGF0aW9uID0gZmFsc2U7XHJcbiAgLy8kc2NvcGUuZ2V0UmFuZG9tSW50KDAsICRzY29wZS53cmlzdGJhbmQuc2xpZGVzLmxlbmd0aCAtIDEpO1xyXG4gIFxyXG4gICRzY29wZS5zY3JvbGxUbyA9IGZ1bmN0aW9uKHNsaWRlciwgaW5kKSB7XHJcbiAgICBzbGlkZXIubGlzdHBvc2l0aW9uID0ge2xlZnQ6KCRzY29wZS5JTUFHRV9XSURUSCAqIGluZCAqIC0xKSArIFwicHhcIn07XHJcbiAgfTtcclxuICBcclxuICBhbmd1bGFyLmVsZW1lbnQod2luZG93KS5iaW5kKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgXHJcbiAgICAkc2NvcGUuc2xpZGVySW5pdCgpO1xyXG4gIH0pO1xyXG4gIFxyXG4gICRzY29wZS5zbGlkZXJJbml0ID0gZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICAgJHNjb3BlLnNwb3RzLnNsaWRlcyA9IFtcclxuICAgICAgICB7aWQ6MCwgaW1nOidicmFjZV9ibGFjay5wbmcnfSxcclxuICAgICAgICB7aWQ6MSwgaW1nOidicmFjZV9ibHVlLnBuZyd9LFxyXG4gICAgICAgIHtpZDoyLCBpbWc6J2JyYWNlX2dyZWVuLnBuZyd9LFxyXG4gICAgICAgIHtpZDozLCBpbWc6J2JyYWNlX3BhdHQwMS5wbmcnfSxcclxuICAgICAgICB7aWQ6NCwgaW1nOidicmFjZV9wYXR0MDIucG5nJ30sXHJcbiAgICAgICAge2lkOjUsIGltZzonYnJhY2VfcGF0dDAzLnBuZyd9LFxyXG4gICAgICAgIHtpZDo2LCBpbWc6J2JyYWNlX3BhdHQwNC5wbmcnfSxcclxuICAgICAgICB7aWQ6NywgaW1nOidicmFjZV9wYXR0MDUucG5nJ30sXHJcbiAgICAgICAge2lkOjgsIGltZzonYnJhY2VfcGF0dDA2LnBuZyd9LFxyXG4gICAgICAgIHtpZDo5LCBpbWc6J2JyYWNlX3BhdHQwNy5wbmcnfSxcclxuICAgICAgICB7aWQ6MTAsIGltZzonYnJhY2VfcmVkLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxMSwgaW1nOidicmFjZV93aGl0ZS5wbmcnfSxcclxuICAgICAgICB7aWQ6MTIsIGltZzonY2FyZF9ibGFjay5wbmcnfSxcclxuICAgICAgICB7aWQ6MTMsIGltZzonY2FyZF9ibHVlLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxNCwgaW1nOidjYXJkX2dyZWVuLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxNSwgaW1nOidjYXJkX3JlZC5wbmcnfSxcclxuICAgICAgICB7aWQ6MTYsIGltZzonY2FyZF93aGl0ZS5wbmcnfSxcclxuICAgICAgICB7aWQ6MTcsIGltZzonY2FyZF95ZWxsb3cucG5nJ30sXHJcbiAgICAgICAge2lkOjE4LCBpbWc6J2tleV9ibGFjay5wbmcnfSxcclxuICAgICAgICB7aWQ6MTksIGltZzona2V5X2JsdWUucG5nJ30sXHJcbiAgICAgICAge2lkOjIwLCBpbWc6J2tleV9ncmVlbi5wbmcnfSxcclxuICAgICAgICB7aWQ6MjEsIGltZzona2V5X3JlZC5wbmcnfSxcclxuICAgICAgICB7aWQ6MjIsIGltZzona2V5X3doaXRlLnBuZyd9LFxyXG4gICAgICAgIHtpZDoyMywgaW1nOidrZXlfeWVsbG93LnBuZyd9LFxyXG4gICAgICAgIHtpZDoyNCwgaW1nOidicmFjZV95ZWxsb3cucG5nJ30sXHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kcyA9IFswLCAxLCA0LCAyLCAzLCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDI0XTtcclxuICAgICAgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNfY3VycmVudCA9ICRzY29wZS5zcG90cy53cmlzdGJhbmRzWyRzY29wZS5nZXRSYW5kb21JbnQoMCwgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMubGVuZ3RoIC0gMSldO1xyXG4gICAgICBcclxuICAgICAgJHNjb3BlLnNwb3RzLmNhcmRzID0gWzEyLCAxMywgMTQsIDE1LCAxNiwgMTddO1xyXG4gICAgICAkc2NvcGUuc3BvdHMuY2FyZHNfY3VycmVudCAgPSAxNTtcclxuICAgICAgXHJcbiAgICAgICRzY29wZS5zcG90cy5rZXlzID0gWzE4LCAxOSwgMjAsIDIxLCAyMiwgMjNdO1xyXG4gICAgICAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50ICA9IDIwOyAgXHJcbiAgICAgIFxyXG4gICAgICAkc2NvcGUuc3BvdHMuaW5pdGVkID0gdHJ1ZTtcclxuICBcclxuICB9XHJcbiAgXHJcblxyXG4gICRzY29wZS5mYWRlVG8gPSBmdW5jdGlvbihzbGlkZXIsIGluZCkge1xyXG4gICAgaWYgKHNsaWRlci5jdXJyZW50ID09IGluZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoXCIjc2xpZGVyLVwiICsgc2xpZGVyLm5hbWUgKyBcIiAuZi1zbGlkZVwiKS5zdG9wKCk7XHJcbiAgICB2YXIgaWQgPSBcIiNcIiArIHNsaWRlci5uYW1lICsgXCJfXCIgKyBpbmQ7XHJcbiAgICBpZiAoIWFuZ3VsYXIuZWxlbWVudChpZCkubGVuZ3RoKVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgIHNsaWRlci5jdXJyZW50ID0gaW5kO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KFwiI3NsaWRlci1cIiArIHNsaWRlci5uYW1lICsgXCIgLmYtc2xpZGVbaWQhPVwiICtpZCArXCJdXCIpLmZhZGVPdXQoMCk7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoaWQpLmZhZGVJbigkc2NvcGUuRkFERV9TUEVFRCk7XHJcbiAgICBcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmZhZGVUb1dpc3RicmFuZHMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkc2NvcGUuZmFkZVRvKCRzY29wZS5zcG90cywgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNfY3VycmVudCkpXHJcbiAgICAgICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUgPSAnd3Jpc3RiYW5kJztcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5mYWRlVG9DYXJkcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCRzY29wZS5mYWRlVG8oJHNjb3BlLnNwb3RzLCAkc2NvcGUuc3BvdHMuY2FyZHNfY3VycmVudCkpXHJcbiAgICAgICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUgPSAnY2FyZCc7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuZmFkZVRvS2V5cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCRzY29wZS5mYWRlVG8oJHNjb3BlLnNwb3RzLCAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50KSlcclxuICAgICAgJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSA9ICdrZXknO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnN0YXJ0Q29sb3JzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJHNjb3BlLnNwb3RzLmNvbG9yX3JvdGF0aW9uKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICRzY29wZS5zcG90cy5jb2xvcl9yb3RhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgXHJcbiAgICBpZiAoJHNjb3BlLnNwb3RzLnRpbWVyX3JvdGF0aW9uKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgJHNjb3BlLnNwb3RzLnRpbWVyX3JvdGF0aW9uID0gdHJ1ZTtcclxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgJHNjb3BlLmNvbG9yUm90YXRpb24oKTtcclxuICAgIH0sIDEwMCk7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuc3RvcENvbG9ycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnNwb3RzLmNvbG9yX3JvdGF0aW9uID0gZmFsc2U7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuY29sb3JSb3RhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCEkc2NvcGUuc3BvdHMuY29sb3Jfcm90YXRpb24pIHtcclxuICAgICAgJHNjb3BlLnNwb3RzLnRpbWVyX3JvdGF0aW9uID0gZmFsc2U7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgICBcclxuICAgIGlmICgnd3Jpc3RiYW5kJyA9PSAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRfaW5kID0gLTE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zcG90cy53cmlzdGJhbmRzW2ldID09ICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQpXHJcbiAgICAgICAgICAgICAgY3VycmVudF9pbmQgPSBpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudF9pbmQgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCgkc2NvcGUuc3BvdHMud3Jpc3RiYW5kcy5sZW5ndGggLSAxKSA9PSBjdXJyZW50X2luZClcclxuICAgICAgICAgICAgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNfY3VycmVudCA9ICRzY29wZS5zcG90cy53cmlzdGJhbmRzWzBdO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1tjdXJyZW50X2luZCArIDFdO1xyXG5cclxuICAgICAgICAkc2NvcGUuZmFkZVRvV2lzdGJyYW5kcygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoJ2NhcmQnID09ICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUpIHtcclxuICAgICAgICB2YXIgY3VycmVudF9pbmQgPSAtMTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zcG90cy5jYXJkcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zcG90cy5jYXJkc1tpXSA9PSAkc2NvcGUuc3BvdHMuY2FyZHNfY3VycmVudClcclxuICAgICAgICAgICAgICBjdXJyZW50X2luZCA9IGk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50X2luZCA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoKCRzY29wZS5zcG90cy5jYXJkcy5sZW5ndGggLSAxKSA9PSBjdXJyZW50X2luZClcclxuICAgICAgICAgICAgJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMuY2FyZHNbMF07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMuY2FyZHNbY3VycmVudF9pbmQgKyAxXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZhZGVUb0NhcmRzKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICgna2V5JyA9PSAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRfaW5kID0gLTE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3BvdHMua2V5cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zcG90cy5rZXlzW2ldID09ICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQpXHJcbiAgICAgICAgICAgICAgY3VycmVudF9pbmQgPSBpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudF9pbmQgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCgkc2NvcGUuc3BvdHMua2V5cy5sZW5ndGggLSAxKSA9PSBjdXJyZW50X2luZClcclxuICAgICAgICAgICAgJHNjb3BlLnNwb3RzLmtleXNfY3VycmVudCA9ICRzY29wZS5zcG90cy5rZXlzWzBdO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMua2V5c1tjdXJyZW50X2luZCArIDFdO1xyXG5cclxuICAgICAgICAkc2NvcGUuZmFkZVRvS2V5cygpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgJHNjb3BlLnNwb3RzLnRpbWVyX3JvdGF0aW9uID0gdHJ1ZTtcclxuICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAkc2NvcGUuY29sb3JSb3RhdGlvbigpO1xyXG4gICB9LCAxMzAwKTtcclxuIFxyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnJhbmRvbVNsaWRlID0gZnVuY3Rpb24oc2xpZGVyKSB7XHJcbiAgICAkc2NvcGUuZmFkZVRvKHNsaWRlciwgJHNjb3BlLmdldFJhbmRvbUludCgwLCBzbGlkZXIuc2xpZGVzLmxlbmd0aCAtIDEpKTtcclxuICB9O1xyXG59KTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdTcG90Q29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGNvbXBpbGUsICR0aW1lb3V0LCBjb250ZW50U2VydmljZSwgZGlhbG9nU2VydmljZSkge1xyXG5cclxuLyog0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QtdGA0LXQvNC10L3QvdGL0YUgKi9cclxuXHJcbiAgJHNjb3BlLm1heFNpemUgPSAyNSoxMDI0KjEwMjQ7XHJcbiAgJHNjb3BlLnBvcHVwX3dpZHRoID0gNTAwO1xyXG4gICRzY29wZS5wb3B1cF9oZWlnaHQgPSA1NTA7XHJcbiAgJHNjb3BlLnByb2dyZXNzID0gMDtcclxuICAkc2NvcGUua2V5cyA9IFtdO1xyXG4gICRzY29wZS5hY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgJHNjb3BlLmVycm9yID0ge307XHJcbiAgJHNjb3BlLnJlc3VsdCA9IHt9O1xyXG5cclxuICAkc2NvcGUuc3BvdCA9IHt9O1xyXG4gICRzY29wZS5zcG90LmRpc2NvZGVzID0gMDtcclxuXHJcbiAgJHNjb3BlLmdlbmVyYWwgPSB7fTtcclxuICAkc2NvcGUuZ2VuZXJhbC52aWV3cyA9IGZhbHNlO1xyXG4gICRzY29wZS5ob3N0X21vYmlsZSA9IDA7XHJcblxyXG4gICRzY29wZS53YWxsZXQgPSB7fTtcclxuICAkc2NvcGUud2FsbGV0LmNhcmRzID0ge307XHJcblxyXG4gICRzY29wZS5zY3JvbGxfa2V5ID0gLTE7XHJcblxyXG4gICRzY29wZS5hY3Rpb25zID0ge307XHJcbiAgJHNjb3BlLmFjdGlvbnMucGFnZSA9ICcnO1xyXG4gICRzY29wZS5hY3Rpb25zLnBocmFzZSA9ICcnO1xyXG4gICRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzID0gZmFsc2U7XHJcbiAgJHNjb3BlLmFjdGlvbnMub2Zmc2V0ID0gMDtcclxuICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSAwO1xyXG4gIFxyXG4gICRzY29wZS50ZXh0ID0ge307XHJcbiAgXHJcbiAgJHNjb3BlLnRyYW5zcG9ydF90eXBlcyA9IFtdO1xyXG4gICRzY29wZS5jdXN0b21fY2FyZCA9IHt9O1xyXG4gICRzY29wZS5wcmV2X2N1c3RvbV9jYXJkID0ge307XHJcbiAgJHNjb3BlLnNlbGVjdGVkX3R5cGU9e307XHJcbiAgJHNjb3BlLmluX3JlcXVlc3QgPSBmYWxzZTtcclxuICAkc2NvcGUud2FsbGV0X2hpc3RvcnkgPSB7fVxyXG4gICRzY29wZS53YWxsZXRfaGlzdG9yeS5kYXRlID0gJyc7XHJcbiAgJHNjb3BlLndhbGxldF9oaXN0b3J5LmVtcHR5X2RhdGUgPSBmYWxzZTtcclxuICAkc2NvcGUuZGF0ZV9oaXN0b3J5X3Nob3duID0gZmFsc2U7XHJcbiAgXHJcbi8qIENSVUQg0LTQu9GPINGB0L/QvtGC0LAgKi9cclxuXHJcbiAgLy/QotGA0LjQs9C10YAg0L3QsCDRgdC90Y/RgtC40LUg0L7RiNC40LHQutC4INC/0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0L/QvtC70Y9cclxuICAkc2NvcGUuJHdhdGNoKCdzcG90LmNvZGUgKyBzcG90LnRlcm1zJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuZXJyb3IuY29kZSA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmVycm9yLnRlcm1zID0gZmFsc2U7XHJcbiAgfSk7XHJcblxyXG4gIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INGB0L/QvtGC0LBcclxuICAkc2NvcGUuYWRkU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIGlmICghc3BvdC5jb2RlKSB7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmNvZGUgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCEkc2NvcGUuc3BvdC50ZXJtcylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2FkZCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAkc2NvcGUuc3BvdC5kaXNjb2RlcyA9IGRhdGEuZGlzY29kZXM7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1saXN0JykucHJlcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FjdFNwb3QnKS5jbGljaygpO1xyXG4gICAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC5jb2RlO1xyXG4gICAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC50ZXJtcztcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfbW9iaWxlIHx8IDE9PXNwb3QubmVlZF9yZWxvYWQpXHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHA6Ly8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJy9zcG90L2xpc3QnO1xyXG4gICAgICB9ZWxzZSBpZiAoZGF0YS5lcnJvciA9PSAneWVzJykge1xyXG4gICAgICAgICRzY29wZS5lcnJvci5jb2RlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/Qo9C/0YDQsNCy0LvQtdC90LjQtSDQvtGB0L3QvtCy0L3Ri9C80Lgg0LHQu9C+0LrQsNC80Lgg0YHQv9C+0YIsINC60L7RiNC10LvQtdC6LCDQutGD0L/QvtC90YsuXHJcbiAgJHNjb3BlLiR3YXRjaCgnZ2VuZXJhbC52aWV3cyArIHNwb3QuZGlzY29kZXMnLCBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLnBhZ2UgPSAnJztcclxuICAgIGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLnVuYmluZCgnc2Nyb2xsJywgJHNjb3BlLmxvYWRNb3JlQ291cG9ucyk7XHJcblxyXG4gICAgaWYgKCRzY29wZS5nZW5lcmFsLnZpZXdzID09ICdzcG90Jyl7XHJcbiAgICAgICRzY29wZS52aWV3U3BvdCgkc2NvcGUuc3BvdCk7XHJcbiAgICB9IGVsc2UgaWYgKCRzY29wZS5nZW5lcmFsLnZpZXdzID09ICd3YWxsZXQnKXtcclxuICAgICAgJHNjb3BlLnZpZXdXYWxsZXQoJHNjb3BlLnNwb3QpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnY291cG9uJyl7XHJcbiAgICAgICRzY29wZS52aWV3Q291cG9ucygkc2NvcGUuc3BvdCwgJHNjb3BlLmFjdGlvbnMpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnc2V0dGluZ3MnKXtcclxuICAgICAgJHNjb3BlLnZpZXdzU2V0dGluZ3MoJHNjb3BlLnNwb3QpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAndHJhbnNwb3J0Jyl7XHJcbiAgICAgICRzY29wZS52aWV3VHJhbnNwb3J0KCRzY29wZS5zcG90KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLmJvZHlNaW5IZWlnaHQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGxpc3RIZWlnaHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWxpc3QnKS5oZWlnaHQoKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudCcpLmNzcygnbWluLWhlaWdodCcsIGxpc3RIZWlnaHQrMjAwKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUudmlld1Nwb3QgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgaWYgKHNwb3QuZGlzY29kZXMgPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB2YXIgc3BvdF9ibG9jayA9IGFuZ3VsYXIuZWxlbWVudCgnI3Nwb3QtYmxvY2snKTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3ZpZXcnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAkc2NvcGUua2V5cyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50X2l0ZXJhdGlvbiA9IDA7XHJcbiAgICAgICAgJHNjb3BlLmZpbGVVcGxvYWRJbml0KCk7XHJcblxyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuc2Nyb2xsX2tleSAmJiAkc2NvcGUuc2Nyb2xsX2tleSA+IDEpXHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5zY3JvbGxQYWdlKCcjYmxvY2stJyArICRzY29wZS5zY3JvbGxfa2V5KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5zY3JvbGxQYWdlKCdib2R5Jyk7XHJcbiAgICAgICAgJHNjb3BlLnNjcm9sbF9rZXkgPSAtMTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7Qs9C+INCx0LvQvtC60LAg0LIg0YHQv9C+0YJcclxuICAkc2NvcGUuYWRkQ29udGVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmFkZFZhbHVlKCRzY29wZS5zcG90LmNvbnRlbnQpO1xyXG4gIH07XHJcblxyXG4gIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90LXQv9GA0LjQstGP0LfQsNC90L3QvtCz0L4g0Log0YHQvtGG0YHQtdGC0Y/QvCDQutC+0L3RgtC10L3RgtCwXHJcbiAgJHNjb3BlLmFkZFZhbHVlID0gZnVuY3Rpb24obmV3VmFsdWUpe1xyXG4gICAgJHNjb3BlLnNwb3QuY29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc3BvdEFkZENvbnRlbnQnLCAkc2NvcGUuc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1jb250ZW50JykuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcblxyXG4gICAgICAgICRzY29wZS5zcG90LmtleXMucHVzaChkYXRhLmtleSk7XHJcbiAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudCA9ICcnO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgndGV4dGFyZWEnKS5yZW1vdmVDbGFzcygncHV0Jyk7XHJcblxyXG4gICAgICAgIGlmIChhbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybScpLmhhc0NsYXNzKCdvcGVuJykpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtJykuc2xpZGVVcCgwLCBmdW5jdGlvbigpe2FuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtIGEnKS5yZW1vdmVDbGFzcygnYmxhY2tvdXQnKTthbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybSBhJykuZmFkZVRvKDAsIDEpO30pO1xyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICB9LCA2MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgICRzY29wZS5yZXNldEN1cnNvcigpO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQv9C+0YDRj9C00L7QuiDQsdC70L7QutC+0LJcclxuICAkc2NvcGUuc2F2ZU9yZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zYXZlT3JkZXInLCAkc2NvcGUuc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG5cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J/QsNGA0LDQvNC10YLRgNGLINGB0L7RgNGC0LjRgNC+0LLQutC4XHJcbiAgJHNjb3BlLnNvcnRhYmxlT3B0aW9ucyA9IHtcclxuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICRzY29wZS5zYXZlT3JkZXIoKTtcclxuICAgIH0sXHJcbiAgICAnY29udGFpbm1lbnQnOicuc3BvdC1jb250ZW50JyxcclxuICAgICdoYW5kbGUnOiAnLm1vdmUnLFxyXG4gICAgJ3Njcm9sbFNlbnNpdGl2aXR5JzogNSxcclxuICAgICd0b2xlcmFuY2UnOiAncG9pbnRlcicsXHJcbiAgICAnb3BhY2l0eSc6MC44XHJcbiAgfTtcclxuXHJcbiAgLy8g0KPQtNCw0LvQtdC90LjQtSDQsdC70L7QutCwINCyINGB0L/QvtGC0LVcclxuICAkc2NvcGUucmVtb3ZlQ29udGVudCA9IGZ1bmN0aW9uKHNwb3QsIGtleSwgZSkge1xyXG4gICAgc3BvdC5rZXkgPSBrZXk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zcG90UmVtb3ZlQ29udGVudCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICB2YXIgc3BvdEl0ZW0gPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICAgICAgc3BvdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgJHNjb3BlLmtleXM9ZGF0YS5rZXlzO1xyXG4gICAgICAgIGlmIChkYXRhLm5ldERvd24pXHJcbiAgICAgICAgICAgICRzY29wZS5uZXREb3duKGRhdGEubmV0RG93bik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCg0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0YLQtdC60YHRgtC+0LLQvtCz0L4g0LHQu9C+0LrQsCDQsiDRgdC/0L7RgtC1XHJcbiAgJHNjb3BlLmVkaXRDb250ZW50ID0gZnVuY3Rpb24oc3BvdCwga2V5LCBlKSB7XHJcbiAgICBpZiAoIXNwb3QuY29udGVudF9uZXcpe1xyXG4gICAgICBzcG90LmtleSA9IGtleTtcclxuICAgICAgdmFyIHNwb3RJdGVtID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWVkaXQnKS5jbG9uZSgpO1xyXG5cclxuICAgICAgaWYgKHNwb3RJdGVtLmZpbmQoJ2EudHlwZS1saW5rJykuc2l6ZSgpID4gMCl7XHJcbiAgICAgICAgICAvL9GB0YHRi9C70LrQsFxyXG4gICAgICAgICAgdmFyIHNwb3RMaW5rID0gc3BvdEl0ZW0uZmluZCgnYS50eXBlLWxpbmsnKTtcclxuICAgICAgICAgICRzY29wZS5zcG90LmNvbnRlbnRfbmV3ID0gc3BvdExpbmsuZmluZCgnc3Bhbi5saW5rJykudGV4dCgpO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICAgIC8v0YLQtdC60YHRglxyXG4gICAgICAgICAgdmFyIHNwb3REYXRhID0gc3BvdEl0ZW0uZmluZCgncC5pdGVtLXR5cGVfX3RleHQnKTtcclxuICAgICAgICAgICRzY29wZS5zcG90LmNvbnRlbnRfbmV3ID0gc3BvdERhdGEudGV4dCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzcG90RWRpdC5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICBzcG90RWRpdC5maW5kKCd0ZXh0YXJlYScpLmZvY3VzKDEpO1xyXG4gICAgICBzcG90SXRlbS5oaWRlKCkuYmVmb3JlKCRjb21waWxlKHNwb3RFZGl0KSgkc2NvcGUpKTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgJHNjb3BlLmhpZGVTcG90RWRpdCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCh0L7RhdGA0LDQvdC10L3QuNC1INGC0LXQutGB0YLQvtCy0L7Qs9C+INCx0LvQvtC60LAg0LIg0YHQv9C+0YLQtVxyXG4gICRzY29wZS5zYXZlQ29udGVudCA9IGZ1bmN0aW9uKHNwb3QsIGUpIHtcclxuICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgIHZhciBzcG90SXRlbSA9IHNwb3RFZGl0Lm5leHQoKTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zcG90U2F2ZUNvbnRlbnQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0uc2hvdygpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC5jb250ZW50X25ldztcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0YDRj9GH0LXQvCDRgtC10LrRgdGC0L7QstGL0Lkg0LHQu9C+0Log0L/RgNC4INC60LvQuNC60LUg0LLQvdC1LCDQtNCw0L3QvdGL0LUg0YHQvtGF0YDQsNC90Y/QtdC8XHJcbiAgJHNjb3BlLmhpZGVTcG90RWRpdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCEkc2NvcGUuc3BvdC5jb250ZW50ICYmICEkc2NvcGUuc3BvdC5jb250ZW50X25ldykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudCgnI3Nwb3QtZWRpdCcpO1xyXG4gICAgdmFyIHNwb3RJdGVtID0gc3BvdEVkaXQubmV4dCgpO1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zcG90L3Nwb3RTYXZlQ29udGVudCcsICRzY29wZS5zcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0uc2hvdygpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC5jb250ZW50X25ldztcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0LXRgNC10LjQvNC10L3QvtCy0YvQstCw0LXQvCDRgdC/0L7RglxyXG4gICRzY29wZS5yZW5hbWVTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgaWYgKCFzcG90Lm5hbWUpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3JlbmFtZScsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyMnICsgc3BvdC5kaXNjb2RlcyArICcgaDMnKS50ZXh0KHNwb3QubmFtZSk7XHJcbiAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEuY29udGVudCwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YfQuNGJ0LDQtdC8INGB0L/QvtGCXHJcbiAgJHNjb3BlLmNsZWFuU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIGRpYWxvZ1NlcnZpY2UueWVzTm9EaWFsb2coZnVuY3Rpb24oZGlhbG9nX3Jlc3VsdCkge1xyXG4gICAgICBpZiAoZGlhbG9nX3Jlc3VsdCAhPSAneWVzJylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvc3BvdC9jbGVhbicsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgJHNjb3BlLmdlbmVyYWwudmlld3MgPSAnc3BvdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTsgIFxyXG4gICAgfSxcclxuICAgICRzY29wZS50ZXh0Lnllc19idG4sXHJcbiAgICAkc2NvcGUudGV4dC5ub19idG4sXHJcbiAgICAkc2NvcGUudGV4dC5jbGVhbl9zcG90LFxyXG4gICAgJ25lZ2F0aXZlJ1xyXG4gICAgKTsgIFxyXG4gIH07XHJcblxyXG4gIC8vINCj0LTQsNC70Y/QtdC8INGB0L/QvtGCXHJcbiAgJHNjb3BlLnJlbW92ZVNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICBkaWFsb2dTZXJ2aWNlLnllc05vRGlhbG9nKGZ1bmN0aW9uKGRpYWxvZ19yZXN1bHQpIHtcclxuICAgICAgaWYgKGRpYWxvZ19yZXN1bHQgIT0gJ3llcycpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvc3BvdC9yZW1vdmUnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsJy9zcG90L2xpc3QvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAkc2NvcGUudGV4dC55ZXNfYnRuLFxyXG4gICAgJHNjb3BlLnRleHQubm9fYnRuLFxyXG4gICAgJHNjb3BlLnRleHQucm1fc3BvdCxcclxuICAgICduZWdhdGl2ZSdcclxuICAgICk7ICBcclxuICB9O1xyXG5cclxuICAvLyDQnNC10L3Rj9C10Lwg0YHRgtCw0YLRg9GBINGB0L/QvtGC0LBcclxuICAkc2NvcGUuaXZpc2libGVTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgdmFyIHRpdGxlID0gJHNjb3BlLnRleHQubWtfaW52aXNpYmxlO1xyXG4gICAgdmFyIGRlc2NyID0gJHNjb3BlLnRleHQubWtfaW52aXNpYmxlX2Rlc2NyO1xyXG5cclxuICAgIGlmIChzcG90LnN0YXR1cyA9PSA2KSB7XHJcbiAgICAgICAgdGl0bGUgPSAkc2NvcGUudGV4dC5ta192aXNpYmxlO1xyXG4gICAgICAgIGRlc2NyID0gJHNjb3BlLnRleHQubWtfdmlzaWJsZV9kZXNjcjtcclxuICAgIH1cclxuICBcclxuICAgIGRpYWxvZ1NlcnZpY2UueWVzTm9EaWFsb2coZnVuY3Rpb24oZGlhbG9nX3Jlc3VsdCkge1xyXG4gICAgICBpZiAoZGlhbG9nX3Jlc3VsdCAhPSAneWVzJylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgXHJcbiAgICAgICRodHRwLnBvc3QoJy9zcG90L2ludmlzaWJsZScsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgJHNjb3BlLnNwb3Quc3RhdHVzID0gZGF0YS5zdGF0dXM7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyMnK3Nwb3QuZGlzY29kZXMpLnRvZ2dsZUNsYXNzKCdpbnZpc2libGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgICRzY29wZS50ZXh0Lnllc19idG4sXHJcbiAgICAkc2NvcGUudGV4dC5ub19idG4sXHJcbiAgICB0aXRsZSxcclxuICAgICduZWdhdGl2ZSdcclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQvtC60L3QsCDQvdCw0YHRgtGA0L7QtdC6XHJcbiAgJHNjb3BlLnZpZXdzU2V0dGluZ3MgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zZXR0aW5ncycsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBzcG90X2Jsb2NrLmVtcHR5KCk7XHJcbiAgICAgICAgc3BvdF9ibG9jay5odG1sKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgJHNjb3BlLmJvZHlNaW5IZWlnaHQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWNvbnRlbnRfcm93Jykuc2hvdygpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgIH0sNTAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutC+0YjQtdC70YzQutCwXHJcbiAgJHNjb3BlLnZpZXdXYWxsZXQgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC93YWxsZXQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0TGlzdENhcmQoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmJvZHlNaW5IZWlnaHQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWNvbnRlbnRfcm93Jykuc2hvdygpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgIH0sNTAwKTtcclxuICAgICAgICBcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkYXRlX2hpc3RvcnknKS5kYXRlcGlja2VyKHtcclxuICAgICAgICAgIHllYXJSYW5nZTogJzE5MDA6LTAnLFxyXG4gICAgICAgICAgbWF4RGF0ZTowLFxyXG4gICAgICAgICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcclxuICAgICAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiAoZGF0ZVRleHQsIGluc3QpIHtcclxuICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLndhbGxldF9oaXN0b3J5LmRhdGUgPSBkYXRlVGV4dDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gKGRhdGVUZXh0LCBpbnN0KSB7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS5kYXRlX2hpc3Rvcnlfc2hvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJHNjb3BlLnZpZXdTcG90KCRzY29wZS5zcG90KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrRg9C/0L7QvdC+0LJcclxuICAkc2NvcGUudmlld0NvdXBvbnMgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9jb3Vwb25zJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIFxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LLQutC70LDQtNC60Lgg0KLRgNCw0L3RgdC/0L7RgNGCXHJcbiAgJHNjb3BlLnZpZXdUcmFuc3BvcnQgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC90cmFuc3BvcnQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vQ9C/0LjRgdC+0Log0LrRg9C/0L7QvdC+0LJcclxuICAkc2NvcGUubGlzdENvdXBvbnMgPSBmdW5jdGlvbiAoc3BvdCwgYWN0aW9ucykge1xyXG4gICAgaWYgKCFhY3Rpb25zLnBhZ2UpIHJldHVybiBmYWxzZTtcclxuICAgIHZhciBsaXN0ID0gYW5ndWxhci5lbGVtZW50KCcjY291cG9ucy1saXN0Jyk7XHJcblxyXG4gICAgdmFyIGRhdGEgPSB7J2Rpc2NvZGVzJzogc3BvdC5kaXNjb2RlcywgJ3Rva2VuJzogc3BvdC50b2tlbiwgJ3BhZ2UnOiBhY3Rpb25zLnBhZ2UsICdwaHJhc2UnOiBhY3Rpb25zLnBocmFzZSwgJ29mZnNldCc6YWN0aW9ucy5vZmZzZXR9O1xyXG5cclxuICAgICRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzID0gdHJ1ZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2xpc3RDb3Vwb25zJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS5hY3Rpb25zLm9mZnNldCArPSBkYXRhLmNvdW50O1xyXG4gICAgICAgICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCA9IGRhdGEuY291bnRfYWxsO1xyXG5cclxuICAgICAgICBsaXN0LmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pLmVycm9yKGZ1bmN0aW9uKCkge1xyXG4gICAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gIH07XHJcblxyXG4gICRzY29wZS5maWx0ZXJDb3Vwb25zID0gZnVuY3Rpb24oc3BvdCwgYWN0aW9ucykge1xyXG4gICAgJHNjb3BlLmFjdGlvbnMub2Zmc2V0ID0gMDtcclxuICAgICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCA9IDA7XHJcbiAgICAkc2NvcGUubGlzdENvdXBvbnMoc3BvdCwgYWN0aW9ucyk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHQv9C40YHQvtC6INC60LDRgNGCXHJcbiAgJHNjb3BlLmdldExpc3RDYXJkID0gZnVuY3Rpb24oKXtcclxuICAgIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyAhPSAnd2FsbGV0JykgcmV0dXJuIGZhbHNlO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvbGlzdENhcmQnLCAkc2NvcGUud2FsbGV0KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLndhbGxldC5jYXJkcyA9IGRhdGEuY2FyZHM7XHJcbiAgICAgICAgJHNjb3BlLndhbGxldC5jYXJkc19jb3VudCA9IGRhdGEuY2FyZHNfY291bnQ7XHJcbiAgICAgICAgJHNjb3BlLndhbGxldC5saW5raW5nX2NhcmQgPSBkYXRhLmxpbmtpbmdfY2FyZDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgJHNjb3BlLmdldExpc3RDYXJkKCk7XHJcbiAgIH0sIDUwMDApO1xyXG4gIH07XHJcblxyXG4gIC8v0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutCw0YHRgtC+0LzQvdC+0LPQviDQvNCw0LrQtdGC0LAg0YLRgNCw0L3RgdC/0L7RgtGA0L3QvtC5INC60LDRgNGC0YtcclxuICAkc2NvcGUuc2hvd0N1c3RvbUNhcmQgPSBmdW5jdGlvbigpe1xyXG4gICAgJCgnI2N1c3RvbUNhcmQnKS5hZGRDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5oaWRlQ3VzdG9tQ2FyZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkKCcjY3VzdG9tQ2FyZCcpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICcnKTtcclxuICB9XHJcbiAgXHJcbiAgLy8g0JHQu9C+0LrQuNGA0L7QstC60LAg0LrQvtGI0LXQu9GM0LrQsFxyXG4gICRzY29wZS5ibG9ja2VkV2FsbGV0ID0gZnVuY3Rpb24oKXtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2Jsb2NrZWRXYWxsZXQnLCAkc2NvcGUud2FsbGV0KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLndhbGxldC5zdGF0dXMgPSBkYXRhLnN0YXR1cztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J7RgtC/0YDQsNCy0LrQsCDQt9Cw0L/RgNC+0YHQsCDQvdCwINC/0YDQuNCy0Y/Qt9C60YMg0LrQsNGA0YLRi1xyXG4gICRzY29wZS5saW5raW5nQ2FyZCA9IGZ1bmN0aW9uKGNhcmQpe1xyXG4gICAgaWYgKCFjYXJkLnRlcm1zKSByZXR1cm4gZmFsc2U7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoXCIjbGlua2luZ19jYXJkXCIgKS5zdWJtaXQoKTtcclxuICB9O1xyXG5cclxuICAvLyDQlNC10LvQsNC10Lwg0LrQsNGA0YLRgyDQv9C70LDRgtC10LbQvdC+0LlcclxuICAkc2NvcGUuc2V0UGF5bWVudENhcmQgPSBmdW5jdGlvbihjYXJkX2lkLCBlKXtcclxuICAgIGlmICgkc2NvcGUuaW5fcmVxdWVzdClcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICB2YXIgZGF0YSA9IHsndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ2NhcmRfaWQnOiBjYXJkX2lkfTtcclxuICAgICRzY29wZS5pbl9yZXF1ZXN0ID0gdHJ1ZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3NldFBheW1lbnRDYXJkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLm1haW4tY2FyZCcpLnJlbW92ZUNsYXNzKCdtYWluLWNhcmQnKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcygnbWFpbi1jYXJkJyk7XHJcbiAgICAgICAgJHNjb3BlLndhbGxldC5ibGFja2xpc3QgPSAxO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5saXN0SGlzdG9yeSgkc2NvcGUud2FsbGV0X2hpc3RvcnkuZGF0ZSk7XHJcbiAgICAgIH1cclxuICAgICAgJHNjb3BlLmluX3JlcXVlc3QgPSBmYWxzZTtcclxuICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycm9yKXskc2NvcGUuaW5fcmVxdWVzdCA9IGZhbHNlO30pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5lZGl0Q2FyZExpc3QgPSBmdW5jdGlvbigpe1xyXG4gICAgJCgnLnRhYmxlLWNhcmQnKS50b2dnbGVDbGFzcygnZWRpdCcpO1xyXG5cclxuICAgIGlmICgkc2NvcGUud2FsbGV0LmNhcmRfZWRpdCA9PT0gMCkge1xyXG4gICAgICAkc2NvcGUud2FsbGV0LmNhcmRfZWRpdCA9IDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkc2NvcGUud2FsbGV0LmNhcmRfZWRpdCA9IDA7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0KPQtNCw0LvRj9C10Lwg0LrQsNGA0YLRg1xyXG4gICRzY29wZS5yZW1vdmVDYXJkID0gZnVuY3Rpb24oY2FyZF9pZCl7XHJcbiAgICB2YXIgZGF0YSA9IHsndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ2NhcmRfaWQnOiBjYXJkX2lkfTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3JlbW92ZUNhcmQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLndhbGxldC5jYXJkc19jb3VudCAtPSAxO1xyXG4gICAgICAgIGRlbGV0ZSAkc2NvcGUud2FsbGV0LmNhcmRzW2NhcmRfaWRdO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQodGH0LXRgtGH0LjQuiDQvdCwINGB0YLRgNCw0L3QuNGG0LUg0YHQvtCz0LvQsNGI0LXQvdC40Y8g0L7QsSDQvtC/0LvQsNGC0LVcclxuICB2YXIgc3RvcHBlZDtcclxuICAkc2NvcGUuY291bnRSZXNldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnJlc2V0X3RpbWUgPSB0eXBlb2YgJHNjb3BlLnJlc2V0X3RpbWUgIT09ICd1bmRlZmluZWQnID8gJHNjb3BlLnJlc2V0X3RpbWU6MzA7XHJcbiAgICBzdG9wcGVkID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICgkc2NvcGUucmVzZXRfdGltZSA9PT0gMCkge1xyXG4gICAgICAgICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7XHJcbiAgICAgIH0gZWxzZSAkc2NvcGUucmVzZXRfdGltZS0tO1xyXG4gICAgICAkc2NvcGUuY291bnRSZXNldCgpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgfTtcclxuXHJcblxyXG4vKtCX0LDQs9GA0YPQt9C60LAg0YTQsNC50LvQvtCyICovXHJcblxyXG4gIC8vINCS0LXRiNCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC00LvRjyDQt9Cw0LPRgNGD0LfQutC4INGE0LDQudC70L7QslxyXG4gICRzY29wZS5maWxlVXBsb2FkSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBmaWxlX2RyYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJvcGJveCcpO1xyXG4gICAgdmFyIGZpbGVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1maWxlJyk7XHJcbiAgICBpZiAoZmlsZV9kcmFnICYmIGZpbGVfYnV0dG9uKSB7XHJcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgaWYgKHhoci51cGxvYWQpIHtcclxuICAgICAgICBmaWxlX2RyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBmaWxlRHJhZ0hvdmVyLCBmYWxzZSk7XHJcbiAgICAgICAgZmlsZV9kcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGZpbGVEcmFnSG92ZXIsIGZhbHNlKTtcclxuICAgICAgICBmaWxlX2RyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZpbGVTZWxlY3RIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgZmlsZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlsZVNlbGVjdEhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCX0LDQutCw0YfQutCwINGE0LDQudC70LAgaHRtbDVcclxuICBmdW5jdGlvbiBmaWxlRHJhZ0hvdmVyKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZS50eXBlID09ICdkcmFnb3Zlcicpe1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkcm9wYm94JykuYWRkQ2xhc3MoJ2hvdmVyJyk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Ryb3Bib3gnKS5yZW1vdmVDbGFzcygnaG92ZXInKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBmdW5jdGlvbiBmaWxlU2VsZWN0SGFuZGxlcihlKSB7XHJcbiAgICBmaWxlRHJhZ0hvdmVyKGUpO1xyXG4gICAgdmFyIGZpbGVzID0gZS50YXJnZXQuZmlsZXMgfHwgZS5kYXRhVHJhbnNmZXIuZmlsZXM7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGY7IGYgPSBmaWxlc1tpXTsgaSsrKSB7XHJcbiAgICAgICRzY29wZS51cGxvYWRGaWxlKGYpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0J7RgtC+0LHRgNCw0LbQsNC10Lwg0L/RgNC+0LPRgNC10YHRgSDQsdCw0YAg0Lgg0L/RgNC+0LvQuNGB0YLRi9Cy0LDQtdC8INGN0LrRgNCw0L0g0Log0L3QvtCy0L7QvNGDINCx0LvQvtC60YNcclxuICAkc2NvcGUudXBsb2FkQ29tcGxldGUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gZS50YXJnZXQucmVzcG9uc2VUZXh0O1xyXG4gICAgaWYgKHJlc3VsdCl7XHJcbiAgICAgIHZhciBkYXRhID0gYW5ndWxhci5mcm9tSnNvbihyZXN1bHQpO1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9ncmVzcy1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1jb250ZW50JykuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgJHNjb3BlLmtleXMucHVzaChkYXRhLmtleSk7XHJcblxyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1maWxlJykudmFsKCcnKTtcclxuXHJcbiAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICB9LCA2MDApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHQu9GD0YfQsNC50L3Ri9C8INC+0LHRgNCw0LfQvtC8INCz0LXQvdC10YDQuNGA0YPQtdC8INC30L3QsNGH0LXQvdC40LUg0LTQu9GPINGN0YTRhNC10LrRgtCwINC30LDQs9GA0YPQt9C60LhcclxuICBmdW5jdGlvbiB1cGxvYWRQcm9ncmVzcyhldnQpIHtcclxuICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcclxuICAgICAgaWYgKGV2dC5sZW5ndGhDb21wdXRhYmxlKSB7XHJcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGV2dC5sb2FkZWQgKiAxMDAgLyBldnQudG90YWwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gJ3VuYWJsZSB0byBjb21wdXRlJztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDQlNC10LnRgdGC0LLQuNC1INC10YHQu9C4INC30LDQs9GA0YPQt9C60LAg0L3QtSDRg9C00LDQu9Cw0YHRjFxyXG4gICRzY29wZS51cGxvYWRGYWlsZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Vycm9yLXVwbG9hZCcpLnNob3coKS5kZWxheSg4MDApLnNsaWRlVXAoJ3Nsb3cnKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUudXBsb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuXHJcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBpZiAoeGhyLnVwbG9hZCAmJiBmaWxlLnNpemUgPD0gJHNjb3BlLm1heFNpemUpIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvZ3Jlc3MtY29udGVudCcpLnNob3coKTtcclxuXHJcbiAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XHJcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGUubG9hZGVkICogMTAwIC8gZS50b3RhbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9ICd1bmFibGUgdG8gY29tcHV0ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHVwbG9hZFByb2dyZXNzLCBmYWxzZSk7XHJcbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICRzY29wZS51cGxvYWRGYWlsZWQsIGZhbHNlKTtcclxuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAkc2NvcGUudXBsb2FkQ29tcGxldGUsIGZhbHNlKTtcclxuICAgICAgeGhyLm9wZW4oJ1BPU1QnLCAnL3Nwb3QvdXBsb2FkJywgdHJ1ZSk7XHJcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUZpbGUtTmFtZScsIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChmaWxlLm5hbWUpKSk7XHJcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLURpc2NvZGVzJywgJHNjb3BlLnNwb3QuZGlzY29kZXMpO1xyXG4gICAgICB4aHIuc2VuZChmaWxlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuLyog0KHQvtGGINGB0LXRgtC4ICovXHJcblxyXG4gIC8v0L/QvtC00LPRgNGD0LfQutCwINCx0LvQvtC60LAg0YEg0LrQvtC90YLQtdC90YLQvtC8INGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLmxvYWRTb2NDb250ZW50ID0gZnVuY3Rpb24oa2V5KVxyXG4gIHtcclxuICAgIHZhciBkYXRhID0ge2Rpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzLCBrZXk6a2V5LCB0b2tlbjokc2NvcGUudXNlci50b2tlbn07XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvU29jTmV0Q29udGVudCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICB2YXIgb2xkSGVpZ2h0ID0gc3BvdEVkaXQuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciBvbGRTY3JvbGwgPSBzcG90RWRpdC5vZmZzZXQoKS50b3A7XHJcblxyXG4gICAgICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICBpZiAob2xkU2Nyb2xsIDwgJCgnaHRtbCwgYm9keScpLnNjcm9sbFRvcCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNibG9jay0nICsgZGF0YS5rZXkpLmhlaWdodCgpIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9GD0YHRgtCw0L3QvtCy0LjRgtGMINC/0L7QtNGB0LLQtdGC0LrRgyDQutC90L7Qv9C60Lgg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUubmV0Q2hlY2sgPSBmdW5jdGlvbihuZXROYW1lKSB7XHJcbiAgICB2YXIgZGF0YSA9IHt0b2tlbjokc2NvcGUudXNlci50b2tlbiwgbmV0TmFtZTpuZXROYW1lfTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L25ldENoZWNrJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICB2YXIgYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KFwiI2V4dHJhTWVkaWFGb3JtIGFbbmV0PSdcIiArIGRhdGEubmV0TmFtZSArIFwiJ11cIik7XHJcbiAgICAgICAgaWYgKGRhdGEuYmluZGVkKVxyXG4gICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdiaW5kZWQnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ2JpbmRlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9C/0L7QtNGB0LLQtdGC0LjRgtGMINC60L3QvtC/0LrRgyDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS5uZXRVcCA9IGZ1bmN0aW9uKG5ldE5hbWUpIHtcclxuICAgIHZhciBidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoXCIjZXh0cmFNZWRpYUZvcm0gYVtuZXQ9J1wiICsgbmV0TmFtZSArIFwiJ11cIik7XHJcbiAgICBidXR0b24uYWRkQ2xhc3MoJ2JpbmRlZCcpO1xyXG4gIH07XHJcblxyXG4gIC8v0L/QvtCz0LDRgdC40YLRjCDQutC90L7Qv9C60YMg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUubmV0RG93biA9IGZ1bmN0aW9uKG5ldE5hbWUpIHtcclxuICAgIHZhciBidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoXCIjZXh0cmFNZWRpYUZvcm0gYVtuZXQ9J1wiICsgbmV0TmFtZSArIFwiJ11cIik7XHJcbiAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ2JpbmRlZCcpO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0YDQuNCy0Y/Qt9C60LAg0YHQvtGG0YHQtdGC0LXQuVxyXG4gIHZhciBwb3B1cDtcclxuICB2YXIgc29jVGltZXI7XHJcbiAgdmFyIGxpa2VUaW1lcjtcclxuICB2YXIgbG95YWx0eVRpbWVyO1xyXG4gIHZhciBob2xkZXJUaW1lcjtcclxuXHJcbiAgLy/Rh9C10YDQtdC3INC/0LvQsNGI0LrRg1xyXG4gICRzY29wZS5iaW5kQnlQYW5lbCA9IGZ1bmN0aW9uKGJ1dHRvbk5hbWUpIHtcclxuICAgIHZhciBuZXROYW1lID0gYnV0dG9uTmFtZTtcclxuICAgIHZhciBkYXRhID0ge3Nwb3Q6ICRzY29wZS5zcG90LCB0b2tlbjokc2NvcGUudXNlci50b2tlbiwgbmV0TmFtZTpuZXROYW1lfTtcclxuICAgIC8v0L7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgdC10YLQuCDQv9C+INGB0YHRi9C70LrQtVxyXG4gICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoJHNjb3BlLnNwb3QuY29udGVudCkgJiYgJHNjb3BlLnNwb3QuY29udGVudC5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgZGF0YS5saW5rID0gJHNjb3BlLnNwb3QuY29udGVudDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zb2NfcGF0dGVybnMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNwb3QuY29udGVudC5pbmRleE9mKCRzY29wZS5zb2NfcGF0dGVybnNbaV0uYmFzZVVybCkgIT0gLTEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5ldE5hbWUgPSAkc2NvcGUuc29jX3BhdHRlcm5zW2ldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBkYXRhLm5ldE5hbWUgPSAkc2NvcGUuc29jX3BhdHRlcm5zW2ldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvQmluZEJ5UGFuZWwnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5wcm9maWxlSGludC5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5sb2dnZWRJbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcG9wdXA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICRzY29wZS5wb3B1cF93aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAkc2NvcGUucG9wdXBfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIG5ldE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlZGlyZWN0X3VyaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsICs9IHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaT0nKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0X3VyaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJXaWR0aCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoIC0gb3B0aW9ucy5wb3B1cC53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAgPSB3aW5kb3cub3Blbih1cmwgKyAnJmpzJywgXCJ5aWlfZWF1dGhfcG9wdXBcIiwgXCJ3aWR0aD1cIiArIG9wdGlvbnMucG9wdXAud2lkdGggKyBcIixoZWlnaHQ9XCIgKyBvcHRpb25zLnBvcHVwLmhlaWdodCArIFwiLGxlZnQ9XCIgKyBjZW50ZXJXaWR0aCArIFwiLHRvcD1cIiArIGNlbnRlckhlaWdodCArIFwiLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz1ubyx0b29sYmFyPW5vLG1lbnViYXI9bm8sbG9jYXRpb249bm8sZGlyZWN0b3JpZXM9bm8sc3RhdHVzPXllc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cCA9PT0gbnVsbCB8fCB0eXBlb2YocG9wdXApPT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IHVybCArICcmZGlzY29kZXM9JyArICRzY29wZS5zcG90LmRpc2NvZGVzICsgJyZuZXdGaWVsZD0xJyArICcmc3luY2g9dHJ1ZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5zcG90LmNvbnRlbnQgIT09ICd1bmRlZmluZWQnICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZiArPSAnJmxpbms9JyArIGVuY29kZVVSSUNvbXBvbmVudCgkc2NvcGUuc3BvdC5jb250ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmluZE5ldCA9IHtuYW1lOmRhdGEuc29jbmV0LCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2RlcywgbmV3RmllbGQ6MX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5zcG90LmNvbnRlbnQpICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpbmROZXQubGluayA9ICRzY29wZS5zcG90LmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmxpbmtDb3JyZWN0ID09ICdvaycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWRkLWNvbnRlbnQnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50PScnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ3RleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ3B1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzZXRDdXJzb3IoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoJyNibG9jay0nICsgZGF0YS5rZXkpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5ldCA9ICRzY29wZS5nZXRQYXR0ZXJuSW5kKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROZXQgPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbY3VycmVudE5ldF0uQmluZEJ5UGFzdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubGlua0NvcnJlY3QsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbChob2xkZXJUaW1lcik7XHJcbiAgICAgICAgICAgICAgICBob2xkZXJUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5oaW50VGltZXIsIDEwMDAwKTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXIgaDQnKS5odG1sKGRhdGEucHJvZmlsZUhpbnQpO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbm90ZUhvbGRlcicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNzb2NMaW5rSG9sZGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXIgaDQnKS5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNzb2NMaW5rSG9sZGVyIGg0JykuZmFkZVRvKDgwMCwgMC41LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7YW5ndWxhci5lbGVtZW50KCcjc29jTGlua0hvbGRlciBoNCcpLmZhZGVUbyg4MDAsIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7YW5ndWxhci5lbGVtZW50KCcjc29jTGlua0hvbGRlciBoNCcpLmZhZGVUbyg4MDAsIDAuNSwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXIgaDQnKS5mYWRlVG8oODAwLCAxKTt9KX0pfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9Cy0L7Qt9Cy0YDQsNGI0LDQtdGCINC40YHRhdC+0LTQvdGL0Lkg0L/Qu9C10LnRgdGF0L7Qu9C00LXRgCDQvdC+0LLQvtCz0L4g0L/QvtC70Y8sINCy0LzQtdGB0YLQviDRgdC+0L7QsdGJ0LXQvdC40Y8g0YEg0L/RgNC+0YHRjNCx0L7QuSDQstGB0YLQsNCy0LjRgtGMINGB0YHRi9C70LrRgyDQvdCwINGB0L7RhtGB0LXRgtGMXHJcbiAgJHNjb3BlLmhpbnRUaW1lciA9IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXIgaDQnKS5zdG9wKCk7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXIgaDQnKS5odG1sKCcnKTtcclxuICAgICAgaWYgKGFuZ3VsYXIuZWxlbWVudCgnI25vdGVIb2xkZXInKS5oYXNDbGFzcygnaGlkZScpKVxyXG4gICAgICB7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNzb2NMaW5rSG9sZGVyJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI25vdGVIb2xkZXInKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8v0LLQvtC30LLRgNCw0YjQsNC10YIg0LjQvdC00LXQutGBINGB0L7RhtGB0LXRgtC4INCyINGB0LrQvtC/0LUg0L/QviDQuNC80LXQvdC4XHJcbiAgJHNjb3BlLmdldFBhdHRlcm5JbmQgPSBmdW5jdGlvbihuZXROYW1lKXtcclxuICAgICAgdmFyIGN1cnJlbnROZXQgPSAtMTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc29jX3BhdHRlcm5zLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5uYW1lID09IG5ldE5hbWUpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY3VycmVudE5ldCA9IGk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGN1cnJlbnROZXQ7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9GA0LjQstGP0LfQutCwINC/0L4g0LrQvdC+0L/QutC1XHJcbiAgJHNjb3BlLmJpbmRTb2NpYWwgID0gZnVuY3Rpb24oc3BvdCwga2V5LCBlKSB7XHJcbiAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICBzcG90LmtleSA9IGtleTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2JpbmRTb2NpYWwnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgaWYoKGRhdGEuc29jbmV0ICE9ICdubycpICYmIChkYXRhLnNvY25ldC5sZW5ndGggPiAwKSl7XHJcbiAgICAgICAgICBpZiAoIWRhdGEubG9nZ2VkSW4pIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgaWQ6ICcnLFxyXG4gICAgICAgICAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogJHNjb3BlLnBvcHVwX3dpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAkc2NvcGUucG9wdXBfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIGRhdGEuc29jbmV0O1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gcmVkaXJlY3RfdXJpO1xyXG5cclxuICAgICAgICAgICAgdXJsICs9IHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCdyZWRpcmVjdF91cmk9JykgPT09IC0xKVxyXG4gICAgICAgICAgICAgIHVybCArPSAncmVkaXJlY3RfdXJpPScgKyBlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RfdXJpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjZW50ZXJXaWR0aCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoIC0gb3B0aW9ucy5wb3B1cC53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICAgIGNlbnRlckhlaWdodCA9ICh3aW5kb3cuc2NyZWVuLmhlaWdodCAtIG9wdGlvbnMucG9wdXAuaGVpZ2h0KSAvIDI7XHJcblxyXG4gICAgICAgICAgICBwb3B1cCA9IHdpbmRvdy5vcGVuKHVybCArICcmanMnLCBcInlpaV9lYXV0aF9wb3B1cFwiLCBcIndpZHRoPVwiICsgb3B0aW9ucy5wb3B1cC53aWR0aCArIFwiLGhlaWdodD1cIiArIG9wdGlvbnMucG9wdXAuaGVpZ2h0ICsgXCIsbGVmdD1cIiArIGNlbnRlcldpZHRoICsgXCIsdG9wPVwiICsgY2VudGVySGVpZ2h0ICsgXCIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9eWVzXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvcHVwID09PSBudWxsIHx8IHR5cGVvZihwb3B1cCk9PSd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybCArICcmZGlzY29kZXM9JyArIHNwb3QuZGlzY29kZXMgKyAnJmtleT0nICsgc3BvdC5rZXkgKyAnJnN5bmNoPXRydWUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcG9wdXAuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYmluZE5ldCA9IHtuYW1lOmRhdGEuc29jbmV0LCBkaXNjb2RlczpzcG90LmRpc2NvZGVzLCBrZXk6c3BvdC5rZXksIHNwb3RFZGl0OmFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKX07XHJcbiAgICAgICAgICAgICAgICBzb2NUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb2dpblRpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEubGlua0NvcnJlY3QgPT0gJ29rJylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmV0ID0gJHNjb3BlLmdldFBhdHRlcm5JbmQoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROZXQgPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2N1cnJlbnROZXRdLkJpbmRCeVBhc3RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoc3BvdC5rZXkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmxpbmtDb3JyZWN0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNlIGlmKGRhdGEubGlua0NvcnJlY3QgIT0gJ29rJyl7XHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmxpbmtDb3JyZWN0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQsNC60YbQuNC4LCDRgtGA0LXQsdGD0Y7RidC10Lkg0LbQtdGC0L7QvdCwINGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLmNoZWNrTGlrZSA9IGZ1bmN0aW9uKGlkX2FjdGlvbiwgZSlcclxuICB7XHJcbiAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgaWQ6aWRfYWN0aW9uLCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlc307XHJcbiAgICAgIHZhciBhY3Q7XHJcbiAgICAgIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvdXNlci9jaGVja0xpa2UnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlmICghZGF0YS5pc1NvY0xvZ2dlZClcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICRzY29wZS5wb3B1cF93aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJHNjb3BlLnBvcHVwX2hlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgcmVkaXJlY3RfdXJpID0gJ2h0dHA6Ly8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJy91c2VyL0JpbmRTb2NMb2dpbj9zZXJ2aWNlPScgKyBkYXRhLnNlcnZpY2U7XHJcbiAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZWRpcmVjdF91cmk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nO1xyXG4gICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaT0nKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsICs9ICdyZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdF91cmkpICsgJyYnO1xyXG4gICAgICAgICAgICAgICAgICB1cmwgKz0gJ2pzJztcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJXaWR0aCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoIC0gb3B0aW9ucy5wb3B1cC53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlckhlaWdodCA9ICh3aW5kb3cuc2NyZWVuLmhlaWdodCAtIG9wdGlvbnMucG9wdXAuaGVpZ2h0KSAvIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5ob3N0X21vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwID0gd2luZG93Lm9wZW4odXJsLCAneWlpX2VhdXRoX3BvcHVwJywgJ3dpZHRoPScgKyBvcHRpb25zLnBvcHVwLndpZHRoICsgJyxoZWlnaHQ9JyArIG9wdGlvbnMucG9wdXAuaGVpZ2h0ICsgJyxsZWZ0PScgKyBjZW50ZXJXaWR0aCArICcsdG9wPScgKyBjZW50ZXJIZWlnaHQgKyAnLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz1ubyx0b29sYmFyPW5vLG1lbnViYXI9bm8sbG9jYXRpb249bm8sZGlyZWN0b3JpZXM9bm8sc3RhdHVzPXllcycpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAocG9wdXAgPT09IG51bGwgfHwgdHlwZW9mKHBvcHVwKT09J3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IHVybCArICcmZGlzY29kZXM9JyArICRzY29wZS5zcG90LmRpc2NvZGVzICsgJyZjaGVrX2xpa2U9JyArIGlkX2FjdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja2luZ0FjdGlvbiA9IHtpZDppZF9hY3Rpb24sIHNoYXJpbmdfaW5kOmRhdGEuaW5kfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNVbmRlZmluZWQoZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25EaXYgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoJ2Rpdi5zcG90LWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICBsaWtlVGltZXIgPSAkdGltZW91dCgkc2NvcGUubGlrZXNUaW1lciwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoZGF0YS5jb250ZW50KSlcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlICYmICFhbmd1bGFyLmlzVW5kZWZpbmVkKGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgYWN0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCdkaXYuc3BvdC1pdGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFuZ3VsYXIuaXNVbmRlZmluZWQoZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICBhY3QgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgICAkc2NvcGUubGlrZXNUaW1lciA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgaWYgKCFwb3B1cC5jbG9zZWQpIHtcclxuICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgaWQ6JHNjb3BlLmNoZWNraW5nQWN0aW9uLmlkLCBzaGFyaW5nX2luZDokc2NvcGUuY2hlY2tpbmdBY3Rpb24uc2hhcmluZ19pbmQsIGRpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzfTtcclxuICAgICAgICAgICRodHRwLnBvc3QoJy91c2VyL2NoZWNrTGlrZScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmlzU29jTG9nZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvL9Cw0LrRhtC40Y8g0L/QvtC00LrQu9GO0YfQtdC90LBcclxuICAgICAgICAgICAgICAgIHBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25EaXYuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9uRGl2LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhLnNoYXJpbmdfbG9nZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C30LDQstC10YDRiNC10L0g0LvQvtCz0LjQvSDQv9C+INC/0L7RgdC70LXQtNC90LXQvNGDINGD0YHQu9C+0LLQuNGOXHJcbiAgICAgICAgICAgICAgICAgIHBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja0xpa2UoJHNjb3BlLmNoZWNraW5nQWN0aW9uLmlkKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL9C20LTQtdC8INC70L7Qs9C40L3QsFxyXG4gICAgICAgICAgICAgICAgbGlrZVRpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxpa2VzVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8v0L7RgtGB0LvQtdC20LjQstCw0LXRgiDQuNC30LzQtdC90LXQvdC40LUg0YHRgtCw0YLRg9GB0LAg0LDQutGG0LjQuSwg0L3QsNGF0L7QtNGP0YnQuNGF0YHRjyDQsiDQv9GA0L7RhtC10YHRgdC1INC/0L7QtNC60LvRjtGH0LXQvdC40Y9cclxuICAgICRzY29wZS5sb3lhbHR5VGltZXIgPSBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gYW5ndWxhci5lbGVtZW50KFwiLmNvbm5lY3RpbmdcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbG95YWx0eV9pZCA9IGFuZ3VsYXIuZWxlbWVudChpdGVtc1tpXSkuYXR0cignaWQnKS5zdWJzdHJpbmcoNyk7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja0xveWFsdHlDb25uZWN0aW9uKGxveWFsdHlfaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb3lhbHR5VGltZXIgPSAkdGltZW91dCgkc2NvcGUubG95YWx0eVRpbWVyLCAxMDAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgJHNjb3BlLnNldExveWFsdHlUaW1lciA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICBsb3lhbHR5VGltZXIgPSAkdGltZW91dCgkc2NvcGUubG95YWx0eVRpbWVyLCAxMDAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgJHNjb3BlLmNoZWNrTG95YWx0eUNvbm5lY3Rpb24gPSBmdW5jdGlvbihpZF9hY3Rpb24pIHtcclxuICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBpZDppZF9hY3Rpb24sIGRpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzfTtcclxuICAgICAgdmFyIGFjdD1hbmd1bGFyLmVsZW1lbnQoJyNjb3Vwb24tJyArIGlkX2FjdGlvbik7XHJcbiAgICAgICRodHRwLnBvc3QoJy91c2VyL2NoZWNrTG95YWx0eUNvbm5lY3Rpb24nLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIChkYXRhLmNvbm5lY3RlZCkgJiYgZGF0YS5jb25uZWN0ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYWN0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgYWN0LnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICRzY29wZS5kaXNhYmxlQWN0aW9uID0gZnVuY3Rpb24oZSwgaWRfYWN0aW9uKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgaWQ6aWRfYWN0aW9uLCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlc307XHJcbiAgICAgICAgdmFyIGFjdDtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvdXNlci9kaXNhYmxlTG95YWx0eScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5ob3N0X21vYmlsZSlcclxuICAgICAgICAgICAgICAgICAgICBhY3QgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoJ2Rpdi5zcG90LWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBhY3QgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhY3QuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICBhY3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy/Qv9GA0LjQstGP0LfQutCwINGB0L7RhtGB0LXRgtC4INC4INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwLCDQtdGB0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LfQsNC70L7Qs9C40L3QuNC70YHRjyDRh9C10YDQtdC3INGB0L7RhtGB0LXRgtGMXHJcbiAgICAkc2NvcGUubG9naW5UaW1lciA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgaWYgKCFwb3B1cC5jbG9zZWQpIHtcclxuICAgICAgICB2YXIgbmV0UGFyYW1zID0ge25hbWU6JHNjb3BlLmJpbmROZXQubmFtZSwgZGlzY29kZXM6JHNjb3BlLmJpbmROZXQuZGlzY29kZXMsIGtleTokc2NvcGUuYmluZE5ldC5rZXl9O1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5iaW5kTmV0Lm5ld0ZpZWxkKSAmJiAxID09ICRzY29wZS5iaW5kTmV0Lm5ld0ZpZWxkKVxyXG4gICAgICAgICAgICBuZXRQYXJhbXMubmV3RmllbGQgPSAxO1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5iaW5kTmV0LmxpbmspICYmICRzY29wZS5iaW5kTmV0LmxpbmsubGVuZ3RoKVxyXG4gICAgICAgICAgICBuZXRQYXJhbXMubGluayA9ICRzY29wZS5iaW5kTmV0Lmxpbms7XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgYmluZE5ldDpuZXRQYXJhbXN9O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9zcG90L2JpbmRlZENvbnRlbnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAodHlwZW9mIChkYXRhLmxvZ2dlZEluKSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgKGRhdGEubGlua0NvcnJlY3QpICE9ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgIGlmIChkYXRhLmxvZ2dlZEluKXtcclxuICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgaWYoZGF0YS5saW5rQ29ycmVjdCA9PSAnb2snKXtcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5uZXdGaWVsZCl7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudD0nJztcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgndGV4dGFyZWEnKS5yZW1vdmVDbGFzcygncHV0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc2V0Q3Vyc29yKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3AgLSAxMDA7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdmFyIHNwb3RFZGl0ID0gJHNjb3BlLmJpbmROZXQuc3BvdEVkaXQ7XHJcbiAgICAgICAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShkYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmJpbmROZXQgPSB7fTtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnROZXQgPSAkc2NvcGUuZ2V0UGF0dGVybkluZChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50TmV0ID4gLTEpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2N1cnJlbnROZXRdLkJpbmRCeVBhc3RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoZGF0YS5saW5rQ29ycmVjdCwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBzb2NUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb2dpblRpbWVyLCAxMDAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgLy/QntGC0LLRj9C30LrQsCDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS51bkJpbmRTb2NpYWwgID0gZnVuY3Rpb24oc3BvdCwga2V5LCBlKSB7XHJcbiAgICBzcG90LmtleSA9IGtleTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L1VuQmluZFNvY2lhbCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgaWYgKGRhdGEubmV0RG93bilcclxuICAgICAgICAgICAgJHNjb3BlLm5ldERvd24oZGF0YS5uZXREb3duKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmdldFNvY1BhdHRlcm5zID0gZnVuY3Rpb24oKXtcclxuICAgICRzY29wZS5mcmVlU29jaWFsID0gdHJ1ZTtcclxuICAgIGlmICh0eXBlb2YgKCRzY29wZS5zb2NfcGF0dGVybnMpID09ICd1bmRlZmluZWQnKVxyXG4gICAge1xyXG4gICAgICB2YXIgZGF0YSA9IHt0b2tlbjokc2NvcGUudXNlci50b2tlbn07XHJcbiAgICAgICRodHRwLnBvc3QoJy9zcG90L1NvY1BhdHRlcm5zJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgJHNjb3BlLnNvY19wYXR0ZXJucyA9IGRhdGEuc29jX3BhdHRlcm5zO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNvY19wYXR0ZXJucy5sZW5ndGg7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mICgkc2NvcGUuc29jX3BhdHRlcm5zW2ldLkJpbmRCeVBhc3RlKSA9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbaV0uQmluZEJ5UGFzdGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8v0YPRgdGC0LDQvdC+0LLQutCwINGA0LDQt9C80LXRgCDQv9GA0L7QuNCz0YDRi9Cy0LDRgtC10LvRjyBZb3VUdWJlINC40LvQuCBWaW1lb1xyXG4gICRzY29wZS5zZXRWaWRlb1NpemUgPSBmdW5jdGlvbihibG9ja0tleSlcclxuICB7XHJcbiAgICB2YXIgcGxheWVyO1xyXG4gICAgaWYgKGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBibG9ja0tleSArICcgLnZpZGVvLXZpbWVvJykubGVuZ3RoID09IDEpXHJcbiAgICB7XHJcbiAgICAgIHBsYXllciA9IGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBibG9ja0tleSArICcgLnZpZGVvLXZpbWVvJyk7XHJcbiAgICAgIHBsYXllci5jc3MoJ3dpZHRoJywgJzEwMCUnKTtcclxuICAgICAgcGxheWVyLmNzcygnaGVpZ2h0JywgKHBhcnNlSW50KHBsYXllci5jc3MoJ3dpZHRoJyksIDEwKSAvIHBsYXllci5hdHRyKCdyZWwnKSArICdweCcpKTtcclxuICAgIH0gZWxzZSBpZiAoYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGJsb2NrS2V5ICsgJyAueXRfcGxheWVyJykubGVuZ3RoID09IDEpe1xyXG4gICAgICBwbGF5ZXIgPSBhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgYmxvY2tLZXkgKyAnIC55dF9wbGF5ZXInKTtcclxuICAgICAgcGxheWVyLmNzcygnd2lkdGgnLCAnMTAwJScpO1xyXG4gICAgICBwbGF5ZXIuY3NzKCdoZWlnaHQnLCAocGFyc2VJbnQocGxheWVyLmNzcygnd2lkdGgnKSwgMTApIC8gcGxheWVyLmF0dHIoJ3JlbCcpICsgJ3B4JykpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuICAkc2NvcGUuc2V0TmV3UGFzcyA9IGZ1bmN0aW9uKHNwb3QpXHJcbiAge1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc2V0U3BvdFBhc3MnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyAmJiB0eXBlb2YgKGRhdGEuc2F2ZWQpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjc2F2ZVBhc3NCdXR0b24nKS50ZXh0KGRhdGEuc2F2ZWQpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgKCRzY29wZS5zcG90LnBhc3MpICE9ICd1bmRlZmluZWQnICYmIHNwb3QucGFzcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Jlc2V0UGFzc0J1dHRvbicpLnNob3coKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Jlc2V0UGFzc0J1dHRvbicpLmhpZGUoKTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRhLmVycm9yID09ICd5ZXMnKSB7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNzZXRQYXNzRm9ybSBpbnB1dFtuYW1lPW5ld1Bhc3NdJykuYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZXNldFBhc3MgPSBmdW5jdGlvbihzcG90KVxyXG4gIHtcclxuICAgIHNwb3QucGFzcyA9ICcnO1xyXG4gICAgJHNjb3BlLnNldE5ld1Bhc3Moc3BvdCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNhdmVQYXNzQnV0dG9uVGV4dCA9IGZ1bmN0aW9uKHRleHQpXHJcbiAge1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcjc2F2ZVBhc3NCdXR0b24nKS50ZXh0KHRleHQpO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcjc2V0UGFzc0Zvcm0gaW5wdXRbbmFtZT1uZXdQYXNzXScpLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5jaGVja1N0YXR1c1Nwb3QgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZXNldEN1cnNvciA9IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuY3Vyc29yQm9keSkgJiYgJHNjb3BlLmN1cnNvckJvZHkubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJ2JvZHknKS5jc3MoJ2N1cnNvcicsICRzY29wZS5jdXJzb3JCb2R5KTtcclxuICAgICAgZGVsZXRlICRzY29wZS5jdXJzb3JCb2R5O1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJ2JvZHknKS5jc3MoJ2N1cnNvcicsICdkZWZhdWx0Jyk7XHJcblxyXG4gICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoJHNjb3BlLmN1cnNvclRleHRhcmVhKSAmJiAkc2NvcGUuY3Vyc29yVGV4dGFyZWEubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkcm9wYm94IHRleHRhcmVhJykuY3NzKCdjdXJzb3InLCAkc2NvcGUuY3Vyc29yVGV4dGFyZWEpO1xyXG4gICAgICBkZWxldGUgJHNjb3BlLmN1cnNvclRleHRhcmVhO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkcm9wYm94IHRleHRhcmVhJykuY3NzKCdjdXJzb3InLCAndGV4dCcpO1xyXG4gIH07XHJcblxyXG4gIC8v0LjQt9C80LXQvdC10L3QuNC1INGB0YLRgNCw0L3QuNGG0Ysg0YTQuNC70YzRgtGA0LAg0LrRg9C/0L7QvdC+0LJcclxuICAkc2NvcGUuJHdhdGNoKCdhY3Rpb25zLnBhZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLm9mZnNldCA9IDA7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSAwO1xyXG4gICAgdmFyIGxpc3QgPSBhbmd1bGFyLmVsZW1lbnQoJyNjb3Vwb25zLWxpc3QnKTtcclxuICAgIGxpc3QuZW1wdHkoKTtcclxuICAgICRzY29wZS5saXN0Q291cG9ucygkc2NvcGUuc3BvdCwgJHNjb3BlLmFjdGlvbnMpO1xyXG4gIH0pO1xyXG5cclxuICAkc2NvcGUuY291cG9uc1Njcm9sbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLmJpbmQoJ3Njcm9sbCcsICRzY29wZS5sb2FkTW9yZUNvdXBvbnMpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5sb2FkTW9yZUNvdXBvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmKGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgYW5ndWxhci5lbGVtZW50KHdpbmRvdykuaGVpZ2h0KCkgPj0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5oZWlnaHQoKSAtIDIwMCAmJiAhJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgJiYgJHNjb3BlLmFjdGlvbnMub2Zmc2V0IDwgJHNjb3BlLmFjdGlvbnMuY291bnRfYWxsKSB7XHJcbiAgICAgICAgJHNjb3BlLmxpc3RDb3Vwb25zKCRzY29wZS5zcG90LCAkc2NvcGUuYWN0aW9ucyk7XHJcbiAgICAgIH1cclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5pbml0VHJhbnNwb3J0VHlwZSA9IGZ1bmN0aW9uKHR5cGVfaWQsIHR5cGVfbmFtZSwgdHlwZV9pbWcpIHtcclxuICAgICRzY29wZS50cmFuc3BvcnRfdHlwZXNbJHNjb3BlLnRyYW5zcG9ydF90eXBlcy5sZW5ndGhdID0ge2lkOnR5cGVfaWQsIG5hbWU6dHlwZV9uYW1lLCBpbWc6dHlwZV9pbWd9O1xyXG4gIH07XHJcbiAgXHJcbiAgLy/QktGL0LHQvtGAINC30LDQtNC90LjQutCwINGC0YDQsNC90YHQv9C+0YDRgtC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNldFR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAkc2NvcGUuY3VzdG9tX2NhcmQuYmFjayA9IHR5cGUuaWQ7XHJcblxyXG4gICAgaWYgKHR5cGUuaW1nKXtcclxuICAgICAgJCgnI2NhcmQtYmFjaycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoL3VwbG9hZHMvdHJhbnNwb3J0LycgKyB0eXBlLmltZyArICcpJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8v0JfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC40L3QutC4INC00LvRjyDQvNCw0LrQtdGC0LAg0YLRgNCw0L3RgdC/0L7RgNGC0L3QvtC5INC60LDRgNGC0YtcclxuICAkc2NvcGUuc2VuZEltZyA9IGZ1bmN0aW9uKGVsKSB7XHJcbiAgICB2YXIgZm9ybSA9ICQoZWwpLnBhcmVudHMoJ2Zvcm0nKTtcclxuICAgIGlmICgkKGVsKS52YWwoKSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciBkaXNjb2Rlc19pbnB1dCA9IGZvcm0uY2hpbGRyZW4oJ2lucHV0W25hbWU9ZGlzY29kZXNfaWRdJyk7XHJcbiAgICB2YXIgdG9rZW5faW5wdXQgPSBmb3JtLmNoaWxkcmVuKCdpbnB1dFtuYW1lPXRva2VuXScpO1xyXG4gICAgdmFyIHR5cGVfaW5wdXQgPSBmb3JtLmNoaWxkcmVuKCdpbnB1dFtuYW1lPWltZ190eXBlXScpO1xyXG4gICAgdmFyIGZvcm1fc3BhbiA9IGZvcm0uZmluZCgnc3Bhbi51cGxvYWQtaG9sZGVyJyk7XHJcbiAgICB2YXIgZm9ybV9pY29uID0gZm9ybS5maW5kKCdpLnVwbG9hZC1ob2xkZXInKTtcclxuICAgIHZhciBmb3JtX2ltZyA9IGZvcm0uZmluZCgnaW1nLnVwbG9hZC1ob2xkZXInKTtcclxuICAgIFxyXG4gICAgdmFyIHNwb3QgPSBjb250ZW50U2VydmljZS5nZXRTcG90KCk7XHJcbiAgICBcclxuICAgIGlmIChkaXNjb2Rlc19pbnB1dC5sZW5ndGgpXHJcbiAgICAgICAgZGlzY29kZXNfaW5wdXQudmFsKHNwb3QuZGlzY29kZXMpO1xyXG4gICAgICAgIFxyXG4gICAgaWYgKHRva2VuX2lucHV0Lmxlbmd0aClcclxuICAgICAgICB0b2tlbl9pbnB1dC52YWwoc3BvdC50b2tlbik7XHJcblxyXG4gICAgZm9ybS5hamF4U3VibWl0KHtcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oanNvbl9kYXRhLCBzdGF0dXNUZXh0LCB4aHIsIGZvcm0pIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBhbmd1bGFyLmZyb21Kc29uKGpzb25fZGF0YSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZGF0YS5lcnJvcj1cIm5vXCIpIHtcclxuICAgICAgICAgICAgICBpZiAoZm9ybV9zcGFuLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIGZvcm1fc3Bhbi5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgIGlmIChmb3JtX2ljb24ubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgZm9ybV9pY29uLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgZm9ybV9pbWcucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICBmb3JtX2ltZy5hdHRyKFwic3JjXCIsIGRhdGEucGF0aCArICc/dmVyPScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICgndHJhbnNwb3J0X3Bob3RvJyA9PSB0eXBlX2lucHV0LnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY3VzdG9tX2NhcmQucGhvdG8gPSBkYXRhLnBhdGg7XHJcbiAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ3RyYW5zcG9ydF9sb2dvJyA9PSB0eXBlX2lucHV0LnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY3VzdG9tX2NhcmQubG9nbyA9IGRhdGEucGF0aDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuc2hvd0ltYWdlQ3JvcHBlciA9IGZhbHNlO1xyXG4gICRzY29wZS5zaG93TG9nb0Nyb3BwZXIgPSBmYWxzZTtcclxuICBcclxuICAkc2NvcGUuc2V0U3BvdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY29udGVudFNlcnZpY2Uuc2V0U3BvdCgkc2NvcGUuc3BvdCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8v0JfQsNC60LDQtyDRgtGA0LDQvdGB0L/QvtGA0YLQvdC+0Lkg0LrQsNGA0YLRiyDQv9C+INC80LDQutC10YLRg1xyXG4gICRzY29wZS5vcmRlclRyYW5zcG9ydENhcmQgPSBmdW5jdGlvbihjdXN0b21fY2FyZCwgdmFsaWQsIG1lc3NhZ2VfdGV4dCkge1xyXG4gICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciBzcG90ID0gY29udGVudFNlcnZpY2UuZ2V0U3BvdCgpO1xyXG4gICAgY3VzdG9tX2NhcmQudG9rZW4gPSBzcG90LnRva2VuO1xyXG4gICAgY3VzdG9tX2NhcmQuZGlzY29kZXMgPSBzcG90LmRpc2NvZGVzO1xyXG4gICAgXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9vcmRlclRyYW5zcG9ydENhcmQnLCBjdXN0b21fY2FyZCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYgKCdubycgPT0gZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgJHNjb3BlLmhpZGVDdXN0b21DYXJkKCk7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwobWVzc2FnZV90ZXh0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgLy/Ql9Cw0LrQsNC3INC60LDRgNGC0Ysg0JPQo9CjINC/0L4g0LzQsNC60LXRgtGDXHJcbiAgJHNjb3BlLm9yZGVyQ3VzdG9tQ2FyZCA9IGZ1bmN0aW9uKGN1c3RvbV9jYXJkLCB2YWxpZCwgbWVzc2FnZV90ZXh0KSB7XHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IHRydWU7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCRzY29wZS5pc0RvdWJsZUNhcmQoY3VzdG9tX2NhcmQpKSB7XHJcbiAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IHRydWU7XHJcbiAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChcItCS0Ysg0YPQttC1INC30LDQutCw0LfQsNC70Lgg0Y3RgtGDINC60LDRgNGC0YNcIiwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSBmYWxzZTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgJHNjb3BlLnNhdmVDYXJkUGFyYW1zKGN1c3RvbV9jYXJkKTtcclxuICAgIFxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvb3JkZXJDdXN0b21DYXJkJywgY3VzdG9tX2NhcmQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmICgnbm8nID09IGRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChtZXNzYWdlX3RleHQsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgICAgY3VzdG9tX2NhcmQubnVtYmVyID0gZGF0YS5udW1iZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5zYXZlQ2FyZFBhcmFtcyA9IGZ1bmN0aW9uKGNhcmQpIHtcclxuICAgIGZvcihwcm9wZXJ0eSBpbiBjYXJkKSB7XHJcbiAgICAgICAgJHNjb3BlLnByZXZfY3VzdG9tX2NhcmRbcHJvcGVydHldID0gY2FyZFtwcm9wZXJ0eV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5pc0RvdWJsZUNhcmQgPSBmdW5jdGlvbihjYXJkKSB7XHJcbiAgICBmb3IocHJvcGVydHkgaW4gY2FyZCkgeyBcclxuICAgICAgICBpZiAocHJvcGVydHkgIT0gJ251bWJlcicgJiYgJHNjb3BlLnByZXZfY3VzdG9tX2NhcmRbcHJvcGVydHldICE9IGNhcmRbcHJvcGVydHldKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8v0YLRgNC40LPQtdGAINC90LAg0YHQvdGP0YLQuNC1INC+0YjQuNCx0LrQuCDQtNC70Y8g0LzQsNC60LXRgtCwINGC0YDQsNC90YHQv9C+0YDRgtC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLiR3YXRjaCgnY3VzdG9tX2NhcmQuc2hpcHBpbmdfbmFtZSArIGN1c3RvbV9jYXJkLnBob25lICsgY3VzdG9tX2NhcmQuYWRkcmVzcyArIGN1c3RvbV9jYXJkLmNpdHkgKyBjdXN0b21fY2FyZC56aXAgKyBjdXN0b21fY2FyZC5lbWFpbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSBmYWxzZTtcclxuICB9KTtcclxuICBcclxuICAkc2NvcGUuJHdhdGNoKCd3YWxsZXRfaGlzdG9yeS5kYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUubGlzdEhpc3RvcnkoJHNjb3BlLndhbGxldF9oaXN0b3J5LmRhdGUpO1xyXG4gIH0pO1xyXG4gIFxyXG4gICRzY29wZS5saXN0SGlzdG9yeSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICB2YXIgZGF0YSA9IHsnZGlzY29kZXMnOiAkc2NvcGUuc3BvdC5kaXNjb2RlcywgJ3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdkYXRlJzpkYXRlfTtcclxuICAgIFxyXG4gICAgYmxvY2tfaGlzdG9yeSA9IGFuZ3VsYXIuZWxlbWVudCgnI2hpc3Rvcnktd3JhcHBlcicpO1xyXG4gICAgXHJcbiAgICBibG9ja19oaXN0b3J5LmVtcHR5KCk7XHJcbiAgICAkc2NvcGUud2FsbGV0X2hpc3RvcnkuZW1wdHlfZGF0ZSA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9saXN0SGlzdG9yeScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBibG9ja19oaXN0b3J5LmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIGlmIChkYXRhLmVtcHR5X2Zvcl9kYXRlKVxyXG4gICAgICAgICAgICAkc2NvcGUud2FsbGV0X2hpc3RvcnkuZW1wdHlfZGF0ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuY3VzdG9tQ2FyZEluaXQgPSBmdW5jdGlvbihkZWZhdWx0cykge1xyXG4gICAgICRzY29wZS5jdXN0b21fY2FyZCA9IGFuZ3VsYXIuZnJvbUpzb24oZGVmYXVsdHMpOyBcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLnNob3dEYXRlcGlja2VyID0gZnVuY3Rpb24oc2VsZWN0b3Ipe1xyXG4gICAgaWYgKCRzY29wZS5kYXRlX2hpc3Rvcnlfc2hvd24pXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgJHNjb3BlLmRhdGVfaGlzdG9yeV9zaG93biA9IHRydWU7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoc2VsZWN0b3IpLmRhdGVwaWNrZXIoXCJzaG93XCIpOyAgIFxyXG4gIH1cclxuICBcclxuICAvL9C/0YDQuNCy0Y/Qt9C60LAg0L3QvtCy0L7Qs9C+INGC0LXQu9C10YTQvtC90LAg0Log0YHQv9C+0YLRg1xyXG4gICRzY29wZS5hZGRQaG9uZSA9IGZ1bmN0aW9uKHBob25lLCB2YWxpZCkge1xyXG4gICAgaWYgKCF2YWxpZCkgXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgdmFyIGRhdGEgPSB7J2Rpc2NvZGVzJzogJHNjb3BlLnNwb3QuZGlzY29kZXMsICd0b2tlbic6ICRzY29wZS5zcG90LnRva2VuLCAncGhvbmUnOiBwaG9uZX1cclxuICAgICRodHRwLnBvc3QoJy9zcG90L2FkZFBob25lJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS5uZXdfcGhvbmUgPSAnJztcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwaG9uZXMtbGlzdCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLnJlbW92ZVBob25lID0gZnVuY3Rpb24ocGhvbmUsIGUpIHtcclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6ICRzY29wZS5zcG90LmRpc2NvZGVzLCAndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ3Bob25lJzogcGhvbmV9XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9yZW1vdmVQaG9uZScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICB2YXIgcGhvbmVJdGVtID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnBob25lLXJvdycpO1xyXG4gICAgICAgIHBob25lSXRlbS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5hY3RpdmF0ZVNjaG9vbEV4dGVuZGVkID0gZnVuY3Rpb24oYWRkcmVzcykge1xyXG4gICAgdmFyIGRhdGEgPSB7J2Rpc2NvZGVzJzogJHNjb3BlLnNwb3QuZGlzY29kZXMsICd0b2tlbic6ICRzY29wZS5zcG90LnRva2VuLCAnYWRkcmVzcyc6YWRkcmVzc31cclxuICAgICRodHRwLnBvc3QoJy9zcG90L2FjdGl2YXRlU2Nob29sbEV4dGVuZGVkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS5ob21lX2FkZHJlc3MgPSAnJztcclxuICAgICAgICB2YXIgUGhvbmVTZXJ2aWNlcyA9IGFuZ3VsYXIuZWxlbWVudCgnI3Bob25lX3NlcnZpY2VzJyk7XHJcbiAgICAgICAgUGhvbmVTZXJ2aWNlcy5lbXB0eSgpO1xyXG4gICAgICAgIFBob25lU2VydmljZXMuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgJHNjb3BlLnJlbW92ZVNjaG9vbEV4dGVuZGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZGF0YSA9IHsnZGlzY29kZXMnOiAkc2NvcGUuc3BvdC5kaXNjb2RlcywgJ3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW59XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9yZW1vdmVTY2hvb2xsRXh0ZW5kZWQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLmhvbWVfYWRkcmVzcyA9ICcnO1xyXG4gICAgICAgIHZhciBQaG9uZVNlcnZpY2VzID0gYW5ndWxhci5lbGVtZW50KCcjcGhvbmVfc2VydmljZXMnKTtcclxuICAgICAgICBQaG9uZVNlcnZpY2VzLmVtcHR5KCk7XHJcbiAgICAgICAgUGhvbmVTZXJ2aWNlcy5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINCR0LvQvtC60LjRgNC+0LLQutCwINC60LDRgNGC0Ysg0KLRgNC+0LnQutCwXHJcbiAgJHNjb3BlLmJsb2NrVHJvaWthID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgZGlhbG9nU2VydmljZS55ZXNOb0RpYWxvZyhmdW5jdGlvbihkaWFsb2dfcmVzdWx0KSB7XHJcbiAgICAgIGlmIChkaWFsb2dfcmVzdWx0ICE9ICd5ZXMnKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvc3BvdC9ibG9ja1Ryb2lrYScsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYmxvY2tUcm9pa2EnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnIycrc3BvdC5kaXNjb2RlcykuYWRkQ2xhc3MoJ2ludmlzaWJsZScpO1xyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgJHNjb3BlLnRleHQueWVzX2J0bixcclxuICAgICRzY29wZS50ZXh0Lm5vX2J0bixcclxuICAgICRzY29wZS50ZXh0LmJsb2NrX3Ryb2lrYSxcclxuICAgICduZWdhdGl2ZSdcclxuICAgICk7XHJcbiAgfTtcclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignUHJvZHVjdENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UpIHtcclxuICAgIFxyXG4gICAgJHNjb3BlLmhvc3RfdHlwZSA9ICdkZXNrdG9wJztcclxuICAgICRzY29wZS50cmFuc3BvcnRfY2FyZCA9IHt9O1xyXG4gICAgJHNjb3BlLnNpbXBsZV9jYXJkID0ge307XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X3R5cGVzID0gW107XHJcbiAgICAgIFxyXG4gICAgJHNjb3BlLlN0b3JlSW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbn07XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9nZXRQcmljZUxpc3QnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MgPSBkYXRhLnNldHRpbmdzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUgPSAkc2NvcGUucHJvZHVjdHNbaV0uc2l6ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRDb2xvciA9ICRzY29wZS5wcm9kdWN0c1tpXS5jb2xvclswXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTdXJmYWNlID0gJHNjb3BlLnByb2R1Y3RzW2ldLnN1cmZhY2VbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkVG9DYXJ0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvW2pdLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBqICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0c1RvcCA9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uY29sb3IubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHNUb3AgKz0gMTU1O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoID4gMylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHNUb3AgLT0gNTY7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5kZXNjcmlwdGlvbi5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0c1RvcCArPSAoJHNjb3BlLnByb2R1Y3RzW2ldLmRlc2NyaXB0aW9uLmxlbmd0aC83Ni41KSAqIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS50aHVtYlNoZWxsU3R5bGUgPSB7dG9wOih0c1RvcCtcInB4XCIpfTtcclxuICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLnJlbW92ZUNsYXNzKCdvdmVyZmxvdy1oJyk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLm0tY292ZXItcHJlbG9hZCcpLmZhZGVPdXQoNjAwKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIElNQUdFX1dJRFRIID0gMjQyO1xyXG5cclxuICAgICRzY29wZS5zY3JvbGxUbyA9IGZ1bmN0aW9uKGltYWdlLGluZCwganNJRCkge1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpbmQgKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuYWRkVG9DYXJ0ID0gZnVuY3Rpb24gYWRkVG9DYXJ0KGpzSUQpe1xyXG4gICAgICAgIGlmKCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSA8IDEpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBpZigkc2NvcGUuaW5SZXF1ZXN0KSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICgndHJvaWthJyA9PSAkc2NvcGUucHJvZHVjdHNbanNJRF0udHlwZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnNob3dDb25zdHJ1Y3RvclRyb2lrYSgkc2NvcGUucHJvZHVjdHNbanNJRF0sIGpzSUQpO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoJ3NpbXBsZScgPT0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnR5cGUpIHtcclxuICAgICAgICAgICRzY29wZS5zaG93Q29uc3RydWN0b3JTaW1wbGUoJHNjb3BlLnByb2R1Y3RzW2pzSURdLCBqc0lEKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlOyAgICAgICAgXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRva2VuOiAkc2NvcGUudXNlci50b2tlbixcclxuICAgICAgICAgICAgaWQgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uaWQsXHJcbiAgICAgICAgICAgIHF1YW50aXR5IDogcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5KSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRDb2xvciA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yLFxyXG4gICAgICAgICAgICBzZWxlY3RlZFN1cmZhY2UgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlLFxyXG4gICAgICAgICAgICBzZWxlY3RlZFNpemUgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvYWRkVG9DYXJ0JyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcclxuICAgICAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZGVkO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLml0ZW1zLmNvdW50ICs9IHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFza2V0ID0gYW5ndWxhci5lbGVtZW50KCdhLmljb24tYmFnLWxpbmsgc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgYmFza2V0LnRleHQoJHNjb3BlLml0ZW1zLmNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3IpeyRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTt9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICRzY29wZS5hZGRUcmFuc3BvcnRDYXJkID0gZnVuY3Rpb24odHJhbnNwb3J0X2NhcmQpIHtcclxuICAgICB0cmFuc3BvcnRfY2FyZC50b2tlbiA9ICRzY29wZS51c2VyLnRva2VuO1xyXG4gICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9hZGRDdXN0b21DYXJkJyksIHRyYW5zcG9ydF9jYXJkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUudHJhbnNwb3J0SWQpKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzWyRzY29wZS50cmFuc3BvcnRJZF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRlZDtcclxuICAgICAgICAgICAgJHNjb3BlLml0ZW1zLmNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgIHZhciBiYXNrZXQgPSBhbmd1bGFyLmVsZW1lbnQoJ2EuaWNvbi1iYWctbGluayBzcGFuJyk7XHJcbiAgICAgICAgICAgIGJhc2tldC50ZXh0KCRzY29wZS5pdGVtcy5jb3VudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgJHNjb3BlLmhpZGVDb25zdHJ1Y3RvclRyb2lrYSgpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuYWRkU2ltcGxlQ2FyZCA9IGZ1bmN0aW9uKHNpbXBsZV9jYXJkKSB7XHJcbiAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L2FkZEN1c3RvbUNhcmQnKSwgc2ltcGxlX2NhcmQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5zaW1wbGVJZCkpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbJHNjb3BlLnNpbXBsZUlkXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZGVkO1xyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXMuY291bnQgKz0gMTtcclxuICAgICAgICAgICAgdmFyIGJhc2tldCA9IGFuZ3VsYXIuZWxlbWVudCgnYS5pY29uLWJhZy1saW5rIHNwYW4nKTtcclxuICAgICAgICAgICAgYmFza2V0LnRleHQoJHNjb3BlLml0ZW1zLmNvdW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgXHJcbiAgICAkc2NvcGUuaGlkZUNvbnN0cnVjdG9yU2ltcGxlKCk7XHJcbiAgfVxyXG4gICAgXHJcbiAgLy/QntGC0L7QsdGA0LDQttC10L3QuNC1INC60LDRgdGC0L7QvNC90L7Qs9C+INC80LDQutC10YLQsCDRgtGA0LDQvdGB0L/QvtGC0YDQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS5zaG93Q29uc3RydWN0b3JUcm9pa2EgPSBmdW5jdGlvbihwcm9kdWN0LCBqc0lEKSB7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X2NhcmQuaWQgPSBwcm9kdWN0LmlkO1xyXG4gICAgJHNjb3BlLnRyYW5zcG9ydElkID0ganNJRDtcclxuICAgICQoJyNjb25zdHJ1Y3Rvci10cm9pa2EnKS5hZGRDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5oaWRlQ29uc3RydWN0b3JUcm9pa2EgPSBmdW5jdGlvbigpIHtcclxuICAgICQoJyNjb25zdHJ1Y3Rvci10cm9pa2EnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8v0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutCw0YHRgtC+0LzQvdC+0LPQviDQvNCw0LrQtdGC0LBcclxuICAkc2NvcGUuc2hvd0NvbnN0cnVjdG9yU2ltcGxlID0gZnVuY3Rpb24ocHJvZHVjdCwganNJRCl7XHJcbiAgICAkc2NvcGUuc2ltcGxlX2NhcmQuaWQgPSBwcm9kdWN0LmlkO1xyXG4gICAgJHNjb3BlLnNpbXBsZUlkID0ganNJRDtcclxuICAgICQoJyNjb25zdHJ1Y3Rvci1zaW1wbGUnKS5hZGRDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5oaWRlQ29uc3RydWN0b3JTaW1wbGUgPSBmdW5jdGlvbigpIHtcclxuICAgICQoJyNjb25zdHJ1Y3Rvci1zaW1wbGUnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5pbml0VHJhbnNwb3J0VHlwZSA9IGZ1bmN0aW9uKHR5cGVfaWQsIHR5cGVfbmFtZSwgdHlwZV9pbWcpIHtcclxuICAgICRzY29wZS50cmFuc3BvcnRfdHlwZXNbJHNjb3BlLnRyYW5zcG9ydF90eXBlcy5sZW5ndGhdID0ge2lkOnR5cGVfaWQsIG5hbWU6dHlwZV9uYW1lLCBpbWc6dHlwZV9pbWd9O1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnNob3dDYXJkUGF0dGVybiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcjY2FyZC1tZW51JykuaGlkZSgpO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcjY2FyZC1wYXR0ZXJuJykuc2hvdygpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaGlkZUNhcmRQYXR0ZXJuID0gZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNjYXJkLW1lbnUnKS5zaG93KCk7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNjYXJkLXBhdHRlcm4nKS5oaWRlKCk7XHJcbiAgICBcclxuICAgICRzY29wZS5jbGVhckZvcm1JbWcoJyNmb3JtLXBob3RvJyk7XHJcbiAgICAkc2NvcGUuY2xlYXJGb3JtSW1nKCcjZm9ybS1sb2dvJyk7XHJcbiAgICBcclxuICAgIGRlbGV0ZSgkc2NvcGUudHJhbnNwb3J0X2NhcmQubmFtZSk7XHJcbiAgICBkZWxldGUoJHNjb3BlLnRyYW5zcG9ydF9jYXJkLnBvc2l0aW9uKTtcclxuICAgIGRlbGV0ZSgkc2NvcGUudHJhbnNwb3J0X2NhcmQucGhvdG8pO1xyXG4gICAgZGVsZXRlKCRzY29wZS50cmFuc3BvcnRfY2FyZC5sb2dvKTtcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLmNsZWFyRm9ybUltZyA9IGZ1bmN0aW9uKGZvcm1fc2VsZWN0b3IpXHJcbiAge1xyXG4gICAgdmFyIGZvcm0gPSBhbmd1bGFyLmVsZW1lbnQoZm9ybV9zZWxlY3Rvcik7XHJcbiAgICB2YXIgZm9ybV9sYWJlbCA9IGZvcm0uZmluZCgnbGFiZWwuZmFjZS1ob2xkZXInKTtcclxuICAgIHZhciBpbWdfY3JvcCA9IGZvcm0uZmluZCgnLm5nLWltYWdlLWNyb3AnKTtcclxuICAgIHZhciBkaXZfdXBsb2FkID0gZm9ybS5maW5kKCcudXBsb2FkLXBob3RvJyk7XHJcbiAgICBcclxuICAgIGZvcm1fbGFiZWwucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgIGltZ19jcm9wLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICBpZiAoZGl2X3VwbG9hZC5sZW5ndGgpXHJcbiAgICAgICAgZGl2X3VwbG9hZC5yZW1vdmVDbGFzcygnbm9ib3JkZXInKTtcclxuICB9XHJcbiAgXHJcbiAgLy/QktGL0LHQvtGAINC30LDQtNC90LjQutCwINGC0YDQsNC90YHQv9C+0YDRgtC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNldFR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X2NhcmQuYmFjayA9IHR5cGUuaWQ7XHJcblxyXG4gICAgaWYgKHR5cGUuaW1nKXtcclxuICAgICAgJCgnI2NhcmQtYmFjaycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoL3VwbG9hZHMvdHJhbnNwb3J0LycgKyB0eXBlLmltZyArICcpJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAgICRzY29wZS5zaXplQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFNpemUsIHNpemUpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTaXplID09PSBzaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNvbG9yQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZENvbG9yLCBjb2xvcikge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZENvbG9yID09PSBjb2xvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zdXJmYWNlQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFN1cmZhY2UsIHN1cmZhY2UpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTdXJmYWNlID09PSBzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFNpemUgPSBmdW5jdGlvbihqc0lELCBzaXplKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplID0gc2l6ZTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRDb2xvciA9IGZ1bmN0aW9uKGpzSUQsIGNvbG9yKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvciA9IGNvbG9yO1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgY29sb3I7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90b1tpXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvW2ldLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFN1cmZhY2UgPSBmdW5jdGlvbihqc0lELCBzdXJmYWNlKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlID0gc3VyZmFjZTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5yZXNldEFkZGVkVGV4dCA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuICAgICAgICBpZigkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHkgPCAwKXtcclxuICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50aHVtYkNsYXNzID0gZnVuY3Rpb24obGVuKXtcclxuICAgICAgICBpZiAobGVuID4gMylcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlciB4c2Nyb2xsZWRcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXJcIjtcclxuICAgIH07XHJcbi8qXHJcbiAgICAkc2NvcGUudGh1bWJMaUNsYXNzID0gZnVuY3Rpb24oaW5kKXtcclxuICAgICAgICBpZiAoKGluZCAlIDMpID09IDApXHJcbiAgICAgICAgICAgIHJldHVybiBcImJyc2xpZGVcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRoaW1ic2xpZGVcIjtcclxuICAgIH1cclxuKi9cclxufSk7XHJcblxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignQ2FydENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UpIHtcclxuICAgICRzY29wZS5wcm9tb0Vycm9yID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuY3VzdG9tZXJFcnJvciA9IGZhbHNlO1xyXG4gIFxyXG4gICAgJHNjb3BlLkNhcnRJbml0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkc2NvcGUuc3VtbSA9IDA7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VufTtcclxuXHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvR2V0Q2FydCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGlzY291bnQgPSBkYXRhLmRpc2NvdW50O1xyXG4gICAgICAgICAgICBpZigkc2NvcGUucHJvZHVjdHMubGVuZ3RoIDw9IDApe1xyXG4gICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9zdG9yZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkgPSBwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1ZmZpeCA9ICdfJyArICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG9bal0uc3Vic3RyaW5nKDAsICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5sYXN0SW5kZXhPZignLicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaiAqIC0xKSArIFwicHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5wcm9kdWN0cyl7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5pZCA9PSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uaWRfcHJvZHVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gLT0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja2luZ091dCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLnJlbW92ZUNsYXNzKCdvdmVyZmxvdy1oJyk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcubS1jb3Zlci1wcmVsb2FkJykuZmFkZU91dCg2MDApO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgSU1BR0VfV0lEVEggPSAyNDI7XHJcblxyXG4gICAgJHNjb3BlLnNjcm9sbFRvID0gZnVuY3Rpb24oaW1hZ2UsaW5kLCBqc0lEKSB7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGluZCAqIC0xKSArIFwicHhcIn07XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5lbXB0eUNsYXNzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0cyl7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaGlkZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zaXplQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFNpemUsIHNpemUpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTaXplID09PSBzaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNvbG9yQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZENvbG9yLCBjb2xvcikge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZENvbG9yID09PSBjb2xvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zdXJmYWNlQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFN1cmZhY2UsIHN1cmZhY2UpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTdXJmYWNlID09PSBzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNoZWtpbmdPdXRDbGFzcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoISRzY29wZS5jaGVja2luZ091dCl7XHJcbiAgICAgICAgICAgIHJldHVybiBcImhpZGVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRTaXplID0gZnVuY3Rpb24oanNJRCwgc2l6ZSl7XHJcbiAgICAgICAgJHNjb3BlLnN1bW0gLT0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHk7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZSA9IHNpemU7XHJcbiAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRDb2xvciA9IGZ1bmN0aW9uKGpzSUQsIGNvbG9yKXtcclxuICAgICAgICB2YXIgb2xkUHJvZHVjdCA9IHtpZDokc2NvcGUucHJvZHVjdHNbanNJRF0uaWQsIHF1YW50aXR5OiRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSwgc2VsZWN0ZWRDb2xvcjokc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvcn07XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZSkgIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIG9sZFByb2R1Y3Quc2VsZWN0ZWRTaXplID0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZTtcclxuICAgICAgICBpZiAodHlwZW9mICgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlKSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgb2xkUHJvZHVjdC5zZWxlY3RlZFN1cmZhY2UgPSAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlO1xyXG5cclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvciA9IGNvbG9yO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90byAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8ubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIHZhciBzdWZmaXggPSAnXycgKyBjb2xvcjtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvW2ldLnN1YnN0cmluZygwLCAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG9baV0ubGFzdEluZGV4T2YoJy4nKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSA9PSBzdWZmaXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGkgKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIG9sZFByb2R1Y3Q6b2xkUHJvZHVjdCwgbmV3UHJvZHVjdDokc2NvcGUucHJvZHVjdHNbanNJRF19O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9zdG9yZS9wcm9kdWN0L1NhdmVQcm9kdWN0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmVycm9yICE9ICdubycpe1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRTdXJmYWNlID0gZnVuY3Rpb24oanNJRCwgc3VyZmFjZSl7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU3VyZmFjZSA9IHN1cmZhY2U7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXREZWxpdmVyeSA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZERlbGl2ZXJ5ID0gJHNjb3BlLmRlbGl2ZXJpZXNbanNJRF07XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRQYXltZW50ID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkUGF5bWVudCA9ICRzY29wZS5wYXltZW50c1tqc0lEXTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNoYW5nZVF1YW50aXR5ID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgaWYgKHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSkgPD0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICRzY29wZS5kZWxldGVJdGVtKGpzSUQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkc2NvcGUuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMgIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tICs9ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5kaXNjb3VudCpwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gLT0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgb2xkUHJvZHVjdDokc2NvcGUucHJvZHVjdHNbanNJRF0sIG5ld1Byb2R1Y3Q6JHNjb3BlLnByb2R1Y3RzW2pzSURdfTtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvU2F2ZVByb2R1Y3QnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yICE9ICdubycpe1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2hlY2tPdXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICgkc2NvcGUuc3VtbSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZighJHNjb3BlLmNoZWNraW5nT3V0KXtcclxuICAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbn07XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9zdG9yZS9wcm9kdWN0L2dldEN1c3RvbWVyJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGVsaXZlcmllcyA9IGRhdGEuZGVsaXZlcnk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGF5bWVudHMgPSBkYXRhLnBheW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuZGVsaXZlcmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kZWxpdmVyaWVzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucGF5bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGF5bWVudHNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWREZWxpdmVyeSA9ICRzY29wZS5kZWxpdmVyaWVzWzBdO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUGF5bWVudCA9ICRzY29wZS5wYXltZW50c1swXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja2luZ091dCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Byb2NlZWROZXh0Rm9ybScpLnJlbW92ZUNsYXNzKCdoaWRlLWNvbnRlbnQtYm94Jyk7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjcHJvY2VlZE5leHRGb3JtJykub2Zmc2V0KCkudG9wXHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmRlbGV0ZUl0ZW0gPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICBpZighJHNjb3BlLmluUmVxdWVzdCl7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICRzY29wZS51c2VyLnRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5IDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ29sb3IgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFN1cmZhY2UgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2l6ZSA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemVcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvZGVsZXRlRnJvbUNhcnQnKSwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cy5zcGxpY2UoanNJRCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5wcm9kdWN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tICs9ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5kaXNjb3VudCpwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5wcm9kdWN0cy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9zdG9yZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jb25maXJtUHJvbW8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighJHNjb3BlLmluUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgcHJvbW9Db2RlOiAkc2NvcGUuZGlzY291bnQucHJvbW9Db2RlfTtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L0NvbmZpcm1Qcm9tbycpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9tb0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZERpc2NvdW50ID0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50ID0gZGF0YS5kaXNjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cyAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uaWQgPT0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmlkX3Byb2R1Y3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSArPSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uZGlzY291bnQqcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZERpc2NvdW50ID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdChvbGREaXNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGREaXNjb3VudCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdChvbGREaXNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5kaXNjb3VudC5zdW1tKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnJvcil7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvbW9FcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5kaXNjb3VudC5zdW1tKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLiR3YXRjaCgnZGlzY291bnQucHJvbW9Db2RlJywgZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAkc2NvcGUucHJvbW9FcnJvciA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLnNhdmVDdXN0b21lciA9IGZ1bmN0aW9uKHZhbGlkKSB7XHJcbiAgICAgICAgaWYgKCF2YWxpZCApIHsgXHJcbiAgICAgICAgICAgICRzY29wZS5jdXN0b21lckVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gJHNjb3BlLmN1c3RvbWVySGludDtcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRzY29wZS5zdW1tID09PSAwKSAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZighJHNjb3BlLmluUmVxdWVzdCl7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBjdXN0b21lcjogJHNjb3BlLmN1c3RvbWVyfTtcclxuXHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9zYXZlQ3VzdG9tZXInKSwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Byb2NlZWRGaW5pc2hGb3JtJykucmVtb3ZlQ2xhc3MoJ2hpZGUtY29udGVudC1ib3gnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoJyNwcm9jZWVkRmluaXNoRm9ybScpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXN0b21lckVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuJHdhdGNoKCdjdXN0b21lci5maXJzdF9uYW1lICsgY3VzdG9tZXIubGFzdF9uYW1lICsgY3VzdG9tZXIuZW1haWwgKyBjdXN0b21lci50YXJnZXRfZmlyc3RfbmFtZSArIGN1c3RvbWVyLnRhcmdldF9sYXN0X25hbWUgKyBjdXN0b21lci5waG9uZSArIGN1c3RvbWVyLmFkZHJlc3MgKyBjdXN0b21lci5jaXR5ICsgY3VzdG9tZXIuemlwICsgY3VzdG9tZXIuY291bnRyeScsIGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgJHNjb3BlLmN1c3RvbWVyRXJyb3IgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5idXkgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnN1bW0gPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRva2VuOiAkc2NvcGUudXNlci50b2tlbixcclxuICAgICAgICAgICAgY3VzdG9tZXIgOiAkc2NvcGUuY3VzdG9tZXIsXHJcbiAgICAgICAgICAgIHByb2R1Y3RzIDogJHNjb3BlLnByb2R1Y3RzLFxyXG4gICAgICAgICAgICBkZWxpdmVyeSA6ICRzY29wZS5zZWxlY3RlZERlbGl2ZXJ5LFxyXG4gICAgICAgICAgICBwYXltZW50ICA6ICRzY29wZS5zZWxlY3RlZFBheW1lbnQsXHJcbiAgICAgICAgICAgIGRpc2NvdW50IDogJHNjb3BlLmRpc2NvdW50XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvYnV5JyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICAgICAgaWYgKCdlbWFpbCcgPT0gZGF0YS5wYXltZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoZGF0YS5tZXNzYWdlLCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL3N0b3JlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9jZWVkRmluaXNoRm9ybScpLmFmdGVyKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Zvcm0teW0tcGF5Jykuc3VibWl0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoZGF0YS5lcnJvciwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50aHVtYkNsYXNzID0gZnVuY3Rpb24obGVuKXtcclxuICAgICAgICBpZiAobGVuID4gMylcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlciB4c2Nyb2xsZWRcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXJcIjtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnZhbENsYXNzID0gZnVuY3Rpb24oaXNWYWxpZCl7XHJcbiAgICAgICAgaWYoaXNWYWxpZClcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgfTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1VzZXJDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJGNvb2tpZXMsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG4gICRzY29wZS5yZXN1bHQgPSB7fTtcclxuICAkc2NvcGUubW9kYWwgPSAnbm9uZSc7XHJcbiAgJHNjb3BlLmhvc3RfdHlwZSA9ICdtb2JpbGUnO1xyXG5cclxuICAvL9Ce0YfQuNGB0YLQutCwINC30L3QsNGH0LXQvdC40LlcclxuICAkc2NvcGUuc2V0RW1wdHkgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS51c2VyLnBhc3N3b3JkID0gJyc7XHJcbiAgICAkc2NvcGUudXNlci50ZXJtcyA9IDA7XHJcblxyXG4gICAgJHNjb3BlLmVycm9yID0ge307XHJcbiAgICAkc2NvcGUucmVzdWx0ID0ge307XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmhpZGVNb2RhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLm1vZGFsID0gJ25vbmUnO1xyXG4gIH07XHJcblxyXG4gIC8v0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LTQsNGC0LDQv9C40LrQtdGA0LBcclxuICBhbmd1bGFyLmVsZW1lbnQoJyNiaXJ0aGRheScpLmRhdGVwaWNrZXIoe1xyXG4gICAgeWVhclJhbmdlOiAnMTkwMDotMCcsXHJcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxyXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChkYXRlVGV4dCwgaW5zdCkge1xyXG4gICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICRzY29wZS51c2VyLmJpcnRoZGF5ID0gZGF0ZVRleHQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL9Ch0YLQvtGA0L7QtiDQvNC+0LTQsNC70YzQvdGL0YUg0L7QutC+0L1cclxuICAkc2NvcGUuJHdhdGNoKCdtb2RhbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnNldEVtcHR5KCRzY29wZS5tb2RhbCk7XHJcbiAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJHNjb3BlLm1vZGFsKTtcclxuICB9KTtcclxuXHJcbiAgLy/QoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICRzY29wZS5zZXRQcm9maWxlID0gZnVuY3Rpb24odXNlcil7XHJcbiAgICAkaHR0cC5wb3N0KCcvdXNlci9lZGl0UHJvZmlsZScsdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9CQ0LLRgtC+0L7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgNCw0LfRgNC10YnQtdC90LjRj1xyXG4gICRzY29wZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcmVzb2x1dGlvbiA9ICRjb29raWVzLnJlc29sdXRpb247XHJcbiAgICBpZiAoIXJlc29sdXRpb24pIHtcclxuICAgICAgdmFyIGNsaWVudFJlcyA9IE1hdGgubWF4KHNjcmVlbi53aWR0aCxzY3JlZW4uaGVpZ2h0KTtcclxuICAgICAgdmFyIHJlcyA9IFsxOTIwLCAxNDAwLCAxMjgwXTtcclxuICAgICAgZm9yKHZhciBpPTA7IGk8cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNsaWVudFJlcyA+PSByZXNbaV0pe1xyXG4gICAgICAgICAgcmVzb2x1dGlvbiA9IHJlc1tpXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkY29va2llcy5yZXNvbHV0aW9uID0gJycgKyByZXNvbHV0aW9uO1xyXG4gICAgICAkc2NvcGUucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy/QkNCy0YLQvtGA0LjQt9Cw0YbQuNGPXHJcbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24odXNlciwgdmFsaWQpIHtcclxuICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2UvbG9naW4nLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5lbWFpbCA9IHRydWU7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9IGRhdGEuY29udGVudDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGRhdGEuYWNjZXNzX3VybCkgfHwgIWRhdGEuYWNjZXNzX3VybC5sZW5ndGgpXHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvc3BvdC9saXN0LycpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsZGF0YS5hY2Nlc3NfdXJsKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS4kd2F0Y2goJ3VzZXIuZW1haWwgKyB1c2VyLnBhc3N3b3JkICsgdXNlci5jb2RlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuZXJyb3IuZW1haWwgPSBmYWxzZTtcclxuICAgICRzY29wZS5lcnJvci5jb2RlID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IucGFzc3dvcmQgPSBmYWxzZTtcclxuICAgICRzY29wZS5lcnJvci5jb250ZW50ID0gJyc7XHJcbiAgfSk7XHJcblxyXG4gIC8vINCg0LXQs9C40YHRgtGA0LDRhtC40Y9cclxuICAkc2NvcGUuYWN0aXZhdGlvbiA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKXtcclxuICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh1c2VyLnRlcm1zID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2UvcmVnaXN0cmF0aW9uJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcblxyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUudXNlci5lbWFpbCA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLnBhc3N3b3JkID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIuYWN0aXZfY29kZSA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLnRlcm1zID0gMDtcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpIHtcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ25vbmUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoZGF0YS5lcnJvciA9PT0gJ2VtYWlsJykge1xyXG4gICAgICAgICAgJHNjb3BlLmVycm9yLmVtYWlsID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLmVycm9yLmNvZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpXHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbChkYXRhLmNvbnRlbnQsICdlcnJvcicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQktC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNC1INC/0LDRgNC+0LvRj1xyXG4gICRzY29wZS5yZWNvdmVyeSA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKXtcclxuICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9yZWNvdmVyeScsIHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAneWVzJykge1xyXG4gICAgICAgICRzY29wZS5lcnJvci5lbWFpbCA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKVxyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbChkYXRhLmNvbnRlbnQsICdlcnJvcicpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIuZW1haWwgPSAnJztcclxuICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKVxyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbChkYXRhLmNvbnRlbnQsICdub25lJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHQvNC10L3QsCDQv9Cw0YDQvtC70Y9cclxuICAkc2NvcGUuY2hhbmdlID0gZnVuY3Rpb24odXNlciwgdmFsaWQpe1xyXG4gICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICRodHRwLnBvc3Qod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICwgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsJy9zcG90L2xpc3QvJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5tZXNzYWdlTW9kYWwgPSBmdW5jdGlvbih0ZXh0KSB7XHJcbiAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh0ZXh0KSB8fCAhdGV4dC5sZW5ndGgpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IHRleHQ7XHJcbiAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpXHJcbiAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKHRleHQsICdub25lJyk7XHJcbiAgICBlbHNlXHJcbiAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmxvYWRGcm9udCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHJlc29sdXRpb24gPSAxOTIwO1xyXG4gICAgXHJcbiAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDE0MDApXHJcbiAgICAgICAgcmVzb2x1dGlvbiA9IDE0MDA7XHJcbiAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDEyODApXHJcbiAgICAgICAgcmVzb2x1dGlvbiA9IDEyODA7XHJcbiAgICAgICAgXHJcbiAgICB2YXIgZnJvbnRCbG9jayA9IGFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCAuZmlyc3Qtc2NyZWVuJyk7XHJcbiAgICAgICBcclxuICAgIGZyb250QmxvY2suY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCguLi90aGVtZXMvbW9iaXNwb3QvaW1nL2luZm8vZnJvbnRfJyArIHJlc29sdXRpb24gKyAnLmpwZyknKTtcclxuICB9XHJcbiAgXHJcbiAgLypcclxuICBhbmd1bGFyLmVsZW1lbnQod2luZG93KS5iaW5kKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIWFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCcpLmxlbmd0aCB8fCAhYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoICNwYXltZW50JykubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgIHZhciByZXNvbHV0aW9uID0gMTkyMDtcclxuICAgIFxyXG4gICAgaWYgKHNjcmVlbi53aWR0aCA8PSAxNDAwKVxyXG4gICAgICAgIHJlc29sdXRpb24gPSAxNDAwO1xyXG4gICAgaWYgKHNjcmVlbi53aWR0aCA8PSAxMjgwKVxyXG4gICAgICAgIHJlc29sdXRpb24gPSAxMjgwO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2ggI3BheW1lbnQnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC4uL3RoZW1lcy9tb2Jpc3BvdC9pbWcvaW5mby9wYXNzXycgKyByZXNvbHV0aW9uICsgJy5qcGcpJyk7XHJcbiAgICBcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCAjc29jJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCguLi90aGVtZXMvbW9iaXNwb3QvaW1nL2luZm8vZGlzY291bnRfJyArIHJlc29sdXRpb24gKyAnLmpwZyknKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoICNjb3Vwb24nKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC4uL3RoZW1lcy9tb2Jpc3BvdC9pbWcvaW5mby9zb2NpYWxfJyArIHJlc29sdXRpb24gKyAnLmpwZyknKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoICN0cmFuc3BvcnQnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC4uL3RoZW1lcy9tb2Jpc3BvdC9pbWcvaW5mby90cmFuc3BvcnRfJyArIHJlc29sdXRpb24gKyAnLmpwZyknKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoICNkZXYnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC4uL3RoZW1lcy9tb2Jpc3BvdC9pbWcvaW5mby9wYXJ0bmVyXycgKyByZXNvbHV0aW9uICsgJy5qcGcpJyk7XHJcbiBcclxuICB9KTtcclxuICAqL1xyXG4gIFxyXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=