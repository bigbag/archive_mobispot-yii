!function(e,t,o){"use strict";t.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){var s,r={},i={},a=!1,c=t.copy,d=t.isUndefined;return n.addPollFn(function(){var t=n.cookies();s!=t&&(s=t,c(t,i),c(t,r),a&&e.$apply())})(),a=!0,e.$watch(function(){var e,s,a;for(e in i)d(r[e])&&n.cookies(e,o);for(e in r)s=r[e],t.isString(s)||(s=""+s,r[e]=s),s!==i[e]&&(n.cookies(e,s),a=!0);if(a)for(e in s=n.cookies(),r)r[e]!==s[e]&&(d(s[e])?delete r[e]:r[e]=s[e])}),r}]).factory("$cookieStore",["$cookies",function(e){return{get:function(o){return(o=e[o])?t.fromJson(o):o},put:function(o,n){e[o]=t.toJson(n)},remove:function(t){delete e[t]}}}])}(window,window.angular),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig",function(e){return{require:"?ngModel",link:function(t,o,n,s){function r(e,t){return t&&"function"==typeof t?function(o,n){e(o,n),t(o,n)}:e}var i={},a={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(i,e),s&&(s.$render=function(){o.sortable(i)},a.start=function(e,t){t.item.sortable={index:t.item.index()}},a.update=function(e,t){t.item.sortable.resort=s},a.receive=function(e,t){t.item.sortable.relocate=!0,s.$modelValue.splice(t.item.index(),0,t.item.sortable.moved)},a.remove=function(e,t){t.item.sortable.moved=1===s.$modelValue.length?s.$modelValue.splice(0,1)[0]:s.$modelValue.splice(t.item.sortable.index,1)[0]},a.stop=function(e,o){if(o.item.sortable.resort&&!o.item.sortable.relocate){var n,s;s=o.item.sortable.index,n=o.item.index(),o.item.sortable.resort.$modelValue.splice(n,0,o.item.sortable.resort.$modelValue.splice(s,1)[0])}(o.item.sortable.resort||o.item.sortable.relocate)&&t.$apply()}),t.$watch(n.uiSortable,function(e){angular.forEach(e,function(e,t){a[t]&&(e=r(a[t],e)),o.sortable("option",t,e)})},!0),angular.forEach(a,function(e,t){i[t]=r(e,i[t])}),o.sortable(i)}}}]),angular.module("mobispot",["ngCookies","ui.sortable"]),angular.module("mobispot").service("contentService",function(){this.desktopModal=function(e,t){if(angular.isUndefined(t)&&(t=500),angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open"),"none"==e)return $(".show-block.active").removeClass("active").fadeOut(t),!1;var o=angular.element("#"+e);$(".show-block").hasClass("active")?$(".show-block.active").removeClass("active").fadeOut(t,function(){o.fadeIn(t).addClass("active")}):o.fadeIn(t).addClass("active")},this.mobileModal=function(e,t){var o=angular.element(".m-result"),n=o.find("p");o.removeClass("m-negative"),"error"==t&&o.addClass("m-negative"),o.hide(),o.show(),n.text(e),setTimeout(function(){o.hide()},5e3)},this.scrollPage=function(e,t){angular.isUndefined(t)&&(t=600);var o=$(e).offset().top;$("html, body").animate({scrollTop:o},t)}}),angular.module("mobispot").controller("DemokitController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,s){e.error={},e.$watch("store.stage",function(){"shipping"!=e.store.stage||e.orderForm.$valid||(e.store.stage="delivery",e.error.field=!0)}),e.$watch("order.name + order.email + order.phone + order.address + order.city + order.zip + order.country + order.shipping + order.payment",function(){e.error.field=!1}),e.order={name:"",email:"",phone:"",address:"",city:"",zip:"",country:"",shipping:1,payment:1},e.products={},e.max_product_id=0,e.prices={},e.shippings={},e.payments={},e.total=0,e.toMain=!1,e.registerProduct=function(t,o){e.products[t]=0,t>e.max_product_id&&(e.max_product_id=t),e.prices[t]=o},e.addProduct=function(t){e.products[t]<9&&e.products[t]++,e.calculateSumm()},e.deductProduct=function(t){e.products[t]>0&&e.products[t]--,e.calculateSumm()},e.registerShipping=function(t,o){e.shippings[t]=o},e.setShipping=function(t,o){e.order.shipping=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click(),e.calculateSumm()},e.registerPayment=function(t,o){e.payments[t]=o},e.setPayment=function(t,o){e.order.payment=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click()},e.calculateSumm=function(){e.summ=120,e.total=e.summ,e.order.shipping&&"undefined"!=typeof e.shippings[e.order.shipping]&&(e.total+=e.shippings[e.order.shipping])},e.buyDemoKit=function(n){return e.orderForm.$valid?void(e.toMain?window.location.href="/":(n.products=e.products,t.post("/service/buyDemoKit",n).success(function(t){"no"==t.error?"email"==t.action?(e.result.message=t.message,s.desktopModal("message"),e.toMain=!0,e.finishButton=e.toMainMessage):(angular.element("#demo-kit-block").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):(e.result.message=t.message,s.desktopModal("message"))}))):!1}}]),angular.module("mobispot").controller("HelpController",["$scope","$http","contentService",function(e,t,o){e.error={},e.send=function(n,s){return s?(n.email=n.help_email,void t.post("/service/sendQuestion",n).success(function(t){"no"==t.error&&(e.user.name="",e.user.help_email="",e.user.question="",e.user.phone="",e.result.message=t.content,o.viewModal("message"))})):!1}}]),angular.module("mobispot").controller("PhonesController",["$scope",function(e){e.initPhones=function(t){e.phonesList=t},e.initDevices=function(t){e.devicesList=t},e.phonesList=[],e.devicesList=[]}]),angular.module("mobispot").controller("SlideController",["$scope",function(e){e.IMAGE_WIDTH=300,e.FADE_SPEED=600,e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.wristband={},e.wristband.name="wristband",e.wristband.listposition={left:"0px"},e.wristband.slides=[{id:0,img:"wristband_black.png",tmb_style:"background: #000"},{id:1,img:"wristband_blue.png",tmb_style:"background: #0062FF"},{id:2,img:"wristband_red.png",tmb_style:"background: #ff0050"},{id:3,img:"wristband_green.png",tmb_style:"background: #30D874"},{id:4,img:"wristband_yellow.png",tmb_style:"background: #30D874"},{id:5,img:"wristband_green_p1.png",tmb_style:"background: #30D874"},{id:6,img:"wristband_blue_p2.png",tmb_style:"background: #30D874"},{id:7,img:"wristband_red_p3.png",tmb_style:"background: #30D874"},{id:8,img:"wristband_black_p4.png",tmb_style:"background: #30D874"},{id:9,img:"wristband_blue_p5.png",tmb_style:"background: #30D874"},{id:10,img:"wristband_green_p6.png",tmb_style:"background: #30D874"},{id:11,img:"wristband_red_p7.png",tmb_style:"background: #30D874"},{id:12,img:"wristband_white.png",tmb_style:"background: #fff"}],e.wristband.current=e.getRandomInt(0,e.wristband.slides.length-1),e.cards={},e.cards.name="cards",e.cards.listposition={left:"0px"},e.cards.slides=[{id:0,img:"card_black.png",tmb_style:"background: #000"},{id:1,img:"card_blue.png",tmb_style:"background: #0062FF"},{id:2,img:"card_green.png",tmb_style:"background: #5AC0B9"},{id:3,img:"card_red.png",tmb_style:"background: #AB2640"},{id:4,img:"card_yellow.png",tmb_style:"background: #d5d850"},{id:5,img:"card_white.png",tmb_style:"background: #fff"}],e.cards.current=e.getRandomInt(0,e.cards.slides.length-1),e.keyfobs={},e.keyfobs.name="keyfobs",e.keyfobs.listposition={left:"0px"},e.keyfobs.slides=[{id:0,img:"keyfobs_black.png",tmb_style:"background: #000"},{id:1,img:"keyfobs_red.png",tmb_style:"background: #ff0050"},{id:2,img:"keyfobs_green.png",tmb_style:"background: #30D874"},{id:3,img:"keyfobs_yellow.png",tmb_style:"background: #d5d850"},{id:4,img:"keyfobs_blue.png",tmb_style:"background: #0062FF"},{id:5,img:"keyfobs_white.png",tmb_style:"background: #fff"}],e.keyfobs.current=e.getRandomInt(0,e.keyfobs.slides.length-1),e.scrollTo=function(t,o){t.listposition={left:e.IMAGE_WIDTH*o*-1+"px"}},e.fadeTo=function(t,o){if(t.current==o)return!1;angular.element("#slider-"+t.name+" .f-slide").stop();var n="#"+t.name+"_"+o;console.log(n),t.current=o,angular.element("#slider-"+t.name+" .f-slide[id!="+n+"]").fadeOut(0),angular.element(n).fadeIn(e.FADE_SPEED)},e.randomSlide=function(t){e.fadeTo(t,e.getRandomInt(0,t.slides.length-1))}}]),angular.module("mobispot").controller("SpotController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,s){function r(e){e.stopPropagation(),e.preventDefault(),"dragover"==e.type?angular.element("#dropbox").addClass("hover"):angular.element("#dropbox").removeClass("hover")}function i(t){r(t);for(var o,n=t.target.files||t.dataTransfer.files,s=0;o=n[s];s++)e.uploadFile(o)}function a(t){e.$apply(function(){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"})}e.maxSize=26214400,e.progress=0,e.keys=[],e.action=!1,e.error={},e.result={},e.spot={},e.spot.discodes=0,e.general={},e.general.views=!1,e.host_mobile=0,e.wallet={},e.wallet.cards={},e.scroll_key=-1,e.actions={},e.actions.page="",e.actions.phrase="",e.actions.in_progress=!1,e.actions.offset=0,e.actions.count_all=0,e.$watch("spot.code + spot.terms",function(){e.error.code=!1,e.error.terms=!1}),e.addSpot=function(n){return n.code&&e.spot.terms?void t.post("/spot/add",n).success(function(t){"no"==t.error?(e.spot.discodes=t.discodes,angular.element(".spot-list").prepend(o(t.content)(e)),angular.element("#actSpot").click(),delete e.spot.code,delete e.spot.terms,e.host_mobile&&(window.location.href="http://"+window.location.hostname+"/spot/list")):"yes"==t.error&&(e.error.code=!0)}):!1},e.$watch("general.views + spot.discodes",function(){e.actions.page="",angular.element(window).unbind("scroll",e.loadMoreCoupons),"spot"==e.general.views?e.viewSpot(e.spot):"wallet"==e.general.views?e.viewWallet(e.spot):"coupon"==e.general.views?e.viewCoupons(e.spot,e.actions):"settings"==e.general.views&&e.viewsSettings(e.spot)}),e.bodyMinHeight=function(){var e=angular.element(".spot-list").height();angular.element(".spot-content").css("min-height",e+200)},e.viewSpot=function(n){if(0===n.discodes)return!1;var r=angular.element("#spot-block");t.post("/spot/view",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.keys=[],e.content_iteration=0,e.fileUploadInit(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500),s.scrollPage(e.scroll_key&&e.scroll_key>1?"#block-"+e.scroll_key:"body"),e.scroll_key=-1)})},e.addContent=function(){e.addValue(e.spot.content)},e.addValue=function(n){e.spot.content=n,t.post("/spot/spotAddContent",e.spot).success(function(t){if("no"==t.error){angular.element("#add-content").append(o(t.content)(e)),e.spot.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),angular.element("#extraMediaForm").hasClass("open")&&(angular.element("#extraMediaForm").slideUp(0,function(){angular.element("#extraMediaForm a").removeClass("blackout"),angular.element("#extraMediaForm a").fadeTo(0,1)}),angular.element("#extraMediaForm").removeClass("open"));var n=angular.element("#block-"+t.key).offset().top;angular.element("html, body").animate({scrollTop:n},600)}}),e.resetCursor()},e.saveOrder=function(){t.post("/spot/saveOrder",e.spot).success(function(e){"no"==e.error})},e.sortableOptions={update:function(){e.saveOrder()},containment:".spot-content",handle:".move",scrollSensitivity:5,tolerance:"pointer",opacity:.8},e.removeContent=function(o,n,s){o.key=n,t.post("/spot/spotRemoveContent",o).success(function(t){if("no"==t.error){var o=angular.element(s.currentTarget).parents(".spot-item");o.remove(),e.keys=t.keys,t.netDown&&e.netDown(t.netDown)}})},e.editContent=function(t,n,s){if(t.content_new)e.hideSpotEdit();else{t.key=n;var r=angular.element(s.currentTarget).parents(".spot-item"),i=angular.element("#spot-edit").clone();if(r.find("a.type-link").size()>0){var a=r.find("a.type-link");e.spot.content_new=a.find("span.link").text()}else{var c=r.find("p.item-type__text");e.spot.content_new=c.text()}i.removeClass("hide"),i.find("textarea").focus(1),r.hide().before(o(i)(e))}},e.saveContent=function(n,s){var r=angular.element(s.currentTarget).parents(".spot-item"),i=r.next();t.post("/spot/spotSaveContent",n).success(function(t){"no"==t.error?(r.before(o(t.content)(e)),r.remove(),i.remove()):(r.remove(),i.show()),delete e.spot.content_new})},e.hideSpotEdit=function(){if(!e.spot.content&&!e.spot.content_new)return!1;var n=angular.element("#spot-edit"),s=n.next();t.post("/spot/spotSaveContent",e.spot).success(function(t){"no"==t.error?(n.before(o(t.content)(e)),n.remove(),s.remove()):(n.remove(),s.show()),delete e.spot.content_new})},e.renameSpot=function(e){return e.name?void t.post("/spot/rename",e).success(function(t){"no"==t.error&&angular.element("#"+e.discodes+" h3").text(e.name)}):!1},e.cleanSpot=function(o){t.post("/spot/clean",o).success(function(t){"no"==t.error&&(e.general.views="spot")})},e.removeSpot=function(e){t.post("/spot/remove",e).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")})},e.ivisibleSpot=function(o){t.post("/spot/invisible",o).success(function(t){"no"==t.error&&(e.spot.status=t.status,angular.element("#"+o.discodes).toggleClass("invisible"))})},e.viewsSettings=function(n){var s=angular.element("#spot-block");t.post("/spot/settings",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewWallet=function(n){var s=angular.element("#spot-block");t.post("/spot/wallet",n).success(function(t){"no"==t.error?(s.empty(),s.html(o(t.content)(e)),e.getListCard(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500)):e.viewSpot(e.spot)})},e.viewCoupons=function(n){var s=angular.element("#spot-block");t.post("/spot/coupons",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.listCoupons=function(n,s){if(!s.page)return!1;var r=angular.element("#coupons-list"),i={discodes:n.discodes,token:n.token,page:s.page,phrase:s.phrase,offset:s.offset};e.actions.in_progress=!0,t.post("/spot/listCoupons",i).success(function(t){"no"==t.error&&(e.actions.offset+=t.count,e.actions.count_all=t.count_all,r.append(o(t.content)(e)),e.actions.in_progress=!1)}).error(function(){e.actions.in_progress=!1})},e.filterCoupons=function(t,o){e.actions.offset=0,e.actions.count_all=0,e.listCoupons(t,o)},e.getListCard=function(){return"wallet"!=e.general.views?!1:(t.post("/spot/listCard",e.wallet).success(function(t){"no"==t.error&&(e.wallet.cards=t.cards,e.wallet.cards_count=t.cards_count,e.wallet.linking_card=t.linking_card)}),void n(function(){e.getListCard()},5e3))},e.blockedWallet=function(){t.post("/spot/blockedWallet",e.wallet).success(function(t){"no"==t.error&&(e.wallet.status=t.status)})},e.linkingCard=function(e){return e.terms?void angular.element("#linking_card").submit():!1},e.setPaymentCard=function(o,n){var s={token:e.spot.token,card_id:o};t.post("/spot/setPaymentCard",s).success(function(e){"no"==e.error&&(angular.element(".main-card").removeClass("main-card"),angular.element(n.currentTarget).parent().parent().addClass("main-card"))})},e.editCardList=function(){$(".table-card").toggleClass("edit"),e.wallet.card_edit=0===e.wallet.card_edit?1:0},e.removeCard=function(o){var n={token:e.spot.token,card_id:o};t.post("/spot/removeCard",n).success(function(t){"no"==t.error&&(e.wallet.cards_count-=1,delete e.wallet.cards[o])})};var c;e.countReset=function(){e.reset_time="undefined"!=typeof e.reset_time?e.reset_time:30,c=n(function(){0===e.reset_time?$(location).attr("href",window.location.pathname):e.reset_time--,e.countReset()},1e3)},e.fileUploadInit=function(){var e=document.getElementById("dropbox"),t=document.getElementById("add-file");if(e&&t){var o=new XMLHttpRequest;o.upload&&(e.addEventListener("dragover",r,!1),e.addEventListener("dragleave",r,!1),e.addEventListener("drop",i,!1),t.addEventListener("change",i,!1))}},e.uploadComplete=function(t){var n=t.target.responseText;if(n){var s=angular.fromJson(n);if("no"==s.error){angular.element("#progress-content").hide(),angular.element("#add-content").append(o(s.content)(e)),e.keys.push(s.key),angular.element("#add-file").val("");var r=$("#block-"+s.key).offset().top;angular.element("html, body").animate({scrollTop:r},600)}}},e.uploadFailed=function(){angular.element("#error-upload").show().delay(800).slideUp("slow")},e.uploadFile=function(t){var o=new XMLHttpRequest;o.upload&&t.size<=e.maxSize&&(angular.element("#progress-content").show(),o.upload.onprogress=function(t){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"},o.upload.addEventListener("progress",a,!1),o.addEventListener("error",e.uploadFailed,!1),o.addEventListener("load",e.uploadComplete,!1),o.open("POST","/spot/upload",!0),o.setRequestHeader("X-File-Name",unescape(encodeURIComponent(t.name))),o.setRequestHeader("X-Discodes",e.spot.discodes),o.send(t))},e.loadSocContent=function(n){var s={discodes:e.spot.discodes,key:n,token:e.user.token};t.post("/spot/SocNetContent",s).success(function(t){if("no"==t.error){var n=angular.element("#block-"+t.key),s=n.height(),r=n.offset().top;if(n.before(o(t.content)(e)),n.remove(),e.setVideoSize(t.key),r<$("html, body").scrollTop()){var i=$("html, body").scrollTop()+$("#block-"+t.key).height()-s;$("html, body").animate({scrollTop:i},0)}}})},e.netCheck=function(o){var n={token:e.user.token,netName:o};t.post("/spot/netCheck",n).success(function(e){if("no"==e.error){var t=angular.element("#extraMediaForm a[net='"+e.netName+"']");e.binded?t.addClass("binded"):t.removeClass("binded")}})},e.netUp=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.addClass("binded")},e.netDown=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.removeClass("binded")};var d,u,l;e.bindByPanel=function(s){var r=s,i={spot:e.spot,token:e.user.token,netName:r};if("undefined"!=typeof e.spot.content&&e.spot.content.length){i.link=e.spot.content;for(var a=0;a<e.soc_patterns.length;a++)if(-1!=e.spot.content.indexOf(e.soc_patterns[a].baseUrl)){r=e.soc_patterns[a].name,i.netName=e.soc_patterns[a].name;break}}t.post("/spot/BindByPanel",i).success(function(t){if("no"==t.error&&0===t.profileHint.length)if(t.loggedIn){if("ok"==t.linkCorrect){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.setVideoSize(t.key);var s=$("#block-"+t.key).offset().top;$("html, body").animate({scrollTop:s},600),e.netUp(t.socnet);var i=e.getPatternInd(t.socnet);i>-1&&(e.soc_patterns[i].BindByPaste=!0)}}else{var a=$.extend({id:"",popup:{width:450,height:380}},a),c="http://"+window.location.hostname+"/user/BindSocLogin?service="+r,l=c;l+=l.indexOf("?")>=0?"&":"?",-1===l.indexOf("redirect_uri=")&&(l+="redirect_uri="+encodeURIComponent(c));var p=(window.screen.width-a.popup.width)/2,m=(window.screen.height-a.popup.height)/2;if(e.host_mobile||(d=window.open(l+"&js","yii_eauth_popup","width="+a.popup.width+",height="+a.popup.height+",left="+p+",top="+m+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var f=l+"&discodes="+e.spot.discodes+"&newField=1&synch=true";"undefined"!=typeof e.spot.content&&e.spot.content.length&&(f+="&link="+encodeURIComponent(e.spot.content)),window.location.href=f}else d.focus(),e.bindNet={name:t.socnet,discodes:e.spot.discodes,newField:1},"undefined"!=typeof e.spot.content&&e.spot.content.length&&(e.bindNet.link=e.spot.content),u=n(e.loginTimer,1e3)}})},e.getPatternInd=function(t){for(var o=-1,n=0;n<e.soc_patterns.length;n++)if(e.soc_patterns[n].name==t){o=n;break}return o},e.bindSocial=function(r,i,a){var c=angular.element(a.currentTarget).parents(".spot-item");r.key=i,t.post("/spot/bindSocial",r).success(function(t){if("no"==t.error)if("no"!=t.socnet&&t.socnet.length>0)if(t.loggedIn)if("ok"==t.linkCorrect){c.before(o(t.content)(e)),c.remove();var i=e.getPatternInd(t.socnet);i>-1&&(e.soc_patterns[i].BindByPaste=!0),e.setVideoSize(r.key),e.netUp(t.socnet)}else s.setModal(t.linkCorrect,"none");else{var l=$.extend({id:"",popup:{width:450,height:380}},l),p="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.socnet,m=p;m+=m.indexOf("?")>=0?"&":"?",-1===m.indexOf("redirect_uri=")&&(m+="redirect_uri="+encodeURIComponent(p));var f=(window.screen.width-l.popup.width)/2,g=(window.screen.height-l.popup.height)/2;d=window.open(m+"&js","yii_eauth_popup","width="+l.popup.width+",height="+l.popup.height+",left="+f+",top="+g+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes"),null===d||"undefined"==typeof d?window.location.href=m+"&discodes="+r.discodes+"&key="+r.key+"&synch=true":(d.focus(),e.bindNet={name:t.socnet,discodes:r.discodes,key:r.key,spotEdit:angular.element(a.currentTarget).parents(".spot-item")},u=n(e.loginTimer,1e3))}else"ok"!=t.linkCorrect&&s.setModal(t.linkCorrect,"none")})},e.checkLike=function(r,i){var a,c={token:e.user.token,id:i,discodes:e.spot.discodes};t.post("/user/checkLike",c).success(function(t){if("no"==t.error)if(t.isSocLogged)"undefined"!=typeof t.message_error&&"undefined"!=typeof t.message&&("yes"==t.message_error?s.setModal(t.message,"error"):s.setModal(t.message,"none")),"undefined"!=typeof t.content&&(a=e.host_mobile?angular.element(r.currentTarget).parent().parent().parent().parent():angular.element(r.currentTarget).parent().parent("div.spot-item"),a.before(o(t.content)(e)),a.remove());else{var c=$.extend({id:"",popup:{width:450,height:380}},c),u="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.service,p=u;p+=p.indexOf("?")>=0?"&":"?",-1===p.indexOf("redirect_uri=")&&(p+="redirect_uri="+encodeURIComponent(u)+"&"),p+="js";var m=(window.screen.width-c.popup.width)/2,f=(window.screen.height-c.popup.height)/2;if(e.host_mobile||(d=window.open(p,"yii_eauth_popup","width="+c.popup.width+",height="+c.popup.height+",left="+m+",top="+f+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var g=p+"&discodes="+e.spot.discodes+"&chek_like="+i;window.location.href=g}else d.focus(),e.checkingAction={id:i},e.actionDiv=angular.element(r.currentTarget).parent().parent("div.spot-item"),l=n(e.likesTimer,1e3)}})},e.likesTimer=function(){if(!d.closed){var r={token:e.user.token,id:e.checkingAction.id,discodes:e.spot.discodes};t.post("/user/checkLike",r).success(function(t){"undefined"!=typeof t.isSocLogged&&(t.isSocLogged?(d.close(),e.bindNet={},"undefined"!=typeof t.message_error&&"undefined"!=typeof t.message&&("yes"==t.message_error?s.setModal(t.message,"error"):s.setModal(t.message,"none")),"undefined"!=typeof t.content&&"undefined"!=typeof e.actionDiv&&(e.actionDiv.before(o(t.content)(e)),e.actionDiv.remove())):l=n(e.likesTimer,1e3))})}},e.disableAction=function(n,s){var r,i={token:e.user.token,id:s,discodes:e.spot.discodes};t.post("/user/disableLoyalty",i).success(function(t){"no"==t.error&&(r=e.host_mobile?angular.element(n.currentTarget).parent().parent().parent().parent():angular.element(n.currentTarget).parent().parent("div.spot-item"),r.before(o(t.content)(e)),r.remove())})},e.loginTimer=function(){if(!d.closed){var r={name:e.bindNet.name,discodes:e.bindNet.discodes,key:e.bindNet.key};"undefined"!=typeof e.bindNet.newField&&1==e.bindNet.newField&&(r.newField=1),"undefined"!=typeof e.bindNet.link&&e.bindNet.link.length&&(r.link=e.bindNet.link);var i={token:e.user.token,bindNet:r};t.post("/spot/bindedContent",i).success(function(t){if("undefined"!=typeof t.loggedIn&&"undefined"!=typeof t.linkCorrect)if(t.loggedIn)if(d.close(),"ok"==t.linkCorrect){if(t.newField){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.netUp(t.socnet),e.setVideoSize(t.key);var r=$("#block-"+t.key).offset().top-100;angular.element("html, body").animate({scrollTop:r},600)}else{var i=e.bindNet.spotEdit;i.before(o(t.content)(e)),i.remove(),e.setVideoSize(t.key),e.netUp(t.socnet)}e.bindNet={};var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else s.setModal(t.linkCorrect,"none");else u=n(e.loginTimer,1e3)})}},e.unBindSocial=function(n,s,r){n.key=s,t.post("/spot/UnBindSocial",n).success(function(t){if("no"==t.error){var n=angular.element(r.currentTarget).parents(".spot-item");n.before(o(t.content)(e)),n.remove(),t.netDown&&e.netDown(t.netDown)}})},e.getSocPatterns=function(){if(e.freeSocial=!0,"undefined"==typeof e.soc_patterns){var o={token:e.user.token};t.post("/spot/SocPatterns",o).success(function(t){e.soc_patterns=t.soc_patterns;for(var o=0;o<e.soc_patterns.length;o++)"undefined"==typeof e.soc_patterns[o].BindByPaste&&(e.soc_patterns[o].BindByPaste=!1)})}},e.setVideoSize=function(e){var t;1==angular.element("#block-"+e+" .video-vimeo").length?(t=angular.element("#block-"+e+" .video-vimeo"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px")):1==angular.element("#block-"+e+" .yt_player").length&&(t=angular.element("#block-"+e+" .yt_player"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px"))},e.setNewPass=function(o){t.post("/spot/setSpotPass",o).success(function(t){"no"==t.error&&"undefined"!=typeof t.saved?(angular.element("#savePassButton").text(t.saved),"undefined"!=typeof e.spot.pass&&o.pass.length?angular.element("#resetPassButton").show():angular.element("#resetPassButton").hide()):"yes"==t.error&&angular.element("#setPassForm input[name=newPass]").addClass("error")})},e.resetPass=function(t){t.pass="",e.setNewPass(t)},e.savePassButtonText=function(e){angular.element("#savePassButton").text(e),angular.element("#setPassForm input[name=newPass]").removeClass("error")},e.checkStatusSpot=function(){return!0},e.resetCursor=function(){"undefined"!=typeof e.cursorBody&&e.cursorBody.length?(angular.element("body").css("cursor",e.cursorBody),delete e.cursorBody):angular.element("body").css("cursor","default"),"undefined"!=typeof e.cursorTextarea&&e.cursorTextarea.length?(angular.element("#dropbox textarea").css("cursor",e.cursorTextarea),delete e.cursorTextarea):angular.element("#dropbox textarea").css("cursor","text")},e.$watch("actions.page",function(){e.actions.offset=0,e.actions.count_all=0;var t=angular.element("#coupons-list");t.empty(),e.listCoupons(e.spot,e.actions)}),e.couponsScroll=function(){e.actions.in_progress=!1,angular.element(window).bind("scroll",e.loadMoreCoupons)},e.loadMoreCoupons=function(){angular.element(window).scrollTop()+angular.element(window).height()>=angular.element(document).height()-200&&!e.actions.in_progress&&e.actions.offset<e.actions.count_all&&e.listCoupons(e.spot,e.actions)}}]),angular.module("mobispot").controller("ProductController",["$scope","$http","$compile","$timeout","contentService",function(e,t){e.StoreInit=function(){var n={token:e.user.token};t.post("/store/product/getPriceList",n).success(function(t){e.products=t.products,e.settings=t.settings;for(var n=0;n<e.products.length;n++)if(e.products[n].jsID=n,e.products[n].selectedSize=e.products[n].size[0],e.products[n].selectedColor=e.products[n].color[0],e.products[n].selectedSurface=e.products[n].surface[0],e.products[n].quantity=1,e.products[n].listposition={left:"0px"},e.products[n].addText=e.settings.addToCart,"undefined"!=typeof e.products[n].selectedColor&&"undefined"!=typeof e.products[n].photo&&e.products[n].photo.length>0)for(var s="_"+e.products[n].selectedColor,r=0;r<e.products[n].photo.length;r++){var i=e.products[n].photo[r].substring(0,e.products[n].photo[r].lastIndexOf("."));if(i.substr(i.length-s.length)==s){e.products[n].listposition={left:o*r*-1+"px"};break}}e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var o=242;e.scrollTo=function(t,n,s){e.products[s].listposition={left:o*n*-1+"px"}},e.addToCart=function(o){if(e.products[o].quantity<1)return!1;if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:parseInt(e.products[o].quantity),selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/addToCart",n).success(function(t){if("no"==t.error){e.products[o].addText=e.settings.added,e.items.count+=parseInt(e.products[o].quantity);var n=angular.element("a.icon-bag-link span");n.text(e.items.count)}}),e.inRequest=!1}},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.setSize=function(t,o){e.products[t].selectedSize=o,e.products[t].addText=e.settings.addToCart},e.setColor=function(t,n){if(e.products[t].selectedColor=n,e.products[t].addText=e.settings.addToCart,"undefined"!=typeof e.products[t].photo&&e.products[t].photo.length>0)for(var s="_"+n,r=0;r<e.products[t].photo.length;r++){var i=e.products[t].photo[r].substring(0,e.products[t].photo[r].lastIndexOf("."));if(i.substr(i.length-s.length)==s){e.products[t].listposition={left:o*r*-1+"px"};break}}},e.setSurface=function(t,o){e.products[t].selectedSurface=o,e.products[t].addText=e.settings.addToCart},e.resetAddedText=function(t){e.products[t].addText=e.settings.addToCart,e.products[t].quantity<0&&(e.products[t].quantity=0)},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"}}]),angular.module("mobispot").controller("CartController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,s){e.promoError=!1,e.CartInit=function(){e.summ=0;var o={token:e.user.token};t.post("/store/product/GetCart",o).success(function(t){e.products=t.products,e.discount=t.discount,e.products.length<=0&&(window.location="/store");for(var o=0;o<e.products.length;o++)if(e.products[o].jsID=o,e.products[o].quantity=parseInt(e.products[o].quantity),e.summ+=parseFloat(e.products[o].selectedSize.price)*e.products[o].quantity,e.products[o].listposition={left:"0px"},"undefined"!=typeof e.products[o].selectedColor&&"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var n="_"+e.products[o].selectedColor,s=0;s<e.products[o].photo.length;s++){var i=e.products[o].photo[s].substring(0,e.products[o].photo[s].lastIndexOf("."));if(i.substr(i.length-n.length)==n){e.products[o].listposition={left:r*s*-1+"px"};break}}if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var o=0;o<e.products.length;o++)for(var s=0;s<e.discount.products.length;s++)if(e.products[o].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[o].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.checkingOut=!1,e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var r=242;e.scrollTo=function(t,o,n){e.products[n].listposition={left:r*o*-1+"px"}},e.emptyClass=function(){return e.products?e.products.length>0?"hide":"":void 0},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.chekingOutClass=function(){return e.checkingOut?"":"hide"},e.setSize=function(t,o){e.summ-=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity,e.products[t].selectedSize=o,e.summ+=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity},e.setColor=function(o,n){var s={id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor};if("undefined"!=typeof e.products[o].selectedSize&&(s.selectedSize=e.products[o].selectedSize),"undefined"!=typeof e.products[o].selectedSurface&&(s.selectedSurface=e.products[o].selectedSurface),e.products[o].selectedColor=n,"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var i="_"+n,a=0;a<e.products[o].photo.length;a++){var c=e.products[o].photo[a].substring(0,e.products[o].photo[a].lastIndexOf("."));if(c.substr(c.length-i.length)==i){e.products[o].listposition={left:r*a*-1+"px"};break}}var d={token:e.user.token,oldProduct:s,newProduct:e.products[o]};t.post("/store/product/SaveProduct",d).success(function(e){"no"!=e.error
})},e.setSurface=function(t,o){e.products[t].selectedSurface=o},e.setDelivery=function(t){e.selectedDelivery=e.deliveries[t]},e.setPayment=function(t){e.selectedPayment=e.payments[t]},e.changeQuantity=function(o){if(parseInt(e.products[o].quantity)<=0)e.deleteItem(o);else{e.summ=0;for(var n=0;n<e.products.length;n++)e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if("undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}var r={token:e.user.token,oldProduct:e.products[o],newProduct:e.products[o]};t.post("/store/product/SaveProduct",r).success(function(e){"no"!=e.error})}},e.checkOut=function(){if(0===e.summ)return!1;if(!e.checkingOut){var o={token:e.user.token};t.post("/store/product/getCustomer",o).success(function(t){e.deliveries=t.delivery,e.payments=t.payment,e.customer=t.customer;for(var o=0;o<e.deliveries.length;o++)e.deliveries[o].jsID=o;for(var o=0;o<e.payments.length;o++)e.payments[o].jsID=o;e.selectedDelivery=e.deliveries[0],e.selectedPayment=e.payments[0]}),e.checkingOut=!0}angular.element("#proceedNextForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedNextForm").offset().top},600)},e.deleteItem=function(o){if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/deleteFromCart",n).success(function(t){if("no"==t.error){e.products.splice(o,1),e.summ=0;for(var n=0;n<e.products.length;n++)e.products[n].jsID=n,e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.products.length<=0&&(window.location="/store")}}),e.inRequest=!1}},e.confirmPromo=function(){if(!e.inRequest){e.inRequest=!0,e.promoError=!1;var o={token:e.user.token,promoCode:e.discount.promoCode};t.post("/store/product/ConfirmPromo",o).success(function(t){if("no"==t.error){e.promoError=!1;var o=e.discount.summ;if(e.discount=t.discount,"undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var r=0;r<e.discount.products.length;r++)if(e.products[n].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0?(o>0&&(e.summ+=parseFloat(o)),e.summ-=e.discount.summ):o>0&&(e.summ+=parseFloat(o))}}else e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0),e.result.message=t.error,s.desktopModal("message")}).error(function(){e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0)})}e.inRequest=!1},e.saveCustomer=function(o){if(!o)return!1;if(0===e.summ)return!1;if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,customer:e.customer};t.post("/store/product/saveCustomer",n).success(function(t){"no"==t.error?(angular.element("#proceedFinishForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedFinishForm").offset().top},600)):(e.result.message=t.error,s.desktopModal("message"))}),e.inRequest=!1}},e.buy=function(){if(0===e.summ)return!1;var n={token:e.user.token,customer:e.customer,products:e.products,delivery:e.selectedDelivery,payment:e.selectedPayment,discount:e.discount};t.post("/store/product/buy",n).success(function(t){"no"==t.error?"Uniteller"==t.payment&&(angular.element("#proceedFinishForm").after(o(t.content)(e)),angular.element("#payUniteller").submit()):e.result.message=t.error,s.desktopModal("message")})},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"},e.valClass=function(e){return e?"":"error"}}]),angular.module("mobispot").controller("UserController",["$scope","$http","$compile","$cookies","contentService",function(e,t,o,n,s){e.error={},e.result={},e.modal="none",e.host_type="mobile",e.setEmpty=function(){e.user.password="",e.user.terms=0,e.error={},e.result={}},e.hideModal=function(){e.modal="none"},angular.element("#birthday").datepicker({yearRange:"1900:-0",dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.user.birthday=t})}}),e.$watch("modal",function(){e.setEmpty(e.modal),s.desktopModal(e.modal)}),e.setProfile=function(o){t.post("/user/editProfile",o).success(function(t){"no"==t.error&&(e.result.message=t.content,s.desktopModal("message"))})},e.getResolution=function(){var t=n.resolution;if(!t){for(var o=Math.max(screen.width,screen.height),s=[1920,1400,1280],r=0;r<s.length;r++)if(o>=s[r]){t=s[r];break}n.resolution=""+t,e.resolution=t}},e.login=function(o,n){return n?void t.post("/service/login",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content):"no"==t.error?angular.element(location).attr("href","/spot/list/"):angular.element(location).attr("href","/")}):!1},e.$watch("user.email + user.password + user.code",function(){e.error.email=!1,e.error.code=!1,e.error.password=!1,e.error.content=""}),e.activation=function(o,n){return n?0===o.terms?!1:void t.post("/service/registration",o).success(function(t){"no"==t.error?(e.user.email="",e.user.password="",e.user.activ_code="",e.user.terms=0,"mobile"===e.host_type?s.mobileModal(t.content,"none"):(e.result.message=t.content,s.desktopModal("message"))):"email"==t.error?(e.error.email=!0,e.error.content=t.content,"mobile"===e.host_type&&s.mobileModal(t.content,"error")):"code"==t.error&&(e.error.code=!0,e.error.content=t.content,"mobile"===e.host_type&&s.mobileModal(t.content,"error"))}):!1},e.recovery=function(o,n){return n?void t.post("/service/recovery",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content,"mobile"===e.host_type&&s.mobileModal(t.content,"error")):"no"==t.error&&(e.user.email="",e.result.message=t.content,"mobile"===e.host_type?s.mobileModal(t.content,"none"):s.desktopModal("message"))}):!1},e.change=function(e,o){return o?void t.post(window.location.pathname,e).success(function(e){"no"==e.error&&angular.element(location).attr("href","/user/personal")}):!1}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXMiOlsiYW5ndWxhci1jb29raWVzLm1pbi5qcyIsInNvcnRhYmxlLmpzIiwiYXBwLmpzIiwic2VydmljZS5qcyIsImRlbW9raXQuanMiLCJoZWxwLmpzIiwicGhvbmUuanMiLCJzbGlkZS5qcyIsInNwb3QuanMiLCJzdG9yZS5qcyIsInVzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBS0EsU0FBQSxFQUFBLEVBQUEsR0FBQSxZQUFBLEdBQUEsT0FBQSxhQUFBLE9BQUEsUUFBQSxZQUFBLGFBQUEsV0FBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsV0FBQSxPQUFBLEdBQUEsVUFBQSxXQUFBLEdBQUEsR0FBQSxFQUFBLFNBQUEsSUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsY0FBQSxHQUFBLEVBQUEsRUFBQSxPQUFBLFdBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxVQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsUUFBQSxnQkFDQSxXQUFBLFNBQUEsR0FBQSxPQUFBLElBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQSxJQUFBLFNBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsSUFBQSxPQUFBLFNBQUEsU0FBQSxHQUFBLFNBQUEsT0FBQSxPQUFBLFNDREEsUUFBQSxPQUFBLGtCQUNBLE1BQUEsdUJBQ0EsVUFBQSxjQUFBLG1CQUNBLFNBQUEsR0FDQSxPQUNBLFFBQUEsV0FDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxrQkFBQSxHQUNBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxJQUdBLEVBR0EsR0FBQSxNQUVBLEdBQ0EsUUFBQSxLQUNBLE9BQUEsS0FDQSxNQUFBLEtBQ0EsS0FBQSxLQUNBLE9BQUEsS0FHQSxTQUFBLE9BQUEsRUFBQSxHQUVBLElBRUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxTQUFBLElBR0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxVQUFBLE1BQUEsRUFBQSxLQUFBLFVBR0EsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxTQUFBLE9BQUEsR0FHQSxFQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFNBQUEsVUFBQSxFQUVBLEVBQUEsWUFBQSxPQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsUUFHQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEdBR0EsRUFBQSxLQUFBLFNBQUEsTUFEQSxJQUFBLEVBQUEsWUFBQSxPQUNBLEVBQUEsWUFBQSxPQUFBLEVBQUEsR0FBQSxHQUVBLEVBQUEsWUFBQSxPQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsR0FBQSxJQUlBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxDQUdBLEdBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxLQUFBLFNBQUEsTUFDQSxFQUFBLEVBQUEsS0FBQSxRQUdBLEVBQUEsS0FBQSxTQUFBLE9BQUEsWUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLFlBQUEsT0FBQSxFQUFBLEdBQUEsS0FHQSxFQUFBLEtBQUEsU0FBQSxRQUFBLEVBQUEsS0FBQSxTQUFBLFdBQ0EsRUFBQSxXQU1BLEVBQUEsT0FBQSxFQUFBLFdBQUEsU0FBQSxHQUNBLFFBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FFQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBR0EsRUFBQSxTQUFBLFNBQUEsRUFBQSxPQUVBLEdBRUEsUUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE1BS0EsRUFBQSxTQUFBLFFDeEdBLFFBQUEsT0FBQSxZQUFBLFlBQUEsZ0JDQ0EsUUFBQSxPQUFBLFlBQUEsUUFBQSxpQkFBQSxXQUdBLEtBQUEsYUFBQSxTQUFBLEVBQUEsR0FNQSxHQUxBLFFBQUEsWUFBQSxLQUFBLEVBQUEsS0FFQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsUUFFQSxRQUFBLEVBRUEsTUFEQSxHQUFBLHNCQUFBLFlBQUEsVUFBQSxRQUFBLElBQ0EsQ0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLElBQUEsRUFFQSxHQUFBLGVBQUEsU0FBQSxVQUNBLEVBQUEsc0JBQUEsWUFBQSxVQUFBLFFBQUEsRUFBQSxXQUNBLEVBQUEsT0FBQSxHQUFBLFNBQUEsWUFHQSxFQUFBLE9BQUEsR0FBQSxTQUFBLFdBSUEsS0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsYUFDQSxFQUFBLEVBQUEsS0FBQSxJQUVBLEdBQUEsWUFBQSxjQUNBLFNBQUEsR0FDQSxFQUFBLFNBQUEsY0FFQSxFQUFBLE9BQ0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxHQUNBLFdBQUEsV0FDQSxFQUFBLFFBQ0EsTUFJQSxLQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxZQUFBLEtBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxNQzlDQSxRQUFBLE9BQUEsWUFBQSxXQUFBLHFCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUVBLEVBQUEsT0FBQSxjQUFBLFdBQ0EsWUFBQSxFQUFBLE1BQUEsT0FBQSxFQUFBLFVBQUEsU0FDQSxFQUFBLE1BQUEsTUFBQSxXQUNBLEVBQUEsTUFBQSxPQUFBLEtBSUEsRUFBQSxPQUFBLG1JQUFBLFdBQ0EsRUFBQSxNQUFBLE9BQUEsSUFHQSxFQUFBLE9BQ0EsS0FBQSxHQUNBLE1BQUEsR0FDQSxNQUFBLEdBQ0EsUUFBQSxHQUNBLEtBQUEsR0FDQSxJQUFBLEdBQ0EsUUFBQSxHQUNBLFNBQUEsRUFDQSxRQUFBLEdBR0EsRUFBQSxZQUNBLEVBQUEsZUFBQSxFQUNBLEVBQUEsVUFDQSxFQUFBLGFBQ0EsRUFBQSxZQUVBLEVBQUEsTUFBQSxFQUNBLEVBQUEsUUFBQSxFQUVBLEVBQUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsaUJBQ0EsRUFBQSxlQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQUEsR0FHQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQ0EsRUFBQSxpQkFHQSxFQUFBLGNBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQ0EsRUFBQSxpQkFHQSxFQUFBLGlCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxHQUFBLEdBR0EsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxTQUFBLEVBQ0EsbUJBQUEsSUFDQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQ0EsRUFBQSxpQkFHQSxFQUFBLGdCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLEdBR0EsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxRQUFBLEVBQ0EsbUJBQUEsSUFDQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBR0EsRUFBQSxjQUFBLFdBQ0EsRUFBQSxLQUFBLElBRUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxFQUFBLE1BQUEsVUFBQSxtQkFBQSxHQUFBLFVBQUEsRUFBQSxNQUFBLFlBQ0EsRUFBQSxPQUFBLEVBQUEsVUFBQSxFQUFBLE1BQUEsWUFHQSxFQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxVQUFBLFlBRUEsRUFBQSxPQUNBLE9BQUEsU0FBQSxLQUFBLEtBRUEsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLEtBQUEsc0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFDQSxTQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLFdBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQUEsZ0JBRUEsUUFBQSxRQUFBLG1CQUFBLE1BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxRQUFBLFFBQUEsZ0JBQUEsV0FHQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLGlCQW5CQSxNQ3RGQSxRQUFBLE9BQUEsWUFBQSxXQUFBLGtCQUNBLFNBQUEsUUFBQSxpQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FFQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLGVBQ0EsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsV0FBQSxHQUNBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsR0FFQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLGdCQVZBLE1DUEEsUUFBQSxPQUFBLFlBQUEsV0FBQSxvQkFDQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFdBQUEsU0FBQSxHQUVBLEVBQUEsV0FBQSxHQUdBLEVBQUEsWUFBQSxTQUFBLEdBRUEsRUFBQSxZQUFBLEdBR0EsRUFBQSxjQUVBLEVBQUEsa0JDZEEsUUFBQSxPQUFBLFlBQUEsV0FBQSxtQkFDQSxTQUFBLFNBQUEsR0FFQSxFQUFBLFlBQUEsSUFDQSxFQUFBLFdBQUEsSUFFQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxVQUFBLEVBQUEsRUFBQSxJQUFBLEdBR0EsRUFBQSxhQUNBLEVBQUEsVUFBQSxLQUFBLFlBQ0EsRUFBQSxVQUFBLGNBQUEsS0FBQSxPQUNBLEVBQUEsVUFBQSxTQUNBLEdBQUEsRUFBQSxJQUFBLHNCQUFBLFVBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEscUJBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSxvQkFBQSxVQUFBLHdCQUNBLEdBQUEsRUFBQSxJQUFBLHNCQUFBLFVBQUEsd0JBQ0EsR0FBQSxFQUFBLElBQUEsdUJBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSx5QkFBQSxVQUFBLHdCQUNBLEdBQUEsRUFBQSxJQUFBLHdCQUFBLFVBQUEsd0JBQ0EsR0FBQSxFQUFBLElBQUEsdUJBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSx5QkFBQSxVQUFBLHdCQUNBLEdBQUEsRUFBQSxJQUFBLHdCQUFBLFVBQUEsd0JBQ0EsR0FBQSxHQUFBLElBQUEseUJBQUEsVUFBQSx3QkFDQSxHQUFBLEdBQUEsSUFBQSx1QkFBQSxVQUFBLHdCQUNBLEdBQUEsR0FBQSxJQUFBLHNCQUFBLFVBQUEscUJBRUEsRUFBQSxVQUFBLFFBQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxVQUFBLE9BQUEsT0FBQSxHQUVBLEVBQUEsU0FDQSxFQUFBLE1BQUEsS0FBQSxRQUNBLEVBQUEsTUFBQSxjQUFBLEtBQUEsT0FDQSxFQUFBLE1BQUEsU0FDQSxHQUFBLEVBQUEsSUFBQSxpQkFBQSxVQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLGdCQUFBLFVBQUEsd0JBQ0EsR0FBQSxFQUFBLElBQUEsaUJBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSxlQUFBLFVBQUEsd0JBQ0EsR0FBQSxFQUFBLElBQUEsa0JBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSxpQkFBQSxVQUFBLHFCQUVBLEVBQUEsTUFBQSxRQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsTUFBQSxPQUFBLE9BQUEsR0FFQSxFQUFBLFdBQ0EsRUFBQSxRQUFBLEtBQUEsVUFDQSxFQUFBLFFBQUEsY0FBQSxLQUFBLE9BQ0EsRUFBQSxRQUFBLFNBQ0EsR0FBQSxFQUFBLElBQUEsb0JBQUEsVUFBQSxxQkFDQSxHQUFBLEVBQUEsSUFBQSxrQkFBQSxVQUFBLHdCQUNBLEdBQUEsRUFBQSxJQUFBLG9CQUFBLFVBQUEsd0JBQ0EsR0FBQSxFQUFBLElBQUEscUJBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSxtQkFBQSxVQUFBLHdCQUNBLEdBQUEsRUFBQSxJQUFBLG9CQUFBLFVBQUEscUJBRUEsRUFBQSxRQUFBLFFBQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxRQUFBLE9BQUEsT0FBQSxHQUVBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGNBQUEsS0FBQSxFQUFBLFlBQUEsRUFBQSxHQUFBLE9BR0EsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxTQUFBLEVBQUEsT0FBQSxDQUVBLFNBQUEsUUFBQSxXQUFBLEVBQUEsS0FBQSxhQUFBLE1BQ0EsSUFBQSxHQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsQ0FDQSxTQUFBLElBQUEsR0FDQSxFQUFBLFFBQUEsRUFDQSxRQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsaUJBQUEsRUFBQSxLQUFBLFFBQUEsR0FDQSxRQUFBLFFBQUEsR0FBQSxPQUFBLEVBQUEsYUFHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsT0FBQSxPQUFBLFFDdkVBLFFBQUEsT0FBQSxZQUFBLFdBQUEsa0JBQ0EsU0FBQSxRQUFBLFdBQUEsV0FBQSxpQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0E4YkEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxrQkFDQSxFQUFBLGlCQUNBLFlBQUEsRUFBQSxLQUNBLFFBQUEsUUFBQSxZQUFBLFNBQUEsU0FFQSxRQUFBLFFBQUEsWUFBQSxZQUFBLFNBS0EsUUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUdBLEtBQUEsR0FBQSxHQUZBLEVBQUEsRUFBQSxPQUFBLE9BQUEsRUFBQSxhQUFBLE1BRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBQ0EsRUFBQSxXQUFBLEdBeUJBLFFBQUEsR0FBQSxHQUNBLEVBQUEsT0FBQSxXQUVBLEVBQUEsU0FEQSxFQUFBLGlCQUNBLEtBQUEsTUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BRUEsc0JBeGVBLEVBQUEsUUFBQSxTQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsUUFDQSxFQUFBLFFBQUEsRUFFQSxFQUFBLFNBQ0EsRUFBQSxVQUVBLEVBQUEsUUFDQSxFQUFBLEtBQUEsU0FBQSxFQUVBLEVBQUEsV0FDQSxFQUFBLFFBQUEsT0FBQSxFQUNBLEVBQUEsWUFBQSxFQUVBLEVBQUEsVUFDQSxFQUFBLE9BQUEsU0FFQSxFQUFBLFdBQUEsR0FFQSxFQUFBLFdBQ0EsRUFBQSxRQUFBLEtBQUEsR0FDQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsUUFBQSxhQUFBLEVBQ0EsRUFBQSxRQUFBLE9BQUEsRUFDQSxFQUFBLFFBQUEsVUFBQSxFQUtBLEVBQUEsT0FBQSx5QkFBQSxXQUNBLEVBQUEsTUFBQSxNQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsSUFJQSxFQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEVBQUEsS0FBQSxVQUNBLEdBQUEsS0FBQSxZQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLFNBQUEsRUFBQSxTQUNBLFFBQUEsUUFBQSxjQUFBLFFBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxRQUFBLFFBQUEsWUFBQSxjQUNBLEdBQUEsS0FBQSxXQUNBLEdBQUEsS0FBQSxNQUNBLEVBQUEsY0FDQSxPQUFBLFNBQUEsS0FBQSxVQUFBLE9BQUEsU0FBQSxTQUFBLGVBQ0EsT0FBQSxFQUFBLFFBQ0EsRUFBQSxNQUFBLE1BQUEsTUFYQSxHQWlCQSxFQUFBLE9BQUEsZ0NBQUEsV0FDQSxFQUFBLFFBQUEsS0FBQSxHQUNBLFFBQUEsUUFBQSxRQUFBLE9BQUEsU0FBQSxFQUFBLGlCQUVBLFFBQUEsRUFBQSxRQUFBLE1BQ0EsRUFBQSxTQUFBLEVBQUEsTUFDQSxVQUFBLEVBQUEsUUFBQSxNQUNBLEVBQUEsV0FBQSxFQUFBLE1BQ0EsVUFBQSxFQUFBLFFBQUEsTUFDQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsU0FDQSxZQUFBLEVBQUEsUUFBQSxPQUNBLEVBQUEsY0FBQSxFQUFBLFFBSUEsRUFBQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUFBLFFBQ0EsU0FBQSxRQUFBLGlCQUFBLElBQUEsYUFBQSxFQUFBLE1BR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsRUFBQSxTQUFBLE9BQUEsQ0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGFBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxRQUNBLEVBQUEsa0JBQUEsRUFDQSxFQUFBLGlCQUVBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsS0FHQSxFQUFBLFdBREEsRUFBQSxZQUFBLEVBQUEsV0FBQSxFQUNBLFVBQUEsRUFBQSxXQUVBLFFBQ0EsRUFBQSxXQUFBLE9BTUEsRUFBQSxXQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQUEsS0FBQSxVQUlBLEVBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsRUFDQSxFQUFBLEtBQUEsdUJBQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsS0FBQSxLQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsUUFBQSxRQUFBLFlBQUEsWUFBQSxPQUVBLFFBQUEsUUFBQSxtQkFBQSxTQUFBLFVBRUEsUUFBQSxRQUFBLG1CQUFBLFFBQUEsRUFBQSxXQUFBLFFBQUEsUUFBQSxxQkFBQSxZQUFBLFlBQUEsUUFBQSxRQUFBLHFCQUFBLE9BQUEsRUFBQSxLQUNBLFFBQUEsUUFBQSxtQkFBQSxZQUFBLFFBR0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsU0FBQSxRQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsUUFHQSxFQUFBLGVBSUEsRUFBQSxVQUFBLFdBQ0EsRUFBQSxLQUFBLGtCQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsU0FPQSxFQUFBLGlCQUNBLE9BQUEsV0FDQSxFQUFBLGFBRUEsWUFBQSxnQkFDQSxPQUFBLFFBQ0Esa0JBQUEsRUFDQSxVQUFBLFVBQ0EsUUFBQSxJQUlBLEVBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsS0FBQSwwQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxTQUNBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxTQUNBLEVBQUEsUUFBQSxFQUFBLGFBTUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFlBbUJBLEVBQUEsbUJBbkJBLENBQ0EsRUFBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxjQUNBLEVBQUEsUUFBQSxRQUFBLGNBQUEsT0FFQSxJQUFBLEVBQUEsS0FBQSxlQUFBLE9BQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLEtBQUEsY0FDQSxHQUFBLEtBQUEsWUFBQSxFQUFBLEtBQUEsYUFBQSxXQUNBLENBRUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxvQkFDQSxHQUFBLEtBQUEsWUFBQSxFQUFBLE9BR0EsRUFBQSxZQUFBLFFBQ0EsRUFBQSxLQUFBLFlBQUEsTUFBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLEVBQUEsR0FBQSxNQU9BLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGNBQ0EsRUFBQSxFQUFBLE1BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsV0FHQSxFQUFBLFNBQ0EsRUFBQSxjQUVBLEdBQUEsS0FBQSxlQUtBLEVBQUEsYUFBQSxXQUNBLElBQUEsRUFBQSxLQUFBLFVBQUEsRUFBQSxLQUFBLFlBQUEsT0FBQSxDQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxFQUFBLEVBQUEsTUFFQSxHQUFBLEtBQUEsd0JBQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxTQUNBLEVBQUEsY0FFQSxHQUFBLEtBQUEsZUFLQSxFQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUNBLEdBQUEsS0FBQSxlQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLElBQUEsRUFBQSxTQUFBLE9BQUEsS0FBQSxFQUFBLFNBSEEsR0FTQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxjQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUFBLE1BQUEsV0FNQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxlQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLGtCQU1BLEVBQUEsYUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxJQUFBLEVBQUEsVUFBQSxZQUFBLGlCQU1BLEVBQUEsY0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxpQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLFNBTUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxjQUVBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsTUFFQSxFQUFBLFNBQUEsRUFBQSxTQU9BLEVBQUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLFNBTUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGlCQUVBLEdBQUEsU0FBQSxFQUFBLFNBQUEsTUFBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLE9BQUEsT0FBQSxFQUFBLE9BRUEsR0FBQSxRQUFBLGFBQUEsRUFDQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQUEsUUFBQSxFQUFBLE1BQ0EsRUFBQSxRQUFBLFVBQUEsRUFBQSxVQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsUUFBQSxhQUFBLEtBRUEsTUFBQSxXQUNBLEVBQUEsUUFBQSxhQUFBLEtBS0EsRUFBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxRQUFBLFVBQUEsRUFDQSxFQUFBLFlBQUEsRUFBQSxJQUlBLEVBQUEsWUFBQSxXQUNBLE1BQUEsVUFBQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsS0FBQSxpQkFBQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxZQUFBLEVBQUEsWUFDQSxFQUFBLE9BQUEsYUFBQSxFQUFBLG9CQUdBLEdBQUEsV0FDQSxFQUFBLGVBQ0EsT0FJQSxFQUFBLGNBQUEsV0FDQSxFQUFBLEtBQUEsc0JBQUEsRUFBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxPQUFBLEVBQUEsV0FNQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxVQUNBLFNBQUEsUUFBQSxpQkFBQSxVQURBLEdBS0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFDQSxHQUFBLEtBQUEsdUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxRQUFBLFFBQUEsY0FBQSxZQUFBLGFBQ0EsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLFNBQUEsU0FBQSxpQkFLQSxFQUFBLGFBQUEsV0FDQSxFQUFBLGVBQUEsWUFBQSxRQUdBLEVBQUEsT0FBQSxVQURBLElBQUEsRUFBQSxPQUFBLFVBQ0EsRUFFQSxHQUtBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxtQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxhQUFBLFFBQ0EsR0FBQSxPQUFBLE1BQUEsTUFNQSxJQUFBLEVBQ0EsR0FBQSxXQUFBLFdBQ0EsRUFBQSxXQUFBLG1CQUFBLEdBQUEsV0FBQSxFQUFBLFdBQUEsR0FDQSxFQUFBLEVBQUEsV0FDQSxJQUFBLEVBQUEsV0FDQSxFQUFBLFVBQUEsS0FBQSxPQUFBLE9BQUEsU0FBQSxVQUNBLEVBQUEsYUFDQSxFQUFBLGNBQ0EsTUFPQSxFQUFBLGVBQUEsV0FDQSxHQUFBLEdBQUEsU0FBQSxlQUFBLFdBQ0EsRUFBQSxTQUFBLGVBQUEsV0FDQSxJQUFBLEdBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLGVBQ0EsR0FBQSxTQUNBLEVBQUEsaUJBQUEsV0FBQSxHQUFBLEdBQ0EsRUFBQSxpQkFBQSxZQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUFBLE9BQUEsR0FBQSxHQUNBLEVBQUEsaUJBQUEsU0FBQSxHQUFBLE1BMkJBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxZQUNBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFNBQUEsRUFDQSxJQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQ0EsUUFBQSxRQUFBLGdCQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEtBRUEsUUFBQSxRQUFBLGFBQUEsSUFBQSxHQUVBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxTQUFBLFFBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxRQWlCQSxFQUFBLGFBQUEsV0FDQSxRQUFBLFFBQUEsaUJBQUEsT0FBQSxNQUFBLEtBQUEsUUFBQSxTQUdBLEVBQUEsV0FBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLEdBQUEsZUFDQSxHQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsVUFDQSxRQUFBLFFBQUEscUJBQUEsT0FFQSxFQUFBLE9BQUEsV0FBQSxTQUFBLEdBRUEsRUFBQSxTQURBLEVBQUEsaUJBQ0EsS0FBQSxNQUFBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FFQSxxQkFJQSxFQUFBLE9BQUEsaUJBQUEsV0FBQSxHQUFBLEdBQ0EsRUFBQSxpQkFBQSxRQUFBLEVBQUEsY0FBQSxHQUNBLEVBQUEsaUJBQUEsT0FBQSxFQUFBLGdCQUFBLEdBQ0EsRUFBQSxLQUFBLE9BQUEsZ0JBQUEsR0FDQSxFQUFBLGlCQUFBLGNBQUEsU0FBQSxtQkFBQSxFQUFBLFFBQ0EsRUFBQSxpQkFBQSxhQUFBLEVBQUEsS0FBQSxVQUNBLEVBQUEsS0FBQSxLQU9BLEVBQUEsZUFBQSxTQUFBLEdBRUEsR0FBQSxJQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLE1BRUEsR0FBQSxLQUFBLHNCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsVUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFNBQUEsR0FLQSxJQUhBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLGFBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxjQUFBLFlBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxjQUFBLFlBQ0EsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUNBLENBRUEsR0FBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLFFBT0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBQ0EsR0FBQSxLQUFBLGlCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsMEJBQUEsRUFBQSxRQUFBLEtBQ0EsR0FBQSxPQUNBLEVBQUEsU0FBQSxVQUVBLEVBQUEsWUFBQSxjQU1BLEVBQUEsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSwwQkFBQSxFQUFBLEtBQ0EsR0FBQSxTQUFBLFdBSUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLDBCQUFBLEVBQUEsS0FDQSxHQUFBLFlBQUEsVUFJQSxJQUFBLEdBQ0EsRUFDQSxDQUdBLEdBQUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsR0FBQSxLQUFBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFFQSxJQUFBLG1CQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxRQUFBLE9BQ0EsQ0FDQSxFQUFBLEtBQUEsRUFBQSxLQUFBLE9BQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxPQUFBLElBRUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxRQUFBLFFBQUEsRUFBQSxhQUFBLEdBQUEsU0FDQSxDQUNBLEVBQUEsRUFBQSxhQUFBLEdBQUEsS0FDQSxFQUFBLFFBQUEsRUFBQSxhQUFBLEdBQUEsSUFDQSxRQU1BLEVBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE9BQ0EsSUFBQSxFQUFBLFlBQUEsT0FFQSxHQUFBLEVBQUEsVUEwQ0EsR0FBQSxNQUFBLEVBQUEsWUFDQSxDQUVBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsUUFBQSxRQUFBLFlBQUEsWUFBQSxPQUNBLEVBQUEsY0FFQSxFQUFBLGFBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsS0FFQSxFQUFBLE1BQUEsRUFBQSxPQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxPQUNBLEdBQUEsS0FDQSxFQUFBLGFBQUEsR0FBQSxhQUFBLFFBN0RBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEdBQ0EsT0FDQSxNQUFBLElBQ0EsT0FBQSxNQUVBLEdBRUEsRUFBQSxVQUFBLE9BQUEsU0FBQSxTQUFBLDhCQUFBLEVBQ0EsRUFBQSxDQUVBLElBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFFBQUEsbUJBQ0EsR0FBQSxnQkFBQSxtQkFBQSxHQUVBLElBQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxNQUFBLFFBQUEsQ0FNQSxJQUpBLEVBQUEsY0FDQSxFQUFBLE9BQUEsS0FBQSxFQUFBLE1BQUEsa0JBQUEsU0FBQSxFQUFBLE1BQUEsTUFBQSxXQUFBLEVBQUEsTUFBQSxPQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsNkZBR0EsT0FBQSxHQUFBLG1CQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxhQUFBLEVBQUEsS0FBQSxTQUFBLHdCQUVBLG9CQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxRQUFBLFNBQ0EsR0FBQSxTQUFBLG1CQUFBLEVBQUEsS0FBQSxVQUVBLE9BQUEsU0FBQSxLQUFBLE1BR0EsR0FBQSxRQUVBLEVBQUEsU0FBQSxLQUFBLEVBQUEsT0FBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsR0FDQSxtQkFBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEtBQUEsUUFBQSxTQUNBLEVBQUEsUUFBQSxLQUFBLEVBQUEsS0FBQSxTQUNBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0FpQ0EsRUFBQSxjQUFBLFNBQUEsR0FFQSxJQUFBLEdBREEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxPQUFBLElBRUEsR0FBQSxFQUFBLGFBQUEsR0FBQSxNQUFBLEVBQ0EsQ0FDQSxFQUFBLENBQ0EsT0FHQSxNQUFBLElBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxhQUNBLEdBQUEsSUFBQSxFQUNBLEVBQUEsS0FBQSxtQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQ0EsR0FBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxFQUNBLEdBQUEsRUFBQSxTQWdDQSxHQUFBLE1BQUEsRUFBQSxZQUNBLENBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxRQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxPQUNBLEdBQUEsS0FDQSxFQUFBLGFBQUEsR0FBQSxhQUFBLEdBQ0EsRUFBQSxhQUFBLEVBQUEsS0FDQSxFQUFBLE1BQUEsRUFBQSxZQUlBLEdBQUEsU0FBQSxFQUFBLFlBQUEsWUE1Q0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEdBQUEsR0FDQSxPQUNBLE1BQUEsSUFDQSxPQUFBLE1BRUEsR0FFQSxFQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsOEJBQUEsRUFBQSxPQUNBLEVBQUEsQ0FFQSxJQUFBLEVBQUEsUUFBQSxNQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsRUFBQSxRQUFBLG1CQUNBLEdBQUEsZ0JBQUEsbUJBQUEsR0FFQSxJQUFBLElBQUEsT0FBQSxPQUFBLE1BQUEsRUFBQSxNQUFBLE9BQUEsRUFDQSxHQUFBLE9BQUEsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBLENBRUEsR0FBQSxPQUFBLEtBQUEsRUFBQSxNQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDRGQUVBLE9BQUEsR0FBQSxtQkFBQSxHQUNBLE9BQUEsU0FBQSxLQUFBLEVBQUEsYUFBQSxFQUFBLFNBQUEsUUFBQSxFQUFBLElBQUEsZUFHQSxFQUFBLFFBRUEsRUFBQSxTQUFBLEtBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxTQUFBLElBQUEsRUFBQSxJQUFBLFNBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGVBQ0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxVQW1CQSxNQUFBLEVBQUEsYUFDQSxFQUFBLFNBQUEsRUFBQSxZQUFBLFdBT0EsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUVBLEdBQ0EsR0FEQSxHQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLFNBRUEsR0FBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBRUEsR0FBQSxNQUFBLEVBQUEsTUFFQSxHQUFBLEVBQUEsWUF3Q0EsbUJBQUEsR0FBQSxlQUFBLG1CQUFBLEdBQUEsVUFFQSxPQUFBLEVBQUEsY0FDQSxFQUFBLFNBQUEsRUFBQSxRQUFBLFNBRUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxTQUdBLG1CQUFBLEdBQUEsVUFLQSxFQUhBLEVBQUEsWUFHQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsU0FBQSxTQUFBLFNBRkEsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLE9BQUEsaUJBSUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxjQXZEQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsR0FBQSxHQUNBLE9BQ0EsTUFBQSxJQUNBLE9BQUEsTUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUFBLFFBQ0EsRUFBQSxDQUVBLElBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFFBQUEsbUJBQ0EsR0FBQSxnQkFBQSxtQkFBQSxHQUFBLEtBQ0EsR0FBQSxJQUVBLElBQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxNQUFBLFFBQUEsQ0FNQSxJQUpBLEVBQUEsY0FDQSxFQUFBLE9BQUEsS0FBQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDZGQUdBLE9BQUEsR0FBQSxtQkFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsU0FBQSxjQUFBLENBRUEsUUFBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxnQkFBQSxHQUFBLEdBQ0EsRUFBQSxVQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxPQUFBLGlCQUNBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0E0QkEsRUFBQSxXQUFBLFdBRUEsSUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsZUFBQSxHQUFBLFNBQUEsRUFBQSxLQUFBLFNBQ0EsR0FBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsbUJBQUEsR0FBQSxjQUVBLEVBQUEsYUFFQSxFQUFBLFFBQ0EsRUFBQSxXQUVBLG1CQUFBLEdBQUEsZUFBQSxtQkFBQSxHQUFBLFVBRUEsT0FBQSxFQUFBLGNBQ0EsRUFBQSxTQUFBLEVBQUEsUUFBQSxTQUVBLEVBQUEsU0FBQSxFQUFBLFFBQUEsU0FFQSxtQkFBQSxHQUFBLFNBQUEsbUJBQUEsR0FBQSxZQUVBLEVBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxVQUFBLFdBS0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxVQU9BLEVBQUEsY0FBQSxTQUFBLEVBQUEsR0FFQSxHQUNBLEdBREEsR0FBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxTQUVBLEdBQUEsS0FBQSx1QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUtBLEVBSEEsRUFBQSxZQUdBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxTQUFBLFNBQUEsU0FGQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsT0FBQSxpQkFJQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGFBTUEsRUFBQSxXQUFBLFdBRUEsSUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLElBQUEsS0FBQSxFQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsUUFBQSxTQUFBLElBQUEsRUFBQSxRQUFBLElBQ0Esb0JBQUEsR0FBQSxRQUFBLFVBQUEsR0FBQSxFQUFBLFFBQUEsV0FDQSxFQUFBLFNBQUEsR0FDQSxtQkFBQSxHQUFBLFFBQUEsTUFBQSxFQUFBLFFBQUEsS0FBQSxTQUNBLEVBQUEsS0FBQSxFQUFBLFFBQUEsS0FFQSxJQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBQ0EsR0FBQSxLQUFBLHNCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxtQkFBQSxHQUFBLFVBQUEsbUJBQUEsR0FBQSxZQUNBLEdBQUEsRUFBQSxTQUVBLEdBREEsRUFBQSxRQUNBLE1BQUEsRUFBQSxZQUFBLENBQ0EsR0FBQSxFQUFBLFNBQUEsQ0FDQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsS0FBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxHQUNBLFFBQUEsUUFBQSxZQUFBLFlBQUEsT0FFQSxFQUFBLGNBRUEsRUFBQSxNQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxLQUFBLFNBQUEsSUFBQSxHQUNBLFNBQUEsUUFBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLFNBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUFBLFFBQ0EsR0FBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsYUFBQSxFQUFBLEtBQ0EsRUFBQSxNQUFBLEVBQUEsUUFHQSxFQUFBLFVBQ0EsSUFBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLE9BQ0EsR0FBQSxLQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsT0FFQSxHQUFBLFNBQUEsRUFBQSxZQUFBLFlBRUEsR0FBQSxFQUFBLEVBQUEsV0FBQSxTQU9BLEVBQUEsYUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsS0FBQSxxQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsU0FDQSxFQUFBLFFBQUEsRUFBQSxhQUtBLEVBQUEsZUFBQSxXQUVBLEdBREEsRUFBQSxZQUFBLEVBQ0EsbUJBQUEsR0FBQSxhQUNBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxhQUFBLEVBQUEsWUFDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxtQkFBQSxHQUFBLGFBQUEsR0FBQSxjQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsT0FPQSxFQUFBLGFBQUEsU0FBQSxHQUVBLEdBQUEsRUFDQSxJQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsaUJBQUEsUUFFQSxFQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsaUJBQ0EsRUFBQSxJQUFBLFFBQUEsUUFDQSxFQUFBLElBQUEsU0FBQSxTQUFBLEVBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsT0FDQSxHQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsZUFBQSxTQUNBLEVBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLFFBQ0EsRUFBQSxJQUFBLFNBQUEsU0FBQSxFQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLFFBSUEsRUFBQSxXQUFBLFNBQUEsR0FFQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FBQSxtQkFBQSxHQUFBLE9BQ0EsUUFBQSxRQUFBLG1CQUFBLEtBQUEsRUFBQSxPQUNBLG1CQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxPQUNBLFFBQUEsUUFBQSxvQkFBQSxPQUVBLFFBQUEsUUFBQSxvQkFBQSxRQUNBLE9BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxvQ0FBQSxTQUFBLFlBS0EsRUFBQSxVQUFBLFNBQUEsR0FFQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFdBQUEsSUFHQSxFQUFBLG1CQUFBLFNBQUEsR0FFQSxRQUFBLFFBQUEsbUJBQUEsS0FBQSxHQUNBLFFBQUEsUUFBQSxvQ0FBQSxZQUFBLFVBR0EsRUFBQSxnQkFBQSxXQUNBLE9BQUEsR0FHQSxFQUFBLFlBQUEsV0FFQSxtQkFBQSxHQUFBLFlBQUEsRUFBQSxXQUFBLFFBRUEsUUFBQSxRQUFBLFFBQUEsSUFBQSxTQUFBLEVBQUEsa0JBQ0EsR0FBQSxZQUdBLFFBQUEsUUFBQSxRQUFBLElBQUEsU0FBQSxXQUVBLG1CQUFBLEdBQUEsZ0JBQUEsRUFBQSxlQUFBLFFBRUEsUUFBQSxRQUFBLHFCQUFBLElBQUEsU0FBQSxFQUFBLHNCQUNBLEdBQUEsZ0JBR0EsUUFBQSxRQUFBLHFCQUFBLElBQUEsU0FBQSxTQUlBLEVBQUEsT0FBQSxlQUFBLFdBQ0EsRUFBQSxRQUFBLE9BQUEsRUFDQSxFQUFBLFFBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsZ0JBQ0EsR0FBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxXQUdBLEVBQUEsY0FBQSxXQUNBLEVBQUEsUUFBQSxhQUFBLEVBQ0EsUUFBQSxRQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsa0JBR0EsRUFBQSxnQkFBQSxXQUNBLFFBQUEsUUFBQSxRQUFBLFlBQUEsUUFBQSxRQUFBLFFBQUEsVUFBQSxRQUFBLFFBQUEsVUFBQSxTQUFBLE1BQUEsRUFBQSxRQUFBLGFBQUEsRUFBQSxRQUFBLE9BQUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLGFDbmhDQSxRQUFBLE9BQUEsWUFBQSxXQUFBLHFCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLFdBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BRUEsR0FBQSxLQUFBLDhCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQVFBLEdBUEEsRUFBQSxTQUFBLEdBQUEsS0FBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLGFBQUEsRUFBQSxTQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLFFBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxTQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLE9BQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFDQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxlQUFBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLEVBR0EsSUFBQSxHQURBLEdBQUEsSUFBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxJQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsS0FDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEVBQ0EsQ0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsS0FDQSxRQWVBLEVBQUEsV0FBQSxJQUdBLFFBQUEsUUFBQSxRQUFBLFlBQUEsY0FDQSxRQUFBLFFBQUEsb0JBQUEsUUFBQSxLQUdBLElBQUEsR0FBQSxHQUVBLEdBQUEsU0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxPQUdBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxTQUFBLEVBQUEsT0FBQSxDQUVBLEtBQUEsRUFBQSxVQUFBLENBQ0EsRUFBQSxXQUFBLENBRUEsSUFBQSxJQUNBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUNBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxVQUNBLGNBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxnQkFBQSxFQUFBLFNBQUEsR0FBQSxnQkFDQSxhQUFBLEVBQUEsU0FBQSxHQUFBLGFBRUEsR0FBQSxLQUFBLDJCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEVBQUEsU0FBQSxHQUFBLFFBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxNQUFBLE9BQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsdUJBQ0EsR0FBQSxLQUFBLEVBQUEsTUFBQSxVQUlBLEVBQUEsV0FBQSxJQUlBLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxhQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsV0FHQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBSUEsR0FIQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFFQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUVBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsVUFNQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxXQUdBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsR0FBQSxTQUFBLElBQ0EsRUFBQSxTQUFBLEdBQUEsU0FBQSxJQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsMEJBRUEsb0JBYUEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsWUFBQSxFQUVBLEVBQUEsU0FBQSxXQUNBLEVBQUEsS0FBQSxDQUNBLElBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUVBLEdBQUEsS0FBQSx5QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsUUFBQSxJQUNBLE9BQUEsU0FBQSxTQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUtBLEdBSkEsRUFBQSxTQUFBLEdBQUEsS0FBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxVQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxPQUNBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGVBQUEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsRUFHQSxJQUFBLEdBREEsR0FBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLGNBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLElBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxLQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFDQSxDQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxLQUNBLFFBTUEsR0FBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFJQSxFQUFBLGFBQUEsRUFDQSxFQUFBLFdBQUEsSUFHQSxRQUFBLFFBQUEsUUFBQSxZQUFBLGNBQ0EsUUFBQSxRQUFBLG9CQUFBLFFBQUEsS0FHQSxJQUFBLEdBQUEsR0FFQSxHQUFBLFNBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsT0FHQSxFQUFBLFdBQUEsV0FDQSxNQUFBLEdBQUEsU0FDQSxFQUFBLFNBQUEsT0FBQSxFQUNBLE9BRUEsR0FKQSxRQVNBLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsZ0JBQUEsV0FDQSxNQUFBLEdBQUEsWUFHQSxHQUZBLFFBTUEsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxHQUFBLGFBQUEsRUFDQSxFQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxhQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsVUFHQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQUEsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQVFBLElBUEEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsZUFDQSxFQUFBLGFBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxrQkFDQSxFQUFBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGlCQUVBLEVBQUEsU0FBQSxHQUFBLGNBQUEsRUFFQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUVBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsUUFLQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxXQUFBLEVBQUEsV0FBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEtBQUEsNkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUE7SUFLQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsaUJBQUEsRUFBQSxXQUFBLElBR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLGdCQUFBLEVBQUEsU0FBQSxJQUdBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFdBQUEsRUFFQSxFQUFBLFdBQUEsT0FHQSxDQUNBLEVBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxRQUdBLElBQUEsbUJBQUEsR0FBQSxTQUFBLFVBQUEsRUFBQSxTQUFBLFNBQUEsT0FBQSxFQUFBLENBQ0EsRUFBQSxTQUFBLEtBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLFNBQUEsT0FBQSxJQUNBLEdBQUEsRUFBQSxTQUFBLEdBQUEsSUFBQSxFQUFBLFNBQUEsU0FBQSxHQUFBLFdBQUEsQ0FDQSxFQUFBLFNBQUEsTUFBQSxFQUFBLFNBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLE9BSUEsRUFBQSxTQUFBLEtBQUEsSUFDQSxFQUFBLE1BQUEsRUFBQSxTQUFBLE1BSUEsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxXQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsS0FBQSw2QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxVQU9BLEVBQUEsU0FBQSxXQUNBLEdBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUVBLEtBQUEsRUFBQSxZQUFBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxPQUFBLElBQ0EsRUFBQSxXQUFBLEdBQUEsS0FBQSxDQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsU0FBQSxHQUFBLEtBQUEsQ0FFQSxHQUFBLGlCQUFBLEVBQUEsV0FBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxTQUFBLEtBRUEsRUFBQSxhQUFBLEVBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsb0JBQ0EsRUFBQSxjQUFBLFNBQ0EsVUFBQSxFQUFBLG9CQUFBLFNBQUEsS0FDQSxNQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsSUFBQSxFQUFBLFVBQUEsQ0FDQSxFQUFBLFdBQUEsQ0FDQSxJQUFBLElBRUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLGNBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxnQkFBQSxFQUFBLFNBQUEsR0FBQSxnQkFDQSxhQUFBLEVBQUEsU0FBQSxHQUFBLGFBR0EsR0FBQSxLQUFBLGdDQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEVBQUEsU0FBQSxPQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFFBRUEsSUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFNQSxFQUFBLFNBQUEsUUFBQSxJQUNBLE9BQUEsU0FBQSxhQUlBLEVBQUEsV0FBQSxJQUlBLEVBQUEsYUFBQSxXQUNBLElBQUEsRUFBQSxVQUFBLENBQ0EsRUFBQSxXQUFBLEVBQ0EsRUFBQSxZQUFBLENBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsVUFBQSxFQUFBLFNBQUEsVUFDQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxZQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsU0FBQSxJQUVBLElBREEsRUFBQSxTQUFBLEVBQUEsU0FDQSxtQkFBQSxHQUFBLFNBQUEsVUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLE1BQUEsV0FBQSxJQUVBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFFQSxFQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsU0FNQSxHQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxNQUNBLEVBQUEsU0FBQSxLQUFBLEdBRUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxNQUNBLEVBQUEsYUFBQSxhQUVBLE1BQUEsV0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxNQUNBLEVBQUEsU0FBQSxLQUFBLEtBS0EsRUFBQSxXQUFBLEdBR0EsRUFBQSxhQUFBLFNBQUEsR0FDQSxJQUFBLEVBQUEsT0FBQSxDQUNBLElBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUVBLEtBQUEsRUFBQSxVQUFBLENBQ0EsRUFBQSxXQUFBLENBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsU0FBQSxFQUFBLFNBRUEsR0FBQSxLQUFBLDhCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLHNCQUFBLFlBQUEsb0JBQ0EsRUFBQSxjQUFBLFNBQ0EsVUFBQSxFQUFBLHNCQUFBLFNBQUEsS0FDQSxPQUdBLEVBQUEsT0FBQSxRQUFBLEVBQUEsTUFDQSxFQUFBLGFBQUEsY0FJQSxFQUFBLFdBQUEsSUFJQSxFQUFBLElBQUEsV0FFQSxHQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FFQSxJQUFBLElBQ0EsTUFBQSxFQUFBLEtBQUEsTUFDQSxTQUFBLEVBQUEsU0FDQSxTQUFBLEVBQUEsU0FDQSxTQUFBLEVBQUEsaUJBQ0EsUUFBQSxFQUFBLGdCQUNBLFNBQUEsRUFBQSxTQUVBLEdBQUEsS0FBQSxxQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxNQUNBLGFBQUEsRUFBQSxVQUNBLFFBQUEsUUFBQSxzQkFBQSxNQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsUUFBQSxRQUFBLGlCQUFBLFVBSUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxNQUNBLEVBQUEsYUFBQSxjQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsMEJBRUEsaUJBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEdBQ0EsR0FFQSxZQ3hoQkEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FDQSxFQUFBLFVBQ0EsRUFBQSxNQUFBLE9BQ0EsRUFBQSxVQUFBLFNBR0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUVBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxVQUFBLFdBQ0EsRUFBQSxNQUFBLFFBSUEsUUFBQSxRQUFBLGFBQUEsWUFDQSxVQUFBLFVBQ0EsV0FBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsS0FBQSxTQUFBLE9BTUEsRUFBQSxPQUFBLFFBQUEsV0FDQSxFQUFBLFNBQUEsRUFBQSxPQUNBLEVBQUEsYUFBQSxFQUFBLFNBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLGVBTUEsRUFBQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFDQSxLQUFBLEVBQUEsQ0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLElBQUEsT0FBQSxNQUFBLE9BQUEsUUFDQSxHQUFBLEtBQUEsS0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsQ0FDQSxFQUFBLEVBQUEsRUFDQSxPQUdBLEVBQUEsV0FBQSxHQUFBLEVBQ0EsRUFBQSxXQUFBLElBS0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FDQSxHQUFBLEtBQUEsaUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxPQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLEVBQUEsU0FFQSxNQUFBLEVBQUEsTUFDQSxRQUFBLFFBQUEsVUFBQSxLQUFBLE9BQUEsZUFHQSxRQUFBLFFBQUEsVUFBQSxLQUFBLE9BQUEsUUFWQSxHQWVBLEVBQUEsT0FBQSx5Q0FBQSxXQUNBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsRUFBQSxNQUFBLE1BQUEsRUFDQSxFQUFBLE1BQUEsVUFBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLEtBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FDQSxJQUFBLEVBQUEsT0FBQSxNQUVBLEdBQUEsS0FBQSx3QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUVBLE1BQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxNQUFBLEdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsV0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQ0EsV0FBQSxFQUFBLFVBQ0EsRUFBQSxZQUFBLEVBQUEsUUFBQSxTQUVBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsYUFJQSxTQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLEVBQUEsUUFDQSxXQUFBLEVBQUEsV0FDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLFVBRUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxNQUFBLE1BQUEsRUFDQSxFQUFBLE1BQUEsUUFBQSxFQUFBLFFBQ0EsV0FBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQUEsUUFBQSxhQTVCQSxHQWtDQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxPQUVBLEdBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE9BQUEsRUFBQSxPQUNBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsRUFBQSxNQUFBLFFBQUEsRUFBQSxRQUNBLFdBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLFFBQUEsVUFFQSxNQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsTUFBQSxHQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxXQUFBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLFFBRUEsRUFBQSxhQUFBLGVBZkEsR0FxQkEsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FFQSxHQUFBLEtBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsVUFBQSxLQUFBLE9BQUEscUJBSkEiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gQW5ndWxhckpTIHYxLjIuMjFcclxuIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXHJcbiBMaWNlbnNlOiBNSVRcclxuKi9cclxuKGZ1bmN0aW9uKHAsZixuKXsndXNlIHN0cmljdCc7Zi5tb2R1bGUoXCJuZ0Nvb2tpZXNcIixbXCJuZ1wiXSkuZmFjdG9yeShcIiRjb29raWVzXCIsW1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixmdW5jdGlvbihlLGIpe3ZhciBjPXt9LGc9e30saCxrPSExLGw9Zi5jb3B5LG09Zi5pc1VuZGVmaW5lZDtiLmFkZFBvbGxGbihmdW5jdGlvbigpe3ZhciBhPWIuY29va2llcygpO2ghPWEmJihoPWEsbChhLGcpLGwoYSxjKSxrJiZlLiRhcHBseSgpKX0pKCk7az0hMDtlLiR3YXRjaChmdW5jdGlvbigpe3ZhciBhLGQsZTtmb3IoYSBpbiBnKW0oY1thXSkmJmIuY29va2llcyhhLG4pO2ZvcihhIGluIGMpZD1jW2FdLGYuaXNTdHJpbmcoZCl8fChkPVwiXCIrZCxjW2FdPWQpLGQhPT1nW2FdJiYoYi5jb29raWVzKGEsZCksZT0hMCk7aWYoZSlmb3IoYSBpbiBkPWIuY29va2llcygpLGMpY1thXSE9PWRbYV0mJihtKGRbYV0pP2RlbGV0ZSBjW2FdOmNbYV09ZFthXSl9KTtyZXR1cm4gY31dKS5mYWN0b3J5KFwiJGNvb2tpZVN0b3JlXCIsXHJcbltcIiRjb29raWVzXCIsZnVuY3Rpb24oZSl7cmV0dXJue2dldDpmdW5jdGlvbihiKXtyZXR1cm4oYj1lW2JdKT9mLmZyb21Kc29uKGIpOmJ9LHB1dDpmdW5jdGlvbihiLGMpe2VbYl09Zi50b0pzb24oYyl9LHJlbW92ZTpmdW5jdGlvbihiKXtkZWxldGUgZVtiXX19fV0pfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1jb29raWVzLm1pbi5qcy5tYXBcclxuIiwiLypcclxuIGpRdWVyeSBVSSBTb3J0YWJsZSBwbHVnaW4gd3JhcHBlclxyXG5cclxuIEBwYXJhbSBbdWktc29ydGFibGVdIHtvYmplY3R9IE9wdGlvbnMgdG8gcGFzcyB0byAkLmZuLnNvcnRhYmxlKCkgbWVyZ2VkIG9udG8gdWkuY29uZmlnXHJcbiovXHJcbmFuZ3VsYXIubW9kdWxlKCd1aS5zb3J0YWJsZScsIFtdKVxyXG4gIC52YWx1ZSgndWlTb3J0YWJsZUNvbmZpZycse30pXHJcbiAgLmRpcmVjdGl2ZSgndWlTb3J0YWJsZScsIFsgJ3VpU29ydGFibGVDb25maWcnLFxyXG4gICAgICAgIGZ1bmN0aW9uKHVpU29ydGFibGVDb25maWcpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBjb21iaW5lQ2FsbGJhY2tzKGZpcnN0LHNlY29uZCl7XHJcbiAgICAgICAgICAgICAgICAgIGlmKCBzZWNvbmQgJiYgKHR5cGVvZiBzZWNvbmQgPT09IFwiZnVuY3Rpb25cIikgKXtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLHVpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdChlLHVpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQoZSx1aSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0cyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHtcclxuICAgICAgICAgICAgICAgIHJlY2VpdmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZW1vdmU6bnVsbCxcclxuICAgICAgICAgICAgICAgIHN0YXJ0Om51bGwsXHJcbiAgICAgICAgICAgICAgICBzdG9wOm51bGwsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6bnVsbFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQob3B0cywgdWlTb3J0YWJsZUNvbmZpZyk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc29ydGFibGUob3B0cyk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnN0YXJ0ID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNhdmUgcG9zaXRpb24gb2YgZHJhZ2dlZCBpdGVtXHJcbiAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlID0geyBpbmRleDogdWkuaXRlbS5pbmRleCgpIH07XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnVwZGF0ZSA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGb3Igc29tZSByZWFzb24gdGhlIHJlZmVyZW5jZSB0byBuZ01vZGVsIGluIHN0b3AoKSBpcyB3cm9uZ1xyXG4gICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQgPSBuZ01vZGVsO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrcy5yZWNlaXZlID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUucmVsb2NhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkZWQgaXRlbSB0byBhcnJheSBpbnRvIGNvcnJlY3QgcG9zaXRpb24gYW5kIHNldCB1cCBmbGFnXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRtb2RlbFZhbHVlLnNwbGljZSh1aS5pdGVtLmluZGV4KCksIDAsIHVpLml0ZW0uc29ydGFibGUubW92ZWQpO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrcy5yZW1vdmUgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29weSBkYXRhIGludG8gaXRlbVxyXG4gICAgICAgICAgICAgICAgaWYgKG5nTW9kZWwuJG1vZGVsVmFsdWUubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUubW92ZWQgPSBuZ01vZGVsLiRtb2RlbFZhbHVlLnNwbGljZSgwLCAxKVswXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUubW92ZWQgPSAgbmdNb2RlbC4kbW9kZWxWYWx1ZS5zcGxpY2UodWkuaXRlbS5zb3J0YWJsZS5pbmRleCwgMSlbMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnN0b3AgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZGlnZXN0IGFsbCBwcmVwYXJlZCBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBpZiAodWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQgJiYgIXVpLml0ZW0uc29ydGFibGUucmVsb2NhdGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgIC8vIEZldGNoIHNhdmVkIGFuZCBjdXJyZW50IHBvc2l0aW9uIG9mIGRyb3BwZWQgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICB2YXIgZW5kLCBzdGFydDtcclxuICAgICAgICAgICAgICAgICAgc3RhcnQgPSB1aS5pdGVtLnNvcnRhYmxlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgICBlbmQgPSB1aS5pdGVtLmluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAvLyBSZW9yZGVyIGFycmF5IGFuZCBhcHBseSBjaGFuZ2UgdG8gc2NvcGVcclxuICAgICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQuJG1vZGVsVmFsdWUuc3BsaWNlKGVuZCwgMCwgdWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQuJG1vZGVsVmFsdWUuc3BsaWNlKHN0YXJ0LCAxKVswXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHVpLml0ZW0uc29ydGFibGUucmVzb3J0IHx8IHVpLml0ZW0uc29ydGFibGUucmVsb2NhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLnVpU29ydGFibGUsIGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKXtcclxuICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG5ld1ZhbCwgZnVuY3Rpb24odmFsdWUsIGtleSl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYoIGNhbGxiYWNrc1trZXldICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd3JhcCB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbWJpbmVDYWxsYmFja3MoIGNhbGxiYWNrc1trZXldLCB2YWx1ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc29ydGFibGUoJ29wdGlvbicsIGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNhbGxiYWNrcywgZnVuY3Rpb24odmFsdWUsIGtleSApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBvcHRzW2tleV0gPSBjb21iaW5lQ2FsbGJhY2tzKHZhbHVlLCBvcHRzW2tleV0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyBDcmVhdGUgc29ydGFibGVcclxuICAgICAgICAgICAgLy9lbGVtZW50LnNvcnRhYmxlKCdkZXN0cm95Jyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc29ydGFibGUob3B0cyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5dKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnLCBbJ25nQ29va2llcycsICd1aS5zb3J0YWJsZSddKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90Jykuc2VydmljZSgnY29udGVudFNlcnZpY2UnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAvL9Ce0YLQvtCx0YDQsNC20LXQvdC40LUg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxuICAgIHRoaXMuZGVza3RvcE1vZGFsID0gZnVuY3Rpb24oYWN0aW9uLCBzcGVlZCl7XHJcbiAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHNwZWVkKSkgc3BlZWQgPSA1MDA7XHJcblxyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nLWxpc3QnKS5mYWRlT3V0KCk7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmcnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG5cclxuICAgICAgaWYgKGFjdGlvbiA9PSAnbm9uZScpIHtcclxuICAgICAgICAkKCcuc2hvdy1ibG9jay5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmFkZU91dChzcGVlZCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBtb2RhbCA9IGFuZ3VsYXIuZWxlbWVudCgnIycgKyBhY3Rpb24pO1xyXG5cclxuICAgICAgaWYoJCgnLnNob3ctYmxvY2snKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KHNwZWVkLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgbW9kYWwuZmFkZUluKHNwZWVkKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSAge1xyXG4gICAgICAgIG1vZGFsLmZhZGVJbihzcGVlZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubW9iaWxlTW9kYWwgPSBmdW5jdGlvbihjb250ZW50LCB0eXBlKXtcclxuICAgICAgdmFyIHJlc3VsdE1vZGFsID0gYW5ndWxhci5lbGVtZW50KCcubS1yZXN1bHQnKTtcclxuICAgICAgdmFyIHJlc3VsdENvbnRlbnQgPSByZXN1bHRNb2RhbC5maW5kKCdwJyk7XHJcblxyXG4gICAgICByZXN1bHRNb2RhbC5yZW1vdmVDbGFzcygnbS1uZWdhdGl2ZScpO1xyXG4gICAgICBpZiAodHlwZSA9PSAnZXJyb3InKSB7XHJcbiAgICAgICAgICByZXN1bHRNb2RhbC5hZGRDbGFzcygnbS1uZWdhdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlc3VsdE1vZGFsLmhpZGUoKTtcclxuICAgICAgcmVzdWx0TW9kYWwuc2hvdygpO1xyXG4gICAgICByZXN1bHRDb250ZW50LnRleHQoY29udGVudCk7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICByZXN1bHRNb2RhbC5oaWRlKCk7XHJcbiAgICAgIH0sIDUwMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvL9CQ0LLRgtC+0YHQutGA0L7Qu9C40L3QsyDQtNC+INC90YPQttC90L7Qs9C+INCx0LvQvtC60LBcclxuICAgIHRoaXMuc2Nyb2xsUGFnZSA9IGZ1bmN0aW9uKGlkLCBzcGVlZCl7XHJcbiAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHNwZWVkKSkgc3BlZWQgPSA2MDA7XHJcbiAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gJChpZCkub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsX2hlaWdodFxyXG4gICAgICAgIH0sIHNwZWVkKTtcclxuICAgIH07XHJcbn0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdEZW1va2l0Q29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGNvbXBpbGUsICR0aW1lb3V0LCBjb250ZW50U2VydmljZSkge1xyXG5cclxuICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuXHJcbiAgJHNjb3BlLiR3YXRjaCgnc3RvcmUuc3RhZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCRzY29wZS5zdG9yZS5zdGFnZSA9PSAnc2hpcHBpbmcnICYmICEkc2NvcGUub3JkZXJGb3JtLiR2YWxpZCkge1xyXG4gICAgICAgICRzY29wZS5zdG9yZS5zdGFnZSA9ICdkZWxpdmVyeSc7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmZpZWxkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gIH0pO1xyXG5cclxuICAkc2NvcGUuJHdhdGNoKCdvcmRlci5uYW1lICsgb3JkZXIuZW1haWwgKyBvcmRlci5waG9uZSArIG9yZGVyLmFkZHJlc3MgKyBvcmRlci5jaXR5ICsgb3JkZXIuemlwICsgb3JkZXIuY291bnRyeSArIG9yZGVyLnNoaXBwaW5nICsgb3JkZXIucGF5bWVudCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuZmllbGQgPSBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLm9yZGVyID0ge1xyXG4gICAgbmFtZTonJyxcclxuICAgIGVtYWlsOicnLFxyXG4gICAgcGhvbmU6JycsXHJcbiAgICBhZGRyZXNzOicnLFxyXG4gICAgY2l0eTonJyxcclxuICAgIHppcDonJyxcclxuICAgIGNvdW50cnk6JycsXHJcbiAgICBzaGlwcGluZzogMSxcclxuICAgIHBheW1lbnQ6IDFcclxuICB9O1xyXG5cclxuICAkc2NvcGUucHJvZHVjdHMgPSB7fTtcclxuICAkc2NvcGUubWF4X3Byb2R1Y3RfaWQgPSAwO1xyXG4gICRzY29wZS5wcmljZXMgPSB7fTtcclxuICAkc2NvcGUuc2hpcHBpbmdzID0ge307XHJcbiAgJHNjb3BlLnBheW1lbnRzID0ge307XHJcblxyXG4gICRzY29wZS50b3RhbCA9IDA7XHJcbiAgJHNjb3BlLnRvTWFpbiA9IGZhbHNlO1xyXG5cclxuICAkc2NvcGUucmVnaXN0ZXJQcm9kdWN0ID0gZnVuY3Rpb24ocHJvZHVjdF9pZCwgcHJpY2UpIHtcclxuICAgICRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSA9IDA7XHJcbiAgICBpZiAocHJvZHVjdF9pZCA+ICRzY29wZS5tYXhfcHJvZHVjdF9pZClcclxuICAgICAgICAkc2NvcGUubWF4X3Byb2R1Y3RfaWQgPSBwcm9kdWN0X2lkO1xyXG4gICAgJHNjb3BlLnByaWNlc1twcm9kdWN0X2lkXSA9IHByaWNlO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5hZGRQcm9kdWN0ID0gZnVuY3Rpb24ocHJvZHVjdF9pZCkge1xyXG4gICAgaWYgKCRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSA8IDkpXHJcbiAgICAgICRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSsrO1xyXG4gICAgJHNjb3BlLmNhbGN1bGF0ZVN1bW0oKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZGVkdWN0UHJvZHVjdCA9IGZ1bmN0aW9uKHByb2R1Y3RfaWQpIHtcclxuICAgIGlmICgkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0gPiAwKVxyXG4gICAgICAkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0tLTtcclxuICAgICRzY29wZS5jYWxjdWxhdGVTdW1tKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlZ2lzdGVyU2hpcHBpbmcgPSBmdW5jdGlvbihzaGlwcGluZ19pZCwgcHJpY2UpIHtcclxuICAgICRzY29wZS5zaGlwcGluZ3Nbc2hpcHBpbmdfaWRdID0gcHJpY2U7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNldFNoaXBwaW5nID0gZnVuY3Rpb24oc2hpcHBpbmdfaWQsIGUpIHtcclxuICAgICAgJHNjb3BlLm9yZGVyLnNoaXBwaW5nID0gc2hpcHBpbmdfaWQ7XHJcbiAgICAgIGlmICh0eXBlb2YgZSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLmNsaWNrKCk7XHJcbiAgICAgICRzY29wZS5jYWxjdWxhdGVTdW1tKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlZ2lzdGVyUGF5bWVudCA9IGZ1bmN0aW9uKHBheW1lbnRfaWQsIGFjdGlvbikge1xyXG4gICAgICAkc2NvcGUucGF5bWVudHNbcGF5bWVudF9pZF0gPSBhY3Rpb247XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNldFBheW1lbnQgPSBmdW5jdGlvbihwYXltZW50X2lkLCBlKSB7XHJcbiAgICAgICRzY29wZS5vcmRlci5wYXltZW50ID0gcGF5bWVudF9pZDtcclxuICAgICAgaWYgKHR5cGVvZiBlICE9ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkuY2xpY2soKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuY2FsY3VsYXRlU3VtbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnN1bW0gPSAxMjA7XHJcblxyXG4gICAgJHNjb3BlLnRvdGFsID0gJHNjb3BlLnN1bW07XHJcbiAgICBpZiAoJHNjb3BlLm9yZGVyLnNoaXBwaW5nICYmIHR5cGVvZiAkc2NvcGUuc2hpcHBpbmdzWyRzY29wZS5vcmRlci5zaGlwcGluZ10gIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAkc2NvcGUudG90YWwgKz0gJHNjb3BlLnNoaXBwaW5nc1skc2NvcGUub3JkZXIuc2hpcHBpbmddO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5idXlEZW1vS2l0ID0gZnVuY3Rpb24ob3JkZXIpIHtcclxuICAgIGlmICghJHNjb3BlLm9yZGVyRm9ybS4kdmFsaWQpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAoJHNjb3BlLnRvTWFpbilcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XHJcbiAgICBlbHNlIHtcclxuICAgICAgb3JkZXIucHJvZHVjdHM9JHNjb3BlLnByb2R1Y3RzO1xyXG4gICAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9idXlEZW1vS2l0Jywgb3JkZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgaWYgKCdlbWFpbCcgPT0gZGF0YS5hY3Rpb24pIHtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICAgJHNjb3BlLnRvTWFpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS5maW5pc2hCdXR0b24gPSAkc2NvcGUudG9NYWluTWVzc2FnZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2RlbW8ta2l0LWJsb2NrJykuYWZ0ZXIoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZm9ybS15bS1wYXknKS5zdWJtaXQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59KTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignSGVscENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG5cclxuICAkc2NvcGUuc2VuZCA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKXtcclxuICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuICAgIHVzZXIuZW1haWwgPSB1c2VyLmhlbHBfZW1haWw7XHJcbiAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9zZW5kUXVlc3Rpb24nLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIubmFtZSA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLmhlbHBfZW1haWwgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5xdWVzdGlvbiA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLnBob25lID0gJyc7XHJcblxyXG4gICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBjb250ZW50U2VydmljZS52aWV3TW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignUGhvbmVzQ29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAkc2NvcGUuaW5pdFBob25lcyA9IGZ1bmN0aW9uKGluaXRWYWx1ZSlcclxuICAgIHtcclxuICAgICAgICAkc2NvcGUucGhvbmVzTGlzdCA9IGluaXRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmluaXREZXZpY2VzID0gZnVuY3Rpb24oaW5pdFZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgICRzY29wZS5kZXZpY2VzTGlzdCA9IGluaXRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnBob25lc0xpc3QgPSBbXTtcclxuXHJcbiAgICAkc2NvcGUuZGV2aWNlc0xpc3QgPSBbXTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignU2xpZGVDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUpIHtcclxuXHJcbiAgJHNjb3BlLklNQUdFX1dJRFRIID0gMzAwO1xyXG4gICRzY29wZS5GQURFX1NQRUVEID0gNjAwO1xyXG5cclxuICAkc2NvcGUuZ2V0UmFuZG9tSW50ID0gZnVuY3Rpb24obWluLCBtYXgpe1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLndyaXN0YmFuZCA9IHt9O1xyXG4gICRzY29wZS53cmlzdGJhbmQubmFtZSA9ICd3cmlzdGJhbmQnO1xyXG4gICRzY29wZS53cmlzdGJhbmQubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgJHNjb3BlLndyaXN0YmFuZC5zbGlkZXMgPSBbXHJcbiAgICB7aWQ6MCwgaW1nOid3cmlzdGJhbmRfYmxhY2sucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjMDAwJ30sXHJcbiAgICB7aWQ6MSwgaW1nOid3cmlzdGJhbmRfYmx1ZS5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICMwMDYyRkYnfSxcclxuICAgIHtpZDoyLCBpbWc6J3dyaXN0YmFuZF9yZWQucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjZmYwMDUwJ30sXHJcbiAgICB7aWQ6MywgaW1nOid3cmlzdGJhbmRfZ3JlZW4ucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjMzBEODc0J30sXHJcbiAgICB7aWQ6NCwgaW1nOid3cmlzdGJhbmRfeWVsbG93LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzMwRDg3NCd9LFxyXG4gICAge2lkOjUsIGltZzond3Jpc3RiYW5kX2dyZWVuX3AxLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzMwRDg3NCd9LFxyXG4gICAge2lkOjYsIGltZzond3Jpc3RiYW5kX2JsdWVfcDIucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjMzBEODc0J30sXHJcbiAgICB7aWQ6NywgaW1nOid3cmlzdGJhbmRfcmVkX3AzLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzMwRDg3NCd9LFxyXG4gICAge2lkOjgsIGltZzond3Jpc3RiYW5kX2JsYWNrX3A0LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzMwRDg3NCd9LFxyXG4gICAge2lkOjksIGltZzond3Jpc3RiYW5kX2JsdWVfcDUucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjMzBEODc0J30sXHJcbiAgICB7aWQ6MTAsIGltZzond3Jpc3RiYW5kX2dyZWVuX3A2LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzMwRDg3NCd9LFxyXG4gICAge2lkOjExLCBpbWc6J3dyaXN0YmFuZF9yZWRfcDcucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjMzBEODc0J30sXHJcbiAgICB7aWQ6MTIsIGltZzond3Jpc3RiYW5kX3doaXRlLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9XHJcbiAgXTtcclxuICAkc2NvcGUud3Jpc3RiYW5kLmN1cnJlbnQgPSAkc2NvcGUuZ2V0UmFuZG9tSW50KDAsICRzY29wZS53cmlzdGJhbmQuc2xpZGVzLmxlbmd0aCAtIDEpO1xyXG5cclxuICAkc2NvcGUuY2FyZHMgPSB7fTtcclxuICAkc2NvcGUuY2FyZHMubmFtZSA9ICdjYXJkcyc7XHJcbiAgJHNjb3BlLmNhcmRzLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OlwiMHB4XCJ9O1xyXG4gICRzY29wZS5jYXJkcy5zbGlkZXMgPSBbXHJcbiAgICB7aWQ6MCwgaW1nOidjYXJkX2JsYWNrLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzAwMCd9LFxyXG4gICAge2lkOjEsIGltZzonY2FyZF9ibHVlLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzAwNjJGRid9LFxyXG4gICAge2lkOjIsIGltZzonY2FyZF9ncmVlbi5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICM1QUMwQjknfSxcclxuICAgIHtpZDozLCBpbWc6J2NhcmRfcmVkLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI0FCMjY0MCd9LFxyXG4gICAge2lkOjQsIGltZzonY2FyZF95ZWxsb3cucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjZDVkODUwJ30sXHJcbiAgICB7aWQ6NSwgaW1nOidjYXJkX3doaXRlLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9XHJcbiAgXTtcclxuICAkc2NvcGUuY2FyZHMuY3VycmVudCA9ICRzY29wZS5nZXRSYW5kb21JbnQoMCwgJHNjb3BlLmNhcmRzLnNsaWRlcy5sZW5ndGggLSAxKTtcclxuXHJcbiAgJHNjb3BlLmtleWZvYnMgPSB7fTtcclxuICAkc2NvcGUua2V5Zm9icy5uYW1lID0gJ2tleWZvYnMnO1xyXG4gICRzY29wZS5rZXlmb2JzLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OlwiMHB4XCJ9O1xyXG4gICRzY29wZS5rZXlmb2JzLnNsaWRlcyA9IFtcclxuICAgIHtpZDowLCBpbWc6J2tleWZvYnNfYmxhY2sucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjMDAwJ30sXHJcbiAgICB7aWQ6MSwgaW1nOidrZXlmb2JzX3JlZC5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICNmZjAwNTAnfSxcclxuICAgIHtpZDoyLCBpbWc6J2tleWZvYnNfZ3JlZW4ucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjMzBEODc0J30sXHJcbiAgICB7aWQ6MywgaW1nOidrZXlmb2JzX3llbGxvdy5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICNkNWQ4NTAnfSxcclxuICAgIHtpZDo0LCBpbWc6J2tleWZvYnNfYmx1ZS5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICMwMDYyRkYnfSxcclxuICAgIHtpZDo1LCBpbWc6J2tleWZvYnNfd2hpdGUucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjZmZmJ31cclxuICBdO1xyXG4gICRzY29wZS5rZXlmb2JzLmN1cnJlbnQgPSAkc2NvcGUuZ2V0UmFuZG9tSW50KDAsICRzY29wZS5rZXlmb2JzLnNsaWRlcy5sZW5ndGggLSAxKTtcclxuXHJcbiAgJHNjb3BlLnNjcm9sbFRvID0gZnVuY3Rpb24oc2xpZGVyLCBpbmQpIHtcclxuICAgIHNsaWRlci5saXN0cG9zaXRpb24gPSB7bGVmdDooJHNjb3BlLklNQUdFX1dJRFRIICogaW5kICogLTEpICsgXCJweFwifTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZmFkZVRvID0gZnVuY3Rpb24oc2xpZGVyLCBpbmQpIHtcclxuICAgIGlmIChzbGlkZXIuY3VycmVudCA9PSBpbmQpIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5lbGVtZW50KFwiI3NsaWRlci1cIiArIHNsaWRlci5uYW1lICsgXCIgLmYtc2xpZGVcIikuc3RvcCgpO1xyXG4gICAgdmFyIGlkID0gXCIjXCIgKyBzbGlkZXIubmFtZSArIFwiX1wiICsgaW5kO1xyXG4gICAgY29uc29sZS5sb2coaWQpO1xyXG4gICAgc2xpZGVyLmN1cnJlbnQgPSBpbmQ7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoXCIjc2xpZGVyLVwiICsgc2xpZGVyLm5hbWUgKyBcIiAuZi1zbGlkZVtpZCE9XCIgK2lkICtcIl1cIikuZmFkZU91dCgwKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudChpZCkuZmFkZUluKCRzY29wZS5GQURFX1NQRUVEKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmFuZG9tU2xpZGUgPSBmdW5jdGlvbihzbGlkZXIpIHtcclxuICAgICRzY29wZS5mYWRlVG8oc2xpZGVyLCAkc2NvcGUuZ2V0UmFuZG9tSW50KDAsIHNsaWRlci5zbGlkZXMubGVuZ3RoIC0gMSkpO1xyXG4gIH07XHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1Nwb3RDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJHRpbWVvdXQsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4vKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9C10YDQtdC80LXQvdC90YvRhSAqL1xyXG5cclxuICAkc2NvcGUubWF4U2l6ZSA9IDI1KjEwMjQqMTAyNDtcclxuICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xyXG4gICRzY29wZS5rZXlzID0gW107XHJcbiAgJHNjb3BlLmFjdGlvbiA9IGZhbHNlO1xyXG5cclxuICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuICAkc2NvcGUucmVzdWx0ID0ge307XHJcblxyXG4gICRzY29wZS5zcG90ID0ge307XHJcbiAgJHNjb3BlLnNwb3QuZGlzY29kZXMgPSAwO1xyXG5cclxuICAkc2NvcGUuZ2VuZXJhbCA9IHt9O1xyXG4gICRzY29wZS5nZW5lcmFsLnZpZXdzID0gZmFsc2U7XHJcbiAgJHNjb3BlLmhvc3RfbW9iaWxlID0gMDtcclxuXHJcbiAgJHNjb3BlLndhbGxldCA9IHt9O1xyXG4gICRzY29wZS53YWxsZXQuY2FyZHMgPSB7fTtcclxuXHJcbiAgJHNjb3BlLnNjcm9sbF9rZXkgPSAtMTtcclxuXHJcbiAgJHNjb3BlLmFjdGlvbnMgPSB7fTtcclxuICAkc2NvcGUuYWN0aW9ucy5wYWdlID0gJyc7XHJcbiAgJHNjb3BlLmFjdGlvbnMucGhyYXNlID0gJyc7XHJcbiAgJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgPSAwO1xyXG4gICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCA9IDA7XHJcblxyXG4vKiBDUlVEINC00LvRjyDRgdC/0L7RgtCwICovXHJcblxyXG4gIC8v0KLRgNC40LPQtdGAINC90LAg0YHQvdGP0YLQuNC1INC+0YjQuNCx0LrQuCDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC/0L7Qu9GPXHJcbiAgJHNjb3BlLiR3YXRjaCgnc3BvdC5jb2RlICsgc3BvdC50ZXJtcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmVycm9yLmNvZGUgPSBmYWxzZTtcclxuICAgICRzY29wZS5lcnJvci50ZXJtcyA9IGZhbHNlO1xyXG4gIH0pO1xyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDRgdC/0L7RgtCwXHJcbiAgJHNjb3BlLmFkZFNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICBpZiAoIXNwb3QuY29kZSB8fCAhJHNjb3BlLnNwb3QudGVybXMpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2FkZCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAkc2NvcGUuc3BvdC5kaXNjb2RlcyA9IGRhdGEuZGlzY29kZXM7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1saXN0JykucHJlcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FjdFNwb3QnKS5jbGljaygpO1xyXG4gICAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC5jb2RlO1xyXG4gICAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC50ZXJtcztcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfbW9iaWxlKVxyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICcvc3BvdC9saXN0JztcclxuICAgICAgfWVsc2UgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuY29kZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0KPQv9GA0LDQstC70LXQvdC40LUg0L7RgdC90L7QstC90YvQvNC4INCx0LvQvtC60LDQvNC4INGB0L/QvtGCLCDQutC+0YjQtdC70LXQuiwg0LrRg9C/0L7QvdGLLlxyXG4gICRzY29wZS4kd2F0Y2goJ2dlbmVyYWwudmlld3MgKyBzcG90LmRpc2NvZGVzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5wYWdlID0gJyc7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQod2luZG93KS51bmJpbmQoJ3Njcm9sbCcsICRzY29wZS5sb2FkTW9yZUNvdXBvbnMpO1xyXG5cclxuICAgIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnc3BvdCcpe1xyXG4gICAgICAkc2NvcGUudmlld1Nwb3QoJHNjb3BlLnNwb3QpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnd2FsbGV0Jyl7XHJcbiAgICAgICRzY29wZS52aWV3V2FsbGV0KCRzY29wZS5zcG90KTtcclxuICAgIH0gZWxzZSBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ2NvdXBvbicpe1xyXG4gICAgICAkc2NvcGUudmlld0NvdXBvbnMoJHNjb3BlLnNwb3QsICRzY29wZS5hY3Rpb25zKTtcclxuICAgIH0gZWxzZSBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ3NldHRpbmdzJyl7XHJcbiAgICAgICRzY29wZS52aWV3c1NldHRpbmdzKCRzY29wZS5zcG90KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLmJvZHlNaW5IZWlnaHQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGxpc3RIZWlnaHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWxpc3QnKS5oZWlnaHQoKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudCcpLmNzcygnbWluLWhlaWdodCcsIGxpc3RIZWlnaHQrMjAwKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUudmlld1Nwb3QgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgaWYgKHNwb3QuZGlzY29kZXMgPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB2YXIgc3BvdF9ibG9jayA9IGFuZ3VsYXIuZWxlbWVudCgnI3Nwb3QtYmxvY2snKTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3ZpZXcnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAkc2NvcGUua2V5cyA9IFtdO1xyXG4gICAgICAgICRzY29wZS5jb250ZW50X2l0ZXJhdGlvbiA9IDA7XHJcbiAgICAgICAgJHNjb3BlLmZpbGVVcGxvYWRJbml0KCk7XHJcblxyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuc2Nyb2xsX2tleSAmJiAkc2NvcGUuc2Nyb2xsX2tleSA+IDEpXHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5zY3JvbGxQYWdlKCcjYmxvY2stJyArICRzY29wZS5zY3JvbGxfa2V5KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5zY3JvbGxQYWdlKCdib2R5Jyk7XHJcbiAgICAgICAgJHNjb3BlLnNjcm9sbF9rZXkgPSAtMTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7Qs9C+INCx0LvQvtC60LAg0LIg0YHQv9C+0YJcclxuICAkc2NvcGUuYWRkQ29udGVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmFkZFZhbHVlKCRzY29wZS5zcG90LmNvbnRlbnQpO1xyXG4gIH07XHJcblxyXG4gIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90LXQv9GA0LjQstGP0LfQsNC90L3QvtCz0L4g0Log0YHQvtGG0YHQtdGC0Y/QvCDQutC+0L3RgtC10L3RgtCwXHJcbiAgJHNjb3BlLmFkZFZhbHVlID0gZnVuY3Rpb24obmV3VmFsdWUpe1xyXG4gICAgJHNjb3BlLnNwb3QuY29udGVudCA9IG5ld1ZhbHVlO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc3BvdEFkZENvbnRlbnQnLCAkc2NvcGUuc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1jb250ZW50JykuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcblxyXG4gICAgICAgICRzY29wZS5zcG90LmtleXMucHVzaChkYXRhLmtleSk7XHJcbiAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudCA9ICcnO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgndGV4dGFyZWEnKS5yZW1vdmVDbGFzcygncHV0Jyk7XHJcblxyXG4gICAgICAgIGlmIChhbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybScpLmhhc0NsYXNzKCdvcGVuJykpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtJykuc2xpZGVVcCgwLCBmdW5jdGlvbigpe2FuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtIGEnKS5yZW1vdmVDbGFzcygnYmxhY2tvdXQnKTthbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybSBhJykuZmFkZVRvKDAsIDEpO30pO1xyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICB9LCA2MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgICRzY29wZS5yZXNldEN1cnNvcigpO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQv9C+0YDRj9C00L7QuiDQsdC70L7QutC+0LJcclxuICAkc2NvcGUuc2F2ZU9yZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zYXZlT3JkZXInLCAkc2NvcGUuc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG5cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J/QsNGA0LDQvNC10YLRgNGLINGB0L7RgNGC0LjRgNC+0LLQutC4XHJcbiAgJHNjb3BlLnNvcnRhYmxlT3B0aW9ucyA9IHtcclxuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICRzY29wZS5zYXZlT3JkZXIoKTtcclxuICAgIH0sXHJcbiAgICAnY29udGFpbm1lbnQnOicuc3BvdC1jb250ZW50JyxcclxuICAgICdoYW5kbGUnOiAnLm1vdmUnLFxyXG4gICAgJ3Njcm9sbFNlbnNpdGl2aXR5JzogNSxcclxuICAgICd0b2xlcmFuY2UnOiAncG9pbnRlcicsXHJcbiAgICAnb3BhY2l0eSc6MC44XHJcbiAgfTtcclxuXHJcbiAgLy8g0KPQtNCw0LvQtdC90LjQtSDQsdC70L7QutCwINCyINGB0L/QvtGC0LVcclxuICAkc2NvcGUucmVtb3ZlQ29udGVudCA9IGZ1bmN0aW9uKHNwb3QsIGtleSwgZSkge1xyXG4gICAgc3BvdC5rZXkgPSBrZXk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zcG90UmVtb3ZlQ29udGVudCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICB2YXIgc3BvdEl0ZW0gPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICAgICAgc3BvdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgJHNjb3BlLmtleXM9ZGF0YS5rZXlzO1xyXG4gICAgICAgIGlmIChkYXRhLm5ldERvd24pXHJcbiAgICAgICAgICAgICRzY29wZS5uZXREb3duKGRhdGEubmV0RG93bik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCg0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0YLQtdC60YHRgtC+0LLQvtCz0L4g0LHQu9C+0LrQsCDQsiDRgdC/0L7RgtC1XHJcbiAgJHNjb3BlLmVkaXRDb250ZW50ID0gZnVuY3Rpb24oc3BvdCwga2V5LCBlKSB7XHJcbiAgICBpZiAoIXNwb3QuY29udGVudF9uZXcpe1xyXG4gICAgICBzcG90LmtleSA9IGtleTtcclxuICAgICAgdmFyIHNwb3RJdGVtID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWVkaXQnKS5jbG9uZSgpO1xyXG5cclxuICAgICAgaWYgKHNwb3RJdGVtLmZpbmQoJ2EudHlwZS1saW5rJykuc2l6ZSgpID4gMCl7XHJcbiAgICAgICAgICAvL9GB0YHRi9C70LrQsFxyXG4gICAgICAgICAgdmFyIHNwb3RMaW5rID0gc3BvdEl0ZW0uZmluZCgnYS50eXBlLWxpbmsnKTtcclxuICAgICAgICAgICRzY29wZS5zcG90LmNvbnRlbnRfbmV3ID0gc3BvdExpbmsuZmluZCgnc3Bhbi5saW5rJykudGV4dCgpO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICAgIC8v0YLQtdC60YHRglxyXG4gICAgICAgICAgdmFyIHNwb3REYXRhID0gc3BvdEl0ZW0uZmluZCgncC5pdGVtLXR5cGVfX3RleHQnKTtcclxuICAgICAgICAgICRzY29wZS5zcG90LmNvbnRlbnRfbmV3ID0gc3BvdERhdGEudGV4dCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzcG90RWRpdC5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICBzcG90RWRpdC5maW5kKCd0ZXh0YXJlYScpLmZvY3VzKDEpO1xyXG4gICAgICBzcG90SXRlbS5oaWRlKCkuYmVmb3JlKCRjb21waWxlKHNwb3RFZGl0KSgkc2NvcGUpKTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgJHNjb3BlLmhpZGVTcG90RWRpdCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCh0L7RhdGA0LDQvdC10L3QuNC1INGC0LXQutGB0YLQvtCy0L7Qs9C+INCx0LvQvtC60LAg0LIg0YHQv9C+0YLQtVxyXG4gICRzY29wZS5zYXZlQ29udGVudCA9IGZ1bmN0aW9uKHNwb3QsIGUpIHtcclxuICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgIHZhciBzcG90SXRlbSA9IHNwb3RFZGl0Lm5leHQoKTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zcG90U2F2ZUNvbnRlbnQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0uc2hvdygpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC5jb250ZW50X25ldztcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0YDRj9GH0LXQvCDRgtC10LrRgdGC0L7QstGL0Lkg0LHQu9C+0Log0L/RgNC4INC60LvQuNC60LUg0LLQvdC1LCDQtNCw0L3QvdGL0LUg0YHQvtGF0YDQsNC90Y/QtdC8XHJcbiAgJHNjb3BlLmhpZGVTcG90RWRpdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCEkc2NvcGUuc3BvdC5jb250ZW50ICYmICEkc2NvcGUuc3BvdC5jb250ZW50X25ldykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudCgnI3Nwb3QtZWRpdCcpO1xyXG4gICAgdmFyIHNwb3RJdGVtID0gc3BvdEVkaXQubmV4dCgpO1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zcG90L3Nwb3RTYXZlQ29udGVudCcsICRzY29wZS5zcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgc3BvdEl0ZW0uc2hvdygpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuc3BvdC5jb250ZW50X25ldztcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0LXRgNC10LjQvNC10L3QvtCy0YvQstCw0LXQvCDRgdC/0L7RglxyXG4gICRzY29wZS5yZW5hbWVTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgaWYgKCFzcG90Lm5hbWUpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3JlbmFtZScsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyMnICsgc3BvdC5kaXNjb2RlcyArICcgaDMnKS50ZXh0KHNwb3QubmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YfQuNGJ0LDQtdC8INGB0L/QvtGCXHJcbiAgJHNjb3BlLmNsZWFuU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2NsZWFuJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICRzY29wZS5nZW5lcmFsLnZpZXdzID0gJ3Nwb3QnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQo9C00LDQu9GP0LXQvCDRgdC/0L7RglxyXG4gICRzY29wZS5yZW1vdmVTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsJy9zcG90L2xpc3QvJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCc0LXQvdGP0LXQvCDRgdGC0LDRgtGD0YEg0YHQv9C+0YLQsFxyXG4gICRzY29wZS5pdmlzaWJsZVNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9pbnZpc2libGUnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgJHNjb3BlLnNwb3Quc3RhdHVzID0gZGF0YS5zdGF0dXM7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjJytzcG90LmRpc2NvZGVzKS50b2dnbGVDbGFzcygnaW52aXNpYmxlJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0L7QutC90LAg0L3QsNGB0YLRgNC+0LXQulxyXG4gICRzY29wZS52aWV3c1NldHRpbmdzID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc2V0dGluZ3MnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvtGI0LXQu9GM0LrQsFxyXG4gICRzY29wZS52aWV3V2FsbGV0ID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvd2FsbGV0Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldExpc3RDYXJkKCk7XHJcblxyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJHNjb3BlLnZpZXdTcG90KCRzY29wZS5zcG90KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrRg9C/0L7QvdC+0LJcclxuICAkc2NvcGUudmlld0NvdXBvbnMgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9jb3Vwb25zJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL0PQv9C40YHQvtC6INC60YPQv9C+0L3QvtCyXHJcbiAgJHNjb3BlLmxpc3RDb3Vwb25zID0gZnVuY3Rpb24gKHNwb3QsIGFjdGlvbnMpIHtcclxuICAgIGlmICghYWN0aW9ucy5wYWdlKSByZXR1cm4gZmFsc2U7XHJcbiAgICB2YXIgbGlzdCA9IGFuZ3VsYXIuZWxlbWVudCgnI2NvdXBvbnMtbGlzdCcpO1xyXG5cclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6IHNwb3QuZGlzY29kZXMsICd0b2tlbic6IHNwb3QudG9rZW4sICdwYWdlJzogYWN0aW9ucy5wYWdlLCAncGhyYXNlJzogYWN0aW9ucy5waHJhc2UsICdvZmZzZXQnOmFjdGlvbnMub2Zmc2V0fTtcclxuXHJcbiAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IHRydWU7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9saXN0Q291cG9ucycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgKz0gZGF0YS5jb3VudDtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSBkYXRhLmNvdW50X2FsbDtcclxuXHJcbiAgICAgICAgbGlzdC5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KS5lcnJvcihmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICB9O1xyXG5cclxuICAkc2NvcGUuZmlsdGVyQ291cG9ucyA9IGZ1bmN0aW9uKHNwb3QsIGFjdGlvbnMpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLm9mZnNldCA9IDA7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSAwO1xyXG4gICAgJHNjb3BlLmxpc3RDb3Vwb25zKHNwb3QsIGFjdGlvbnMpO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0L/QuNGB0L7QuiDQutCw0YDRglxyXG4gICRzY29wZS5nZXRMaXN0Q2FyZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgIT0gJ3dhbGxldCcpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2xpc3RDYXJkJywgJHNjb3BlLndhbGxldCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHMgPSBkYXRhLmNhcmRzO1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHNfY291bnQgPSBkYXRhLmNhcmRzX2NvdW50O1xyXG4gICAgICAgICRzY29wZS53YWxsZXQubGlua2luZ19jYXJkID0gZGF0YS5saW5raW5nX2NhcmQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICRzY29wZS5nZXRMaXN0Q2FyZCgpO1xyXG4gICB9LCA1MDAwKTtcclxuICB9O1xyXG5cclxuICAvLyDQkdC70L7QutC40YDQvtCy0LrQsCDQutC+0YjQtdC70YzQutCwXHJcbiAgJHNjb3BlLmJsb2NrZWRXYWxsZXQgPSBmdW5jdGlvbigpe1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvYmxvY2tlZFdhbGxldCcsICRzY29wZS53YWxsZXQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUud2FsbGV0LnN0YXR1cyA9IGRhdGEuc3RhdHVzO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQntGC0L/RgNCw0LLQutCwINC30LDQv9GA0L7RgdCwINC90LAg0L/RgNC40LLRj9C30LrRgyDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLmxpbmtpbmdDYXJkID0gZnVuY3Rpb24oY2FyZCl7XHJcbiAgICBpZiAoIWNhcmQudGVybXMpIHJldHVybiBmYWxzZTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudChcIiNsaW5raW5nX2NhcmRcIiApLnN1Ym1pdCgpO1xyXG4gIH07XHJcblxyXG4gIC8vINCU0LXQu9Cw0LXQvCDQutCw0YDRgtGDINC/0LvQsNGC0LXQttC90L7QuVxyXG4gICRzY29wZS5zZXRQYXltZW50Q2FyZCA9IGZ1bmN0aW9uKGNhcmRfaWQsIGUpe1xyXG4gICAgdmFyIGRhdGEgPSB7J3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdjYXJkX2lkJzogY2FyZF9pZH07XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zZXRQYXltZW50Q2FyZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5tYWluLWNhcmQnKS5yZW1vdmVDbGFzcygnbWFpbi1jYXJkJyk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoJ21haW4tY2FyZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZWRpdENhcmRMaXN0ID0gZnVuY3Rpb24oKXtcclxuICAgICQoJy50YWJsZS1jYXJkJykudG9nZ2xlQ2xhc3MoJ2VkaXQnKTtcclxuXHJcbiAgICBpZiAoJHNjb3BlLndhbGxldC5jYXJkX2VkaXQgPT09IDApIHtcclxuICAgICAgJHNjb3BlLndhbGxldC5jYXJkX2VkaXQgPSAxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJHNjb3BlLndhbGxldC5jYXJkX2VkaXQgPSAwO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCj0LTQsNC70Y/QtdC8INC60LDRgNGC0YNcclxuICAkc2NvcGUucmVtb3ZlQ2FyZCA9IGZ1bmN0aW9uKGNhcmRfaWQpe1xyXG4gICAgdmFyIGRhdGEgPSB7J3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdjYXJkX2lkJzogY2FyZF9pZH07XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9yZW1vdmVDYXJkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHNfY291bnQgLT0gMTtcclxuICAgICAgICBkZWxldGUgJHNjb3BlLndhbGxldC5jYXJkc1tjYXJkX2lkXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHRh9C10YLRh9C40Log0L3QsCDRgdGC0YDQsNC90LjRhtC1INGB0L7Qs9C70LDRiNC10L3QuNGPINC+0LEg0L7Qv9C70LDRgtC1XHJcbiAgdmFyIHN0b3BwZWQ7XHJcbiAgJHNjb3BlLmNvdW50UmVzZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5yZXNldF90aW1lID0gdHlwZW9mICRzY29wZS5yZXNldF90aW1lICE9PSAndW5kZWZpbmVkJyA/ICRzY29wZS5yZXNldF90aW1lOjMwO1xyXG4gICAgc3RvcHBlZCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoJHNjb3BlLnJlc2V0X3RpbWUgPT09IDApIHtcclxuICAgICAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJyx3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xyXG4gICAgICB9IGVsc2UgJHNjb3BlLnJlc2V0X3RpbWUtLTtcclxuICAgICAgJHNjb3BlLmNvdW50UmVzZXQoKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH07XHJcblxyXG5cclxuLyrQl9Cw0LPRgNGD0LfQutCwINGE0LDQudC70L7QsiAqL1xyXG5cclxuICAvLyDQktC10YjQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQtNC70Y8g0LfQsNCz0YDRg9C30LrQuCDRhNCw0LnQu9C+0LJcclxuICAkc2NvcGUuZmlsZVVwbG9hZEluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZmlsZV9kcmFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3Bib3gnKTtcclxuICAgIHZhciBmaWxlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmlsZScpO1xyXG4gICAgaWYgKGZpbGVfZHJhZyAmJiBmaWxlX2J1dHRvbikge1xyXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgIGlmICh4aHIudXBsb2FkKSB7XHJcbiAgICAgICAgZmlsZV9kcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZmlsZURyYWdIb3ZlciwgZmFsc2UpO1xyXG4gICAgICAgIGZpbGVfZHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBmaWxlRHJhZ0hvdmVyLCBmYWxzZSk7XHJcbiAgICAgICAgZmlsZV9kcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBmaWxlU2VsZWN0SGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgIGZpbGVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZpbGVTZWxlY3RIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQl9Cw0LrQsNGH0LrQsCDRhNCw0LnQu9CwIGh0bWw1XHJcbiAgZnVuY3Rpb24gZmlsZURyYWdIb3ZlcihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKGUudHlwZSA9PSAnZHJhZ292ZXInKXtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjZHJvcGJveCcpLmFkZENsYXNzKCdob3ZlcicpO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkcm9wYm94JykucmVtb3ZlQ2xhc3MoJ2hvdmVyJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgZnVuY3Rpb24gZmlsZVNlbGVjdEhhbmRsZXIoZSkge1xyXG4gICAgZmlsZURyYWdIb3ZlcihlKTtcclxuICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBmOyBmID0gZmlsZXNbaV07IGkrKykge1xyXG4gICAgICAkc2NvcGUudXBsb2FkRmlsZShmKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LDQtdC8INC/0YDQvtCz0YDQtdGB0YEg0LHQsNGAINC4INC/0YDQvtC70LjRgdGC0YvQstCw0LXQvCDRjdC60YDQsNC9INC6INC90L7QstC+0LzRgyDQsdC70L7QutGDXHJcbiAgJHNjb3BlLnVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IGUudGFyZ2V0LnJlc3BvbnNlVGV4dDtcclxuICAgIGlmIChyZXN1bHQpe1xyXG4gICAgICB2YXIgZGF0YSA9IGFuZ3VsYXIuZnJvbUpzb24ocmVzdWx0KTtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvZ3Jlc3MtY29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG5cclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtZmlsZScpLnZhbCgnJyk7XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gJCgnI2Jsb2NrLScgKyBkYXRhLmtleSkub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCh0LvRg9GH0LDQudC90YvQvCDQvtCx0YDQsNC30L7QvCDQs9C10L3QtdGA0LjRgNGD0LXQvCDQt9C90LDRh9C10L3QuNC1INC00LvRjyDRjdGE0YTQtdC60YLQsCDQt9Cw0LPRgNGD0LfQutC4XHJcbiAgZnVuY3Rpb24gdXBsb2FkUHJvZ3Jlc3MoZXZ0KSB7XHJcbiAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XHJcbiAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gTWF0aC5yb3VuZChldnQubG9hZGVkICogMTAwIC8gZXZ0LnRvdGFsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9ICd1bmFibGUgdG8gY29tcHV0ZSc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g0JTQtdC50YHRgtCy0LjQtSDQtdGB0LvQuCDQt9Cw0LPRgNGD0LfQutCwINC90LUg0YPQtNCw0LvQsNGB0YxcclxuICAkc2NvcGUudXBsb2FkRmFpbGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNlcnJvci11cGxvYWQnKS5zaG93KCkuZGVsYXkoODAwKS5zbGlkZVVwKCdzbG93Jyk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnVwbG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XHJcblxyXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgaWYgKHhoci51cGxvYWQgJiYgZmlsZS5zaXplIDw9ICRzY29wZS5tYXhTaXplKSB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Byb2dyZXNzLWNvbnRlbnQnKS5zaG93KCk7XHJcblxyXG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gTWF0aC5yb3VuZChlLmxvYWRlZCAqIDEwMCAvIGUudG90YWwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAndW5hYmxlIHRvIGNvbXB1dGUnO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCB1cGxvYWRQcm9ncmVzcywgZmFsc2UpO1xyXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAkc2NvcGUudXBsb2FkRmFpbGVkLCBmYWxzZSk7XHJcbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgJHNjb3BlLnVwbG9hZENvbXBsZXRlLCBmYWxzZSk7XHJcbiAgICAgIHhoci5vcGVuKCdQT1NUJywgJy9zcG90L3VwbG9hZCcsIHRydWUpO1xyXG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1GaWxlLU5hbWUnLCB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZmlsZS5uYW1lKSkpO1xyXG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1EaXNjb2RlcycsICRzY29wZS5zcG90LmRpc2NvZGVzKTtcclxuICAgICAgeGhyLnNlbmQoZmlsZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbi8qINCh0L7RhiDRgdC10YLQuCAqL1xyXG5cclxuICAvL9C/0L7QtNCz0YDRg9C30LrQsCDQsdC70L7QutCwINGBINC60L7QvdGC0LXQvdGC0L7QvCDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS5sb2FkU29jQ29udGVudCA9IGZ1bmN0aW9uKGtleSlcclxuICB7XHJcbiAgICB2YXIgZGF0YSA9IHtkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlcywga2V5OmtleSwgdG9rZW46JHNjb3BlLnVzZXIudG9rZW59O1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zcG90L1NvY05ldENvbnRlbnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGRhdGEua2V5KTtcclxuICAgICAgICAgICAgdmFyIG9sZEhlaWdodCA9IHNwb3RFZGl0LmhlaWdodCgpO1xyXG4gICAgICAgICAgICB2YXIgb2xkU2Nyb2xsID0gc3BvdEVkaXQub2Zmc2V0KCkudG9wO1xyXG5cclxuICAgICAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2V0VmlkZW9TaXplKGRhdGEua2V5KTtcclxuICAgICAgICAgICAgaWYgKG9sZFNjcm9sbCA8ICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5oZWlnaHQoKSAtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/Rg9GB0YLQsNC90L7QstC40YLRjCDQv9C+0LTRgdCy0LXRgtC60YMg0LrQvdC+0L/QutC4INGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLm5ldENoZWNrID0gZnVuY3Rpb24obmV0TmFtZSkge1xyXG4gICAgdmFyIGRhdGEgPSB7dG9rZW46JHNjb3BlLnVzZXIudG9rZW4sIG5ldE5hbWU6bmV0TmFtZX07XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9uZXRDaGVjaycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChcIiNleHRyYU1lZGlhRm9ybSBhW25ldD0nXCIgKyBkYXRhLm5ldE5hbWUgKyBcIiddXCIpO1xyXG4gICAgICAgIGlmIChkYXRhLmJpbmRlZClcclxuICAgICAgICAgIGJ1dHRvbi5hZGRDbGFzcygnYmluZGVkJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgYnV0dG9uLnJlbW92ZUNsYXNzKCdiaW5kZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9C+0LTRgdCy0LXRgtC40YLRjCDQutC90L7Qv9C60YMg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUubmV0VXAgPSBmdW5jdGlvbihuZXROYW1lKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KFwiI2V4dHJhTWVkaWFGb3JtIGFbbmV0PSdcIiArIG5ldE5hbWUgKyBcIiddXCIpO1xyXG4gICAgYnV0dG9uLmFkZENsYXNzKCdiaW5kZWQnKTtcclxuICB9O1xyXG5cclxuICAvL9C/0L7Qs9Cw0YHQuNGC0Ywg0LrQvdC+0L/QutGDINGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLm5ldERvd24gPSBmdW5jdGlvbihuZXROYW1lKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KFwiI2V4dHJhTWVkaWFGb3JtIGFbbmV0PSdcIiArIG5ldE5hbWUgKyBcIiddXCIpO1xyXG4gICAgYnV0dG9uLnJlbW92ZUNsYXNzKCdiaW5kZWQnKTtcclxuICB9O1xyXG5cclxuICAvLyDQn9GA0LjQstGP0LfQutCwINGB0L7RhtGB0LXRgtC10LlcclxuICB2YXIgcG9wdXA7XHJcbiAgdmFyIHNvY1RpbWVyO1xyXG4gIHZhciBsaWtlVGltZXI7XHJcblxyXG4gIC8v0YfQtdGA0LXQtyDQv9C70LDRiNC60YNcclxuICAkc2NvcGUuYmluZEJ5UGFuZWwgPSBmdW5jdGlvbihidXR0b25OYW1lKSB7XHJcbiAgICB2YXIgbmV0TmFtZSA9IGJ1dHRvbk5hbWU7XHJcbiAgICB2YXIgZGF0YSA9IHtzcG90OiAkc2NvcGUuc3BvdCwgdG9rZW46JHNjb3BlLnVzZXIudG9rZW4sIG5ldE5hbWU6bmV0TmFtZX07XHJcbiAgICAvL9C+0L/RgNC10LTQtdC70LXQvdC40LUg0YHQtdGC0Lgg0L/QviDRgdGB0YvQu9C60LVcclxuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5zcG90LmNvbnRlbnQpICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICAgIGRhdGEubGluayA9ICRzY29wZS5zcG90LmNvbnRlbnQ7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc29jX3BhdHRlcm5zLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zcG90LmNvbnRlbnQuaW5kZXhPZigkc2NvcGUuc29jX3BhdHRlcm5zW2ldLmJhc2VVcmwpICE9IC0xKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuZXROYW1lID0gJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5uZXROYW1lID0gJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgICRodHRwLnBvc3QoJy9zcG90L0JpbmRCeVBhbmVsJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEucHJvZmlsZUhpbnQubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEubG9nZ2VkSW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzgwXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIG5ldE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlZGlyZWN0X3VyaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsICs9IHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaT0nKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0X3VyaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJXaWR0aCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoIC0gb3B0aW9ucy5wb3B1cC53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAgPSB3aW5kb3cub3Blbih1cmwgKyAnJmpzJywgXCJ5aWlfZWF1dGhfcG9wdXBcIiwgXCJ3aWR0aD1cIiArIG9wdGlvbnMucG9wdXAud2lkdGggKyBcIixoZWlnaHQ9XCIgKyBvcHRpb25zLnBvcHVwLmhlaWdodCArIFwiLGxlZnQ9XCIgKyBjZW50ZXJXaWR0aCArIFwiLHRvcD1cIiArIGNlbnRlckhlaWdodCArIFwiLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz1ubyx0b29sYmFyPW5vLG1lbnViYXI9bm8sbG9jYXRpb249bm8sZGlyZWN0b3JpZXM9bm8sc3RhdHVzPXllc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cCA9PT0gbnVsbCB8fCB0eXBlb2YocG9wdXApPT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IHVybCArICcmZGlzY29kZXM9JyArICRzY29wZS5zcG90LmRpc2NvZGVzICsgJyZuZXdGaWVsZD0xJyArICcmc3luY2g9dHJ1ZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5zcG90LmNvbnRlbnQgIT09ICd1bmRlZmluZWQnICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZiArPSAnJmxpbms9JyArIGVuY29kZVVSSUNvbXBvbmVudCgkc2NvcGUuc3BvdC5jb250ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmluZE5ldCA9IHtuYW1lOmRhdGEuc29jbmV0LCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2RlcywgbmV3RmllbGQ6MX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5zcG90LmNvbnRlbnQpICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpbmROZXQubGluayA9ICRzY29wZS5zcG90LmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmxpbmtDb3JyZWN0ID09ICdvaycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWRkLWNvbnRlbnQnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50PScnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ3RleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ3B1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzZXRDdXJzb3IoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoJyNibG9jay0nICsgZGF0YS5rZXkpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5ldCA9ICRzY29wZS5nZXRQYXR0ZXJuSW5kKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROZXQgPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbY3VycmVudE5ldF0uQmluZEJ5UGFzdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0LLQvtC30LLRgNCw0YjQsNC10YIg0LjQvdC00LXQutGBINGB0L7RhtGB0LXRgtC4INCyINGB0LrQvtC/0LUg0L/QviDQuNC80LXQvdC4XHJcbiAgJHNjb3BlLmdldFBhdHRlcm5JbmQgPSBmdW5jdGlvbihuZXROYW1lKXtcclxuICAgICAgdmFyIGN1cnJlbnROZXQgPSAtMTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc29jX3BhdHRlcm5zLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5uYW1lID09IG5ldE5hbWUpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY3VycmVudE5ldCA9IGk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGN1cnJlbnROZXQ7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9GA0LjQstGP0LfQutCwINC/0L4g0LrQvdC+0L/QutC1XHJcbiAgJHNjb3BlLmJpbmRTb2NpYWwgID0gZnVuY3Rpb24oc3BvdCwga2V5LCBlKSB7XHJcbiAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICBzcG90LmtleSA9IGtleTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2JpbmRTb2NpYWwnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgaWYoKGRhdGEuc29jbmV0ICE9ICdubycpICYmIChkYXRhLnNvY25ldC5sZW5ndGggPiAwKSl7XHJcbiAgICAgICAgICBpZiAoIWRhdGEubG9nZ2VkSW4pIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgaWQ6ICcnLFxyXG4gICAgICAgICAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDUwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzODBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlZGlyZWN0X3VyaSA9ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICcvdXNlci9CaW5kU29jTG9naW4/c2VydmljZT0nICsgZGF0YS5zb2NuZXQ7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSByZWRpcmVjdF91cmk7XHJcblxyXG4gICAgICAgICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nO1xyXG4gICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaT0nKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgdXJsICs9ICdyZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdF91cmkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgIHBvcHVwID0gd2luZG93Lm9wZW4odXJsICsgJyZqcycsIFwieWlpX2VhdXRoX3BvcHVwXCIsIFwid2lkdGg9XCIgKyBvcHRpb25zLnBvcHVwLndpZHRoICsgXCIsaGVpZ2h0PVwiICsgb3B0aW9ucy5wb3B1cC5oZWlnaHQgKyBcIixsZWZ0PVwiICsgY2VudGVyV2lkdGggKyBcIix0b3A9XCIgKyBjZW50ZXJIZWlnaHQgKyBcIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9bm8sdG9vbGJhcj1ubyxtZW51YmFyPW5vLGxvY2F0aW9uPW5vLGRpcmVjdG9yaWVzPW5vLHN0YXR1cz15ZXNcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAocG9wdXAgPT09IG51bGwgfHwgdHlwZW9mKHBvcHVwKT09J3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsICsgJyZkaXNjb2Rlcz0nICsgc3BvdC5kaXNjb2RlcyArICcma2V5PScgKyBzcG90LmtleSArICcmc3luY2g9dHJ1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5iaW5kTmV0ID0ge25hbWU6ZGF0YS5zb2NuZXQsIGRpc2NvZGVzOnNwb3QuZGlzY29kZXMsIGtleTpzcG90LmtleSwgc3BvdEVkaXQ6YW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpfTtcclxuICAgICAgICAgICAgICAgIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5saW5rQ29ycmVjdCA9PSAnb2snKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROZXQgPSAkc2NvcGUuZ2V0UGF0dGVybkluZChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5ldCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbY3VycmVudE5ldF0uQmluZEJ5UGFzdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShzcG90LmtleSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2Uuc2V0TW9kYWwoZGF0YS5saW5rQ29ycmVjdCwgJ25vbmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNlIGlmKGRhdGEubGlua0NvcnJlY3QgIT0gJ29rJyl7XHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLnNldE1vZGFsKGRhdGEubGlua0NvcnJlY3QsICdub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9C/0L7QtNC60LvRjtGH0LXQvdC40LUg0LDQutGG0LjQuCwg0YLRgNC10LHRg9GO0YnQtdC5INC20LXRgtC+0L3QsCDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS5jaGVja0xpa2UgPSBmdW5jdGlvbihlLCBpZF9hY3Rpb24pXHJcbiAge1xyXG4gICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGlkOmlkX2FjdGlvbiwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXN9O1xyXG4gICAgICB2YXIgYWN0O1xyXG4gICAgICAkaHR0cC5wb3N0KCcvdXNlci9jaGVja0xpa2UnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlmICghZGF0YS5pc1NvY0xvZ2dlZClcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ1MCxcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzgwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIGRhdGEuc2VydmljZTtcclxuICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlZGlyZWN0X3VyaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHVybCArPSB1cmwuaW5kZXhPZignPycpID49IDAgPyAnJicgOiAnPyc7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigncmVkaXJlY3RfdXJpPScpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB1cmwgKz0gJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0X3VyaSkgKyAnJic7XHJcbiAgICAgICAgICAgICAgICAgIHVybCArPSAnanMnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAgPSB3aW5kb3cub3Blbih1cmwsICd5aWlfZWF1dGhfcG9wdXAnLCAnd2lkdGg9JyArIG9wdGlvbnMucG9wdXAud2lkdGggKyAnLGhlaWdodD0nICsgb3B0aW9ucy5wb3B1cC5oZWlnaHQgKyAnLGxlZnQ9JyArIGNlbnRlcldpZHRoICsgJyx0b3A9JyArIGNlbnRlckhlaWdodCArICcscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9eWVzJyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChwb3B1cCA9PT0gbnVsbCB8fCB0eXBlb2YocG9wdXApPT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gdXJsICsgJyZkaXNjb2Rlcz0nICsgJHNjb3BlLnNwb3QuZGlzY29kZXMgKyAnJmNoZWtfbGlrZT0nICsgaWRfYWN0aW9uO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNraW5nQWN0aW9uID0ge2lkOmlkX2FjdGlvbn07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdiA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgnZGl2LnNwb3QtaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpa2VUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5saWtlc1RpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIChkYXRhLm1lc3NhZ2VfZXJyb3IpICYmICd1bmRlZmluZWQnICE9IHR5cGVvZiAoZGF0YS5tZXNzYWdlKSlcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCd5ZXMnID09IGRhdGEubWVzc2FnZV9lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5zZXRNb2RhbChkYXRhLm1lc3NhZ2UsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLnNldE1vZGFsKGRhdGEubWVzc2FnZSwgJ25vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoZGF0YS5jb250ZW50KSlcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgYWN0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCdkaXYuc3BvdC1pdGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgYWN0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFjdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICAgJHNjb3BlLmxpa2VzVGltZXIgPSBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgIGlmICghcG9wdXAuY2xvc2VkKSB7XHJcbiAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGlkOiRzY29wZS5jaGVja2luZ0FjdGlvbi5pZCwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXN9O1xyXG4gICAgICAgICAgJGh0dHAucG9zdCgnL3VzZXIvY2hlY2tMaWtlJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoZGF0YS5pc1NvY0xvZ2dlZCkpXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc1NvY0xvZ2dlZClcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5iaW5kTmV0ID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoZGF0YS5tZXNzYWdlX2Vycm9yKSAmJiAndW5kZWZpbmVkJyAhPSB0eXBlb2YgKGRhdGEubWVzc2FnZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCd5ZXMnID09IGRhdGEubWVzc2FnZV9lcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2Uuc2V0TW9kYWwoZGF0YS5tZXNzYWdlLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLnNldE1vZGFsKGRhdGEubWVzc2FnZSwgJ25vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKGRhdGEuY29udGVudCkgJiYgJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuYWN0aW9uRGl2KSlcclxuICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdi5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdi5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxpa2VUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5saWtlc1RpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kaXNhYmxlQWN0aW9uID0gZnVuY3Rpb24oZSwgaWRfYWN0aW9uKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgaWQ6aWRfYWN0aW9uLCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlc307XHJcbiAgICAgICAgdmFyIGFjdDtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvdXNlci9kaXNhYmxlTG95YWx0eScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5ob3N0X21vYmlsZSlcclxuICAgICAgICAgICAgICAgICAgICBhY3QgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoJ2Rpdi5zcG90LWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBhY3QgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhY3QuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICBhY3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy/Qv9GA0LjQstGP0LfQutCwINGB0L7RhtGB0LXRgtC4INC4INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwLCDQtdGB0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LfQsNC70L7Qs9C40L3QuNC70YHRjyDRh9C10YDQtdC3INGB0L7RhtGB0LXRgtGMXHJcbiAgICAkc2NvcGUubG9naW5UaW1lciA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgaWYgKCFwb3B1cC5jbG9zZWQpIHtcclxuICAgICAgICB2YXIgbmV0UGFyYW1zID0ge25hbWU6JHNjb3BlLmJpbmROZXQubmFtZSwgZGlzY29kZXM6JHNjb3BlLmJpbmROZXQuZGlzY29kZXMsIGtleTokc2NvcGUuYmluZE5ldC5rZXl9O1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5iaW5kTmV0Lm5ld0ZpZWxkKSAmJiAxID09ICRzY29wZS5iaW5kTmV0Lm5ld0ZpZWxkKVxyXG4gICAgICAgICAgICBuZXRQYXJhbXMubmV3RmllbGQgPSAxO1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5iaW5kTmV0LmxpbmspICYmICRzY29wZS5iaW5kTmV0LmxpbmsubGVuZ3RoKVxyXG4gICAgICAgICAgICBuZXRQYXJhbXMubGluayA9ICRzY29wZS5iaW5kTmV0Lmxpbms7XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgYmluZE5ldDpuZXRQYXJhbXN9O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9zcG90L2JpbmRlZENvbnRlbnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAodHlwZW9mIChkYXRhLmxvZ2dlZEluKSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgKGRhdGEubGlua0NvcnJlY3QpICE9ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgIGlmIChkYXRhLmxvZ2dlZEluKXtcclxuICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgaWYoZGF0YS5saW5rQ29ycmVjdCA9PSAnb2snKXtcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5uZXdGaWVsZCl7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudD0nJztcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgndGV4dGFyZWEnKS5yZW1vdmVDbGFzcygncHV0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc2V0Q3Vyc29yKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3AgLSAxMDA7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdmFyIHNwb3RFZGl0ID0gJHNjb3BlLmJpbmROZXQuc3BvdEVkaXQ7XHJcbiAgICAgICAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShkYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmJpbmROZXQgPSB7fTtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnROZXQgPSAkc2NvcGUuZ2V0UGF0dGVybkluZChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50TmV0ID4gLTEpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2N1cnJlbnROZXRdLkJpbmRCeVBhc3RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5zZXRNb2RhbChkYXRhLmxpbmtDb3JyZWN0LCAnbm9uZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Ugc29jVGltZXIgPSAkdGltZW91dCgkc2NvcGUubG9naW5UaW1lciwgMTAwMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIC8v0J7RgtCy0Y/Qt9C60LAg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUudW5CaW5kU29jaWFsICA9IGZ1bmN0aW9uKHNwb3QsIGtleSwgZSkge1xyXG4gICAgc3BvdC5rZXkgPSBrZXk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9VbkJpbmRTb2NpYWwnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIGlmIChkYXRhLm5ldERvd24pXHJcbiAgICAgICAgICAgICRzY29wZS5uZXREb3duKGRhdGEubmV0RG93bik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5nZXRTb2NQYXR0ZXJucyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkc2NvcGUuZnJlZVNvY2lhbCA9IHRydWU7XHJcbiAgICBpZiAodHlwZW9mICgkc2NvcGUuc29jX3BhdHRlcm5zKSA9PSAndW5kZWZpbmVkJylcclxuICAgIHtcclxuICAgICAgdmFyIGRhdGEgPSB7dG9rZW46JHNjb3BlLnVzZXIudG9rZW59O1xyXG4gICAgICAkaHR0cC5wb3N0KCcvc3BvdC9Tb2NQYXR0ZXJucycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5zb2NfcGF0dGVybnMgPSBkYXRhLnNvY19wYXR0ZXJucztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zb2NfcGF0dGVybnMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiAoJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5CaW5kQnlQYXN0ZSkgPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2ldLkJpbmRCeVBhc3RlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9GD0YHRgtCw0L3QvtCy0LrQsCDRgNCw0LfQvNC10YAg0L/RgNC+0LjQs9GA0YvQstCw0YLQtdC70Y8gWW91VHViZSDQuNC70LggVmltZW9cclxuICAkc2NvcGUuc2V0VmlkZW9TaXplID0gZnVuY3Rpb24oYmxvY2tLZXkpXHJcbiAge1xyXG4gICAgdmFyIHBsYXllcjtcclxuICAgIGlmIChhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgYmxvY2tLZXkgKyAnIC52aWRlby12aW1lbycpLmxlbmd0aCA9PSAxKVxyXG4gICAge1xyXG4gICAgICBwbGF5ZXIgPSBhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgYmxvY2tLZXkgKyAnIC52aWRlby12aW1lbycpO1xyXG4gICAgICBwbGF5ZXIuY3NzKCd3aWR0aCcsICcxMDAlJyk7XHJcbiAgICAgIHBsYXllci5jc3MoJ2hlaWdodCcsIChwYXJzZUludChwbGF5ZXIuY3NzKCd3aWR0aCcpLCAxMCkgLyBwbGF5ZXIuYXR0cigncmVsJykgKyAncHgnKSk7XHJcbiAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBibG9ja0tleSArICcgLnl0X3BsYXllcicpLmxlbmd0aCA9PSAxKXtcclxuICAgICAgcGxheWVyID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGJsb2NrS2V5ICsgJyAueXRfcGxheWVyJyk7XHJcbiAgICAgIHBsYXllci5jc3MoJ3dpZHRoJywgJzEwMCUnKTtcclxuICAgICAgcGxheWVyLmNzcygnaGVpZ2h0JywgKHBhcnNlSW50KHBsYXllci5jc3MoJ3dpZHRoJyksIDEwKSAvIHBsYXllci5hdHRyKCdyZWwnKSArICdweCcpKTtcclxuICAgIH1cclxufTtcclxuXHJcbiAgJHNjb3BlLnNldE5ld1Bhc3MgPSBmdW5jdGlvbihzcG90KVxyXG4gIHtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3NldFNwb3RQYXNzJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycgJiYgdHlwZW9mIChkYXRhLnNhdmVkKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NhdmVQYXNzQnV0dG9uJykudGV4dChkYXRhLnNhdmVkKTtcclxuICAgICAgICBpZiAodHlwZW9mICgkc2NvcGUuc3BvdC5wYXNzKSAhPSAndW5kZWZpbmVkJyAmJiBzcG90LnBhc3MubGVuZ3RoKVxyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNyZXNldFBhc3NCdXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNyZXNldFBhc3NCdXR0b24nKS5oaWRlKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5lcnJvciA9PSAneWVzJykge1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjc2V0UGFzc0Zvcm0gaW5wdXRbbmFtZT1uZXdQYXNzXScpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmVzZXRQYXNzID0gZnVuY3Rpb24oc3BvdClcclxuICB7XHJcbiAgICBzcG90LnBhc3MgPSAnJztcclxuICAgICRzY29wZS5zZXROZXdQYXNzKHNwb3QpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5zYXZlUGFzc0J1dHRvblRleHQgPSBmdW5jdGlvbih0ZXh0KVxyXG4gIHtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NhdmVQYXNzQnV0dG9uJykudGV4dCh0ZXh0KTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NldFBhc3NGb3JtIGlucHV0W25hbWU9bmV3UGFzc10nKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuY2hlY2tTdGF0dXNTcG90ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmVzZXRDdXJzb3IgPSBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoJHNjb3BlLmN1cnNvckJvZHkpICYmICRzY29wZS5jdXJzb3JCb2R5Lmxlbmd0aClcclxuICAgIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5JykuY3NzKCdjdXJzb3InLCAkc2NvcGUuY3Vyc29yQm9keSk7XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuY3Vyc29yQm9keTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5JykuY3NzKCdjdXJzb3InLCAnZGVmYXVsdCcpO1xyXG5cclxuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5jdXJzb3JUZXh0YXJlYSkgJiYgJHNjb3BlLmN1cnNvclRleHRhcmVhLmxlbmd0aClcclxuICAgIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjZHJvcGJveCB0ZXh0YXJlYScpLmNzcygnY3Vyc29yJywgJHNjb3BlLmN1cnNvclRleHRhcmVhKTtcclxuICAgICAgZGVsZXRlICRzY29wZS5jdXJzb3JUZXh0YXJlYTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjZHJvcGJveCB0ZXh0YXJlYScpLmNzcygnY3Vyc29yJywgJ3RleHQnKTtcclxuICB9O1xyXG5cclxuICAvL9C40LfQvNC10L3QtdC90LjQtSDRgdGC0YDQsNC90LjRhtGLINGE0LjQu9GM0YLRgNCwINC60YPQv9C+0L3QvtCyXHJcbiAgJHNjb3BlLiR3YXRjaCgnYWN0aW9ucy5wYWdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgPSAwO1xyXG4gICAgJHNjb3BlLmFjdGlvbnMuY291bnRfYWxsID0gMDtcclxuICAgIHZhciBsaXN0ID0gYW5ndWxhci5lbGVtZW50KCcjY291cG9ucy1saXN0Jyk7XHJcbiAgICBsaXN0LmVtcHR5KCk7XHJcbiAgICAkc2NvcGUubGlzdENvdXBvbnMoJHNjb3BlLnNwb3QsICRzY29wZS5hY3Rpb25zKTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLmNvdXBvbnNTY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzID0gZmFsc2U7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQod2luZG93KS5iaW5kKCdzY3JvbGwnLCAkc2NvcGUubG9hZE1vcmVDb3Vwb25zKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUubG9hZE1vcmVDb3Vwb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZihhbmd1bGFyLmVsZW1lbnQod2luZG93KS5zY3JvbGxUb3AoKSArIGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLmhlaWdodCgpID49IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuaGVpZ2h0KCkgLSAyMDAgJiYgISRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzICYmICRzY29wZS5hY3Rpb25zLm9mZnNldCA8ICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCkge1xyXG4gICAgICAgICRzY29wZS5saXN0Q291cG9ucygkc2NvcGUuc3BvdCwgJHNjb3BlLmFjdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgfTtcclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignUHJvZHVjdENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UpIHtcclxuICAgICRzY29wZS5TdG9yZUluaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW59O1xyXG5cclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvZ2V0UHJpY2VMaXN0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzID0gZGF0YS5zZXR0aW5ncztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTaXplID0gJHNjb3BlLnByb2R1Y3RzW2ldLnNpemVbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3IgPSAkc2NvcGUucHJvZHVjdHNbaV0uY29sb3JbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkU3VyZmFjZSA9ICRzY29wZS5wcm9kdWN0c1tpXS5zdXJmYWNlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OlwiMHB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvW2pdLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBqICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0c1RvcCA9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uY29sb3IubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHNUb3AgKz0gMTU1O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoID4gMylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHNUb3AgLT0gNTY7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5kZXNjcmlwdGlvbi5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0c1RvcCArPSAoJHNjb3BlLnByb2R1Y3RzW2ldLmRlc2NyaXB0aW9uLmxlbmd0aC83Ni41KSAqIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS50aHVtYlNoZWxsU3R5bGUgPSB7dG9wOih0c1RvcCtcInB4XCIpfTtcclxuICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLnJlbW92ZUNsYXNzKCdvdmVyZmxvdy1oJyk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLm0tY292ZXItcHJlbG9hZCcpLmZhZGVPdXQoNjAwKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIElNQUdFX1dJRFRIID0gMjQyO1xyXG5cclxuICAgICRzY29wZS5zY3JvbGxUbyA9IGZ1bmN0aW9uKGltYWdlLGluZCwganNJRCkge1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpbmQgKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuYWRkVG9DYXJ0ID0gZnVuY3Rpb24gYWRkVG9DYXJ0KGpzSUQpe1xyXG4gICAgICAgIGlmKCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSA8IDEpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYoISRzY29wZS5pblJlcXVlc3Qpe1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdG9rZW46ICRzY29wZS51c2VyLnRva2VuLFxyXG4gICAgICAgICAgICAgICAgaWQgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uaWQsXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eSA6IHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSksXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZENvbG9yIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkQ29sb3IsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFN1cmZhY2UgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTaXplIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvYWRkVG9DYXJ0JyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLml0ZW1zLmNvdW50ICs9IHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2tldCA9IGFuZ3VsYXIuZWxlbWVudCgnYS5pY29uLWJhZy1saW5rIHNwYW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNrZXQudGV4dCgkc2NvcGUuaXRlbXMuY291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zaXplQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFNpemUsIHNpemUpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTaXplID09PSBzaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNvbG9yQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZENvbG9yLCBjb2xvcikge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZENvbG9yID09PSBjb2xvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zdXJmYWNlQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFN1cmZhY2UsIHN1cmZhY2UpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTdXJmYWNlID09PSBzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFNpemUgPSBmdW5jdGlvbihqc0lELCBzaXplKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplID0gc2l6ZTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRDb2xvciA9IGZ1bmN0aW9uKGpzSUQsIGNvbG9yKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvciA9IGNvbG9yO1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgY29sb3I7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90b1tpXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvW2ldLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFN1cmZhY2UgPSBmdW5jdGlvbihqc0lELCBzdXJmYWNlKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlID0gc3VyZmFjZTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5yZXNldEFkZGVkVGV4dCA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuICAgICAgICBpZigkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHkgPCAwKXtcclxuICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50aHVtYkNsYXNzID0gZnVuY3Rpb24obGVuKXtcclxuICAgICAgICBpZiAobGVuID4gMylcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlciB4c2Nyb2xsZWRcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXJcIjtcclxuICAgIH07XHJcbi8qXHJcbiAgICAkc2NvcGUudGh1bWJMaUNsYXNzID0gZnVuY3Rpb24oaW5kKXtcclxuICAgICAgICBpZiAoKGluZCAlIDMpID09IDApXHJcbiAgICAgICAgICAgIHJldHVybiBcImJyc2xpZGVcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRoaW1ic2xpZGVcIjtcclxuICAgIH1cclxuKi9cclxufSk7XHJcblxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignQ2FydENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UpIHtcclxuICAgICRzY29wZS5wcm9tb0Vycm9yID0gZmFsc2U7XHJcbiAgXHJcbiAgICAkc2NvcGUuQ2FydEluaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICRzY29wZS5zdW1tID0gMDtcclxuICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW59O1xyXG5cclxuICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9HZXRDYXJ0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgICAgICRzY29wZS5kaXNjb3VudCA9IGRhdGEuZGlzY291bnQ7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5wcm9kdWN0cy5sZW5ndGggPD0gMCl7XHJcbiAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL3N0b3JlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSA9IHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5saXN0cG9zaXRpb24gPSB7bGVmdDpcIjBweFwifTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3IgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5waG90byAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvW2pdLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSA9PSBzdWZmaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBqICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzKXtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSArPSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uZGlzY291bnQqcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNraW5nT3V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5JykucmVtb3ZlQ2xhc3MoJ292ZXJmbG93LWgnKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5tLWNvdmVyLXByZWxvYWQnKS5mYWRlT3V0KDYwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBJTUFHRV9XSURUSCA9IDI0MjtcclxuXHJcbiAgICAkc2NvcGUuc2Nyb2xsVG8gPSBmdW5jdGlvbihpbWFnZSxpbmQsIGpzSUQpIHtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaW5kICogLTEpICsgXCJweFwifTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVtcHR5Q2xhc3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzKXtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJoaWRlXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNpemVDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkU2l6ZSwgc2l6ZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFNpemUgPT09IHNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY29sb3JDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkQ29sb3IsIGNvbG9yKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkQ29sb3IgPT09IGNvbG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnN1cmZhY2VDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkU3VyZmFjZSwgc3VyZmFjZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFN1cmZhY2UgPT09IHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2hla2luZ091dENsYXNzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBpZighJHNjb3BlLmNoZWNraW5nT3V0KXtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaGlkZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFNpemUgPSBmdW5jdGlvbihqc0lELCBzaXplKXtcclxuICAgICAgICAkc2NvcGUuc3VtbSAtPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplID0gc2l6ZTtcclxuICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldENvbG9yID0gZnVuY3Rpb24oanNJRCwgY29sb3Ipe1xyXG4gICAgICAgIHZhciBvbGRQcm9kdWN0ID0ge2lkOiRzY29wZS5wcm9kdWN0c1tqc0lEXS5pZCwgcXVhbnRpdHk6JHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5LCBzZWxlY3RlZENvbG9yOiRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yfTtcclxuICAgICAgICBpZiAodHlwZW9mICgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplKSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgb2xkUHJvZHVjdC5zZWxlY3RlZFNpemUgPSAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplO1xyXG4gICAgICAgIGlmICh0eXBlb2YgKCRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2UpICE9ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICBvbGRQcm9kdWN0LnNlbGVjdGVkU3VyZmFjZSA9ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2U7XHJcblxyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yID0gY29sb3I7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90by5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgdmFyIHN1ZmZpeCA9ICdfJyArIGNvbG9yO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90by5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG9baV0uc3Vic3RyaW5nKDAsICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90b1tpXS5sYXN0SW5kZXhPZignLicpKTtcclxuICAgICAgICAgICAgICAgIGlmIChuYW1lLnN1YnN0cihuYW1lLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpID09IHN1ZmZpeClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaSAqIC0xKSArIFwicHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgb2xkUHJvZHVjdDpvbGRQcm9kdWN0LCBuZXdQcm9kdWN0OiRzY29wZS5wcm9kdWN0c1tqc0lEXX07XHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvU2F2ZVByb2R1Y3QnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgIT0gJ25vJyl7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFN1cmZhY2UgPSBmdW5jdGlvbihqc0lELCBzdXJmYWNlKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlID0gc3VyZmFjZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldERlbGl2ZXJ5ID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRGVsaXZlcnkgPSAkc2NvcGUuZGVsaXZlcmllc1tqc0lEXTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFBheW1lbnQgPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRQYXltZW50ID0gJHNjb3BlLnBheW1lbnRzW2pzSURdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2hhbmdlUXVhbnRpdHkgPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICBpZiAocGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5KSA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUl0ZW0oanNJRCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICRzY29wZS5zdW1tID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkU2l6ZS5wcmljZSkqJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cyAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uaWQgPT0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmlkX3Byb2R1Y3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBvbGRQcm9kdWN0OiRzY29wZS5wcm9kdWN0c1tqc0lEXSwgbmV3UHJvZHVjdDokc2NvcGUucHJvZHVjdHNbanNJRF19O1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9TYXZlUHJvZHVjdCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgIT0gJ25vJyl7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jaGVja091dCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKCRzY29wZS5zdW1tID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmKCEkc2NvcGUuY2hlY2tpbmdPdXQpe1xyXG4gICAgICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VufTtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvZ2V0Q3VzdG9tZXInLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kZWxpdmVyaWVzID0gZGF0YS5kZWxpdmVyeTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYXltZW50cyA9IGRhdGEucGF5bWVudDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jdXN0b21lciA9IGRhdGEuY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5kZWxpdmVyaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGl2ZXJpZXNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wYXltZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXltZW50c1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZERlbGl2ZXJ5ID0gJHNjb3BlLmRlbGl2ZXJpZXNbMF07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRQYXltZW50ID0gJHNjb3BlLnBheW1lbnRzWzBdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNraW5nT3V0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvY2VlZE5leHRGb3JtJykucmVtb3ZlQ2xhc3MoJ2hpZGUtY29udGVudC1ib3gnKTtcclxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6ICQoJyNwcm9jZWVkTmV4dEZvcm0nKS5vZmZzZXQoKS50b3BcclxuICAgICAgICB9LCA2MDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlSXRlbSA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgIGlmKCEkc2NvcGUuaW5SZXF1ZXN0KXtcclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID1cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHkgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb2xvciA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU3VyZmFjZSA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTaXplIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9kZWxldGVGcm9tQ2FydCcpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzLnNwbGljZShqc0lELCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkU2l6ZS5wcmljZSkqJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uaWQgPT0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmlkX3Byb2R1Y3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tIC09ICRzY29wZS5kaXNjb3VudC5zdW1tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnByb2R1Y3RzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL3N0b3JlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNvbmZpcm1Qcm9tbyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoISRzY29wZS5pblJlcXVlc3Qpe1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgcHJvbW9Db2RlOiAkc2NvcGUuZGlzY291bnQucHJvbW9Db2RlfTtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L0NvbmZpcm1Qcm9tbycpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2xkRGlzY291bnQgPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQgPSBkYXRhLmRpc2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGREaXNjb3VudCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQob2xkRGlzY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gLT0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2xkRGlzY291bnQgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQob2xkRGlzY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9tb0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUuZGlzY291bnQuc3VtbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5lcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUuZGlzY291bnQuc3VtbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNhdmVDdXN0b21lciA9IGZ1bmN0aW9uKHZhbGlkKXtcclxuICAgICAgICBpZiAoIXZhbGlkICkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICgkc2NvcGUuc3VtbSA9PT0gMCkgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYoISRzY29wZS5pblJlcXVlc3Qpe1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgY3VzdG9tZXI6ICRzY29wZS5jdXN0b21lcn07XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3Qvc2F2ZUN1c3RvbWVyJyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9jZWVkRmluaXNoRm9ybScpLnJlbW92ZUNsYXNzKCdoaWRlLWNvbnRlbnQtYm94Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjcHJvY2VlZEZpbmlzaEZvcm0nKS5vZmZzZXQoKS50b3BcclxuICAgICAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5idXkgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnN1bW0gPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRva2VuOiAkc2NvcGUudXNlci50b2tlbixcclxuICAgICAgICAgICAgY3VzdG9tZXIgOiAkc2NvcGUuY3VzdG9tZXIsXHJcbiAgICAgICAgICAgIHByb2R1Y3RzIDogJHNjb3BlLnByb2R1Y3RzLFxyXG4gICAgICAgICAgICBkZWxpdmVyeSA6ICRzY29wZS5zZWxlY3RlZERlbGl2ZXJ5LFxyXG4gICAgICAgICAgICBwYXltZW50ICA6ICRzY29wZS5zZWxlY3RlZFBheW1lbnQsXHJcbiAgICAgICAgICAgIGRpc2NvdW50IDogJHNjb3BlLmRpc2NvdW50XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvYnV5JyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEucGF5bWVudCA9PSAnVW5pdGVsbGVyJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvY2VlZEZpbmlzaEZvcm0nKS5hZnRlcigkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3BheVVuaXRlbGxlcicpLnN1Ym1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5lcnJvcjtcclxuICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50aHVtYkNsYXNzID0gZnVuY3Rpb24obGVuKXtcclxuICAgICAgICBpZiAobGVuID4gMylcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlciB4c2Nyb2xsZWRcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXJcIjtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnZhbENsYXNzID0gZnVuY3Rpb24oaXNWYWxpZCl7XHJcbiAgICAgICAgaWYoaXNWYWxpZClcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgfTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1VzZXJDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJGNvb2tpZXMsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG4gICRzY29wZS5yZXN1bHQgPSB7fTtcclxuICAkc2NvcGUubW9kYWwgPSAnbm9uZSc7XHJcbiAgJHNjb3BlLmhvc3RfdHlwZSA9ICdtb2JpbGUnO1xyXG5cclxuICAvL9Ce0YfQuNGB0YLQutCwINC30L3QsNGH0LXQvdC40LlcclxuICAkc2NvcGUuc2V0RW1wdHkgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS51c2VyLnBhc3N3b3JkID0gJyc7XHJcbiAgICAkc2NvcGUudXNlci50ZXJtcyA9IDA7XHJcblxyXG4gICAgJHNjb3BlLmVycm9yID0ge307XHJcbiAgICAkc2NvcGUucmVzdWx0ID0ge307XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmhpZGVNb2RhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLm1vZGFsID0gJ25vbmUnO1xyXG4gIH07XHJcblxyXG4gIC8v0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LTQsNGC0LDQv9C40LrQtdGA0LBcclxuICBhbmd1bGFyLmVsZW1lbnQoJyNiaXJ0aGRheScpLmRhdGVwaWNrZXIoe1xyXG4gICAgeWVhclJhbmdlOiAnMTkwMDotMCcsXHJcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxyXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChkYXRlVGV4dCwgaW5zdCkge1xyXG4gICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICRzY29wZS51c2VyLmJpcnRoZGF5ID0gZGF0ZVRleHQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL9Ch0YLQvtGA0L7QtiDQvNC+0LTQsNC70YzQvdGL0YUg0L7QutC+0L1cclxuICAkc2NvcGUuJHdhdGNoKCdtb2RhbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnNldEVtcHR5KCRzY29wZS5tb2RhbCk7XHJcbiAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJHNjb3BlLm1vZGFsKTtcclxuICB9KTtcclxuXHJcbiAgLy/QoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICRzY29wZS5zZXRQcm9maWxlID0gZnVuY3Rpb24odXNlcil7XHJcbiAgICAkaHR0cC5wb3N0KCcvdXNlci9lZGl0UHJvZmlsZScsdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9CQ0LLRgtC+0L7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgNCw0LfRgNC10YnQtdC90LjRj1xyXG4gICRzY29wZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcmVzb2x1dGlvbiA9ICRjb29raWVzLnJlc29sdXRpb247XHJcbiAgICBpZiAoIXJlc29sdXRpb24pIHtcclxuICAgICAgdmFyIGNsaWVudFJlcyA9IE1hdGgubWF4KHNjcmVlbi53aWR0aCxzY3JlZW4uaGVpZ2h0KTtcclxuICAgICAgdmFyIHJlcyA9IFsxOTIwLCAxNDAwLCAxMjgwXTtcclxuICAgICAgZm9yKHZhciBpPTA7IGk8cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNsaWVudFJlcyA+PSByZXNbaV0pe1xyXG4gICAgICAgICAgcmVzb2x1dGlvbiA9IHJlc1tpXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkY29va2llcy5yZXNvbHV0aW9uID0gJycgKyByZXNvbHV0aW9uO1xyXG4gICAgICAkc2NvcGUucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy/QkNCy0YLQvtGA0LjQt9Cw0YbQuNGPXHJcbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24odXNlciwgdmFsaWQpIHtcclxuICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2UvbG9naW4nLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5lbWFpbCA9IHRydWU7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9IGRhdGEuY29udGVudDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsJy9zcG90L2xpc3QvJyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGxvY2F0aW9uKS5hdHRyKCdocmVmJywnLycpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuJHdhdGNoKCd1c2VyLmVtYWlsICsgdXNlci5wYXNzd29yZCArIHVzZXIuY29kZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmVycm9yLmVtYWlsID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IuY29kZSA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmVycm9yLnBhc3N3b3JkID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9ICcnO1xyXG4gIH0pO1xyXG5cclxuICAvLyDQoNC10LPQuNGB0YLRgNCw0YbQuNGPXHJcbiAgJHNjb3BlLmFjdGl2YXRpb24gPSBmdW5jdGlvbih1c2VyLCB2YWxpZCl7XHJcbiAgICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAodXNlci50ZXJtcyA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zZXJ2aWNlL3JlZ2lzdHJhdGlvbicsIHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG5cclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIuZW1haWwgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5wYXNzd29yZCA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLmFjdGl2X2NvZGUgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci50ZXJtcyA9IDA7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKVxyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwoZGF0YS5jb250ZW50LCAnbm9uZScpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChkYXRhLmVycm9yID09ICdlbWFpbCcpIHtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuZW1haWwgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5lcnJvci5jb250ZW50ID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJylcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ2Vycm9yJyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZGF0YS5lcnJvciA9PSAnY29kZScpe1xyXG4gICAgICAgICRzY29wZS5lcnJvci5jb2RlID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpXHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbChkYXRhLmNvbnRlbnQsICdlcnJvcicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQktC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNC1INC/0LDRgNC+0LvRj1xyXG4gICRzY29wZS5yZWNvdmVyeSA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKXtcclxuICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9yZWNvdmVyeScsIHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAneWVzJykge1xyXG4gICAgICAgICRzY29wZS5lcnJvci5lbWFpbCA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKVxyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbChkYXRhLmNvbnRlbnQsICdlcnJvcicpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIuZW1haWwgPSAnJztcclxuICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKVxyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbChkYXRhLmNvbnRlbnQsICdub25lJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHQvNC10L3QsCDQv9Cw0YDQvtC70Y9cclxuICAkc2NvcGUuY2hhbmdlID0gZnVuY3Rpb24odXNlciwgdmFsaWQpe1xyXG4gICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICRodHRwLnBvc3Qod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICwgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsJy91c2VyL3BlcnNvbmFsJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==