!function(e,t,o){"use strict";t.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){var s,r={},i={},a=!1,c=t.copy,d=t.isUndefined;return n.addPollFn(function(){var t=n.cookies();s!=t&&(s=t,c(t,i),c(t,r),a&&e.$apply())})(),a=!0,e.$watch(function(){var e,s,a;for(e in i)d(r[e])&&n.cookies(e,o);for(e in r)s=r[e],t.isString(s)||(s=""+s,r[e]=s),s!==i[e]&&(n.cookies(e,s),a=!0);if(a)for(e in s=n.cookies(),r)r[e]!==s[e]&&(d(s[e])?delete r[e]:r[e]=s[e])}),r}]).factory("$cookieStore",["$cookies",function(e){return{get:function(o){return(o=e[o])?t.fromJson(o):o},put:function(o,n){e[o]=t.toJson(n)},remove:function(t){delete e[t]}}}])}(window,window.angular),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig",function(e){return{require:"?ngModel",link:function(t,o,n,s){function r(e,t){return t&&"function"==typeof t?function(o,n){e(o,n),t(o,n)}:e}var i={},a={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(i,e),s&&(s.$render=function(){o.sortable(i)},a.start=function(e,t){t.item.sortable={index:t.item.index()}},a.update=function(e,t){t.item.sortable.resort=s},a.receive=function(e,t){t.item.sortable.relocate=!0,s.$modelValue.splice(t.item.index(),0,t.item.sortable.moved)},a.remove=function(e,t){t.item.sortable.moved=1===s.$modelValue.length?s.$modelValue.splice(0,1)[0]:s.$modelValue.splice(t.item.sortable.index,1)[0]},a.stop=function(e,o){if(o.item.sortable.resort&&!o.item.sortable.relocate){var n,s;s=o.item.sortable.index,n=o.item.index(),o.item.sortable.resort.$modelValue.splice(n,0,o.item.sortable.resort.$modelValue.splice(s,1)[0])}(o.item.sortable.resort||o.item.sortable.relocate)&&t.$apply()}),t.$watch(n.uiSortable,function(e){angular.forEach(e,function(e,t){a[t]&&(e=r(a[t],e)),o.sortable("option",t,e)})},!0),angular.forEach(a,function(e,t){i[t]=r(e,i[t])}),o.sortable(i)}}}]),angular.module("mobispot",["ngCookies","ui.sortable"]),angular.module("mobispot").service("contentService",function(){this.desktopModal=function(e,t){if(angular.isUndefined(t)&&(t=500),angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open"),"none"==e)return $(".show-block.active").removeClass("active").fadeOut(t),!1;var o=angular.element("#"+e);$(".show-block").hasClass("active")&&$(".show-block.active").attr("id")!=e?$(".show-block.active").removeClass("active").fadeOut(t,function(){o.fadeIn(t).addClass("active")}):o.fadeIn(t).addClass("active")},this.mobileModal=function(e,t){var o=angular.element(".m-result"),n=o.find("p");o.removeClass("m-negative"),"error"==t&&o.addClass("m-negative"),o.hide(),o.show(),n.text(e),setTimeout(function(){o.hide()},5e3)},this.messageModal=function(e,t){if(speed=500,"mobile"===t)this.mobileModal(e,"none");else{angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var o=angular.element("#message");o.removeClass("negative"),o.removeClass("alert");var n=angular.element("#message p");$(".show-block").hasClass("active")?$(".show-block.active").removeClass("active").fadeOut(speed,function(){n.html(e),o.fadeIn(speed).addClass("active")}):(n.html(e),o.fadeIn(speed).addClass("active"))}},this.scrollPage=function(e,t){angular.isUndefined(t)&&(t=600);var o=$(e).offset().top;$("html, body").animate({scrollTop:o},t)};var e={};this.setSpot=function(t){e=t},this.getSpot=function(){return e}}),angular.module("mobispot").service("dialogService",function(){var e=function(e,t,o,n,s){function r(){e("yes"),a()}function i(){e("no"),a()}function a(){u.unbind("click",r),l.unbind("click",i),$(document).unbind("click",i),c.removeClass("active").fadeOut(speed)}speed=500,angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var c=angular.element("#b-dialog"),d=angular.element("#b-dialog p"),u=angular.element("#b-dialog .yes-button"),l=angular.element("#b-dialog .no-button");$(".show-block").hasClass("active")&&$(".show-block.active").removeClass("active").fadeOut(0),d.html(n),u.text(t),l.text(o),c.removeClass("alert"),c.removeClass("negative"),"undefined"!=typeof s&&c.addClass(s),c.fadeIn(speed).addClass("active"),u.bind("click",r),l.bind("click",i),$(document).bind("click",i)};return{yesNoDialog:e}}),angular.module("mobispot").controller("DemokitController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,s){e.error={},e.$watch("order.name + order.email + order.phone + order.address + order.city + order.zip + order.country + order.shipping + order.payment",function(){e.error.field=!1}),e.order={name:"",email:"",phone:"",address:"",city:"",zip:"",country:"",shipping:1,payment:1},e.products={},e.max_product_id=0,e.prices={},e.shippings={},e.payments={},e.total=0,e.toMain=!1,e.registerProduct=function(t,o){e.products[t]=0,t>e.max_product_id&&(e.max_product_id=t),e.prices[t]=o},e.addProduct=function(t){e.products[t]<9&&e.products[t]++,e.calculateSumm()},e.deductProduct=function(t){e.products[t]>0&&e.products[t]--,e.calculateSumm()},e.registerShipping=function(t,o){e.shippings[t]=o},e.setShipping=function(t,o){e.order.shipping=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click(),e.calculateSumm()},e.registerPayment=function(t,o){e.payments[t]=o},e.setPayment=function(t,o){e.order.payment=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click()},e.calculateSumm=function(){e.summ=120,e.total=e.summ,e.order.shipping&&"undefined"!=typeof e.shippings[e.order.shipping]&&(e.total+=e.shippings[e.order.shipping])},e.buyDemoKit=function(n){return e.orderForm.$valid?void(e.toMain?window.location.href="/":(n.products=e.products,t.post("/service/buyDemoKit",n).success(function(t){"no"==t.error?"email"==t.action?(e.result.message=t.message,s.desktopModal("message"),e.toMain=!0,e.finishButton=e.toMainMessage):(angular.element("#demo-kit-block").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):(e.result.message=t.message,s.desktopModal("message"),e.error.field=!0)}))):(e.error.field=!0,!1)}}]),angular.module("mobispot").controller("HelpController",["$scope","$http","contentService",function(e,t,o){e.error={},e.send=function(n,s){return s?(n.email=n.help_email,void t.post("/service/sendQuestion",n).success(function(t){"no"==t.error&&(e.user.name="",e.user.help_email="",e.user.question="",e.user.phone="",e.result.message=t.content,o.viewModal("message"))})):!1}}]),angular.module("mobispot").controller("PhonesController",["$scope",function(e){e.initPhones=function(t){e.phonesList=t},e.initDevices=function(t){e.devicesList=t},e.phonesList=[],e.devicesList=[]}]),angular.module("mobispot").controller("SlideController",["$scope","$timeout",function(e,t){e.IMAGE_WIDTH=300,e.FADE_SPEED=0,e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.spots={},e.spots.name="spots",e.spots.listposition={left:"0px"},e.spots.slides=[{id:1,img:"brace_blue.jpg"}],e.spots.wristbands=[1],e.spots.wristbands_current=e.spots.wristbands[0],e.spots.cards=[],e.spots.cards_current=-1,e.spots.keys=[],e.spots.keys_current=-1,e.spots.current=e.spots.wristbands_current,e.spots.current_type="wristband",e.spots.color_rotation=!1,e.spots.timer_rotation=!1,e.scrollTo=function(t,o){t.listposition={left:e.IMAGE_WIDTH*o*-1+"px"}},angular.element(window).bind("load",function(){e.sliderInit()}),e.sliderInit=function(){e.spots.slides=[{id:0,img:"brace_black.png"},{id:1,img:"brace_blue.png"},{id:2,img:"brace_green.png"},{id:3,img:"brace_patt01.png"},{id:4,img:"brace_patt02.png"},{id:5,img:"brace_patt03.png"},{id:6,img:"brace_patt04.png"},{id:7,img:"brace_patt05.png"},{id:8,img:"brace_patt06.png"},{id:9,img:"brace_patt07.png"},{id:10,img:"brace_red.png"},{id:11,img:"brace_white.png"},{id:12,img:"card_black.png"},{id:13,img:"card_blue.png"},{id:14,img:"card_green.png"},{id:15,img:"card_red.png"},{id:16,img:"card_white.png"},{id:17,img:"card_yellow.png"},{id:18,img:"key_black.png"},{id:19,img:"key_blue.png"},{id:20,img:"key_green.png"},{id:21,img:"key_red.png"},{id:22,img:"key_white.png"},{id:23,img:"key_yellow.png"},{id:24,img:"brace_yellow.png"}],e.spots.wristbands=[0,1,4,2,3,5,6,7,8,9,10,11,24],e.spots.wristbands_current=e.spots.wristbands[e.getRandomInt(0,e.spots.wristbands.length-1)],e.spots.cards=[12,13,14,15,16,17],e.spots.cards_current=15,e.spots.keys=[18,19,20,21,22,23],e.spots.keys_current=20,e.spots.inited=!0},e.fadeTo=function(t,o){if(t.current==o)return!1;angular.element("#slider-"+t.name+" .f-slide").stop();var n="#"+t.name+"_"+o;return angular.element(n).length?(t.current=o,angular.element("#slider-"+t.name+" .f-slide[id!="+n+"]").fadeOut(0),angular.element(n).fadeIn(e.FADE_SPEED),!0):!1},e.fadeToWistbrands=function(){e.fadeTo(e.spots,e.spots.wristbands_current)&&(e.spots.current_type="wristband")},e.fadeToCards=function(){e.fadeTo(e.spots,e.spots.cards_current)&&(e.spots.current_type="card")},e.fadeToKeys=function(){e.fadeTo(e.spots,e.spots.keys_current)&&(e.spots.current_type="key")},e.startColors=function(){return e.spots.color_rotation?!1:(e.spots.color_rotation=!0,e.spots.timer_rotation?!1:(e.spots.timer_rotation=!0,void t(function(){e.colorRotation()},100)))},e.stopColors=function(){e.spots.color_rotation=!1},e.colorRotation=function(){if(!e.spots.color_rotation)return e.spots.timer_rotation=!1,!1;if("wristband"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.wristbands.length;n++)e.spots.wristbands[n]==e.spots.wristbands_current&&(o=n);if(0>o)return!1;e.spots.wristbands_current=e.spots.wristbands.length-1==o?e.spots.wristbands[0]:e.spots.wristbands[o+1],e.fadeToWistbrands()}else if("card"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.cards.length;n++)e.spots.cards[n]==e.spots.cards_current&&(o=n);if(0>o)return!1;e.spots.cards_current=e.spots.cards.length-1==o?e.spots.cards[0]:e.spots.cards[o+1],e.fadeToCards()}else{if("key"!=e.spots.current_type)return!1;for(var o=-1,n=0;n<e.spots.keys.length;n++)e.spots.keys[n]==e.spots.keys_current&&(o=n);if(0>o)return!1;e.spots.keys_current=e.spots.keys.length-1==o?e.spots.keys[0]:e.spots.keys[o+1],e.fadeToKeys()}e.spots.timer_rotation=!0,t(function(){e.colorRotation()},1300)},e.randomSlide=function(t){e.fadeTo(t,e.getRandomInt(0,t.slides.length-1))}}]),angular.module("mobispot").controller("SpotController",["$scope","$http","$compile","$timeout","contentService","dialogService",function(e,t,o,n,s,r){function i(e){e.stopPropagation(),e.preventDefault(),"dragover"==e.type?angular.element("#dropbox").addClass("hover"):angular.element("#dropbox").removeClass("hover")}function a(t){i(t);for(var o,n=t.target.files||t.dataTransfer.files,s=0;o=n[s];s++)e.uploadFile(o)}function c(t){e.$apply(function(){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"})}e.maxSize=26214400,e.progress=0,e.keys=[],e.action=!1,e.error={},e.result={},e.spot={},e.spot.discodes=0,e.general={},e.general.views=!1,e.host_mobile=0,e.wallet={},e.wallet.cards={},e.scroll_key=-1,e.actions={},e.actions.page="",e.actions.phrase="",e.actions.in_progress=!1,e.actions.offset=0,e.actions.count_all=0,e.text={},e.transport_types=[],e.custom_card={},e.prev_custom_card={},e.selected_type={},e.in_request=!1,e.wallet_history={},e.wallet_history.date="",e.wallet_history.empty_date=!1,e.date_history_shown=!1,e.$watch("spot.code + spot.terms",function(){e.error.code=!1,e.error.terms=!1}),e.addSpot=function(n){return n.code?e.spot.terms?void t.post("/spot/add",n).success(function(t){"no"==t.error?(e.spot.discodes=t.discodes,angular.element(".spot-list").prepend(o(t.content)(e)),angular.element("#actSpot").click(),delete e.spot.code,delete e.spot.terms,(e.host_mobile||1==n.need_reload)&&(window.location.href="http://"+window.location.hostname+"/spot/list")):"yes"==t.error&&(e.error.code=!0)}):!1:(e.error.code=!0,!1)},e.$watch("general.views + spot.discodes",function(){e.actions.page="",angular.element(window).unbind("scroll",e.loadMoreCoupons),"spot"==e.general.views?e.viewSpot(e.spot):"wallet"==e.general.views?e.viewWallet(e.spot):"coupon"==e.general.views?e.viewCoupons(e.spot,e.actions):"settings"==e.general.views?e.viewsSettings(e.spot):"transport"==e.general.views&&e.viewTransport(e.spot)}),e.bodyMinHeight=function(){var e=angular.element(".spot-list").height();angular.element(".spot-content").css("min-height",e+200)},e.viewSpot=function(n){if(0===n.discodes)return!1;var r=angular.element("#spot-block");t.post("/spot/view",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.keys=[],e.content_iteration=0,e.fileUploadInit(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500),s.scrollPage(e.scroll_key&&e.scroll_key>1?"#block-"+e.scroll_key:"body"),e.scroll_key=-1)})},e.addContent=function(){e.addValue(e.spot.content)},e.addValue=function(n){e.spot.content=n,t.post("/spot/spotAddContent",e.spot).success(function(t){if("no"==t.error){angular.element("#add-content").append(o(t.content)(e)),e.spot.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),angular.element("#extraMediaForm").hasClass("open")&&(angular.element("#extraMediaForm").slideUp(0,function(){angular.element("#extraMediaForm a").removeClass("blackout"),angular.element("#extraMediaForm a").fadeTo(0,1)}),angular.element("#extraMediaForm").removeClass("open"));var n=angular.element("#block-"+t.key).offset().top;angular.element("html, body").animate({scrollTop:n},600)}}),e.resetCursor()},e.saveOrder=function(){t.post("/spot/saveOrder",e.spot).success(function(e){"no"==e.error})},e.sortableOptions={update:function(){e.saveOrder()},containment:".spot-content",handle:".move",scrollSensitivity:5,tolerance:"pointer",opacity:.8},e.removeContent=function(o,n,s){o.key=n,t.post("/spot/spotRemoveContent",o).success(function(t){if("no"==t.error){var o=angular.element(s.currentTarget).parents(".spot-item");o.remove(),e.keys=t.keys,t.netDown&&e.netDown(t.netDown)}})},e.editContent=function(t,n,s){if(t.content_new)e.hideSpotEdit();else{t.key=n;var r=angular.element(s.currentTarget).parents(".spot-item"),i=angular.element("#spot-edit").clone();if(r.find("a.type-link").size()>0){var a=r.find("a.type-link");e.spot.content_new=a.find("span.link").text()}else{var c=r.find("p.item-type__text");e.spot.content_new=c.text()}i.removeClass("hide"),i.find("textarea").focus(1),r.hide().before(o(i)(e))}},e.saveContent=function(n,s){var r=angular.element(s.currentTarget).parents(".spot-item"),i=r.next();t.post("/spot/spotSaveContent",n).success(function(t){"no"==t.error?(r.before(o(t.content)(e)),r.remove(),i.remove()):(r.remove(),i.show()),delete e.spot.content_new})},e.hideSpotEdit=function(){if(!e.spot.content&&!e.spot.content_new)return!1;var n=angular.element("#spot-edit"),s=n.next();t.post("/spot/spotSaveContent",e.spot).success(function(t){"no"==t.error?(n.before(o(t.content)(e)),n.remove(),s.remove()):(n.remove(),s.show()),delete e.spot.content_new})},e.renameSpot=function(o){return o.name?void t.post("/spot/rename",o).success(function(t){"no"==t.error&&(angular.element("#"+o.discodes+" h3").text(o.name),s.messageModal(t.content,e.host_type))}):!1},e.cleanSpot=function(o){r.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/clean",o).success(function(t){"no"==t.error&&(e.general.views="spot")})},e.text.yes_btn,e.text.no_btn,e.text.clean_spot,"negative")},e.removeSpot=function(o){r.yesNoDialog(function(e){return"yes"!=e?!1:void t.post("/spot/remove",o).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")})},e.text.yes_btn,e.text.no_btn,e.text.rm_spot,"negative")},e.ivisibleSpot=function(o){var n=e.text.mk_invisible,s=e.text.mk_invisible_descr;6==o.status&&(n=e.text.mk_visible,s=e.text.mk_visible_descr),r.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/invisible",o).success(function(t){"no"==t.error&&(e.spot.status=t.status,angular.element("#"+o.discodes).toggleClass("invisible"))})},e.text.yes_btn,e.text.no_btn,n,"negative")},e.viewsSettings=function(n){var s=angular.element("#spot-block");t.post("/spot/settings",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewWallet=function(n){var s=angular.element("#spot-block");t.post("/spot/wallet",n).success(function(t){"no"==t.error?(s.empty(),s.html(o(t.content)(e)),e.getListCard(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500),angular.element("#date_history").datepicker({yearRange:"1900:-0",maxDate:0,dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.wallet_history.date=t})},onClose:function(){e.$apply(function(){e.date_history_shown=!1})}})):e.viewSpot(e.spot)})},e.viewCoupons=function(n){var s=angular.element("#spot-block");t.post("/spot/coupons",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewTransport=function(n){var s=angular.element("#spot-block");t.post("/spot/transport",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.listCoupons=function(n,s){if(!s.page)return!1;var r=angular.element("#coupons-list"),i={discodes:n.discodes,token:n.token,page:s.page,phrase:s.phrase,offset:s.offset};e.actions.in_progress=!0,t.post("/spot/listCoupons",i).success(function(t){"no"==t.error&&(e.actions.offset+=t.count,e.actions.count_all=t.count_all,r.append(o(t.content)(e)),e.actions.in_progress=!1)}).error(function(){e.actions.in_progress=!1})},e.filterCoupons=function(t,o){e.actions.offset=0,e.actions.count_all=0,e.listCoupons(t,o)},e.getListCard=function(){return"wallet"!=e.general.views?!1:(t.post("/spot/listCard",e.wallet).success(function(t){"no"==t.error&&(e.wallet.cards=t.cards,e.wallet.cards_count=t.cards_count,e.wallet.linking_card=t.linking_card)}),void n(function(){e.getListCard()},5e3))},e.showCustomCard=function(){$("#customCard").addClass("show"),$("body").css("overflow","hidden")},e.hideCustomCard=function(){$("#customCard").removeClass("show"),$("body").css("overflow","")},e.blockedWallet=function(){t.post("/spot/blockedWallet",e.wallet).success(function(t){"no"==t.error&&(e.wallet.status=t.status)})},e.linkingCard=function(e){return e.terms?void angular.element("#linking_card").submit():!1},e.setPaymentCard=function(o,n){if(e.in_request)return!1;var s={token:e.spot.token,card_id:o};e.in_request=!0,t.post("/spot/setPaymentCard",s).success(function(t){"no"==t.error&&(angular.element(".main-card").removeClass("main-card"),angular.element(n.currentTarget).parent().parent().addClass("main-card"),e.wallet.blacklist=1),e.in_request=!1}).error(function(){e.in_request=!1})},e.editCardList=function(){$(".table-card").toggleClass("edit"),e.wallet.card_edit=0===e.wallet.card_edit?1:0},e.removeCard=function(o){var n={token:e.spot.token,card_id:o};t.post("/spot/removeCard",n).success(function(t){"no"==t.error&&(e.wallet.cards_count-=1,delete e.wallet.cards[o])})};var d;e.countReset=function(){e.reset_time="undefined"!=typeof e.reset_time?e.reset_time:30,d=n(function(){0===e.reset_time?$(location).attr("href",window.location.pathname):e.reset_time--,e.countReset()},1e3)},e.fileUploadInit=function(){var e=document.getElementById("dropbox"),t=document.getElementById("add-file");if(e&&t){var o=new XMLHttpRequest;o.upload&&(e.addEventListener("dragover",i,!1),e.addEventListener("dragleave",i,!1),e.addEventListener("drop",a,!1),t.addEventListener("change",a,!1))}},e.uploadComplete=function(t){var n=t.target.responseText;if(n){var s=angular.fromJson(n);if("no"==s.error){angular.element("#progress-content").hide(),angular.element("#add-content").append(o(s.content)(e)),e.keys.push(s.key),angular.element("#add-file").val("");var r=$("#block-"+s.key).offset().top;angular.element("html, body").animate({scrollTop:r},600)}}},e.uploadFailed=function(){angular.element("#error-upload").show().delay(800).slideUp("slow")},e.uploadFile=function(t){var o=new XMLHttpRequest;o.upload&&t.size<=e.maxSize&&(angular.element("#progress-content").show(),o.upload.onprogress=function(t){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"},o.upload.addEventListener("progress",c,!1),o.addEventListener("error",e.uploadFailed,!1),o.addEventListener("load",e.uploadComplete,!1),o.open("POST","/spot/upload",!0),o.setRequestHeader("X-File-Name",unescape(encodeURIComponent(t.name))),o.setRequestHeader("X-Discodes",e.spot.discodes),o.send(t))},e.loadSocContent=function(n){var s={discodes:e.spot.discodes,key:n,token:e.user.token};t.post("/spot/SocNetContent",s).success(function(t){if("no"==t.error){var n=angular.element("#block-"+t.key),s=n.height(),r=n.offset().top;if(n.before(o(t.content)(e)),n.remove(),e.setVideoSize(t.key),r<$("html, body").scrollTop()){var i=$("html, body").scrollTop()+$("#block-"+t.key).height()-s;$("html, body").animate({scrollTop:i},0)}}})},e.netCheck=function(o){var n={token:e.user.token,netName:o};t.post("/spot/netCheck",n).success(function(e){if("no"==e.error){var t=angular.element("#extraMediaForm a[net='"+e.netName+"']");e.binded?t.addClass("binded"):t.removeClass("binded")}})},e.netUp=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.addClass("binded")},e.netDown=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.removeClass("binded")};var u,l,p,m;e.bindByPanel=function(r){var i=r,a={spot:e.spot,token:e.user.token,netName:i};if("undefined"!=typeof e.spot.content&&e.spot.content.length){a.link=e.spot.content;for(var c=0;c<e.soc_patterns.length;c++)if(-1!=e.spot.content.indexOf(e.soc_patterns[c].baseUrl)){i=e.soc_patterns[c].name,a.netName=e.soc_patterns[c].name;break}}t.post("/spot/BindByPanel",a).success(function(t){if("no"==t.error&&0===t.profileHint.length)if(t.loggedIn)if("ok"==t.linkCorrect){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.setVideoSize(t.key);var r=$("#block-"+t.key).offset().top;$("html, body").animate({scrollTop:r},600),e.netUp(t.socnet);var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else s.messageModal(t.linkCorrect,e.host_type);else{var c=$.extend({id:"",popup:{width:450,height:380}},c),d="http://"+window.location.hostname+"/user/BindSocLogin?service="+i,p=d;p+=p.indexOf("?")>=0?"&":"?",-1===p.indexOf("redirect_uri=")&&(p+="redirect_uri="+encodeURIComponent(d));var m=(window.screen.width-c.popup.width)/2,f=(window.screen.height-c.popup.height)/2;if(e.host_mobile||(u=window.open(p+"&js","yii_eauth_popup","width="+c.popup.width+",height="+c.popup.height+",left="+m+",top="+f+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===u||"undefined"==typeof u){var g=p+"&discodes="+e.spot.discodes+"&newField=1&synch=true";"undefined"!=typeof e.spot.content&&e.spot.content.length&&(g+="&link="+encodeURIComponent(e.spot.content)),window.location.href=g}else u.focus(),e.bindNet={name:t.socnet,discodes:e.spot.discodes,newField:1},"undefined"!=typeof e.spot.content&&e.spot.content.length&&(e.bindNet.link=e.spot.content),l=n(e.loginTimer,1e3)}})},e.getPatternInd=function(t){for(var o=-1,n=0;n<e.soc_patterns.length;n++)if(e.soc_patterns[n].name==t){o=n;break}return o},e.bindSocial=function(r,i,a){var c=angular.element(a.currentTarget).parents(".spot-item");r.key=i,t.post("/spot/bindSocial",r).success(function(t){if("no"==t.error)if("no"!=t.socnet&&t.socnet.length>0)if(t.loggedIn)if("ok"==t.linkCorrect){c.before(o(t.content)(e)),c.remove();var i=e.getPatternInd(t.socnet);i>-1&&(e.soc_patterns[i].BindByPaste=!0),e.setVideoSize(r.key),e.netUp(t.socnet)}else s.messageModal(t.linkCorrect,e.host_type);else{var d=$.extend({id:"",popup:{width:450,height:380}},d),p="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.socnet,m=p;m+=m.indexOf("?")>=0?"&":"?",-1===m.indexOf("redirect_uri=")&&(m+="redirect_uri="+encodeURIComponent(p));var f=(window.screen.width-d.popup.width)/2,g=(window.screen.height-d.popup.height)/2;u=window.open(m+"&js","yii_eauth_popup","width="+d.popup.width+",height="+d.popup.height+",left="+f+",top="+g+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes"),null===u||"undefined"==typeof u?window.location.href=m+"&discodes="+r.discodes+"&key="+r.key+"&synch=true":(u.focus(),e.bindNet={name:t.socnet,discodes:r.discodes,key:r.key,spotEdit:angular.element(a.currentTarget).parents(".spot-item")},l=n(e.loginTimer,1e3))}else"ok"!=t.linkCorrect&&s.messageModal(t.linkCorrect,e.host_type)})},e.checkLike=function(s,r){var i,a={token:e.user.token,id:s,discodes:e.spot.discodes};t.post("/user/checkLike",a).success(function(t){if("no"==t.error)if(t.isSocLogged)"undefined"!=typeof t.content&&(e.host_mobile||angular.isUndefined(r)?angular.isUndefined(r)||(i=angular.element(r.currentTarget).parent().parent().parent().parent()):i=angular.element(r.currentTarget).parent().parent("div.spot-item"),i.before(o(t.content)(e)),i.remove());else{var a=$.extend({id:"",popup:{width:450,height:380}},a),c="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.service,d=c;d+=d.indexOf("?")>=0?"&":"?",-1===d.indexOf("redirect_uri=")&&(d+="redirect_uri="+encodeURIComponent(c)+"&"),d+="js";var l=(window.screen.width-a.popup.width)/2,m=(window.screen.height-a.popup.height)/2;if(e.host_mobile||(u=window.open(d,"yii_eauth_popup","width="+a.popup.width+",height="+a.popup.height+",left="+l+",top="+m+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===u||"undefined"==typeof u){var f=d+"&discodes="+e.spot.discodes+"&chek_like="+s;window.location.href=f}else u.focus(),e.checkingAction={id:s,sharing_ind:t.ind},angular.isUndefined(r)||(e.actionDiv=angular.element(r.currentTarget).parent().parent("div.spot-item")),p=n(e.likesTimer,1e3)}})},e.likesTimer=function(){if(!u.closed){var s={token:e.user.token,id:e.checkingAction.id,sharing_ind:e.checkingAction.sharing_ind,discodes:e.spot.discodes};t.post("/user/checkLike",s).success(function(t){t.isSocLogged?(u.close(),e.actionDiv.before(o(t.content)(e)),e.actionDiv.remove()):t.sharing_logged?(u.close(),e.checkLike(e.checkingAction.id)):p=n(e.likesTimer,1e3)})}},e.loyaltyTimer=function(){for(var t=angular.element(".connecting"),o=0;o<t.length;o++){var s=angular.element(t[o]).attr("id").substring(7);e.checkLoyaltyConnection(s)}m=n(e.loyaltyTimer,1e3)},e.setLoyaltyTimer=function(){m=n(e.loyaltyTimer,1e3)},e.checkLoyaltyConnection=function(n){var s={token:e.user.token,id:n,discodes:e.spot.discodes},r=angular.element("#coupon-"+n);t.post("/user/checkLoyaltyConnection",s).success(function(t){"undefined"!=typeof t.connected&&t.connected&&(r.before(o(t.content)(e)),r.remove())})},e.disableAction=function(n,s){var r,i={token:e.user.token,id:s,discodes:e.spot.discodes};t.post("/user/disableLoyalty",i).success(function(t){"no"==t.error&&(r=e.host_mobile?angular.element(n.currentTarget).parent().parent().parent().parent():angular.element(n.currentTarget).parent().parent("div.spot-item"),r.before(o(t.content)(e)),r.remove())})},e.loginTimer=function(){if(!u.closed){var r={name:e.bindNet.name,discodes:e.bindNet.discodes,key:e.bindNet.key};"undefined"!=typeof e.bindNet.newField&&1==e.bindNet.newField&&(r.newField=1),"undefined"!=typeof e.bindNet.link&&e.bindNet.link.length&&(r.link=e.bindNet.link);var i={token:e.user.token,bindNet:r};t.post("/spot/bindedContent",i).success(function(t){if("undefined"!=typeof t.loggedIn&&"undefined"!=typeof t.linkCorrect)if(t.loggedIn)if(u.close(),"ok"==t.linkCorrect){if(t.newField){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.netUp(t.socnet),e.setVideoSize(t.key);var r=$("#block-"+t.key).offset().top-100;angular.element("html, body").animate({scrollTop:r},600)}else{var i=e.bindNet.spotEdit;i.before(o(t.content)(e)),i.remove(),e.setVideoSize(t.key),e.netUp(t.socnet)}e.bindNet={};var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else s.messageModal(t.linkCorrect,e.host_type);else l=n(e.loginTimer,1e3)})}},e.unBindSocial=function(n,s,r){n.key=s,t.post("/spot/UnBindSocial",n).success(function(t){if("no"==t.error){var n=angular.element(r.currentTarget).parents(".spot-item");n.before(o(t.content)(e)),n.remove(),t.netDown&&e.netDown(t.netDown)}})},e.getSocPatterns=function(){if(e.freeSocial=!0,"undefined"==typeof e.soc_patterns){var o={token:e.user.token};t.post("/spot/SocPatterns",o).success(function(t){e.soc_patterns=t.soc_patterns;for(var o=0;o<e.soc_patterns.length;o++)"undefined"==typeof e.soc_patterns[o].BindByPaste&&(e.soc_patterns[o].BindByPaste=!1)})}},e.setVideoSize=function(e){var t;1==angular.element("#block-"+e+" .video-vimeo").length?(t=angular.element("#block-"+e+" .video-vimeo"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px")):1==angular.element("#block-"+e+" .yt_player").length&&(t=angular.element("#block-"+e+" .yt_player"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px"))},e.setNewPass=function(o){t.post("/spot/setSpotPass",o).success(function(t){"no"==t.error&&"undefined"!=typeof t.saved?(angular.element("#savePassButton").text(t.saved),"undefined"!=typeof e.spot.pass&&o.pass.length?angular.element("#resetPassButton").show():angular.element("#resetPassButton").hide()):"yes"==t.error&&angular.element("#setPassForm input[name=newPass]").addClass("error")})},e.resetPass=function(t){t.pass="",e.setNewPass(t)},e.savePassButtonText=function(e){angular.element("#savePassButton").text(e),angular.element("#setPassForm input[name=newPass]").removeClass("error")},e.checkStatusSpot=function(){return!0},e.resetCursor=function(){"undefined"!=typeof e.cursorBody&&e.cursorBody.length?(angular.element("body").css("cursor",e.cursorBody),delete e.cursorBody):angular.element("body").css("cursor","default"),"undefined"!=typeof e.cursorTextarea&&e.cursorTextarea.length?(angular.element("#dropbox textarea").css("cursor",e.cursorTextarea),delete e.cursorTextarea):angular.element("#dropbox textarea").css("cursor","text")},e.$watch("actions.page",function(){e.actions.offset=0,e.actions.count_all=0;var t=angular.element("#coupons-list");t.empty(),e.listCoupons(e.spot,e.actions)}),e.couponsScroll=function(){e.actions.in_progress=!1,angular.element(window).bind("scroll",e.loadMoreCoupons)},e.loadMoreCoupons=function(){angular.element(window).scrollTop()+angular.element(window).height()>=angular.element(document).height()-200&&!e.actions.in_progress&&e.actions.offset<e.actions.count_all&&e.listCoupons(e.spot,e.actions)},e.initTransportType=function(t,o,n){e.transport_types[e.transport_types.length]={id:t,name:o,img:n}},e.setType=function(t){e.custom_card.back=t.id,t.img&&$("#card-back").css("background-image","url(/uploads/transport/"+t.img+")")},e.sendImg=function(t){var o=$(t).parents("form");if(""===$(t).val())return!1;var n=o.children("input[name=discodes_id]"),r=o.children("input[name=token]"),i=o.children("input[name=img_type]"),a=o.find("span.upload-holder"),c=o.find("i.upload-holder"),d=o.find("img.upload-holder"),u=s.getSpot();n.length&&n.val(u.discodes),r.length&&r.val(u.token),o.ajaxSubmit({type:"POST",success:function(t){var o=angular.fromJson(t);(o.error="no")?(a.length&&a.addClass("hide"),c.length&&c.addClass("hide"),d.removeClass("hide"),d.attr("src",o.path+"?ver="+(new Date).getTime()),e.$apply(function(){"transport_photo"==i.val()?e.custom_card.photo=o.path:"transport_logo"==i.val()&&(e.custom_card.logo=o.path),e.error.custom_card=!1})):e.error.custom_card=!0}})},e.showImageCropper=!1,e.showLogoCropper=!1,e.setSpot=function(){s.setSpot(e.spot)},e.orderTransportCard=function(o,n,r){if(!n)return e.error.custom_card=!0,!1;var i=s.getSpot();o.token=i.token,o.discodes=i.discodes,t.post("/spot/orderTransportCard",o).success(function(t){"no"==t.error?(e.hideCustomCard(),s.messageModal(r,e.host_type)):e.error.custom_card=!0
})},e.orderCustomCard=function(o,r,i){return r?e.isDoubleCard(o)?(e.error.custom_card=!0,s.messageModal("Вы уже заказали эту карту",e.host_type),n(function(){e.error.custom_card=!1},1e3),!1):(e.saveCardParams(o),void t.post("/spot/orderCustomCard",o).success(function(t){"no"==t.error?(s.messageModal(i,e.host_type),o.number=t.number):e.error.custom_card=!0})):(e.error.custom_card=!0,!1)},e.saveCardParams=function(t){for(property in t)e.prev_custom_card[property]=t[property]},e.isDoubleCard=function(t){for(property in t)if("number"!=property&&e.prev_custom_card[property]!=t[property])return!1;return!0},e.$watch("custom_card.shipping_name + custom_card.phone + custom_card.address + custom_card.city + custom_card.zip + custom_card.email",function(){e.error.custom_card=!1}),e.$watch("wallet_history.date",function(){if(!e.wallet_history.date.length)return!1;var n={discodes:e.spot.discodes,token:e.spot.token,date:e.wallet_history.date};block_history=angular.element("#history-wrapper"),block_history.empty(),e.wallet_history.empty_date=!1,t.post("/spot/listHistory",n).success(function(t){"no"==t.error&&(block_history.append(o(t.content)(e)),t.empty_for_date&&(e.wallet_history.empty_date=!0))})}),e.customCardInit=function(t){e.custom_card=angular.fromJson(t)},e.showDatepicker=function(t){return e.date_history_shown?!1:(e.date_history_shown=!0,void angular.element(t).datepicker("show"))},e.addPhone=function(n,s){if(!s)return!1;var r={discodes:e.spot.discodes,token:e.spot.token,phone:n};t.post("/spot/addPhone",r).success(function(t){"no"==t.error&&(e.new_phone="",angular.element("#phones-list").append(o(t.content)(e)))})},e.removePhone=function(o,n){var s={discodes:e.spot.discodes,token:e.spot.token,phone:o};t.post("/spot/removePhone",s).success(function(e){if("no"==e.error){var t=angular.element(n.currentTarget).parents(".phone-row");t.remove()}})},e.activateSchoolExtended=function(n){var s={discodes:e.spot.discodes,token:e.spot.token,address:n};t.post("/spot/activateSchoollExtended",s).success(function(t){if("no"==t.error){e.home_address="";var n=angular.element("#phone_services");n.empty(),n.append(o(t.content)(e))}})},e.removeSchoolExtended=function(){var n={discodes:e.spot.discodes,token:e.spot.token};t.post("/spot/removeSchoollExtended",n).success(function(t){if("no"==t.error){e.home_address="";var n=angular.element("#phone_services");n.empty(),n.append(o(t.content)(e))}})}}]),angular.module("mobispot").controller("ProductController",["$scope","$http","$compile","$timeout","contentService",function(e,t){e.host_type="desktop",e.transport_card={},e.simple_card={},e.transport_types=[],e.StoreInit=function(){var n={token:e.user.token};t.post("/store/product/getPriceList",n).success(function(t){e.products=t.products,e.settings=t.settings;for(var n=0;n<e.products.length;n++)if(e.products[n].jsID=n,e.products[n].selectedSize=e.products[n].size[0],e.products[n].selectedColor=e.products[n].color[0],e.products[n].selectedSurface=e.products[n].surface[0],e.products[n].quantity=1,e.products[n].listposition={left:"0px"},e.products[n].addText=e.settings.addToCart,"undefined"!=typeof e.products[n].selectedColor&&"undefined"!=typeof e.products[n].photo&&e.products[n].photo.length>0)for(var s="_"+e.products[n].selectedColor,r=0;r<e.products[n].photo.length;r++){var i=e.products[n].photo[r].substring(0,e.products[n].photo[r].lastIndexOf("."));if(i.substr(i.length-s.length)==s){e.products[n].listposition={left:o*r*-1+"px"};break}}e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var o=242;e.scrollTo=function(t,n,s){e.products[s].listposition={left:o*n*-1+"px"}},e.addToCart=function(o){if(e.products[o].quantity<1)return!1;if(e.inRequest)return!1;if("troika"==e.products[o].type)return e.showConstructorTroika(e.products[o],o),!1;if("simple"==e.products[o].type)return e.showConstructorSimple(e.products[o],o),!1;e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:parseInt(e.products[o].quantity),selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/addToCart",n).success(function(t){if("no"==t.error){e.products[o].addText=e.settings.added,e.items.count+=parseInt(e.products[o].quantity);var n=angular.element("a.icon-bag-link span");n.text(e.items.count)}e.inRequest=!1}).error(function(){e.inRequest=!1})},e.addTransportCard=function(o){o.token=e.user.token,t.post("/store/product/addCustomCard",o).success(function(t){if("no"==t.error){angular.isUndefined(e.transportId)||(e.products[e.transportId].addText=e.settings.added),e.items.count+=1;var o=angular.element("a.icon-bag-link span");o.text(e.items.count)}}),e.hideConstructorTroika()},e.addSimpleCard=function(o){t.post("/store/product/addCustomCard",o).success(function(t){if("no"==t.error){angular.isUndefined(e.simpleId)||(e.products[e.simpleId].addText=e.settings.added),e.items.count+=1;var o=angular.element("a.icon-bag-link span");o.text(e.items.count)}}),e.hideConstructorSimple()},e.showConstructorTroika=function(t,o){e.transport_card.id=t.id,e.transportId=o,$("#constructor-troika").addClass("show"),$("body").css("overflow","hidden")},e.hideConstructorTroika=function(){$("#constructor-troika").removeClass("show"),$("body").css("overflow","")},e.showConstructorSimple=function(t,o){e.simple_card.id=t.id,e.simpleId=o,$("#constructor-simple").addClass("show"),$("body").css("overflow","hidden")},e.hideConstructorSimple=function(){$("#constructor-simple").removeClass("show"),$("body").css("overflow","")},e.initTransportType=function(t,o,n){e.transport_types[e.transport_types.length]={id:t,name:o,img:n}},e.setType=function(t){e.transport_card.back=t.id,t.img&&$("#card-back").css("background-image","url(/uploads/transport/"+t.img+")")},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.setSize=function(t,o){e.products[t].selectedSize=o,e.products[t].addText=e.settings.addToCart},e.setColor=function(t,n){if(e.products[t].selectedColor=n,e.products[t].addText=e.settings.addToCart,"undefined"!=typeof e.products[t].photo&&e.products[t].photo.length>0)for(var s="_"+n,r=0;r<e.products[t].photo.length;r++){var i=e.products[t].photo[r].substring(0,e.products[t].photo[r].lastIndexOf("."));if(i.substr(i.length-s.length)==s){e.products[t].listposition={left:o*r*-1+"px"};break}}},e.setSurface=function(t,o){e.products[t].selectedSurface=o,e.products[t].addText=e.settings.addToCart},e.resetAddedText=function(t){e.products[t].addText=e.settings.addToCart,e.products[t].quantity<0&&(e.products[t].quantity=0)},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"}}]),angular.module("mobispot").controller("CartController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,s){e.promoError=!1,e.customerError=!1,e.CartInit=function(){e.summ=0;var o={token:e.user.token};t.post("/store/product/GetCart",o).success(function(t){e.products=t.products,e.discount=t.discount,e.products.length<=0&&(window.location="/store");for(var o=0;o<e.products.length;o++)if(e.products[o].jsID=o,e.products[o].quantity=parseInt(e.products[o].quantity),e.summ+=parseFloat(e.products[o].selectedSize.price)*e.products[o].quantity,e.products[o].listposition={left:"0px"},"undefined"!=typeof e.products[o].selectedColor&&"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var n="_"+e.products[o].selectedColor,s=0;s<e.products[o].photo.length;s++){var i=e.products[o].photo[s].substring(0,e.products[o].photo[s].lastIndexOf("."));if(i.substr(i.length-n.length)==n){e.products[o].listposition={left:r*s*-1+"px"};break}}if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var o=0;o<e.products.length;o++)for(var s=0;s<e.discount.products.length;s++)if(e.products[o].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[o].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.checkingOut=!1,e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var r=242;e.scrollTo=function(t,o,n){e.products[n].listposition={left:r*o*-1+"px"}},e.emptyClass=function(){return e.products?e.products.length>0?"hide":"":void 0},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.chekingOutClass=function(){return e.checkingOut?"":"hide"},e.setSize=function(t,o){e.summ-=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity,e.products[t].selectedSize=o,e.summ+=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity},e.setColor=function(o,n){var s={id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor};if("undefined"!=typeof e.products[o].selectedSize&&(s.selectedSize=e.products[o].selectedSize),"undefined"!=typeof e.products[o].selectedSurface&&(s.selectedSurface=e.products[o].selectedSurface),e.products[o].selectedColor=n,"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var i="_"+n,a=0;a<e.products[o].photo.length;a++){var c=e.products[o].photo[a].substring(0,e.products[o].photo[a].lastIndexOf("."));if(c.substr(c.length-i.length)==i){e.products[o].listposition={left:r*a*-1+"px"};break}}var d={token:e.user.token,oldProduct:s,newProduct:e.products[o]};t.post("/store/product/SaveProduct",d).success(function(e){"no"!=e.error})},e.setSurface=function(t,o){e.products[t].selectedSurface=o},e.setDelivery=function(t){e.selectedDelivery=e.deliveries[t]},e.setPayment=function(t){e.selectedPayment=e.payments[t]},e.changeQuantity=function(o){if(parseInt(e.products[o].quantity)<=0)e.deleteItem(o);else{e.summ=0;for(var n=0;n<e.products.length;n++)e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if("undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}var r={token:e.user.token,oldProduct:e.products[o],newProduct:e.products[o]};t.post("/store/product/SaveProduct",r).success(function(e){"no"!=e.error})}},e.checkOut=function(){if(0===e.summ)return!1;if(!e.checkingOut){var o={token:e.user.token};t.post("/store/product/getCustomer",o).success(function(t){e.deliveries=t.delivery,e.payments=t.payment,e.customer=t.customer;for(var o=0;o<e.deliveries.length;o++)e.deliveries[o].jsID=o;for(var o=0;o<e.payments.length;o++)e.payments[o].jsID=o;e.selectedDelivery=e.deliveries[0],e.selectedPayment=e.payments[0]}),e.checkingOut=!0}angular.element("#proceedNextForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedNextForm").offset().top},600)},e.deleteItem=function(o){if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/deleteFromCart",n).success(function(t){if("no"==t.error){e.products.splice(o,1),e.summ=0;for(var n=0;n<e.products.length;n++)e.products[n].jsID=n,e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.products.length<=0&&(window.location="/store")}}),e.inRequest=!1}},e.confirmPromo=function(){if(!e.inRequest){e.inRequest=!0;var o={token:e.user.token,promoCode:e.discount.promoCode};t.post("/store/product/ConfirmPromo",o).success(function(t){if("no"==t.error){e.promoError=!1;var o=e.discount.summ;if(e.discount=t.discount,"undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var r=0;r<e.discount.products.length;r++)if(e.products[n].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0?(o>0&&(e.summ+=parseFloat(o)),e.summ-=e.discount.summ):o>0&&(e.summ+=parseFloat(o))}}else e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0),e.result.message=t.error,s.desktopModal("message")}).error(function(){e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0)})}e.inRequest=!1},e.$watch("discount.promoCode",function(){e.promoError=!1}),e.saveCustomer=function(o){if(!o)return e.customerError=!0,e.result.message=e.customerHint,s.desktopModal("message"),!1;if(0===e.summ)return!1;if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,customer:e.customer};t.post("/store/product/saveCustomer",n).success(function(t){"no"==t.error?(angular.element("#proceedFinishForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedFinishForm").offset().top},600)):(e.customerError=!0,e.result.message=t.error,s.desktopModal("message"))}),e.inRequest=!1}},e.$watch("customer.first_name + customer.last_name + customer.email + customer.target_first_name + customer.target_last_name + customer.phone + customer.address + customer.city + customer.zip + customer.country",function(){e.customerError=!1}),e.buy=function(){if(0===e.summ)return!1;var n={token:e.user.token,customer:e.customer,products:e.products,delivery:e.selectedDelivery,payment:e.selectedPayment,discount:e.discount};t.post("/store/product/buy",n).success(function(t){"no"==t.error?"email"==t.payment?s.messageModal(t.message,e.host_type):(angular.element("#proceedFinishForm").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):s.messageModal(t.error,e.host_type)})},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"},e.valClass=function(e){return e?"":"error"}}]),angular.module("mobispot").controller("UserController",["$scope","$http","$compile","$cookies","contentService",function(e,t,o,n,s){e.error={},e.result={},e.modal="none",e.host_type="mobile",e.setEmpty=function(){e.user.password="",e.user.terms=0,e.error={},e.result={}},e.hideModal=function(){e.modal="none"},angular.element("#birthday").datepicker({yearRange:"1900:-0",dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.user.birthday=t})}}),e.$watch("modal",function(){e.setEmpty(e.modal),s.desktopModal(e.modal)}),e.setProfile=function(o){t.post("/user/editProfile",o).success(function(t){"no"==t.error&&(e.result.message=t.content,s.desktopModal("message"))})},e.getResolution=function(){var t=n.resolution;if(!t){for(var o=Math.max(screen.width,screen.height),s=[1920,1400,1280],r=0;r<s.length;r++)if(o>=s[r]){t=s[r];break}n.resolution=""+t,e.resolution=t}},e.login=function(o,n){return n?void t.post("/service/login",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content):"no"==t.error?angular.isUndefined(t.access_url)||!t.access_url.length?angular.element(location).attr("href","/spot/list/"):angular.element(location).attr("href",t.access_url):angular.element(location).attr("href","/")}):!1},e.$watch("user.email + user.password + user.code",function(){e.error.email=!1,e.error.code=!1,e.error.password=!1,e.error.content=""}),e.activation=function(o,n){return n?0===o.terms?!1:void t.post("/service/registration",o).success(function(t){"no"==t.error?(e.user.email="",e.user.password="",e.user.terms=0,"mobile"===e.host_type?s.mobileModal(t.content,"none"):(e.result.message=t.content,s.desktopModal("message"))):("email"===t.error?e.error.email=!0:e.error.code=!0,e.error.content=t.content,"mobile"===e.host_type&&s.mobileModal(t.content,"error"))}):!1},e.recovery=function(o,n){return n?void t.post("/service/recovery",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content,"mobile"===e.host_type&&s.mobileModal(t.content,"error")):"no"==t.error&&(e.user.email="",e.result.message=t.content,"mobile"===e.host_type?s.mobileModal(t.content,"none"):s.desktopModal("message"))}):!1},e.change=function(e,o){return o?void t.post(window.location.pathname,e).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")}):!1},e.messageModal=function(t){return angular.isUndefined(t)||!t.length?!1:(e.result.message=t,void("mobile"===e.host_type?s.mobileModal(t,"none"):s.desktopModal("message")))},e.loadFront=function(){var e=1920;screen.width<=1400&&(e=1400),screen.width<=1280&&(e=1280);var t=angular.element(".splash .first-screen");t.css("background-image","url(../themes/mobispot/img/info/front_"+e+".jpg)")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXMiOlsiYW5ndWxhci1jb29raWVzLm1pbi5qcyIsInNvcnRhYmxlLmpzIiwiYXBwLmpzIiwic2VydmljZS5qcyIsImRlbW9raXQuanMiLCJoZWxwLmpzIiwicGhvbmUuanMiLCJzbGlkZS5qcyIsInNwb3QuanMiLCJzdG9yZS5qcyIsInVzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBS0EsU0FBQSxFQUFBLEVBQUEsR0FBQSxZQUFBLEdBQUEsT0FBQSxhQUFBLE9BQUEsUUFBQSxZQUFBLGFBQUEsV0FBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsV0FBQSxPQUFBLEdBQUEsVUFBQSxXQUFBLEdBQUEsR0FBQSxFQUFBLFNBQUEsSUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsY0FBQSxHQUFBLEVBQUEsRUFBQSxPQUFBLFdBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxVQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsUUFBQSxnQkFDQSxXQUFBLFNBQUEsR0FBQSxPQUFBLElBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQSxJQUFBLFNBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsSUFBQSxPQUFBLFNBQUEsU0FBQSxHQUFBLFNBQUEsT0FBQSxPQUFBLFNDREEsUUFBQSxPQUFBLGtCQUNBLE1BQUEsdUJBQ0EsVUFBQSxjQUFBLG1CQUNBLFNBQUEsR0FDQSxPQUNBLFFBQUEsV0FDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxrQkFBQSxHQUNBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxJQUdBLEVBR0EsR0FBQSxNQUVBLEdBQ0EsUUFBQSxLQUNBLE9BQUEsS0FDQSxNQUFBLEtBQ0EsS0FBQSxLQUNBLE9BQUEsS0FHQSxTQUFBLE9BQUEsRUFBQSxHQUVBLElBRUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxTQUFBLElBR0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxVQUFBLE1BQUEsRUFBQSxLQUFBLFVBR0EsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxTQUFBLE9BQUEsR0FHQSxFQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFNBQUEsVUFBQSxFQUVBLEVBQUEsWUFBQSxPQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsUUFHQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEdBR0EsRUFBQSxLQUFBLFNBQUEsTUFEQSxJQUFBLEVBQUEsWUFBQSxPQUNBLEVBQUEsWUFBQSxPQUFBLEVBQUEsR0FBQSxHQUVBLEVBQUEsWUFBQSxPQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsR0FBQSxJQUlBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxDQUdBLEdBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxLQUFBLFNBQUEsTUFDQSxFQUFBLEVBQUEsS0FBQSxRQUdBLEVBQUEsS0FBQSxTQUFBLE9BQUEsWUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLFlBQUEsT0FBQSxFQUFBLEdBQUEsS0FHQSxFQUFBLEtBQUEsU0FBQSxRQUFBLEVBQUEsS0FBQSxTQUFBLFdBQ0EsRUFBQSxXQU1BLEVBQUEsT0FBQSxFQUFBLFdBQUEsU0FBQSxHQUNBLFFBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FFQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBR0EsRUFBQSxTQUFBLFNBQUEsRUFBQSxPQUVBLEdBRUEsUUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE1BS0EsRUFBQSxTQUFBLFFDeEdBLFFBQUEsT0FBQSxZQUFBLFlBQUEsZ0JDQ0EsUUFBQSxPQUFBLFlBQUEsUUFBQSxpQkFBQSxXQUdBLEtBQUEsYUFBQSxTQUFBLEVBQUEsR0FNQSxHQUxBLFFBQUEsWUFBQSxLQUFBLEVBQUEsS0FFQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsUUFFQSxRQUFBLEVBRUEsTUFEQSxHQUFBLHNCQUFBLFlBQUEsVUFBQSxRQUFBLElBQ0EsQ0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLElBQUEsRUFFQSxHQUFBLGVBQUEsU0FBQSxXQUFBLEVBQUEsc0JBQUEsS0FBQSxPQUFBLEVBQ0EsRUFBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxFQUFBLFdBQ0EsRUFBQSxPQUFBLEdBQUEsU0FBQSxZQUdBLEVBQUEsT0FBQSxHQUFBLFNBQUEsV0FJQSxLQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxhQUNBLEVBQUEsRUFBQSxLQUFBLElBRUEsR0FBQSxZQUFBLGNBQ0EsU0FBQSxHQUNBLEVBQUEsU0FBQSxjQUVBLEVBQUEsT0FDQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLEdBQ0EsV0FBQSxXQUNBLEVBQUEsUUFDQSxNQUdBLEtBQUEsYUFBQSxTQUFBLEVBQUEsR0FFQSxHQURBLE1BQUEsSUFDQSxXQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQUEsWUFDQSxDQUNBLFFBQUEsUUFBQSxjQUFBLFVBQ0EsUUFBQSxRQUFBLFNBQUEsWUFBQSxPQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsV0FDQSxHQUFBLFlBQUEsWUFDQSxFQUFBLFlBQUEsUUFDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGFBRUEsR0FBQSxlQUFBLFNBQUEsVUFDQSxFQUFBLHNCQUFBLFlBQUEsVUFBQSxRQUFBLE1BQUEsV0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLE9BQUEsT0FBQSxTQUFBLGFBR0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxPQUFBLE9BQUEsU0FBQSxhQU1BLEtBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxRQUFBLFlBQUEsS0FBQSxFQUFBLElBQ0EsSUFBQSxHQUFBLEVBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLEdBR0EsSUFBQSxLQUVBLE1BQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxHQUdBLEtBQUEsUUFBQSxXQUNBLE1BQUEsTUFLQSxRQUFBLE9BQUEsWUFBQSxRQUFBLGdCQUFBLFdBRUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQTJCQSxRQUFBLEtBQ0EsRUFBQSxPQUNBLElBR0EsUUFBQSxLQUNBLEVBQUEsTUFDQSxJQUdBLFFBQUEsS0FDQSxFQUFBLE9BQUEsUUFBQSxHQUNBLEVBQUEsT0FBQSxRQUFBLEdBQ0EsRUFBQSxVQUFBLE9BQUEsUUFBQSxHQUVBLEVBQUEsWUFBQSxVQUFBLFFBQUEsT0F6Q0EsTUFBQSxJQUVBLFFBQUEsUUFBQSxjQUFBLFVBQ0EsUUFBQSxRQUFBLFNBQUEsWUFBQSxPQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsYUFDQSxFQUFBLFFBQUEsUUFBQSxlQUNBLEVBQUEsUUFBQSxRQUFBLHlCQUNBLEVBQUEsUUFBQSxRQUFBLHVCQUVBLEdBQUEsZUFBQSxTQUFBLFdBQ0EsRUFBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxHQUNBLEVBQUEsWUFBQSxTQUNBLEVBQUEsWUFBQSxZQUNBLG1CQUFBLElBQ0EsRUFBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLE9BQUEsU0FBQSxVQUVBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsR0FDQSxFQUFBLFVBQUEsS0FBQSxRQUFBLEdBc0JBLFFBQ0EsWUFBQSxLQ3hJQSxRQUFBLE9BQUEsWUFBQSxXQUFBLHFCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUVBLEVBQUEsT0FBQSxtSUFBQSxXQUNBLEVBQUEsTUFBQSxPQUFBLElBR0EsRUFBQSxPQUNBLEtBQUEsR0FDQSxNQUFBLEdBQ0EsTUFBQSxHQUNBLFFBQUEsR0FDQSxLQUFBLEdBQ0EsSUFBQSxHQUNBLFFBQUEsR0FDQSxTQUFBLEVBQ0EsUUFBQSxHQUdBLEVBQUEsWUFDQSxFQUFBLGVBQUEsRUFDQSxFQUFBLFVBQ0EsRUFBQSxhQUNBLEVBQUEsWUFFQSxFQUFBLE1BQUEsRUFDQSxFQUFBLFFBQUEsRUFFQSxFQUFBLGdCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLGlCQUNBLEVBQUEsZUFBQSxHQUNBLEVBQUEsT0FBQSxHQUFBLEdBR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxHQUNBLEVBQUEsU0FBQSxLQUNBLEVBQUEsaUJBR0EsRUFBQSxjQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxHQUNBLEVBQUEsU0FBQSxLQUNBLEVBQUEsaUJBR0EsRUFBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxHQUdBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsU0FBQSxFQUNBLG1CQUFBLElBQ0EsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUNBLEVBQUEsaUJBR0EsRUFBQSxnQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxHQUdBLEVBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsUUFBQSxFQUNBLG1CQUFBLElBQ0EsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUdBLEVBQUEsY0FBQSxXQUNBLEVBQUEsS0FBQSxJQUVBLEVBQUEsTUFBQSxFQUFBLEtBQ0EsRUFBQSxNQUFBLFVBQUEsbUJBQUEsR0FBQSxVQUFBLEVBQUEsTUFBQSxZQUNBLEVBQUEsT0FBQSxFQUFBLFVBQUEsRUFBQSxNQUFBLFlBR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsVUFBQSxZQUtBLEVBQUEsT0FDQSxPQUFBLFNBQUEsS0FBQSxLQUVBLEVBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxLQUFBLHNCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE1BQ0EsU0FBQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLFFBQUEsRUFBQSxRQUNBLEVBQUEsYUFBQSxXQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsYUFBQSxFQUFBLGdCQUVBLFFBQUEsUUFBQSxtQkFBQSxNQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsUUFBQSxRQUFBLGdCQUFBLFdBR0EsRUFBQSxPQUFBLFFBQUEsRUFBQSxRQUNBLEVBQUEsYUFBQSxXQUNBLEVBQUEsTUFBQSxPQUFBLFFBdEJBLEVBQUEsTUFBQSxPQUFBLEdBQ0EsT0NqRkEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFNBRUEsRUFBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFDQSxFQUFBLE1BQUEsRUFBQSxlQUNBLEdBQUEsS0FBQSx3QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLFdBQUEsR0FDQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEdBRUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxRQUNBLEVBQUEsVUFBQSxnQkFWQSxNQ1BBLFFBQUEsT0FBQSxZQUFBLFdBQUEsb0JBQ0EsU0FBQSxTQUFBLEdBQ0EsRUFBQSxXQUFBLFNBQUEsR0FFQSxFQUFBLFdBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxHQUVBLEVBQUEsWUFBQSxHQUdBLEVBQUEsY0FFQSxFQUFBLGtCQ2RBLFFBQUEsT0FBQSxZQUFBLFdBQUEsbUJBQ0EsU0FBQSxXQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsWUFBQSxJQUVBLEVBQUEsV0FBQSxFQUVBLEVBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxLQUFBLFVBQUEsRUFBQSxFQUFBLElBQUEsR0FHQSxFQUFBLFNBQ0EsRUFBQSxNQUFBLEtBQUEsUUFDQSxFQUFBLE1BQUEsY0FBQSxLQUFBLE9BQ0EsRUFBQSxNQUFBLFNBQ0EsR0FBQSxFQUFBLElBQUEsbUJBR0EsRUFBQSxNQUFBLFlBQUEsR0FDQSxFQUFBLE1BQUEsbUJBQUEsRUFBQSxNQUFBLFdBQUEsR0FFQSxFQUFBLE1BQUEsU0FDQSxFQUFBLE1BQUEsY0FBQSxHQUVBLEVBQUEsTUFBQSxRQUNBLEVBQUEsTUFBQSxhQUFBLEdBRUEsRUFBQSxNQUFBLFFBQUEsRUFBQSxNQUFBLG1CQUNBLEVBQUEsTUFBQSxhQUFBLFlBQ0EsRUFBQSxNQUFBLGdCQUFBLEVBQ0EsRUFBQSxNQUFBLGdCQUFBLEVBR0EsRUFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsY0FBQSxLQUFBLEVBQUEsWUFBQSxFQUFBLEdBQUEsT0FHQSxRQUFBLFFBQUEsUUFBQSxLQUFBLE9BQUEsV0FFQSxFQUFBLGVBR0EsRUFBQSxXQUFBLFdBRUEsRUFBQSxNQUFBLFNBQ0EsR0FBQSxFQUFBLElBQUEsb0JBQ0EsR0FBQSxFQUFBLElBQUEsbUJBQ0EsR0FBQSxFQUFBLElBQUEsb0JBQ0EsR0FBQSxFQUFBLElBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEscUJBQ0EsR0FBQSxHQUFBLElBQUEsa0JBQ0EsR0FBQSxHQUFBLElBQUEsb0JBQ0EsR0FBQSxHQUFBLElBQUEsbUJBQ0EsR0FBQSxHQUFBLElBQUEsa0JBQ0EsR0FBQSxHQUFBLElBQUEsbUJBQ0EsR0FBQSxHQUFBLElBQUEsaUJBQ0EsR0FBQSxHQUFBLElBQUEsbUJBQ0EsR0FBQSxHQUFBLElBQUEsb0JBQ0EsR0FBQSxHQUFBLElBQUEsa0JBQ0EsR0FBQSxHQUFBLElBQUEsaUJBQ0EsR0FBQSxHQUFBLElBQUEsa0JBQ0EsR0FBQSxHQUFBLElBQUEsZ0JBQ0EsR0FBQSxHQUFBLElBQUEsa0JBQ0EsR0FBQSxHQUFBLElBQUEsbUJBQ0EsR0FBQSxHQUFBLElBQUEscUJBR0EsRUFBQSxNQUFBLFlBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsSUFDQSxFQUFBLE1BQUEsbUJBQUEsRUFBQSxNQUFBLFdBQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxNQUFBLFdBQUEsT0FBQSxJQUVBLEVBQUEsTUFBQSxPQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUNBLEVBQUEsTUFBQSxjQUFBLEdBRUEsRUFBQSxNQUFBLE1BQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQ0EsRUFBQSxNQUFBLGFBQUEsR0FFQSxFQUFBLE1BQUEsUUFBQSxHQUtBLEVBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsQ0FFQSxTQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsYUFBQSxNQUNBLElBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLENBQ0EsT0FBQSxTQUFBLFFBQUEsR0FBQSxRQUdBLEVBQUEsUUFBQSxFQUNBLFFBQUEsUUFBQSxXQUFBLEVBQUEsS0FBQSxpQkFBQSxFQUFBLEtBQUEsUUFBQSxHQUNBLFFBQUEsUUFBQSxHQUFBLE9BQUEsRUFBQSxhQUVBLElBTkEsR0FTQSxFQUFBLGlCQUFBLFdBQ0EsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsc0JBQ0EsRUFBQSxNQUFBLGFBQUEsY0FHQSxFQUFBLFlBQUEsV0FDQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxpQkFDQSxFQUFBLE1BQUEsYUFBQSxTQUdBLEVBQUEsV0FBQSxXQUNBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLGdCQUNBLEVBQUEsTUFBQSxhQUFBLFFBR0EsRUFBQSxZQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsZ0JBQ0EsR0FFQSxFQUFBLE1BQUEsZ0JBQUEsRUFFQSxFQUFBLE1BQUEsZ0JBQ0EsR0FFQSxFQUFBLE1BQUEsZ0JBQUEsTUFDQSxHQUFBLFdBQ0EsRUFBQSxpQkFDQSxRQUdBLEVBQUEsV0FBQSxXQUNBLEVBQUEsTUFBQSxnQkFBQSxHQUdBLEVBQUEsY0FBQSxXQUNBLElBQUEsRUFBQSxNQUFBLGVBRUEsTUFEQSxHQUFBLE1BQUEsZ0JBQUEsR0FDQSxDQUdBLElBQUEsYUFBQSxFQUFBLE1BQUEsYUFBQSxDQUdBLElBQUEsR0FGQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLFdBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLElBQUEsRUFBQSxNQUFBLHFCQUNBLEVBQUEsRUFFQSxJQUFBLEVBQUEsRUFDQSxPQUFBLENBSUEsR0FBQSxNQUFBLG1CQURBLEVBQUEsTUFBQSxXQUFBLE9BQUEsR0FBQSxFQUNBLEVBQUEsTUFBQSxXQUFBLEdBRUEsRUFBQSxNQUFBLFdBQUEsRUFBQSxHQUVBLEVBQUEsdUJBRUEsSUFBQSxRQUFBLEVBQUEsTUFBQSxhQUFBLENBR0EsSUFBQSxHQUZBLEdBQUEsR0FFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE1BQUEsTUFBQSxPQUFBLElBQ0EsRUFBQSxNQUFBLE1BQUEsSUFBQSxFQUFBLE1BQUEsZ0JBQ0EsRUFBQSxFQUVBLElBQUEsRUFBQSxFQUNBLE9BQUEsQ0FJQSxHQUFBLE1BQUEsY0FEQSxFQUFBLE1BQUEsTUFBQSxPQUFBLEdBQUEsRUFDQSxFQUFBLE1BQUEsTUFBQSxHQUVBLEVBQUEsTUFBQSxNQUFBLEVBQUEsR0FFQSxFQUFBLGtCQUVBLENBQUEsR0FBQSxPQUFBLEVBQUEsTUFBQSxhQW1CQSxPQUFBLENBaEJBLEtBQUEsR0FGQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEtBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxLQUFBLElBQUEsRUFBQSxNQUFBLGVBQ0EsRUFBQSxFQUVBLElBQUEsRUFBQSxFQUNBLE9BQUEsQ0FJQSxHQUFBLE1BQUEsYUFEQSxFQUFBLE1BQUEsS0FBQSxPQUFBLEdBQUEsRUFDQSxFQUFBLE1BQUEsS0FBQSxHQUVBLEVBQUEsTUFBQSxLQUFBLEVBQUEsR0FFQSxFQUFBLGFBS0EsRUFBQSxNQUFBLGdCQUFBLEVBQ0EsRUFBQSxXQUNBLEVBQUEsaUJBQ0EsT0FJQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsT0FBQSxPQUFBLFFDN01BLFFBQUEsT0FBQSxZQUFBLFdBQUEsa0JBQ0EsU0FBQSxRQUFBLFdBQUEsV0FBQSxpQkFBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQTBpQkEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxrQkFDQSxFQUFBLGlCQUNBLFlBQUEsRUFBQSxLQUNBLFFBQUEsUUFBQSxZQUFBLFNBQUEsU0FFQSxRQUFBLFFBQUEsWUFBQSxZQUFBLFNBS0EsUUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUdBLEtBQUEsR0FBQSxHQUZBLEVBQUEsRUFBQSxPQUFBLE9BQUEsRUFBQSxhQUFBLE1BRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBQ0EsRUFBQSxXQUFBLEdBeUJBLFFBQUEsR0FBQSxHQUNBLEVBQUEsT0FBQSxXQUVBLEVBQUEsU0FEQSxFQUFBLGlCQUNBLEtBQUEsTUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BRUEsc0JBcGxCQSxFQUFBLFFBQUEsU0FDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFFBQ0EsRUFBQSxRQUFBLEVBRUEsRUFBQSxTQUNBLEVBQUEsVUFFQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLFNBQUEsRUFFQSxFQUFBLFdBQ0EsRUFBQSxRQUFBLE9BQUEsRUFDQSxFQUFBLFlBQUEsRUFFQSxFQUFBLFVBQ0EsRUFBQSxPQUFBLFNBRUEsRUFBQSxXQUFBLEdBRUEsRUFBQSxXQUNBLEVBQUEsUUFBQSxLQUFBLEdBQ0EsRUFBQSxRQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsYUFBQSxFQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxRQUFBLFVBQUEsRUFFQSxFQUFBLFFBRUEsRUFBQSxtQkFDQSxFQUFBLGVBQ0EsRUFBQSxvQkFDQSxFQUFBLGlCQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsa0JBQ0EsRUFBQSxlQUFBLEtBQUEsR0FDQSxFQUFBLGVBQUEsWUFBQSxFQUNBLEVBQUEsb0JBQUEsRUFLQSxFQUFBLE9BQUEseUJBQUEsV0FDQSxFQUFBLE1BQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLElBSUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsS0FLQSxFQUFBLEtBQUEsVUFHQSxHQUFBLEtBQUEsWUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsU0FDQSxRQUFBLFFBQUEsY0FBQSxRQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsUUFBQSxRQUFBLFlBQUEsY0FDQSxHQUFBLEtBQUEsV0FDQSxHQUFBLEtBQUEsT0FDQSxFQUFBLGFBQUEsR0FBQSxFQUFBLGVBQ0EsT0FBQSxTQUFBLEtBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSxlQUNBLE9BQUEsRUFBQSxRQUNBLEVBQUEsTUFBQSxNQUFBLE1BWkEsR0FMQSxFQUFBLE1BQUEsTUFBQSxHQUNBLElBc0JBLEVBQUEsT0FBQSxnQ0FBQSxXQUNBLEVBQUEsUUFBQSxLQUFBLEdBQ0EsUUFBQSxRQUFBLFFBQUEsT0FBQSxTQUFBLEVBQUEsaUJBRUEsUUFBQSxFQUFBLFFBQUEsTUFDQSxFQUFBLFNBQUEsRUFBQSxNQUNBLFVBQUEsRUFBQSxRQUFBLE1BQ0EsRUFBQSxXQUFBLEVBQUEsTUFDQSxVQUFBLEVBQUEsUUFBQSxNQUNBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxTQUNBLFlBQUEsRUFBQSxRQUFBLE1BQ0EsRUFBQSxjQUFBLEVBQUEsTUFDQSxhQUFBLEVBQUEsUUFBQSxPQUNBLEVBQUEsY0FBQSxFQUFBLFFBSUEsRUFBQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUFBLFFBQ0EsU0FBQSxRQUFBLGlCQUFBLElBQUEsYUFBQSxFQUFBLE1BR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsRUFBQSxTQUFBLE9BQUEsQ0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGFBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxRQUNBLEVBQUEsa0JBQUEsRUFDQSxFQUFBLGlCQUVBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsS0FHQSxFQUFBLFdBREEsRUFBQSxZQUFBLEVBQUEsV0FBQSxFQUNBLFVBQUEsRUFBQSxXQUVBLFFBQ0EsRUFBQSxXQUFBLE9BTUEsRUFBQSxXQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQUEsS0FBQSxVQUlBLEVBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsRUFDQSxFQUFBLEtBQUEsdUJBQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsS0FBQSxLQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsUUFBQSxRQUFBLFlBQUEsWUFBQSxPQUVBLFFBQUEsUUFBQSxtQkFBQSxTQUFBLFVBRUEsUUFBQSxRQUFBLG1CQUFBLFFBQUEsRUFBQSxXQUFBLFFBQUEsUUFBQSxxQkFBQSxZQUFBLFlBQUEsUUFBQSxRQUFBLHFCQUFBLE9BQUEsRUFBQSxLQUNBLFFBQUEsUUFBQSxtQkFBQSxZQUFBLFFBR0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsU0FBQSxRQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsUUFHQSxFQUFBLGVBSUEsRUFBQSxVQUFBLFdBQ0EsRUFBQSxLQUFBLGtCQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsU0FPQSxFQUFBLGlCQUNBLE9BQUEsV0FDQSxFQUFBLGFBRUEsWUFBQSxnQkFDQSxPQUFBLFFBQ0Esa0JBQUEsRUFDQSxVQUFBLFVBQ0EsUUFBQSxJQUlBLEVBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsS0FBQSwwQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxTQUNBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxTQUNBLEVBQUEsUUFBQSxFQUFBLGFBTUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFlBbUJBLEVBQUEsbUJBbkJBLENBQ0EsRUFBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxjQUNBLEVBQUEsUUFBQSxRQUFBLGNBQUEsT0FFQSxJQUFBLEVBQUEsS0FBQSxlQUFBLE9BQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLEtBQUEsY0FDQSxHQUFBLEtBQUEsWUFBQSxFQUFBLEtBQUEsYUFBQSxXQUNBLENBRUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxvQkFDQSxHQUFBLEtBQUEsWUFBQSxFQUFBLE9BR0EsRUFBQSxZQUFBLFFBQ0EsRUFBQSxLQUFBLFlBQUEsTUFBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLEVBQUEsR0FBQSxNQU9BLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGNBQ0EsRUFBQSxFQUFBLE1BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsV0FHQSxFQUFBLFNBQ0EsRUFBQSxjQUVBLEdBQUEsS0FBQSxlQUtBLEVBQUEsYUFBQSxXQUNBLElBQUEsRUFBQSxLQUFBLFVBQUEsRUFBQSxLQUFBLFlBQUEsT0FBQSxDQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxFQUFBLEVBQUEsTUFFQSxHQUFBLEtBQUEsd0JBQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxTQUNBLEVBQUEsY0FFQSxHQUFBLEtBQUEsZUFLQSxFQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUNBLEdBQUEsS0FBQSxlQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsUUFBQSxRQUFBLElBQUEsRUFBQSxTQUFBLE9BQUEsS0FBQSxFQUFBLE1BQ0EsRUFBQSxhQUFBLEVBQUEsUUFBQSxFQUFBLGVBSkEsR0FVQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxPQUFBLEdBQ0EsTUFFQSxHQUFBLEtBQUEsY0FBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFBQSxNQUFBLFdBSUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxLQUFBLFdBQ0EsYUFLQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxPQUFBLEdBQ0EsTUFFQSxHQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxrQkFJQSxFQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEtBQUEsUUFDQSxhQUtBLEVBQUEsYUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxhQUNBLEVBQUEsRUFBQSxLQUFBLGtCQUVBLElBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEtBQUEsa0JBR0EsRUFBQSxZQUFBLFNBQUEsR0FDQSxNQUFBLE9BQUEsR0FDQSxNQUVBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsSUFBQSxFQUFBLFVBQUEsWUFBQSxpQkFJQSxFQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEsT0FDQSxFQUNBLGFBS0EsRUFBQSxjQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGlCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsU0FNQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxHQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLGNBRUEsRUFBQSxnQkFDQSxRQUFBLFFBQUEscUJBQUEsT0FBQSxTQUNBLFFBQUEsR0FDQSxLQUVBLFFBQUEsUUFBQSxpQkFBQSxZQUNBLFVBQUEsVUFDQSxRQUFBLEVBQ0EsV0FBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsZUFBQSxLQUFBLEtBR0EsUUFBQSxXQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsb0JBQUEsUUFLQSxFQUFBLFNBQUEsRUFBQSxTQU9BLEVBQUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLFNBTUEsRUFBQSxjQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsU0FNQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsaUJBRUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxNQUFBLEVBQUEsTUFBQSxLQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsT0FBQSxPQUFBLEVBQUEsT0FFQSxHQUFBLFFBQUEsYUFBQSxFQUNBLEVBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFBQSxRQUFBLEVBQUEsTUFDQSxFQUFBLFFBQUEsVUFBQSxFQUFBLFVBRUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxRQUFBLGFBQUEsS0FFQSxNQUFBLFdBQ0EsRUFBQSxRQUFBLGFBQUEsS0FLQSxFQUFBLGNBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLE9BQUEsRUFDQSxFQUFBLFFBQUEsVUFBQSxFQUNBLEVBQUEsWUFBQSxFQUFBLElBSUEsRUFBQSxZQUFBLFdBQ0EsTUFBQSxVQUFBLEVBQUEsUUFBQSxPQUFBLEdBQ0EsRUFBQSxLQUFBLGlCQUFBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxPQUFBLFlBQUEsRUFBQSxZQUNBLEVBQUEsT0FBQSxhQUFBLEVBQUEsb0JBR0EsR0FBQSxXQUNBLEVBQUEsZUFDQSxPQUlBLEVBQUEsZUFBQSxXQUNBLEVBQUEsZUFBQSxTQUFBLFFBQ0EsRUFBQSxRQUFBLElBQUEsV0FBQSxXQUdBLEVBQUEsZUFBQSxXQUNBLEVBQUEsZUFBQSxZQUFBLFFBQ0EsRUFBQSxRQUFBLElBQUEsV0FBQSxLQUlBLEVBQUEsY0FBQSxXQUNBLEVBQUEsS0FBQSxzQkFBQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLE9BQUEsRUFBQSxXQU1BLEVBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQ0EsU0FBQSxRQUFBLGlCQUFBLFVBREEsR0FLQSxFQUFBLGVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFdBQ0EsT0FBQSxDQUVBLElBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFDQSxHQUFBLFlBQUEsRUFDQSxFQUFBLEtBQUEsdUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxRQUFBLFFBQUEsY0FBQSxZQUFBLGFBQ0EsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLFNBQUEsU0FBQSxhQUNBLEVBQUEsT0FBQSxVQUFBLEdBRUEsRUFBQSxZQUFBLElBQ0EsTUFBQSxXQUFBLEVBQUEsWUFBQSxLQUdBLEVBQUEsYUFBQSxXQUNBLEVBQUEsZUFBQSxZQUFBLFFBR0EsRUFBQSxPQUFBLFVBREEsSUFBQSxFQUFBLE9BQUEsVUFDQSxFQUVBLEdBS0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBQ0EsR0FBQSxLQUFBLG1CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLGFBQUEsUUFDQSxHQUFBLE9BQUEsTUFBQSxNQU1BLElBQUEsRUFDQSxHQUFBLFdBQUEsV0FDQSxFQUFBLFdBQUEsbUJBQUEsR0FBQSxXQUFBLEVBQUEsV0FBQSxHQUNBLEVBQUEsRUFBQSxXQUNBLElBQUEsRUFBQSxXQUNBLEVBQUEsVUFBQSxLQUFBLE9BQUEsT0FBQSxTQUFBLFVBQ0EsRUFBQSxhQUNBLEVBQUEsY0FDQSxNQU9BLEVBQUEsZUFBQSxXQUNBLEdBQUEsR0FBQSxTQUFBLGVBQUEsV0FDQSxFQUFBLFNBQUEsZUFBQSxXQUNBLElBQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEdBQUEsZUFDQSxHQUFBLFNBQ0EsRUFBQSxpQkFBQSxXQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUFBLFlBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQUEsT0FBQSxHQUFBLEdBQ0EsRUFBQSxpQkFBQSxTQUFBLEdBQUEsTUEyQkEsRUFBQSxlQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLFlBQ0EsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsU0FBQSxFQUNBLElBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxRQUFBLFFBQUEscUJBQUEsT0FDQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsS0FBQSxLQUFBLEVBQUEsS0FFQSxRQUFBLFFBQUEsYUFBQSxJQUFBLEdBRUEsSUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEtBQUEsU0FBQSxHQUNBLFNBQUEsUUFBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLFFBaUJBLEVBQUEsYUFBQSxXQUNBLFFBQUEsUUFBQSxpQkFBQSxPQUFBLE1BQUEsS0FBQSxRQUFBLFNBR0EsRUFBQSxXQUFBLFNBQUEsR0FFQSxHQUFBLEdBQUEsR0FBQSxlQUNBLEdBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxVQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUVBLEVBQUEsT0FBQSxXQUFBLFNBQUEsR0FFQSxFQUFBLFNBREEsRUFBQSxpQkFDQSxLQUFBLE1BQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUVBLHFCQUlBLEVBQUEsT0FBQSxpQkFBQSxXQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUFBLFFBQUEsRUFBQSxjQUFBLEdBQ0EsRUFBQSxpQkFBQSxPQUFBLEVBQUEsZ0JBQUEsR0FDQSxFQUFBLEtBQUEsT0FBQSxnQkFBQSxHQUNBLEVBQUEsaUJBQUEsY0FBQSxTQUFBLG1CQUFBLEVBQUEsUUFDQSxFQUFBLGlCQUFBLGFBQUEsRUFBQSxLQUFBLFVBQ0EsRUFBQSxLQUFBLEtBT0EsRUFBQSxlQUFBLFNBQUEsR0FFQSxHQUFBLElBQUEsU0FBQSxFQUFBLEtBQUEsU0FBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsTUFFQSxHQUFBLEtBQUEsc0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsU0FBQSxHQUtBLElBSEEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsYUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLGNBQUEsWUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGNBQUEsWUFDQSxFQUFBLFVBQUEsRUFBQSxLQUFBLFNBQ0EsQ0FFQSxHQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsUUFPQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFDQSxHQUFBLEtBQUEsaUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSwwQkFBQSxFQUFBLFFBQUEsS0FDQSxHQUFBLE9BQ0EsRUFBQSxTQUFBLFVBRUEsRUFBQSxZQUFBLGNBTUEsRUFBQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLDBCQUFBLEVBQUEsS0FDQSxHQUFBLFNBQUEsV0FJQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsMEJBQUEsRUFBQSxLQUNBLEdBQUEsWUFBQSxVQUlBLElBQUEsR0FDQSxFQUNBLEVBQ0EsQ0FHQSxHQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEdBQUEsS0FBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBRUEsSUFBQSxtQkFBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEtBQUEsUUFBQSxPQUNBLENBQ0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxPQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLGFBQUEsT0FBQSxJQUVBLEdBQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxRQUFBLEVBQUEsYUFBQSxHQUFBLFNBQ0EsQ0FDQSxFQUFBLEVBQUEsYUFBQSxHQUFBLEtBQ0EsRUFBQSxRQUFBLEVBQUEsYUFBQSxHQUFBLElBQ0EsUUFNQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxPQUNBLElBQUEsRUFBQSxZQUFBLE9BRUEsR0FBQSxFQUFBLFNBMENBLEdBQUEsTUFBQSxFQUFBLFlBQ0EsQ0FFQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsS0FBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxHQUNBLFFBQUEsUUFBQSxZQUFBLFlBQUEsT0FDQSxFQUFBLGNBRUEsRUFBQSxhQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLEtBRUEsRUFBQSxNQUFBLEVBQUEsT0FDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLEVBQUEsT0FDQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEdBQUEsYUFBQSxPQUlBLEdBQUEsYUFBQSxFQUFBLFlBQUEsRUFBQSxlQWpFQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsR0FBQSxHQUNBLE9BQ0EsTUFBQSxJQUNBLE9BQUEsTUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUNBLEVBQUEsQ0FFQSxJQUFBLEVBQUEsUUFBQSxNQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsRUFBQSxRQUFBLG1CQUNBLEdBQUEsZ0JBQUEsbUJBQUEsR0FFQSxJQUFBLElBQUEsT0FBQSxPQUFBLE1BQUEsRUFBQSxNQUFBLE9BQUEsRUFDQSxHQUFBLE9BQUEsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBLENBTUEsSUFKQSxFQUFBLGNBQ0EsRUFBQSxPQUFBLEtBQUEsRUFBQSxNQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDZGQUdBLE9BQUEsR0FBQSxtQkFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsU0FBQSx3QkFFQSxvQkFBQSxHQUFBLEtBQUEsU0FBQSxFQUFBLEtBQUEsUUFBQSxTQUNBLEdBQUEsU0FBQSxtQkFBQSxFQUFBLEtBQUEsVUFFQSxPQUFBLFNBQUEsS0FBQSxNQUdBLEdBQUEsUUFFQSxFQUFBLFNBQUEsS0FBQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsbUJBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsU0FDQSxFQUFBLFFBQUEsS0FBQSxFQUFBLEtBQUEsU0FDQSxFQUFBLEVBQUEsRUFBQSxXQUFBLFNBcUNBLEVBQUEsY0FBQSxTQUFBLEdBRUEsSUFBQSxHQURBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLGFBQUEsT0FBQSxJQUVBLEdBQUEsRUFBQSxhQUFBLEdBQUEsTUFBQSxFQUNBLENBQ0EsRUFBQSxDQUNBLE9BR0EsTUFBQSxJQUlBLEVBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsYUFDQSxHQUFBLElBQUEsRUFDQSxFQUFBLEtBQUEsbUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUNBLEdBQUEsTUFBQSxFQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUEsRUFDQSxHQUFBLEVBQUEsU0FnQ0EsR0FBQSxNQUFBLEVBQUEsWUFDQSxDQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsUUFDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLEVBQUEsT0FDQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEdBQUEsYUFBQSxHQUNBLEVBQUEsYUFBQSxFQUFBLEtBQ0EsRUFBQSxNQUFBLEVBQUEsWUFJQSxHQUFBLGFBQUEsRUFBQSxZQUFBLEVBQUEsZUE1Q0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEdBQUEsR0FDQSxPQUNBLE1BQUEsSUFDQSxPQUFBLE1BRUEsR0FFQSxFQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsOEJBQUEsRUFBQSxPQUNBLEVBQUEsQ0FFQSxJQUFBLEVBQUEsUUFBQSxNQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsRUFBQSxRQUFBLG1CQUNBLEdBQUEsZ0JBQUEsbUJBQUEsR0FFQSxJQUFBLElBQUEsT0FBQSxPQUFBLE1BQUEsRUFBQSxNQUFBLE9BQUEsRUFDQSxHQUFBLE9BQUEsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBLENBRUEsR0FBQSxPQUFBLEtBQUEsRUFBQSxNQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDRGQUVBLE9BQUEsR0FBQSxtQkFBQSxHQUNBLE9BQUEsU0FBQSxLQUFBLEVBQUEsYUFBQSxFQUFBLFNBQUEsUUFBQSxFQUFBLElBQUEsZUFHQSxFQUFBLFFBRUEsRUFBQSxTQUFBLEtBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxTQUFBLElBQUEsRUFBQSxJQUFBLFNBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGVBQ0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxVQW1CQSxNQUFBLEVBQUEsYUFDQSxFQUFBLGFBQUEsRUFBQSxZQUFBLEVBQUEsY0FPQSxFQUFBLFVBQUEsU0FBQSxFQUFBLEdBRUEsR0FDQSxHQURBLEdBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsU0FHQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FFQSxHQUFBLE1BQUEsRUFBQSxNQUVBLEdBQUEsRUFBQSxZQXlDQSxtQkFBQSxHQUFBLFVBRUEsRUFBQSxhQUFBLFFBQUEsWUFBQSxHQUVBLFFBQUEsWUFBQSxLQUNBLEVBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLFNBQUEsU0FBQSxVQUZBLEVBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLE9BQUEsaUJBSUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxjQWhEQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsR0FBQSxHQUNBLE9BQ0EsTUFBQSxJQUNBLE9BQUEsTUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUFBLFFBQ0EsRUFBQSxDQUVBLElBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFFBQUEsbUJBQ0EsR0FBQSxnQkFBQSxtQkFBQSxHQUFBLEtBQ0EsR0FBQSxJQUVBLElBQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxNQUFBLFFBQUEsQ0FNQSxJQUpBLEVBQUEsY0FDQSxFQUFBLE9BQUEsS0FBQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDZGQUdBLE9BQUEsR0FBQSxtQkFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsU0FBQSxjQUFBLENBRUEsUUFBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxnQkFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEtBQ0EsUUFBQSxZQUFBLEtBQ0EsRUFBQSxVQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxPQUFBLGtCQUNBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0FvQkEsRUFBQSxXQUFBLFdBRUEsSUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsZUFBQSxHQUFBLFlBQUEsRUFBQSxlQUFBLFlBQUEsU0FBQSxFQUFBLEtBQUEsU0FDQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGFBRUEsRUFBQSxRQUVBLEVBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxVQUFBLFVBRUEsRUFBQSxnQkFFQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLEVBQUEsZUFBQSxLQUlBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0FPQSxFQUFBLGFBQUEsV0FHQSxJQUFBLEdBREEsR0FBQSxRQUFBLFFBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxJQUFBLEtBQUEsTUFBQSxVQUFBLEVBQ0EsR0FBQSx1QkFBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLGFBQUEsTUFHQSxFQUFBLGdCQUFBLFdBRUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxNQUdBLEVBQUEsdUJBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxVQUNBLEVBQUEsUUFBQSxRQUFBLFdBQUEsRUFDQSxHQUFBLEtBQUEsK0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxtQkFBQSxHQUFBLFdBQUEsRUFBQSxZQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsYUFLQSxFQUFBLGNBQUEsU0FBQSxFQUFBLEdBRUEsR0FDQSxHQURBLEdBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsU0FFQSxHQUFBLEtBQUEsdUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFLQSxFQUhBLEVBQUEsWUFHQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsU0FBQSxTQUFBLFNBRkEsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLE9BQUEsaUJBSUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxhQU1BLEVBQUEsV0FBQSxXQUVBLElBQUEsRUFBQSxPQUFBLENBQ0EsR0FBQSxJQUFBLEtBQUEsRUFBQSxRQUFBLEtBQUEsU0FBQSxFQUFBLFFBQUEsU0FBQSxJQUFBLEVBQUEsUUFBQSxJQUNBLG9CQUFBLEdBQUEsUUFBQSxVQUFBLEdBQUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxTQUFBLEdBQ0EsbUJBQUEsR0FBQSxRQUFBLE1BQUEsRUFBQSxRQUFBLEtBQUEsU0FDQSxFQUFBLEtBQUEsRUFBQSxRQUFBLEtBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxzQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsbUJBQUEsR0FBQSxVQUFBLG1CQUFBLEdBQUEsWUFDQSxHQUFBLEVBQUEsU0FFQSxHQURBLEVBQUEsUUFDQSxNQUFBLEVBQUEsWUFBQSxDQUNBLEdBQUEsRUFBQSxTQUFBLENBQ0EsUUFBQSxRQUFBLGdCQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsR0FDQSxRQUFBLFFBQUEsWUFBQSxZQUFBLE9BRUEsRUFBQSxjQUVBLEVBQUEsTUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLElBQUEsR0FDQSxTQUFBLFFBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxTQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFBQSxRQUNBLEdBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLGFBQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxFQUFBLFFBR0EsRUFBQSxVQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsRUFBQSxPQUNBLEdBQUEsS0FDQSxFQUFBLGFBQUEsR0FBQSxhQUFBLE9BRUEsR0FBQSxhQUFBLEVBQUEsWUFBQSxFQUFBLGVBRUEsR0FBQSxFQUFBLEVBQUEsV0FBQSxTQU9BLEVBQUEsYUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsS0FBQSxxQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsU0FDQSxFQUFBLFFBQUEsRUFBQSxhQUtBLEVBQUEsZUFBQSxXQUVBLEdBREEsRUFBQSxZQUFBLEVBQ0EsbUJBQUEsR0FBQSxhQUNBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxhQUFBLEVBQUEsWUFDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxtQkFBQSxHQUFBLGFBQUEsR0FBQSxjQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsT0FPQSxFQUFBLGFBQUEsU0FBQSxHQUVBLEdBQUEsRUFDQSxJQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsaUJBQUEsUUFFQSxFQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsaUJBQ0EsRUFBQSxJQUFBLFFBQUEsUUFDQSxFQUFBLElBQUEsU0FBQSxTQUFBLEVBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsT0FDQSxHQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsZUFBQSxTQUNBLEVBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLFFBQ0EsRUFBQSxJQUFBLFNBQUEsU0FBQSxFQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLFFBSUEsRUFBQSxXQUFBLFNBQUEsR0FFQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FBQSxtQkFBQSxHQUFBLE9BQ0EsUUFBQSxRQUFBLG1CQUFBLEtBQUEsRUFBQSxPQUNBLG1CQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxPQUNBLFFBQUEsUUFBQSxvQkFBQSxPQUVBLFFBQUEsUUFBQSxvQkFBQSxRQUNBLE9BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxvQ0FBQSxTQUFBLFlBS0EsRUFBQSxVQUFBLFNBQUEsR0FFQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFdBQUEsSUFHQSxFQUFBLG1CQUFBLFNBQUEsR0FFQSxRQUFBLFFBQUEsbUJBQUEsS0FBQSxHQUNBLFFBQUEsUUFBQSxvQ0FBQSxZQUFBLFVBR0EsRUFBQSxnQkFBQSxXQUNBLE9BQUEsR0FHQSxFQUFBLFlBQUEsV0FFQSxtQkFBQSxHQUFBLFlBQUEsRUFBQSxXQUFBLFFBRUEsUUFBQSxRQUFBLFFBQUEsSUFBQSxTQUFBLEVBQUEsa0JBQ0EsR0FBQSxZQUdBLFFBQUEsUUFBQSxRQUFBLElBQUEsU0FBQSxXQUVBLG1CQUFBLEdBQUEsZ0JBQUEsRUFBQSxlQUFBLFFBRUEsUUFBQSxRQUFBLHFCQUFBLElBQUEsU0FBQSxFQUFBLHNCQUNBLEdBQUEsZ0JBR0EsUUFBQSxRQUFBLHFCQUFBLElBQUEsU0FBQSxTQUlBLEVBQUEsT0FBQSxlQUFBLFdBQ0EsRUFBQSxRQUFBLE9BQUEsRUFDQSxFQUFBLFFBQUEsVUFBQSxDQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsZ0JBQ0EsR0FBQSxRQUNBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxXQUdBLEVBQUEsY0FBQSxXQUNBLEVBQUEsUUFBQSxhQUFBLEVBQ0EsUUFBQSxRQUFBLFFBQUEsS0FBQSxTQUFBLEVBQUEsa0JBR0EsRUFBQSxnQkFBQSxXQUNBLFFBQUEsUUFBQSxRQUFBLFlBQUEsUUFBQSxRQUFBLFFBQUEsVUFBQSxRQUFBLFFBQUEsVUFBQSxTQUFBLE1BQUEsRUFBQSxRQUFBLGFBQUEsRUFBQSxRQUFBLE9BQUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLFVBSUEsRUFBQSxrQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxnQkFBQSxTQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxJQUlBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLEtBQUEsRUFBQSxHQUVBLEVBQUEsS0FDQSxFQUFBLGNBQUEsSUFBQSxtQkFBQSwwQkFBQSxFQUFBLElBQUEsTUFLQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxPQUNBLElBQUEsS0FBQSxFQUFBLEdBQUEsTUFDQSxPQUFBLENBR0EsSUFBQSxHQUFBLEVBQUEsU0FBQSwyQkFDQSxFQUFBLEVBQUEsU0FBQSxxQkFDQSxFQUFBLEVBQUEsU0FBQSx3QkFDQSxFQUFBLEVBQUEsS0FBQSxzQkFDQSxFQUFBLEVBQUEsS0FBQSxtQkFDQSxFQUFBLEVBQUEsS0FBQSxxQkFFQSxFQUFBLEVBQUEsU0FFQSxHQUFBLFFBQ0EsRUFBQSxJQUFBLEVBQUEsVUFFQSxFQUFBLFFBQ0EsRUFBQSxJQUFBLEVBQUEsT0FFQSxFQUFBLFlBQ0EsS0FBQSxPQUNBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFNBQUEsSUFFQSxFQUFBLE1BQUEsT0FDQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsU0FBQSxRQUVBLEVBQUEsWUFBQSxRQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxTQUFBLEdBQUEsT0FBQSxXQUNBLEVBQUEsT0FBQSxXQUNBLG1CQUFBLEVBQUEsTUFDQSxFQUFBLFlBQUEsTUFBQSxFQUFBLEtBQ0Esa0JBQUEsRUFBQSxRQUNBLEVBQUEsWUFBQSxLQUFBLEVBQUEsTUFDQSxFQUFBLE1BQUEsYUFBQSxLQUdBLEVBQUEsTUFBQSxhQUFBLE1BTUEsRUFBQSxrQkFBQSxFQUNBLEVBQUEsaUJBQUEsRUFFQSxFQUFBLFFBQUEsV0FDQSxFQUFBLFFBQUEsRUFBQSxPQUlBLEVBQUEsbUJBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxJQUFBLEVBRUEsTUFEQSxHQUFBLE1BQUEsYUFBQSxHQUNBLENBR0EsSUFBQSxHQUFBLEVBQUEsU0FDQSxHQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsU0FBQSxFQUFBLFNBRUEsRUFBQSxLQUFBLDJCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxpQkFDQSxFQUFBLGFBQUEsRUFBQSxFQUFBLFlBRUEsRUFBQSxNQUFBLGFBQUE7SUFNQSxFQUFBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUtBLEVBQUEsYUFBQSxJQUNBLEVBQUEsTUFBQSxhQUFBLEVBQ0EsRUFBQSxhQUFBLDRCQUFBLEVBQUEsV0FDQSxFQUFBLFdBQ0EsRUFBQSxNQUFBLGFBQUEsR0FDQSxNQUNBLElBR0EsRUFBQSxlQUFBLE9BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxhQUFBLEVBQUEsRUFBQSxXQUNBLEVBQUEsT0FBQSxFQUFBLFFBRUEsRUFBQSxNQUFBLGFBQUEsTUFwQkEsRUFBQSxNQUFBLGFBQUEsR0FDQSxJQXdCQSxFQUFBLGVBQUEsU0FBQSxHQUNBLElBQUEsV0FBQSxHQUNBLEVBQUEsaUJBQUEsVUFBQSxFQUFBLFdBSUEsRUFBQSxhQUFBLFNBQUEsR0FDQSxJQUFBLFdBQUEsR0FDQSxHQUFBLFVBQUEsVUFBQSxFQUFBLGlCQUFBLFdBQUEsRUFBQSxVQUVBLE9BQUEsQ0FLQSxRQUFBLEdBSUEsRUFBQSxPQUFBLCtIQUFBLFdBQ0EsRUFBQSxNQUFBLGFBQUEsSUFHQSxFQUFBLE9BQUEsc0JBQUEsV0FDQSxJQUFBLEVBQUEsZUFBQSxLQUFBLE9BQ0EsT0FBQSxDQUVBLElBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxFQUFBLGVBQUEsS0FFQSxlQUFBLFFBQUEsUUFBQSxvQkFFQSxjQUFBLFFBQ0EsRUFBQSxlQUFBLFlBQUEsRUFFQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxjQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGlCQUNBLEVBQUEsZUFBQSxZQUFBLFFBTUEsRUFBQSxlQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsUUFBQSxTQUFBLElBR0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsb0JBQ0EsR0FFQSxFQUFBLG9CQUFBLE1BQ0EsU0FBQSxRQUFBLEdBQUEsV0FBQSxVQUlBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEVBQ0EsT0FBQSxDQUVBLElBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsTUFBQSxFQUNBLEdBQUEsS0FBQSxpQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsVUFBQSxHQUNBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLFFBS0EsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsTUFBQSxFQUNBLEdBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxhQUtBLEVBQUEsdUJBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxnQ0FBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxFQUFBLGFBQUEsRUFDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGtCQUNBLEdBQUEsUUFDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsUUFLQSxFQUFBLHFCQUFBLFdBQ0EsR0FBQSxJQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxhQUFBLEVBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxrQkFDQSxHQUFBLFFBQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLFdDOTJDQSxRQUFBLE9BQUEsWUFBQSxXQUFBLHFCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLFVBQ0EsRUFBQSxrQkFDQSxFQUFBLGVBQ0EsRUFBQSxtQkFFQSxFQUFBLFVBQUEsV0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFFQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxFQUFBLFFBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBU0EsR0FSQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsYUFBQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsRUFBQSxTQUFBLEdBQUEsUUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsT0FDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxVQUVBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGVBQUEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsRUFHQSxJQUFBLEdBREEsR0FBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLGNBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLElBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxLQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFDQSxDQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxLQUNBLFFBZUEsRUFBQSxXQUFBLElBR0EsUUFBQSxRQUFBLFFBQUEsWUFBQSxjQUNBLFFBQUEsUUFBQSxvQkFBQSxRQUFBLEtBR0EsSUFBQSxHQUFBLEdBRUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLE9BR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLFNBQUEsRUFBQSxPQUFBLENBRUEsSUFBQSxFQUFBLFVBQUEsT0FBQSxDQUVBLElBQUEsVUFBQSxFQUFBLFNBQUEsR0FBQSxLQUVBLE1BREEsR0FBQSxzQkFBQSxFQUFBLFNBQUEsR0FBQSxJQUNBLENBR0EsSUFBQSxVQUFBLEVBQUEsU0FBQSxHQUFBLEtBRUEsTUFEQSxHQUFBLHNCQUFBLEVBQUEsU0FBQSxHQUFBLElBQ0EsQ0FHQSxHQUFBLFdBQUEsQ0FDQSxJQUFBLElBQ0EsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFVBQ0EsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGdCQUNBLGFBQUEsRUFBQSxTQUFBLEdBQUEsYUFFQSxHQUFBLEtBQUEsMkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsTUFDQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSx1QkFDQSxHQUFBLEtBQUEsRUFBQSxNQUFBLE9BRUEsRUFBQSxXQUFBLElBQ0EsTUFBQSxXQUFBLEVBQUEsV0FBQSxLQUlBLEVBQUEsaUJBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxFQUFBLEtBQUEsK0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsUUFBQSxZQUFBLEVBQUEsZUFDQSxFQUFBLFNBQUEsRUFBQSxhQUFBLFFBQUEsRUFBQSxTQUFBLE9BQ0EsRUFBQSxNQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLHVCQUNBLEdBQUEsS0FBQSxFQUFBLE1BQUEsVUFJQSxFQUFBLHlCQUdBLEVBQUEsY0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLCtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLFFBQUEsWUFBQSxFQUFBLFlBQ0EsRUFBQSxTQUFBLEVBQUEsVUFBQSxRQUFBLEVBQUEsU0FBQSxPQUNBLEVBQUEsTUFBQSxPQUFBLENBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSx1QkFDQSxHQUFBLEtBQUEsRUFBQSxNQUFBLFVBSUEsRUFBQSx5QkFJQSxFQUFBLHNCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsZUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLHVCQUFBLFNBQUEsUUFDQSxFQUFBLFFBQUEsSUFBQSxXQUFBLFdBR0EsRUFBQSxzQkFBQSxXQUNBLEVBQUEsdUJBQUEsWUFBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsS0FJQSxFQUFBLHNCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsWUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLHVCQUFBLFNBQUEsUUFDQSxFQUFBLFFBQUEsSUFBQSxXQUFBLFdBR0EsRUFBQSxzQkFBQSxXQUNBLEVBQUEsdUJBQUEsWUFBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsS0FHQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxnQkFBQSxFQUFBLGdCQUFBLFNBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLElBSUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGVBQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxLQUNBLEVBQUEsY0FBQSxJQUFBLG1CQUFBLDBCQUFBLEVBQUEsSUFBQSxNQUlBLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxhQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsV0FHQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBSUEsR0FIQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFFQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUVBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsVUFNQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxXQUdBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsR0FBQSxTQUFBLElBQ0EsRUFBQSxTQUFBLEdBQUEsU0FBQSxJQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsMEJBRUEsb0JBYUEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsZUFBQSxFQUVBLEVBQUEsU0FBQSxXQUNBLEVBQUEsS0FBQSxDQUNBLElBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUVBLEdBQUEsS0FBQSx5QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsUUFBQSxJQUNBLE9BQUEsU0FBQSxTQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUtBLEdBSkEsRUFBQSxTQUFBLEdBQUEsS0FBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxVQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxPQUNBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGVBQUEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsRUFHQSxJQUFBLEdBREEsR0FBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLGNBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLElBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxLQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFDQSxDQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxLQUNBLFFBTUEsR0FBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFJQSxFQUFBLGFBQUEsRUFDQSxFQUFBLFdBQUEsSUFHQSxRQUFBLFFBQUEsUUFBQSxZQUFBLGNBQ0EsUUFBQSxRQUFBLG9CQUFBLFFBQUEsS0FHQSxJQUFBLEdBQUEsR0FFQSxHQUFBLFNBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsT0FHQSxFQUFBLFdBQUEsV0FDQSxNQUFBLEdBQUEsU0FDQSxFQUFBLFNBQUEsT0FBQSxFQUNBLE9BRUEsR0FKQSxRQVNBLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsZ0JBQUEsV0FDQSxNQUFBLEdBQUEsWUFHQSxHQUZBLFFBTUEsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxHQUFBLGFBQUEsRUFDQSxFQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxhQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsVUFHQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQUEsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQVFBLElBUEEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsZUFDQSxFQUFBLGFBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxrQkFDQSxFQUFBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGlCQUVBLEVBQUEsU0FBQSxHQUFBLGNBQUEsRUFFQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUVBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsUUFLQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxXQUFBLEVBQUEsV0FBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEtBQUEsNkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsU0FLQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsaUJBQUEsRUFBQSxXQUFBLElBR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLGdCQUFBLEVBQUEsU0FBQSxJQUdBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFdBQUEsRUFFQSxFQUFBLFdBQUEsT0FHQSxDQUNBLEVBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxRQUdBLElBQUEsbUJBQUEsR0FBQSxTQUFBLFVBQUEsRUFBQSxTQUFBLFNBQUEsT0FBQSxFQUFBLENBQ0EsRUFBQSxTQUFBLEtBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLFNBQUEsT0FBQSxJQUNBLEdBQUEsRUFBQSxTQUFBLEdBQUEsSUFBQSxFQUFBLFNBQUEsU0FBQSxHQUFBLFdBQUEsQ0FDQSxFQUFBLFNBQUEsTUFBQSxFQUFBLFNBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLE9BSUEsRUFBQSxTQUFBLEtBQUEsSUFDQSxFQUFBLE1BQUEsRUFBQSxTQUFBLE1BSUEsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxXQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsS0FBQSw2QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxVQU9BLEVBQUEsU0FBQSxXQUNBLEdBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUVBLEtBQUEsRUFBQSxZQUFBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsR0FBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxRQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxPQUFBLElBQ0EsRUFBQSxXQUFBLEdBQUEsS0FBQSxDQUVBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsU0FBQSxHQUFBLEtBQUEsQ0FFQSxHQUFBLGlCQUFBLEVBQUEsV0FBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxTQUFBLEtBRUEsRUFBQSxhQUFBLEVBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsb0JBQ0EsRUFBQSxjQUFBLFNBQ0EsVUFBQSxFQUFBLG9CQUFBLFNBQUEsS0FDQSxNQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsSUFBQSxFQUFBLFVBQUEsQ0FDQSxFQUFBLFdBQUEsQ0FDQSxJQUFBLElBRUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsU0FBQSxFQUFBLFNBQUEsR0FBQSxTQUNBLGNBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxnQkFBQSxFQUFBLFNBQUEsR0FBQSxnQkFDQSxhQUFBLEVBQUEsU0FBQSxHQUFBLGFBR0EsR0FBQSxLQUFBLGdDQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEVBQUEsU0FBQSxPQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsQ0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLE9BQUEsSUFDQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFFBRUEsSUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFNQSxFQUFBLFNBQUEsUUFBQSxJQUNBLE9BQUEsU0FBQSxhQUlBLEVBQUEsV0FBQSxJQUlBLEVBQUEsYUFBQSxXQUNBLElBQUEsRUFBQSxVQUFBLENBQ0EsRUFBQSxXQUFBLENBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsVUFBQSxFQUFBLFNBQUEsVUFDQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxZQUFBLENBQ0EsSUFBQSxHQUFBLEVBQUEsU0FBQSxJQUVBLElBREEsRUFBQSxTQUFBLEVBQUEsU0FDQSxtQkFBQSxHQUFBLFNBQUEsVUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxHQUNBLEVBQUEsSUFDQSxFQUFBLE1BQUEsV0FBQSxJQUVBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFFQSxFQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsU0FNQSxHQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxNQUNBLEVBQUEsU0FBQSxLQUFBLEdBRUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxNQUNBLEVBQUEsYUFBQSxhQUVBLE1BQUEsV0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxNQUNBLEVBQUEsU0FBQSxLQUFBLEtBS0EsRUFBQSxXQUFBLEdBR0EsRUFBQSxPQUFBLHFCQUFBLFdBRUEsRUFBQSxZQUFBLElBR0EsRUFBQSxhQUFBLFNBQUEsR0FDQSxJQUFBLEVBSUEsTUFIQSxHQUFBLGVBQUEsRUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLGFBQ0EsRUFBQSxhQUFBLFlBQ0EsQ0FFQSxJQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FFQSxLQUFBLEVBQUEsVUFBQSxDQUNBLEVBQUEsV0FBQSxDQUVBLElBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFNBQUEsRUFBQSxTQUVBLEdBQUEsS0FBQSw4QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxzQkFBQSxZQUFBLG9CQUNBLEVBQUEsY0FBQSxTQUNBLFVBQUEsRUFBQSxzQkFBQSxTQUFBLEtBQ0EsT0FHQSxFQUFBLGVBQUEsRUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLE1BQ0EsRUFBQSxhQUFBLGNBSUEsRUFBQSxXQUFBLElBSUEsRUFBQSxPQUFBLDJNQUFBLFdBRUEsRUFBQSxlQUFBLElBR0EsRUFBQSxJQUFBLFdBRUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLENBRUEsSUFBQSxJQUNBLE1BQUEsRUFBQSxLQUFBLE1BQ0EsU0FBQSxFQUFBLFNBQ0EsU0FBQSxFQUFBLFNBQ0EsU0FBQSxFQUFBLGlCQUNBLFFBQUEsRUFBQSxnQkFDQSxTQUFBLEVBQUEsU0FHQSxHQUFBLEtBQUEscUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsTUFDQSxTQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsWUFRQSxRQUFBLFFBQUEsc0JBQUEsTUFBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLFFBQUEsUUFBQSxnQkFBQSxVQUlBLEVBQUEsYUFBQSxFQUFBLE1BQUEsRUFBQSxjQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsMEJBRUEsaUJBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEdBQ0EsR0FFQSxZQ3BvQkEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FDQSxFQUFBLFVBQ0EsRUFBQSxNQUFBLE9BQ0EsRUFBQSxVQUFBLFNBR0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUVBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxVQUFBLFdBQ0EsRUFBQSxNQUFBLFFBSUEsUUFBQSxRQUFBLGFBQUEsWUFDQSxVQUFBLFVBQ0EsV0FBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsS0FBQSxTQUFBLE9BTUEsRUFBQSxPQUFBLFFBQUEsV0FDQSxFQUFBLFNBQUEsRUFBQSxPQUNBLEVBQUEsYUFBQSxFQUFBLFNBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLGVBTUEsRUFBQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFDQSxLQUFBLEVBQUEsQ0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLElBQUEsT0FBQSxNQUFBLE9BQUEsUUFDQSxHQUFBLEtBQUEsS0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsQ0FDQSxFQUFBLEVBQUEsRUFDQSxPQUdBLEVBQUEsV0FBQSxHQUFBLEVBQ0EsRUFBQSxXQUFBLElBS0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FDQSxHQUFBLEtBQUEsaUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxPQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLEVBQUEsU0FFQSxNQUFBLEVBQUEsTUFDQSxRQUFBLFlBQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxPQUNBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxlQUVBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxFQUFBLFlBR0EsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLFFBYkEsR0FrQkEsRUFBQSxPQUFBLHlDQUFBLFdBQ0EsRUFBQSxNQUFBLE9BQUEsRUFDQSxFQUFBLE1BQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxVQUFBLEVBQ0EsRUFBQSxNQUFBLFFBQUEsS0FJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUNBLElBQUEsRUFBQSxPQUFBLE1BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBRUEsTUFBQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQ0EsV0FBQSxFQUFBLFVBQ0EsRUFBQSxZQUFBLEVBQUEsUUFBQSxTQUVBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsY0FJQSxVQUFBLEVBQUEsTUFDQSxFQUFBLE1BQUEsT0FBQSxFQUVBLEVBQUEsTUFBQSxNQUFBLEVBRUEsRUFBQSxNQUFBLFFBQUEsRUFBQSxRQUNBLFdBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLFFBQUEsYUF4QkEsR0E4QkEsRUFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FFQSxHQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxPQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLEVBQUEsUUFDQSxXQUFBLEVBQUEsV0FDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLFVBRUEsTUFBQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsV0FBQSxFQUFBLFVBQ0EsRUFBQSxZQUFBLEVBQUEsUUFBQSxRQUVBLEVBQUEsYUFBQSxlQWZBLEdBcUJBLEVBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE9BRUEsR0FBQSxLQUFBLE9BQUEsU0FBQSxTQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLGtCQUpBLEdBU0EsRUFBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLFNBQUEsWUFBQSxLQUFBLEVBQUEsUUFDQSxHQUVBLEVBQUEsT0FBQSxRQUFBLE9BQ0EsV0FBQSxFQUFBLFVBQ0EsRUFBQSxZQUFBLEVBQUEsUUFFQSxFQUFBLGFBQUEsY0FHQSxFQUFBLFVBQUEsV0FDQSxHQUFBLEdBQUEsSUFFQSxRQUFBLE9BQUEsT0FDQSxFQUFBLE1BQ0EsT0FBQSxPQUFBLE9BQ0EsRUFBQSxLQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsd0JBRUEsR0FBQSxJQUFBLG1CQUFBLHlDQUFBLEVBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gQW5ndWxhckpTIHYxLjIuMjJcclxuIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXHJcbiBMaWNlbnNlOiBNSVRcclxuKi9cclxuKGZ1bmN0aW9uKHAsZixuKXsndXNlIHN0cmljdCc7Zi5tb2R1bGUoXCJuZ0Nvb2tpZXNcIixbXCJuZ1wiXSkuZmFjdG9yeShcIiRjb29raWVzXCIsW1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixmdW5jdGlvbihlLGIpe3ZhciBjPXt9LGc9e30saCxrPSExLGw9Zi5jb3B5LG09Zi5pc1VuZGVmaW5lZDtiLmFkZFBvbGxGbihmdW5jdGlvbigpe3ZhciBhPWIuY29va2llcygpO2ghPWEmJihoPWEsbChhLGcpLGwoYSxjKSxrJiZlLiRhcHBseSgpKX0pKCk7az0hMDtlLiR3YXRjaChmdW5jdGlvbigpe3ZhciBhLGQsZTtmb3IoYSBpbiBnKW0oY1thXSkmJmIuY29va2llcyhhLG4pO2ZvcihhIGluIGMpZD1jW2FdLGYuaXNTdHJpbmcoZCl8fChkPVwiXCIrZCxjW2FdPWQpLGQhPT1nW2FdJiYoYi5jb29raWVzKGEsZCksZT0hMCk7aWYoZSlmb3IoYSBpbiBkPWIuY29va2llcygpLGMpY1thXSE9PWRbYV0mJihtKGRbYV0pP2RlbGV0ZSBjW2FdOmNbYV09ZFthXSl9KTtyZXR1cm4gY31dKS5mYWN0b3J5KFwiJGNvb2tpZVN0b3JlXCIsXHJcbltcIiRjb29raWVzXCIsZnVuY3Rpb24oZSl7cmV0dXJue2dldDpmdW5jdGlvbihiKXtyZXR1cm4oYj1lW2JdKT9mLmZyb21Kc29uKGIpOmJ9LHB1dDpmdW5jdGlvbihiLGMpe2VbYl09Zi50b0pzb24oYyl9LHJlbW92ZTpmdW5jdGlvbihiKXtkZWxldGUgZVtiXX19fV0pfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci1jb29raWVzLm1pbi5qcy5tYXBcclxuIiwiLypcclxuIGpRdWVyeSBVSSBTb3J0YWJsZSBwbHVnaW4gd3JhcHBlclxyXG5cclxuIEBwYXJhbSBbdWktc29ydGFibGVdIHtvYmplY3R9IE9wdGlvbnMgdG8gcGFzcyB0byAkLmZuLnNvcnRhYmxlKCkgbWVyZ2VkIG9udG8gdWkuY29uZmlnXHJcbiovXHJcbmFuZ3VsYXIubW9kdWxlKCd1aS5zb3J0YWJsZScsIFtdKVxyXG4gIC52YWx1ZSgndWlTb3J0YWJsZUNvbmZpZycse30pXHJcbiAgLmRpcmVjdGl2ZSgndWlTb3J0YWJsZScsIFsgJ3VpU29ydGFibGVDb25maWcnLFxyXG4gICAgICAgIGZ1bmN0aW9uKHVpU29ydGFibGVDb25maWcpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcclxuICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICBmdW5jdGlvbiBjb21iaW5lQ2FsbGJhY2tzKGZpcnN0LHNlY29uZCl7XHJcbiAgICAgICAgICAgICAgICAgIGlmKCBzZWNvbmQgJiYgKHR5cGVvZiBzZWNvbmQgPT09IFwiZnVuY3Rpb25cIikgKXtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLHVpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdChlLHVpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQoZSx1aSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0cyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHtcclxuICAgICAgICAgICAgICAgIHJlY2VpdmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZW1vdmU6bnVsbCxcclxuICAgICAgICAgICAgICAgIHN0YXJ0Om51bGwsXHJcbiAgICAgICAgICAgICAgICBzdG9wOm51bGwsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6bnVsbFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5leHRlbmQob3B0cywgdWlTb3J0YWJsZUNvbmZpZyk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmdNb2RlbCkge1xyXG5cclxuICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc29ydGFibGUob3B0cyk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnN0YXJ0ID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNhdmUgcG9zaXRpb24gb2YgZHJhZ2dlZCBpdGVtXHJcbiAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlID0geyBpbmRleDogdWkuaXRlbS5pbmRleCgpIH07XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnVwZGF0ZSA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGb3Igc29tZSByZWFzb24gdGhlIHJlZmVyZW5jZSB0byBuZ01vZGVsIGluIHN0b3AoKSBpcyB3cm9uZ1xyXG4gICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQgPSBuZ01vZGVsO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrcy5yZWNlaXZlID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUucmVsb2NhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkZWQgaXRlbSB0byBhcnJheSBpbnRvIGNvcnJlY3QgcG9zaXRpb24gYW5kIHNldCB1cCBmbGFnXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRtb2RlbFZhbHVlLnNwbGljZSh1aS5pdGVtLmluZGV4KCksIDAsIHVpLml0ZW0uc29ydGFibGUubW92ZWQpO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrcy5yZW1vdmUgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29weSBkYXRhIGludG8gaXRlbVxyXG4gICAgICAgICAgICAgICAgaWYgKG5nTW9kZWwuJG1vZGVsVmFsdWUubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUubW92ZWQgPSBuZ01vZGVsLiRtb2RlbFZhbHVlLnNwbGljZSgwLCAxKVswXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUubW92ZWQgPSAgbmdNb2RlbC4kbW9kZWxWYWx1ZS5zcGxpY2UodWkuaXRlbS5zb3J0YWJsZS5pbmRleCwgMSlbMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnN0b3AgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZGlnZXN0IGFsbCBwcmVwYXJlZCBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBpZiAodWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQgJiYgIXVpLml0ZW0uc29ydGFibGUucmVsb2NhdGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgIC8vIEZldGNoIHNhdmVkIGFuZCBjdXJyZW50IHBvc2l0aW9uIG9mIGRyb3BwZWQgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICB2YXIgZW5kLCBzdGFydDtcclxuICAgICAgICAgICAgICAgICAgc3RhcnQgPSB1aS5pdGVtLnNvcnRhYmxlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgICBlbmQgPSB1aS5pdGVtLmluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAvLyBSZW9yZGVyIGFycmF5IGFuZCBhcHBseSBjaGFuZ2UgdG8gc2NvcGVcclxuICAgICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQuJG1vZGVsVmFsdWUuc3BsaWNlKGVuZCwgMCwgdWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQuJG1vZGVsVmFsdWUuc3BsaWNlKHN0YXJ0LCAxKVswXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHVpLml0ZW0uc29ydGFibGUucmVzb3J0IHx8IHVpLml0ZW0uc29ydGFibGUucmVsb2NhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLnVpU29ydGFibGUsIGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKXtcclxuICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG5ld1ZhbCwgZnVuY3Rpb24odmFsdWUsIGtleSl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYoIGNhbGxiYWNrc1trZXldICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd3JhcCB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNvbWJpbmVDYWxsYmFja3MoIGNhbGxiYWNrc1trZXldLCB2YWx1ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc29ydGFibGUoJ29wdGlvbicsIGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNhbGxiYWNrcywgZnVuY3Rpb24odmFsdWUsIGtleSApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBvcHRzW2tleV0gPSBjb21iaW5lQ2FsbGJhY2tzKHZhbHVlLCBvcHRzW2tleV0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyBDcmVhdGUgc29ydGFibGVcclxuICAgICAgICAgICAgLy9lbGVtZW50LnNvcnRhYmxlKCdkZXN0cm95Jyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc29ydGFibGUob3B0cyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5dKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnLCBbJ25nQ29va2llcycsICd1aS5zb3J0YWJsZSddKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90Jykuc2VydmljZSgnY29udGVudFNlcnZpY2UnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAvL9Ce0YLQvtCx0YDQsNC20LXQvdC40LUg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxuICAgIHRoaXMuZGVza3RvcE1vZGFsID0gZnVuY3Rpb24oYWN0aW9uLCBzcGVlZCl7XHJcbiAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHNwZWVkKSkgc3BlZWQgPSA1MDA7XHJcblxyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nLWxpc3QnKS5mYWRlT3V0KCk7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmcnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG5cclxuICAgICAgaWYgKGFjdGlvbiA9PSAnbm9uZScpIHtcclxuICAgICAgICAkKCcuc2hvdy1ibG9jay5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmFkZU91dChzcGVlZCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBtb2RhbCA9IGFuZ3VsYXIuZWxlbWVudCgnIycgKyBhY3Rpb24pO1xyXG5cclxuICAgICAgaWYoJCgnLnNob3ctYmxvY2snKS5oYXNDbGFzcygnYWN0aXZlJykgICYmICgkKCcuc2hvdy1ibG9jay5hY3RpdmUnKS5hdHRyKCdpZCcpICE9IGFjdGlvbikpe1xyXG4gICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KHNwZWVkLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgbW9kYWwuZmFkZUluKHNwZWVkKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSAge1xyXG4gICAgICAgIG1vZGFsLmZhZGVJbihzcGVlZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubW9iaWxlTW9kYWwgPSBmdW5jdGlvbihjb250ZW50LCB0eXBlKXtcclxuICAgICAgdmFyIHJlc3VsdE1vZGFsID0gYW5ndWxhci5lbGVtZW50KCcubS1yZXN1bHQnKTtcclxuICAgICAgdmFyIHJlc3VsdENvbnRlbnQgPSByZXN1bHRNb2RhbC5maW5kKCdwJyk7XHJcblxyXG4gICAgICByZXN1bHRNb2RhbC5yZW1vdmVDbGFzcygnbS1uZWdhdGl2ZScpO1xyXG4gICAgICBpZiAodHlwZSA9PSAnZXJyb3InKSB7XHJcbiAgICAgICAgICByZXN1bHRNb2RhbC5hZGRDbGFzcygnbS1uZWdhdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlc3VsdE1vZGFsLmhpZGUoKTtcclxuICAgICAgcmVzdWx0TW9kYWwuc2hvdygpO1xyXG4gICAgICByZXN1bHRDb250ZW50LnRleHQoY29udGVudCk7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICByZXN1bHRNb2RhbC5oaWRlKCk7XHJcbiAgICAgIH0sIDUwMDApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5tZXNzYWdlTW9kYWwgPSBmdW5jdGlvbihtZXNzYWdlLCBob3N0X3R5cGUpe1xyXG4gICAgICBzcGVlZCA9IDUwMDtcclxuICAgICAgaWYgKGhvc3RfdHlwZSA9PT0gJ21vYmlsZScpIHtcclxuICAgICAgICAgIHRoaXMubW9iaWxlTW9kYWwobWVzc2FnZSwgJ25vbmUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nLWxpc3QnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZycpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgIFxyXG4gICAgICAgIHZhciBtb2RhbCA9IGFuZ3VsYXIuZWxlbWVudCgnI21lc3NhZ2UnKTtcclxuICAgICAgICBtb2RhbC5yZW1vdmVDbGFzcygnbmVnYXRpdmUnKTtcclxuICAgICAgICBtb2RhbC5yZW1vdmVDbGFzcygnYWxlcnQnKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IGFuZ3VsYXIuZWxlbWVudCgnI21lc3NhZ2UgcCcpO1xyXG4gICAgICBcclxuICAgICAgICBpZigkKCcuc2hvdy1ibG9jaycpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XHJcbiAgICAgICAgICAkKCcuc2hvdy1ibG9jay5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmFkZU91dChzcGVlZCwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY29udGVudC5odG1sKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSAge1xyXG4gICAgICAgICAgY29udGVudC5odG1sKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgbW9kYWwuZmFkZUluKHNwZWVkKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSAgICBcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvL9CQ0LLRgtC+0YHQutGA0L7Qu9C40L3QsyDQtNC+INC90YPQttC90L7Qs9C+INCx0LvQvtC60LBcclxuICAgIHRoaXMuc2Nyb2xsUGFnZSA9IGZ1bmN0aW9uKGlkLCBzcGVlZCl7XHJcbiAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHNwZWVkKSkgc3BlZWQgPSA2MDA7XHJcbiAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gJChpZCkub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsX2hlaWdodFxyXG4gICAgICAgIH0sIHNwZWVkKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHZhciBjdXJyZW50X3Nwb3QgPSB7fTtcclxuICAgIFxyXG4gICAgdGhpcy5zZXRTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgICAgIGN1cnJlbnRfc3BvdCA9IHNwb3Q7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuZ2V0U3BvdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBjdXJyZW50X3Nwb3Q7XHJcbiAgICB9XHJcbiAgICBcclxufSk7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5zZXJ2aWNlKCdkaWFsb2dTZXJ2aWNlJywgZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuICAgIHZhciB5ZXNOb0RpYWxvZyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0ZXh0WWVzLCB0ZXh0Tm8sIG1lc3NhZ2UsIGRpYWxvZ19jbGFzcykge1xyXG4gICAgICBzcGVlZCA9IDUwMDtcclxuXHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmctbGlzdCcpLmZhZGVPdXQoKTtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZycpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICBcclxuICAgICAgdmFyIG1vZGFsID0gYW5ndWxhci5lbGVtZW50KCcjYi1kaWFsb2cnKTtcclxuICAgICAgdmFyIGNvbnRlbnQgPSBhbmd1bGFyLmVsZW1lbnQoJyNiLWRpYWxvZyBwJyk7XHJcbiAgICAgIHZhciBidG5ZZXMgPSBhbmd1bGFyLmVsZW1lbnQoJyNiLWRpYWxvZyAueWVzLWJ1dHRvbicpO1xyXG4gICAgICB2YXIgYnRuTm8gPSBhbmd1bGFyLmVsZW1lbnQoJyNiLWRpYWxvZyAubm8tYnV0dG9uJyk7XHJcbiAgICAgIFxyXG4gICAgICBpZigkKCcuc2hvdy1ibG9jaycpLmhhc0NsYXNzKCdhY3RpdmUnKSlcclxuICAgICAgICAkKCcuc2hvdy1ibG9jay5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmFkZU91dCgwKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnRlbnQuaHRtbChtZXNzYWdlKTtcclxuICAgICAgYnRuWWVzLnRleHQodGV4dFllcyk7XHJcbiAgICAgIGJ0bk5vLnRleHQodGV4dE5vKTtcclxuICAgICAgbW9kYWwucmVtb3ZlQ2xhc3MoJ2FsZXJ0Jyk7XHJcbiAgICAgIG1vZGFsLnJlbW92ZUNsYXNzKCduZWdhdGl2ZScpO1xyXG4gICAgICBpZiAodHlwZW9mIGRpYWxvZ19jbGFzcyAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgbW9kYWwuYWRkQ2xhc3MoZGlhbG9nX2NsYXNzKTtcclxuICAgICAgbW9kYWwuZmFkZUluKHNwZWVkKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIFxyXG4gICAgICBidG5ZZXMuYmluZChcImNsaWNrXCIsIGNiWWVzKTsgICBcclxuICAgICAgYnRuTm8uYmluZChcImNsaWNrXCIsIGNiTm8pO1xyXG4gICAgICAkKGRvY3VtZW50KS5iaW5kKFwiY2xpY2tcIiwgY2JObyk7XHJcbiAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBjYlllcygpIHtcclxuICAgICAgICBjYWxsYmFjaygneWVzJyk7XHJcbiAgICAgICAgY2xvc2VEaWFsb2coKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gY2JObygpIHtcclxuICAgICAgICBjYWxsYmFjaygnbm8nKTtcclxuICAgICAgICBjbG9zZURpYWxvZygpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBjbG9zZURpYWxvZygpIHtcclxuICAgICAgICBidG5ZZXMudW5iaW5kKFwiY2xpY2tcIiwgY2JZZXMpOyAgXHJcbiAgICAgICAgYnRuTm8udW5iaW5kKFwiY2xpY2tcIiwgY2JObyk7XHJcbiAgICAgICAgJChkb2N1bWVudCkudW5iaW5kKFwiY2xpY2tcIiwgY2JObyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbW9kYWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZhZGVPdXQoc3BlZWQpOyAgICAgIFxyXG4gICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB5ZXNOb0RpYWxvZzogeWVzTm9EaWFsb2dcclxuICAgIH07XHJcblxyXG59KTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdEZW1va2l0Q29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGNvbXBpbGUsICR0aW1lb3V0LCBjb250ZW50U2VydmljZSkge1xyXG5cclxuICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuXHJcbiAgJHNjb3BlLiR3YXRjaCgnb3JkZXIubmFtZSArIG9yZGVyLmVtYWlsICsgb3JkZXIucGhvbmUgKyBvcmRlci5hZGRyZXNzICsgb3JkZXIuY2l0eSArIG9yZGVyLnppcCArIG9yZGVyLmNvdW50cnkgKyBvcmRlci5zaGlwcGluZyArIG9yZGVyLnBheW1lbnQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmVycm9yLmZpZWxkID0gZmFsc2U7XHJcbiAgfSk7XHJcblxyXG4gICRzY29wZS5vcmRlciA9IHtcclxuICAgIG5hbWU6JycsXHJcbiAgICBlbWFpbDonJyxcclxuICAgIHBob25lOicnLFxyXG4gICAgYWRkcmVzczonJyxcclxuICAgIGNpdHk6JycsXHJcbiAgICB6aXA6JycsXHJcbiAgICBjb3VudHJ5OicnLFxyXG4gICAgc2hpcHBpbmc6IDEsXHJcbiAgICBwYXltZW50OiAxXHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnByb2R1Y3RzID0ge307XHJcbiAgJHNjb3BlLm1heF9wcm9kdWN0X2lkID0gMDtcclxuICAkc2NvcGUucHJpY2VzID0ge307XHJcbiAgJHNjb3BlLnNoaXBwaW5ncyA9IHt9O1xyXG4gICRzY29wZS5wYXltZW50cyA9IHt9O1xyXG5cclxuICAkc2NvcGUudG90YWwgPSAwO1xyXG4gICRzY29wZS50b01haW4gPSBmYWxzZTtcclxuXHJcbiAgJHNjb3BlLnJlZ2lzdGVyUHJvZHVjdCA9IGZ1bmN0aW9uKHByb2R1Y3RfaWQsIHByaWNlKSB7XHJcbiAgICAkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0gPSAwO1xyXG4gICAgaWYgKHByb2R1Y3RfaWQgPiAkc2NvcGUubWF4X3Byb2R1Y3RfaWQpXHJcbiAgICAgICAgJHNjb3BlLm1heF9wcm9kdWN0X2lkID0gcHJvZHVjdF9pZDtcclxuICAgICRzY29wZS5wcmljZXNbcHJvZHVjdF9pZF0gPSBwcmljZTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuYWRkUHJvZHVjdCA9IGZ1bmN0aW9uKHByb2R1Y3RfaWQpIHtcclxuICAgIGlmICgkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0gPCA5KVxyXG4gICAgICAkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0rKztcclxuICAgICRzY29wZS5jYWxjdWxhdGVTdW1tKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmRlZHVjdFByb2R1Y3QgPSBmdW5jdGlvbihwcm9kdWN0X2lkKSB7XHJcbiAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW3Byb2R1Y3RfaWRdID4gMClcclxuICAgICAgJHNjb3BlLnByb2R1Y3RzW3Byb2R1Y3RfaWRdLS07XHJcbiAgICAkc2NvcGUuY2FsY3VsYXRlU3VtbSgpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZWdpc3RlclNoaXBwaW5nID0gZnVuY3Rpb24oc2hpcHBpbmdfaWQsIHByaWNlKSB7XHJcbiAgICAkc2NvcGUuc2hpcHBpbmdzW3NoaXBwaW5nX2lkXSA9IHByaWNlO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5zZXRTaGlwcGluZyA9IGZ1bmN0aW9uKHNoaXBwaW5nX2lkLCBlKSB7XHJcbiAgICAgICRzY29wZS5vcmRlci5zaGlwcGluZyA9IHNoaXBwaW5nX2lkO1xyXG4gICAgICBpZiAodHlwZW9mIGUgIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5jbGljaygpO1xyXG4gICAgICAkc2NvcGUuY2FsY3VsYXRlU3VtbSgpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5yZWdpc3RlclBheW1lbnQgPSBmdW5jdGlvbihwYXltZW50X2lkLCBhY3Rpb24pIHtcclxuICAgICAgJHNjb3BlLnBheW1lbnRzW3BheW1lbnRfaWRdID0gYWN0aW9uO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5zZXRQYXltZW50ID0gZnVuY3Rpb24ocGF5bWVudF9pZCwgZSkge1xyXG4gICAgICAkc2NvcGUub3JkZXIucGF5bWVudCA9IHBheW1lbnRfaWQ7XHJcbiAgICAgIGlmICh0eXBlb2YgZSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLmNsaWNrKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmNhbGN1bGF0ZVN1bW0gPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5zdW1tID0gMTIwO1xyXG5cclxuICAgICRzY29wZS50b3RhbCA9ICRzY29wZS5zdW1tO1xyXG4gICAgaWYgKCRzY29wZS5vcmRlci5zaGlwcGluZyAmJiB0eXBlb2YgJHNjb3BlLnNoaXBwaW5nc1skc2NvcGUub3JkZXIuc2hpcHBpbmddICE9ICd1bmRlZmluZWQnKVxyXG4gICAgJHNjb3BlLnRvdGFsICs9ICRzY29wZS5zaGlwcGluZ3NbJHNjb3BlLm9yZGVyLnNoaXBwaW5nXTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuYnV5RGVtb0tpdCA9IGZ1bmN0aW9uKG9yZGVyKSB7XHJcbiAgICBpZiAoISRzY29wZS5vcmRlckZvcm0uJHZhbGlkKSB7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmZpZWxkID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRzY29wZS50b01haW4pXHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIG9yZGVyLnByb2R1Y3RzPSRzY29wZS5wcm9kdWN0cztcclxuICAgICAgJGh0dHAucG9zdCgnL3NlcnZpY2UvYnV5RGVtb0tpdCcsIG9yZGVyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgIGlmICgnZW1haWwnID09IGRhdGEuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEubWVzc2FnZTtcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgICAgICRzY29wZS50b01haW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZmluaXNoQnV0dG9uID0gJHNjb3BlLnRvTWFpbk1lc3NhZ2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkZW1vLWtpdC1ibG9jaycpLmFmdGVyKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Zvcm0teW0tcGF5Jykuc3VibWl0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEubWVzc2FnZTtcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgJHNjb3BlLmVycm9yLmZpZWxkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdIZWxwQ29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgY29udGVudFNlcnZpY2UpIHtcclxuXHJcbiAgJHNjb3BlLmVycm9yID0ge307XHJcblxyXG4gICRzY29wZS5zZW5kID0gZnVuY3Rpb24odXNlciwgdmFsaWQpe1xyXG4gICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgdXNlci5lbWFpbCA9IHVzZXIuaGVscF9lbWFpbDtcclxuICAgICRodHRwLnBvc3QoJy9zZXJ2aWNlL3NlbmRRdWVzdGlvbicsIHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAkc2NvcGUudXNlci5uYW1lID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIuaGVscF9lbWFpbCA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLnF1ZXN0aW9uID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIucGhvbmUgPSAnJztcclxuXHJcbiAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgIGNvbnRlbnRTZXJ2aWNlLnZpZXdNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG59KTsiLCIndXNlIHN0cmljdCc7XHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1Bob25lc0NvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSkge1xyXG4gICAgJHNjb3BlLmluaXRQaG9uZXMgPSBmdW5jdGlvbihpbml0VmFsdWUpXHJcbiAgICB7XHJcbiAgICAgICAgJHNjb3BlLnBob25lc0xpc3QgPSBpbml0VmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5pbml0RGV2aWNlcyA9IGZ1bmN0aW9uKGluaXRWYWx1ZSlcclxuICAgIHtcclxuICAgICAgICAkc2NvcGUuZGV2aWNlc0xpc3QgPSBpbml0VmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5waG9uZXNMaXN0ID0gW107XHJcblxyXG4gICAgJHNjb3BlLmRldmljZXNMaXN0ID0gW107XHJcbn0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1NsaWRlQ29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCkge1xyXG5cclxuICAkc2NvcGUuSU1BR0VfV0lEVEggPSAzMDA7XHJcbiAgLy8kc2NvcGUuRkFERV9TUEVFRCA9IDYwMDtcclxuICAkc2NvcGUuRkFERV9TUEVFRCA9IDA7XHJcblxyXG4gICRzY29wZS5nZXRSYW5kb21JbnQgPSBmdW5jdGlvbihtaW4sIG1heCl7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc3BvdHMgPSB7fTtcclxuICAkc2NvcGUuc3BvdHMubmFtZSA9ICdzcG90cyc7XHJcbiAgJHNjb3BlLnNwb3RzLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OlwiMHB4XCJ9O1xyXG4gICRzY29wZS5zcG90cy5zbGlkZXMgPSBbXHJcbiAgICB7aWQ6MSwgaW1nOidicmFjZV9ibHVlLmpwZyd9LFxyXG4gIF07XHJcbiAgXHJcbiAgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMgPSBbMV07XHJcbiAgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNfY3VycmVudCA9ICRzY29wZS5zcG90cy53cmlzdGJhbmRzWzBdO1xyXG4gIFxyXG4gICRzY29wZS5zcG90cy5jYXJkcyA9IFtdO1xyXG4gICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50ICA9IC0xO1xyXG4gIFxyXG4gICRzY29wZS5zcG90cy5rZXlzID0gW107XHJcbiAgJHNjb3BlLnNwb3RzLmtleXNfY3VycmVudCAgPSAtMTtcclxuICBcclxuICAkc2NvcGUuc3BvdHMuY3VycmVudCA9ICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQ7XHJcbiAgJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSA9ICd3cmlzdGJhbmQnO1xyXG4gICRzY29wZS5zcG90cy5jb2xvcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gICRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gIC8vJHNjb3BlLmdldFJhbmRvbUludCgwLCAkc2NvcGUud3Jpc3RiYW5kLnNsaWRlcy5sZW5ndGggLSAxKTtcclxuICBcclxuICAkc2NvcGUuc2Nyb2xsVG8gPSBmdW5jdGlvbihzbGlkZXIsIGluZCkge1xyXG4gICAgc2xpZGVyLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0Oigkc2NvcGUuSU1BR0VfV0lEVEggKiBpbmQgKiAtMSkgKyBcInB4XCJ9O1xyXG4gIH07XHJcbiAgXHJcbiAgYW5ndWxhci5lbGVtZW50KHdpbmRvdykuYmluZCgnbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gIFxyXG4gICAgJHNjb3BlLnNsaWRlckluaXQoKTtcclxuICB9KTtcclxuICBcclxuICAkc2NvcGUuc2xpZGVySW5pdCA9IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAgICRzY29wZS5zcG90cy5zbGlkZXMgPSBbXHJcbiAgICAgICAge2lkOjAsIGltZzonYnJhY2VfYmxhY2sucG5nJ30sXHJcbiAgICAgICAge2lkOjEsIGltZzonYnJhY2VfYmx1ZS5wbmcnfSxcclxuICAgICAgICB7aWQ6MiwgaW1nOidicmFjZV9ncmVlbi5wbmcnfSxcclxuICAgICAgICB7aWQ6MywgaW1nOidicmFjZV9wYXR0MDEucG5nJ30sXHJcbiAgICAgICAge2lkOjQsIGltZzonYnJhY2VfcGF0dDAyLnBuZyd9LFxyXG4gICAgICAgIHtpZDo1LCBpbWc6J2JyYWNlX3BhdHQwMy5wbmcnfSxcclxuICAgICAgICB7aWQ6NiwgaW1nOidicmFjZV9wYXR0MDQucG5nJ30sXHJcbiAgICAgICAge2lkOjcsIGltZzonYnJhY2VfcGF0dDA1LnBuZyd9LFxyXG4gICAgICAgIHtpZDo4LCBpbWc6J2JyYWNlX3BhdHQwNi5wbmcnfSxcclxuICAgICAgICB7aWQ6OSwgaW1nOidicmFjZV9wYXR0MDcucG5nJ30sXHJcbiAgICAgICAge2lkOjEwLCBpbWc6J2JyYWNlX3JlZC5wbmcnfSxcclxuICAgICAgICB7aWQ6MTEsIGltZzonYnJhY2Vfd2hpdGUucG5nJ30sXHJcbiAgICAgICAge2lkOjEyLCBpbWc6J2NhcmRfYmxhY2sucG5nJ30sXHJcbiAgICAgICAge2lkOjEzLCBpbWc6J2NhcmRfYmx1ZS5wbmcnfSxcclxuICAgICAgICB7aWQ6MTQsIGltZzonY2FyZF9ncmVlbi5wbmcnfSxcclxuICAgICAgICB7aWQ6MTUsIGltZzonY2FyZF9yZWQucG5nJ30sXHJcbiAgICAgICAge2lkOjE2LCBpbWc6J2NhcmRfd2hpdGUucG5nJ30sXHJcbiAgICAgICAge2lkOjE3LCBpbWc6J2NhcmRfeWVsbG93LnBuZyd9LFxyXG4gICAgICAgIHtpZDoxOCwgaW1nOidrZXlfYmxhY2sucG5nJ30sXHJcbiAgICAgICAge2lkOjE5LCBpbWc6J2tleV9ibHVlLnBuZyd9LFxyXG4gICAgICAgIHtpZDoyMCwgaW1nOidrZXlfZ3JlZW4ucG5nJ30sXHJcbiAgICAgICAge2lkOjIxLCBpbWc6J2tleV9yZWQucG5nJ30sXHJcbiAgICAgICAge2lkOjIyLCBpbWc6J2tleV93aGl0ZS5wbmcnfSxcclxuICAgICAgICB7aWQ6MjMsIGltZzona2V5X3llbGxvdy5wbmcnfSxcclxuICAgICAgICB7aWQ6MjQsIGltZzonYnJhY2VfeWVsbG93LnBuZyd9LFxyXG4gICAgICBdO1xyXG4gICAgICBcclxuICAgICAgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMgPSBbMCwgMSwgNCwgMiwgMywgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAyNF07XHJcbiAgICAgICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1skc2NvcGUuZ2V0UmFuZG9tSW50KDAsICRzY29wZS5zcG90cy53cmlzdGJhbmRzLmxlbmd0aCAtIDEpXTtcclxuICAgICAgXHJcbiAgICAgICRzY29wZS5zcG90cy5jYXJkcyA9IFsxMiwgMTMsIDE0LCAxNSwgMTYsIDE3XTtcclxuICAgICAgJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQgID0gMTU7XHJcbiAgICAgIFxyXG4gICAgICAkc2NvcGUuc3BvdHMua2V5cyA9IFsxOCwgMTksIDIwLCAyMSwgMjIsIDIzXTtcclxuICAgICAgJHNjb3BlLnNwb3RzLmtleXNfY3VycmVudCAgPSAyMDsgIFxyXG4gICAgICBcclxuICAgICAgJHNjb3BlLnNwb3RzLmluaXRlZCA9IHRydWU7XHJcbiAgXHJcbiAgfVxyXG4gIFxyXG5cclxuICAkc2NvcGUuZmFkZVRvID0gZnVuY3Rpb24oc2xpZGVyLCBpbmQpIHtcclxuICAgIGlmIChzbGlkZXIuY3VycmVudCA9PSBpbmQpIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5lbGVtZW50KFwiI3NsaWRlci1cIiArIHNsaWRlci5uYW1lICsgXCIgLmYtc2xpZGVcIikuc3RvcCgpO1xyXG4gICAgdmFyIGlkID0gXCIjXCIgKyBzbGlkZXIubmFtZSArIFwiX1wiICsgaW5kO1xyXG4gICAgaWYgKCFhbmd1bGFyLmVsZW1lbnQoaWQpLmxlbmd0aClcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICBzbGlkZXIuY3VycmVudCA9IGluZDtcclxuICAgIGFuZ3VsYXIuZWxlbWVudChcIiNzbGlkZXItXCIgKyBzbGlkZXIubmFtZSArIFwiIC5mLXNsaWRlW2lkIT1cIiAraWQgK1wiXVwiKS5mYWRlT3V0KDApO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KGlkKS5mYWRlSW4oJHNjb3BlLkZBREVfU1BFRUQpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5mYWRlVG9XaXN0YnJhbmRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJHNjb3BlLmZhZGVUbygkc2NvcGUuc3BvdHMsICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQpKVxyXG4gICAgICAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlID0gJ3dyaXN0YmFuZCc7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuZmFkZVRvQ2FyZHMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkc2NvcGUuZmFkZVRvKCRzY29wZS5zcG90cywgJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQpKVxyXG4gICAgICAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlID0gJ2NhcmQnO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmZhZGVUb0tleXMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkc2NvcGUuZmFkZVRvKCRzY29wZS5zcG90cywgJHNjb3BlLnNwb3RzLmtleXNfY3VycmVudCkpXHJcbiAgICAgICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUgPSAna2V5JztcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5zdGFydENvbG9ycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCRzY29wZS5zcG90cy5jb2xvcl9yb3RhdGlvbilcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAkc2NvcGUuc3BvdHMuY29sb3Jfcm90YXRpb24gPSB0cnVlO1xyXG4gICAgICAgIFxyXG4gICAgaWYgKCRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbilcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgICRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbiA9IHRydWU7XHJcbiAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICRzY29wZS5jb2xvclJvdGF0aW9uKCk7XHJcbiAgICB9LCAxMDApO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnN0b3BDb2xvcnMgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5zcG90cy5jb2xvcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmNvbG9yUm90YXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICghJHNjb3BlLnNwb3RzLmNvbG9yX3JvdGF0aW9uKSB7XHJcbiAgICAgICRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAgXHJcbiAgICBpZiAoJ3dyaXN0YmFuZCcgPT0gJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSkge1xyXG4gICAgICAgIHZhciBjdXJyZW50X2luZCA9IC0xO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1tpXSA9PSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50KVxyXG4gICAgICAgICAgICAgIGN1cnJlbnRfaW5kID0gaTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRfaW5kIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICgoJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMubGVuZ3RoIC0gMSkgPT0gY3VycmVudF9pbmQpXHJcbiAgICAgICAgICAgICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1swXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNbY3VycmVudF9pbmQgKyAxXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZhZGVUb1dpc3RicmFuZHMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCdjYXJkJyA9PSAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRfaW5kID0gLTE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3BvdHMuY2FyZHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdHMuY2FyZHNbaV0gPT0gJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQpXHJcbiAgICAgICAgICAgICAgY3VycmVudF9pbmQgPSBpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudF9pbmQgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCgkc2NvcGUuc3BvdHMuY2FyZHMubGVuZ3RoIC0gMSkgPT0gY3VycmVudF9pbmQpXHJcbiAgICAgICAgICAgICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLmNhcmRzWzBdO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLmNhcmRzW2N1cnJlbnRfaW5kICsgMV07XHJcblxyXG4gICAgICAgICRzY29wZS5mYWRlVG9DYXJkcygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoJ2tleScgPT0gJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSkge1xyXG4gICAgICAgIHZhciBjdXJyZW50X2luZCA9IC0xO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNwb3RzLmtleXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdHMua2V5c1tpXSA9PSAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50KVxyXG4gICAgICAgICAgICAgIGN1cnJlbnRfaW5kID0gaTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRfaW5kIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICgoJHNjb3BlLnNwb3RzLmtleXMubGVuZ3RoIC0gMSkgPT0gY3VycmVudF9pbmQpXHJcbiAgICAgICAgICAgICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMua2V5c1swXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLmtleXNbY3VycmVudF9pbmQgKyAxXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZhZGVUb0tleXMoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbiA9IHRydWU7XHJcbiAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgJHNjb3BlLmNvbG9yUm90YXRpb24oKTtcclxuICAgfSwgMTMwMCk7XHJcbiBcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5yYW5kb21TbGlkZSA9IGZ1bmN0aW9uKHNsaWRlcikge1xyXG4gICAgJHNjb3BlLmZhZGVUbyhzbGlkZXIsICRzY29wZS5nZXRSYW5kb21JbnQoMCwgc2xpZGVyLnNsaWRlcy5sZW5ndGggLSAxKSk7XHJcbiAgfTtcclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignU3BvdENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UsIGRpYWxvZ1NlcnZpY2UpIHtcclxuXHJcbi8qINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0LXRgNC10LzQtdC90L3Ri9GFICovXHJcblxyXG4gICRzY29wZS5tYXhTaXplID0gMjUqMTAyNCoxMDI0O1xyXG4gICRzY29wZS5wcm9ncmVzcyA9IDA7XHJcbiAgJHNjb3BlLmtleXMgPSBbXTtcclxuICAkc2NvcGUuYWN0aW9uID0gZmFsc2U7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG4gICRzY29wZS5yZXN1bHQgPSB7fTtcclxuXHJcbiAgJHNjb3BlLnNwb3QgPSB7fTtcclxuICAkc2NvcGUuc3BvdC5kaXNjb2RlcyA9IDA7XHJcblxyXG4gICRzY29wZS5nZW5lcmFsID0ge307XHJcbiAgJHNjb3BlLmdlbmVyYWwudmlld3MgPSBmYWxzZTtcclxuICAkc2NvcGUuaG9zdF9tb2JpbGUgPSAwO1xyXG5cclxuICAkc2NvcGUud2FsbGV0ID0ge307XHJcbiAgJHNjb3BlLndhbGxldC5jYXJkcyA9IHt9O1xyXG5cclxuICAkc2NvcGUuc2Nyb2xsX2tleSA9IC0xO1xyXG5cclxuICAkc2NvcGUuYWN0aW9ucyA9IHt9O1xyXG4gICRzY29wZS5hY3Rpb25zLnBhZ2UgPSAnJztcclxuICAkc2NvcGUuYWN0aW9ucy5waHJhc2UgPSAnJztcclxuICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICRzY29wZS5hY3Rpb25zLm9mZnNldCA9IDA7XHJcbiAgJHNjb3BlLmFjdGlvbnMuY291bnRfYWxsID0gMDtcclxuICBcclxuICAkc2NvcGUudGV4dCA9IHt9O1xyXG4gIFxyXG4gICRzY29wZS50cmFuc3BvcnRfdHlwZXMgPSBbXTtcclxuICAkc2NvcGUuY3VzdG9tX2NhcmQgPSB7fTtcclxuICAkc2NvcGUucHJldl9jdXN0b21fY2FyZCA9IHt9O1xyXG4gICRzY29wZS5zZWxlY3RlZF90eXBlPXt9O1xyXG4gICRzY29wZS5pbl9yZXF1ZXN0ID0gZmFsc2U7XHJcbiAgJHNjb3BlLndhbGxldF9oaXN0b3J5ID0ge31cclxuICAkc2NvcGUud2FsbGV0X2hpc3RvcnkuZGF0ZSA9ICcnO1xyXG4gICRzY29wZS53YWxsZXRfaGlzdG9yeS5lbXB0eV9kYXRlID0gZmFsc2U7XHJcbiAgJHNjb3BlLmRhdGVfaGlzdG9yeV9zaG93biA9IGZhbHNlO1xyXG4gIFxyXG4vKiBDUlVEINC00LvRjyDRgdC/0L7RgtCwICovXHJcblxyXG4gIC8v0KLRgNC40LPQtdGAINC90LAg0YHQvdGP0YLQuNC1INC+0YjQuNCx0LrQuCDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC/0L7Qu9GPXHJcbiAgJHNjb3BlLiR3YXRjaCgnc3BvdC5jb2RlICsgc3BvdC50ZXJtcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmVycm9yLmNvZGUgPSBmYWxzZTtcclxuICAgICRzY29wZS5lcnJvci50ZXJtcyA9IGZhbHNlO1xyXG4gIH0pO1xyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDRgdC/0L7RgtCwXHJcbiAgJHNjb3BlLmFkZFNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICBpZiAoIXNwb3QuY29kZSkge1xyXG4gICAgICAgICRzY29wZS5lcnJvci5jb2RlID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICghJHNjb3BlLnNwb3QudGVybXMpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9hZGQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgJHNjb3BlLnNwb3QuZGlzY29kZXMgPSBkYXRhLmRpc2NvZGVzO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtbGlzdCcpLnByZXBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhY3RTcG90JykuY2xpY2soKTtcclxuICAgICAgICBkZWxldGUgJHNjb3BlLnNwb3QuY29kZTtcclxuICAgICAgICBkZWxldGUgJHNjb3BlLnNwb3QudGVybXM7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X21vYmlsZSB8fCAxPT1zcG90Lm5lZWRfcmVsb2FkKVxyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICcvc3BvdC9saXN0JztcclxuICAgICAgfWVsc2UgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuY29kZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0KPQv9GA0LDQstC70LXQvdC40LUg0L7RgdC90L7QstC90YvQvNC4INCx0LvQvtC60LDQvNC4INGB0L/QvtGCLCDQutC+0YjQtdC70LXQuiwg0LrRg9C/0L7QvdGLLlxyXG4gICRzY29wZS4kd2F0Y2goJ2dlbmVyYWwudmlld3MgKyBzcG90LmRpc2NvZGVzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5wYWdlID0gJyc7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQod2luZG93KS51bmJpbmQoJ3Njcm9sbCcsICRzY29wZS5sb2FkTW9yZUNvdXBvbnMpO1xyXG5cclxuICAgIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnc3BvdCcpe1xyXG4gICAgICAkc2NvcGUudmlld1Nwb3QoJHNjb3BlLnNwb3QpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnd2FsbGV0Jyl7XHJcbiAgICAgICRzY29wZS52aWV3V2FsbGV0KCRzY29wZS5zcG90KTtcclxuICAgIH0gZWxzZSBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ2NvdXBvbicpe1xyXG4gICAgICAkc2NvcGUudmlld0NvdXBvbnMoJHNjb3BlLnNwb3QsICRzY29wZS5hY3Rpb25zKTtcclxuICAgIH0gZWxzZSBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ3NldHRpbmdzJyl7XHJcbiAgICAgICRzY29wZS52aWV3c1NldHRpbmdzKCRzY29wZS5zcG90KTtcclxuICAgIH0gZWxzZSBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ3RyYW5zcG9ydCcpe1xyXG4gICAgICAkc2NvcGUudmlld1RyYW5zcG9ydCgkc2NvcGUuc3BvdCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICRzY29wZS5ib2R5TWluSGVpZ2h0ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBsaXN0SGVpZ2h0ID0gYW5ndWxhci5lbGVtZW50KCcuc3BvdC1saXN0JykuaGVpZ2h0KCk7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWNvbnRlbnQnKS5jc3MoJ21pbi1oZWlnaHQnLCBsaXN0SGVpZ2h0KzIwMCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnZpZXdTcG90ID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIGlmIChzcG90LmRpc2NvZGVzID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC92aWV3Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmtleXMgPSBbXTtcclxuICAgICAgICAkc2NvcGUuY29udGVudF9pdGVyYXRpb24gPSAwO1xyXG4gICAgICAgICRzY29wZS5maWxlVXBsb2FkSW5pdCgpO1xyXG5cclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnNjcm9sbF9rZXkgJiYgJHNjb3BlLnNjcm9sbF9rZXkgPiAxKVxyXG4gICAgICAgICAgY29udGVudFNlcnZpY2Uuc2Nyb2xsUGFnZSgnI2Jsb2NrLScgKyAkc2NvcGUuc2Nyb2xsX2tleSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgY29udGVudFNlcnZpY2Uuc2Nyb2xsUGFnZSgnYm9keScpO1xyXG4gICAgICAgICRzY29wZS5zY3JvbGxfa2V5ID0gLTE7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0LPQviDQsdC70L7QutCwINCyINGB0L/QvtGCXHJcbiAgJHNjb3BlLmFkZENvbnRlbnQgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5hZGRWYWx1ZSgkc2NvcGUuc3BvdC5jb250ZW50KTtcclxuICB9O1xyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC10L/RgNC40LLRj9C30LDQvdC90L7Qs9C+INC6INGB0L7RhtGB0LXRgtGP0Lwg0LrQvtC90YLQtdC90YLQsFxyXG4gICRzY29wZS5hZGRWYWx1ZSA9IGZ1bmN0aW9uKG5ld1ZhbHVlKXtcclxuICAgICRzY29wZS5zcG90LmNvbnRlbnQgPSBuZXdWYWx1ZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3Nwb3RBZGRDb250ZW50JywgJHNjb3BlLnNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3BvdC5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICRzY29wZS5zcG90LmNvbnRlbnQgPSAnJztcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ3RleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ3B1dCcpO1xyXG5cclxuICAgICAgICBpZiAoYW5ndWxhci5lbGVtZW50KCcjZXh0cmFNZWRpYUZvcm0nKS5oYXNDbGFzcygnb3BlbicpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybScpLnNsaWRlVXAoMCwgZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybSBhJykucmVtb3ZlQ2xhc3MoJ2JsYWNrb3V0Jyk7YW5ndWxhci5lbGVtZW50KCcjZXh0cmFNZWRpYUZvcm0gYScpLmZhZGVUbygwLCAxKTt9KTtcclxuICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybScpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9IGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBkYXRhLmtleSkub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkc2NvcGUucmVzZXRDdXJzb3IoKTtcclxuICB9O1xyXG5cclxuICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L/QvtGA0Y/QtNC+0Log0LHQu9C+0LrQvtCyXHJcbiAgJHNjb3BlLnNhdmVPcmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc2F2ZU9yZGVyJywgJHNjb3BlLnNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0LDRgNCw0LzQtdGC0YDRiyDRgdC+0YDRgtC40YDQvtCy0LrQuFxyXG4gICRzY29wZS5zb3J0YWJsZU9wdGlvbnMgPSB7XHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAkc2NvcGUuc2F2ZU9yZGVyKCk7XHJcbiAgICB9LFxyXG4gICAgJ2NvbnRhaW5tZW50JzonLnNwb3QtY29udGVudCcsXHJcbiAgICAnaGFuZGxlJzogJy5tb3ZlJyxcclxuICAgICdzY3JvbGxTZW5zaXRpdml0eSc6IDUsXHJcbiAgICAndG9sZXJhbmNlJzogJ3BvaW50ZXInLFxyXG4gICAgJ29wYWNpdHknOjAuOFxyXG4gIH07XHJcblxyXG4gIC8vINCj0LTQsNC70LXQvdC40LUg0LHQu9C+0LrQsCDQsiDRgdC/0L7RgtC1XHJcbiAgJHNjb3BlLnJlbW92ZUNvbnRlbnQgPSBmdW5jdGlvbihzcG90LCBrZXksIGUpIHtcclxuICAgIHNwb3Qua2V5ID0ga2V5O1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc3BvdFJlbW92ZUNvbnRlbnQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgdmFyIHNwb3RJdGVtID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgICAgIHNwb3RJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgICRzY29wZS5rZXlzPWRhdGEua2V5cztcclxuICAgICAgICBpZiAoZGF0YS5uZXREb3duKVxyXG4gICAgICAgICAgICAkc2NvcGUubmV0RG93bihkYXRhLm5ldERvd24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INGC0LXQutGB0YLQvtCy0L7Qs9C+INCx0LvQvtC60LAg0LIg0YHQv9C+0YLQtVxyXG4gICRzY29wZS5lZGl0Q29udGVudCA9IGZ1bmN0aW9uKHNwb3QsIGtleSwgZSkge1xyXG4gICAgaWYgKCFzcG90LmNvbnRlbnRfbmV3KXtcclxuICAgICAgc3BvdC5rZXkgPSBrZXk7XHJcbiAgICAgIHZhciBzcG90SXRlbSA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1lZGl0JykuY2xvbmUoKTtcclxuXHJcbiAgICAgIGlmIChzcG90SXRlbS5maW5kKCdhLnR5cGUtbGluaycpLnNpemUoKSA+IDApe1xyXG4gICAgICAgICAgLy/RgdGB0YvQu9C60LBcclxuICAgICAgICAgIHZhciBzcG90TGluayA9IHNwb3RJdGVtLmZpbmQoJ2EudHlwZS1saW5rJyk7XHJcbiAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50X25ldyA9IHNwb3RMaW5rLmZpbmQoJ3NwYW4ubGluaycpLnRleHQoKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAvL9GC0LXQutGB0YJcclxuICAgICAgICAgIHZhciBzcG90RGF0YSA9IHNwb3RJdGVtLmZpbmQoJ3AuaXRlbS10eXBlX190ZXh0Jyk7XHJcbiAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50X25ldyA9IHNwb3REYXRhLnRleHQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3BvdEVkaXQucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgc3BvdEVkaXQuZmluZCgndGV4dGFyZWEnKS5mb2N1cygxKTtcclxuICAgICAgc3BvdEl0ZW0uaGlkZSgpLmJlZm9yZSgkY29tcGlsZShzcG90RWRpdCkoJHNjb3BlKSk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgICRzY29wZS5oaWRlU3BvdEVkaXQoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQodC+0YXRgNCw0L3QtdC90LjQtSDRgtC10LrRgdGC0L7QstC+0LPQviDQsdC70L7QutCwINCyINGB0L/QvtGC0LVcclxuICAkc2NvcGUuc2F2ZUNvbnRlbnQgPSBmdW5jdGlvbihzcG90LCBlKSB7XHJcbiAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICB2YXIgc3BvdEl0ZW0gPSBzcG90RWRpdC5uZXh0KCk7XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc3BvdFNhdmVDb250ZW50Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBkZWxldGUgJHNjb3BlLnNwb3QuY29udGVudF9uZXc7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQn9GA0Y/Rh9C10Lwg0YLQtdC60YHRgtC+0LLRi9C5INCx0LvQvtC6INC/0YDQuCDQutC70LjQutC1INCy0L3QtSwg0LTQsNC90L3Ri9C1INGB0L7RhdGA0LDQvdGP0LXQvFxyXG4gICRzY29wZS5oaWRlU3BvdEVkaXQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICghJHNjb3BlLnNwb3QuY29udGVudCAmJiAhJHNjb3BlLnNwb3QuY29udGVudF9uZXcpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWVkaXQnKTtcclxuICAgIHZhciBzcG90SXRlbSA9IHNwb3RFZGl0Lm5leHQoKTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zcG90U2F2ZUNvbnRlbnQnLCAkc2NvcGUuc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBkZWxldGUgJHNjb3BlLnNwb3QuY29udGVudF9uZXc7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQn9C10YDQtdC40LzQtdC90L7QstGL0LLQsNC10Lwg0YHQv9C+0YJcclxuICAkc2NvcGUucmVuYW1lU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIGlmICghc3BvdC5uYW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9yZW5hbWUnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjJyArIHNwb3QuZGlzY29kZXMgKyAnIGgzJykudGV4dChzcG90Lm5hbWUpO1xyXG4gICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmNvbnRlbnQsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQntGH0LjRidCw0LXQvCDRgdC/0L7RglxyXG4gICRzY29wZS5jbGVhblNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICBkaWFsb2dTZXJ2aWNlLnllc05vRGlhbG9nKGZ1bmN0aW9uKGRpYWxvZ19yZXN1bHQpIHtcclxuICAgICAgaWYgKGRpYWxvZ19yZXN1bHQgIT0gJ3llcycpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvY2xlYW4nLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgICRzY29wZS5nZW5lcmFsLnZpZXdzID0gJ3Nwb3QnO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7ICBcclxuICAgIH0sXHJcbiAgICAkc2NvcGUudGV4dC55ZXNfYnRuLFxyXG4gICAgJHNjb3BlLnRleHQubm9fYnRuLFxyXG4gICAgJHNjb3BlLnRleHQuY2xlYW5fc3BvdCxcclxuICAgICduZWdhdGl2ZSdcclxuICAgICk7ICBcclxuICB9O1xyXG5cclxuICAvLyDQo9C00LDQu9GP0LXQvCDRgdC/0L7RglxyXG4gICRzY29wZS5yZW1vdmVTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgZGlhbG9nU2VydmljZS55ZXNOb0RpYWxvZyhmdW5jdGlvbihkaWFsb2dfcmVzdWx0KSB7XHJcbiAgICAgIGlmIChkaWFsb2dfcmVzdWx0ICE9ICd5ZXMnKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICBcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvc3BvdC9saXN0LycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgJHNjb3BlLnRleHQueWVzX2J0bixcclxuICAgICRzY29wZS50ZXh0Lm5vX2J0bixcclxuICAgICRzY29wZS50ZXh0LnJtX3Nwb3QsXHJcbiAgICAnbmVnYXRpdmUnXHJcbiAgICApOyAgXHJcbiAgfTtcclxuXHJcbiAgLy8g0JzQtdC90Y/QtdC8INGB0YLQsNGC0YPRgSDRgdC/0L7RgtCwXHJcbiAgJHNjb3BlLml2aXNpYmxlU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIHZhciB0aXRsZSA9ICRzY29wZS50ZXh0Lm1rX2ludmlzaWJsZTtcclxuICAgIHZhciBkZXNjciA9ICRzY29wZS50ZXh0Lm1rX2ludmlzaWJsZV9kZXNjcjtcclxuXHJcbiAgICBpZiAoc3BvdC5zdGF0dXMgPT0gNikge1xyXG4gICAgICAgIHRpdGxlID0gJHNjb3BlLnRleHQubWtfdmlzaWJsZTtcclxuICAgICAgICBkZXNjciA9ICRzY29wZS50ZXh0Lm1rX3Zpc2libGVfZGVzY3I7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBkaWFsb2dTZXJ2aWNlLnllc05vRGlhbG9nKGZ1bmN0aW9uKGRpYWxvZ19yZXN1bHQpIHtcclxuICAgICAgaWYgKGRpYWxvZ19yZXN1bHQgIT0gJ3llcycpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvc3BvdC9pbnZpc2libGUnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgICRzY29wZS5zcG90LnN0YXR1cyA9IGRhdGEuc3RhdHVzO1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjJytzcG90LmRpc2NvZGVzKS50b2dnbGVDbGFzcygnaW52aXNpYmxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAkc2NvcGUudGV4dC55ZXNfYnRuLFxyXG4gICAgJHNjb3BlLnRleHQubm9fYnRuLFxyXG4gICAgdGl0bGUsXHJcbiAgICAnbmVnYXRpdmUnXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0L7QutC90LAg0L3QsNGB0YLRgNC+0LXQulxyXG4gICRzY29wZS52aWV3c1NldHRpbmdzID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc2V0dGluZ3MnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvtGI0LXQu9GM0LrQsFxyXG4gICRzY29wZS52aWV3V2FsbGV0ID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvd2FsbGV0Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldExpc3RDYXJkKCk7XHJcblxyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZGF0ZV9oaXN0b3J5JykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgICB5ZWFyUmFuZ2U6ICcxOTAwOi0wJyxcclxuICAgICAgICAgIG1heERhdGU6MCxcclxuICAgICAgICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXHJcbiAgICAgICAgICBvblNlbGVjdDogZnVuY3Rpb24gKGRhdGVUZXh0LCBpbnN0KSB7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS53YWxsZXRfaGlzdG9yeS5kYXRlID0gZGF0ZVRleHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIChkYXRlVGV4dCwgaW5zdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0ZV9oaXN0b3J5X3Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRzY29wZS52aWV3U3BvdCgkc2NvcGUuc3BvdCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG5cclxuICAvLyDQntGC0L7QsdGA0LDQttC10L3QuNC1INC60YPQv9C+0L3QvtCyXHJcbiAgJHNjb3BlLnZpZXdDb3Vwb25zID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvY291cG9ucycsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBzcG90X2Jsb2NrLmVtcHR5KCk7XHJcbiAgICAgICAgc3BvdF9ibG9jay5odG1sKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgJHNjb3BlLmJvZHlNaW5IZWlnaHQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWNvbnRlbnRfcm93Jykuc2hvdygpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgIH0sNTAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuICBcclxuICAvLyDQntGC0L7QsdGA0LDQttC10L3QuNC1INCy0LrQu9Cw0LTQutC4INCi0YDQsNC90YHQv9C+0YDRglxyXG4gICRzY29wZS52aWV3VHJhbnNwb3J0ID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvdHJhbnNwb3J0Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL0PQv9C40YHQvtC6INC60YPQv9C+0L3QvtCyXHJcbiAgJHNjb3BlLmxpc3RDb3Vwb25zID0gZnVuY3Rpb24gKHNwb3QsIGFjdGlvbnMpIHtcclxuICAgIGlmICghYWN0aW9ucy5wYWdlKSByZXR1cm4gZmFsc2U7XHJcbiAgICB2YXIgbGlzdCA9IGFuZ3VsYXIuZWxlbWVudCgnI2NvdXBvbnMtbGlzdCcpO1xyXG5cclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6IHNwb3QuZGlzY29kZXMsICd0b2tlbic6IHNwb3QudG9rZW4sICdwYWdlJzogYWN0aW9ucy5wYWdlLCAncGhyYXNlJzogYWN0aW9ucy5waHJhc2UsICdvZmZzZXQnOmFjdGlvbnMub2Zmc2V0fTtcclxuXHJcbiAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IHRydWU7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9saXN0Q291cG9ucycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgKz0gZGF0YS5jb3VudDtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSBkYXRhLmNvdW50X2FsbDtcclxuXHJcbiAgICAgICAgbGlzdC5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KS5lcnJvcihmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICB9O1xyXG5cclxuICAkc2NvcGUuZmlsdGVyQ291cG9ucyA9IGZ1bmN0aW9uKHNwb3QsIGFjdGlvbnMpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLm9mZnNldCA9IDA7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSAwO1xyXG4gICAgJHNjb3BlLmxpc3RDb3Vwb25zKHNwb3QsIGFjdGlvbnMpO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0L/QuNGB0L7QuiDQutCw0YDRglxyXG4gICRzY29wZS5nZXRMaXN0Q2FyZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgIT0gJ3dhbGxldCcpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2xpc3RDYXJkJywgJHNjb3BlLndhbGxldCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHMgPSBkYXRhLmNhcmRzO1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHNfY291bnQgPSBkYXRhLmNhcmRzX2NvdW50O1xyXG4gICAgICAgICRzY29wZS53YWxsZXQubGlua2luZ19jYXJkID0gZGF0YS5saW5raW5nX2NhcmQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICRzY29wZS5nZXRMaXN0Q2FyZCgpO1xyXG4gICB9LCA1MDAwKTtcclxuICB9O1xyXG5cclxuICAvL9Ce0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQsNGB0YLQvtC80L3QvtCz0L4g0LzQsNC60LXRgtCwINGC0YDQsNC90YHQv9C+0YLRgNC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNob3dDdXN0b21DYXJkID0gZnVuY3Rpb24oKXtcclxuICAgICQoJyNjdXN0b21DYXJkJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaGlkZUN1c3RvbUNhcmQgPSBmdW5jdGlvbigpe1xyXG4gICAgJCgnI2N1c3RvbUNhcmQnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINCR0LvQvtC60LjRgNC+0LLQutCwINC60L7RiNC10LvRjNC60LBcclxuICAkc2NvcGUuYmxvY2tlZFdhbGxldCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9ibG9ja2VkV2FsbGV0JywgJHNjb3BlLndhbGxldCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuc3RhdHVzID0gZGF0YS5zdGF0dXM7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0LfQsNC/0YDQvtGB0LAg0L3QsCDQv9GA0LjQstGP0LfQutGDINC60LDRgNGC0YtcclxuICAkc2NvcGUubGlua2luZ0NhcmQgPSBmdW5jdGlvbihjYXJkKXtcclxuICAgIGlmICghY2FyZC50ZXJtcykgcmV0dXJuIGZhbHNlO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KFwiI2xpbmtpbmdfY2FyZFwiICkuc3VibWl0KCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0JTQtdC70LDQtdC8INC60LDRgNGC0YMg0L/Qu9Cw0YLQtdC20L3QvtC5XHJcbiAgJHNjb3BlLnNldFBheW1lbnRDYXJkID0gZnVuY3Rpb24oY2FyZF9pZCwgZSl7XHJcbiAgICBpZiAoJHNjb3BlLmluX3JlcXVlc3QpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgdmFyIGRhdGEgPSB7J3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdjYXJkX2lkJzogY2FyZF9pZH07XHJcbiAgICAkc2NvcGUuaW5fcmVxdWVzdCA9IHRydWU7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zZXRQYXltZW50Q2FyZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5tYWluLWNhcmQnKS5yZW1vdmVDbGFzcygnbWFpbi1jYXJkJyk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoJ21haW4tY2FyZCcpO1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuYmxhY2tsaXN0ID0gMTtcclxuICAgICAgfVxyXG4gICAgICAkc2NvcGUuaW5fcmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3IpeyRzY29wZS5pbl9yZXF1ZXN0ID0gZmFsc2U7fSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmVkaXRDYXJkTGlzdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkKCcudGFibGUtY2FyZCcpLnRvZ2dsZUNsYXNzKCdlZGl0Jyk7XHJcblxyXG4gICAgaWYgKCRzY29wZS53YWxsZXQuY2FyZF9lZGl0ID09PSAwKSB7XHJcbiAgICAgICRzY29wZS53YWxsZXQuY2FyZF9lZGl0ID0gMTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICRzY29wZS53YWxsZXQuY2FyZF9lZGl0ID0gMDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQo9C00LDQu9GP0LXQvCDQutCw0YDRgtGDXHJcbiAgJHNjb3BlLnJlbW92ZUNhcmQgPSBmdW5jdGlvbihjYXJkX2lkKXtcclxuICAgIHZhciBkYXRhID0geyd0b2tlbic6ICRzY29wZS5zcG90LnRva2VuLCAnY2FyZF9pZCc6IGNhcmRfaWR9O1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlQ2FyZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUud2FsbGV0LmNhcmRzX2NvdW50IC09IDE7XHJcbiAgICAgICAgZGVsZXRlICRzY29wZS53YWxsZXQuY2FyZHNbY2FyZF9pZF07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0YfQtdGC0YfQuNC6INC90LAg0YHRgtGA0LDQvdC40YbQtSDRgdC+0LPQu9Cw0YjQtdC90LjRjyDQvtCxINC+0L/Qu9Cw0YLQtVxyXG4gIHZhciBzdG9wcGVkO1xyXG4gICRzY29wZS5jb3VudFJlc2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUucmVzZXRfdGltZSA9IHR5cGVvZiAkc2NvcGUucmVzZXRfdGltZSAhPT0gJ3VuZGVmaW5lZCcgPyAkc2NvcGUucmVzZXRfdGltZTozMDtcclxuICAgIHN0b3BwZWQgPSAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCRzY29wZS5yZXNldF90aW1lID09PSAwKSB7XHJcbiAgICAgICAgJChsb2NhdGlvbikuYXR0cignaHJlZicsd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcclxuICAgICAgfSBlbHNlICRzY29wZS5yZXNldF90aW1lLS07XHJcbiAgICAgICRzY29wZS5jb3VudFJlc2V0KCk7XHJcbiAgICB9LCAxMDAwKTtcclxuICB9O1xyXG5cclxuXHJcbi8q0JfQsNCz0YDRg9C30LrQsCDRhNCw0LnQu9C+0LIgKi9cclxuXHJcbiAgLy8g0JLQtdGI0LDQtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LTQu9GPINC30LDQs9GA0YPQt9C60Lgg0YTQsNC50LvQvtCyXHJcbiAgJHNjb3BlLmZpbGVVcGxvYWRJbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGZpbGVfZHJhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcm9wYm94Jyk7XHJcbiAgICB2YXIgZmlsZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZpbGUnKTtcclxuICAgIGlmIChmaWxlX2RyYWcgJiYgZmlsZV9idXR0b24pIHtcclxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICBpZiAoeGhyLnVwbG9hZCkge1xyXG4gICAgICAgIGZpbGVfZHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZpbGVEcmFnSG92ZXIsIGZhbHNlKTtcclxuICAgICAgICBmaWxlX2RyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgZmlsZURyYWdIb3ZlciwgZmFsc2UpO1xyXG4gICAgICAgIGZpbGVfZHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZmlsZVNlbGVjdEhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICBmaWxlX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmaWxlU2VsZWN0SGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0JfQsNC60LDRh9C60LAg0YTQsNC50LvQsCBodG1sNVxyXG4gIGZ1bmN0aW9uIGZpbGVEcmFnSG92ZXIoZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChlLnR5cGUgPT0gJ2RyYWdvdmVyJyl7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Ryb3Bib3gnKS5hZGRDbGFzcygnaG92ZXInKTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjZHJvcGJveCcpLnJlbW92ZUNsYXNzKCdob3ZlcicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGZ1bmN0aW9uIGZpbGVTZWxlY3RIYW5kbGVyKGUpIHtcclxuICAgIGZpbGVEcmFnSG92ZXIoZSk7XHJcbiAgICB2YXIgZmlsZXMgPSBlLnRhcmdldC5maWxlcyB8fCBlLmRhdGFUcmFuc2Zlci5maWxlcztcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgZjsgZiA9IGZpbGVzW2ldOyBpKyspIHtcclxuICAgICAgJHNjb3BlLnVwbG9hZEZpbGUoZik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQntGC0L7QsdGA0LDQttCw0LXQvCDQv9GA0L7Qs9GA0LXRgdGBINCx0LDRgCDQuCDQv9GA0L7Qu9C40YHRgtGL0LLQsNC10Lwg0Y3QutGA0LDQvSDQuiDQvdC+0LLQvtC80YMg0LHQu9C+0LrRg1xyXG4gICRzY29wZS51cGxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciByZXN1bHQgPSBlLnRhcmdldC5yZXNwb25zZVRleHQ7XHJcbiAgICBpZiAocmVzdWx0KXtcclxuICAgICAgdmFyIGRhdGEgPSBhbmd1bGFyLmZyb21Kc29uKHJlc3VsdCk7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Byb2dyZXNzLWNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWRkLWNvbnRlbnQnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUua2V5cy5wdXNoKGRhdGEua2V5KTtcclxuXHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWRkLWZpbGUnKS52YWwoJycpO1xyXG5cclxuICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoJyNibG9jay0nICsgZGF0YS5rZXkpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsX2hlaWdodFxyXG4gICAgICAgIH0sIDYwMCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQodC70YPRh9Cw0LnQvdGL0Lwg0L7QsdGA0LDQt9C+0Lwg0LPQtdC90LXRgNC40YDRg9C10Lwg0LfQvdCw0YfQtdC90LjQtSDQtNC70Y8g0Y3RhNGE0LXQutGC0LAg0LfQsNCz0YDRg9C30LrQuFxyXG4gIGZ1bmN0aW9uIHVwbG9hZFByb2dyZXNzKGV2dCkge1xyXG4gICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xyXG4gICAgICBpZiAoZXZ0Lmxlbmd0aENvbXB1dGFibGUpIHtcclxuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IE1hdGgucm91bmQoZXZ0LmxvYWRlZCAqIDEwMCAvIGV2dC50b3RhbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAndW5hYmxlIHRvIGNvbXB1dGUnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vINCU0LXQudGB0YLQstC40LUg0LXRgdC70Lgg0LfQsNCz0YDRg9C30LrQsCDQvdC1INGD0LTQsNC70LDRgdGMXHJcbiAgJHNjb3BlLnVwbG9hZEZhaWxlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcjZXJyb3ItdXBsb2FkJykuc2hvdygpLmRlbGF5KDgwMCkuc2xpZGVVcCgnc2xvdycpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS51cGxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZSkge1xyXG5cclxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIGlmICh4aHIudXBsb2FkICYmIGZpbGUuc2l6ZSA8PSAkc2NvcGUubWF4U2l6ZSkge1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9ncmVzcy1jb250ZW50Jykuc2hvdygpO1xyXG5cclxuICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcclxuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IE1hdGgucm91bmQoZS5sb2FkZWQgKiAxMDAgLyBlLnRvdGFsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gJ3VuYWJsZSB0byBjb21wdXRlJztcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdXBsb2FkUHJvZ3Jlc3MsIGZhbHNlKTtcclxuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgJHNjb3BlLnVwbG9hZEZhaWxlZCwgZmFsc2UpO1xyXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICRzY29wZS51cGxvYWRDb21wbGV0ZSwgZmFsc2UpO1xyXG4gICAgICB4aHIub3BlbignUE9TVCcsICcvc3BvdC91cGxvYWQnLCB0cnVlKTtcclxuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtRmlsZS1OYW1lJywgdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGZpbGUubmFtZSkpKTtcclxuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtRGlzY29kZXMnLCAkc2NvcGUuc3BvdC5kaXNjb2Rlcyk7XHJcbiAgICAgIHhoci5zZW5kKGZpbGUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4vKiDQodC+0YYg0YHQtdGC0LggKi9cclxuXHJcbiAgLy/Qv9C+0LTQs9GA0YPQt9C60LAg0LHQu9C+0LrQsCDRgSDQutC+0L3RgtC10L3RgtC+0Lwg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUubG9hZFNvY0NvbnRlbnQgPSBmdW5jdGlvbihrZXkpXHJcbiAge1xyXG4gICAgdmFyIGRhdGEgPSB7ZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXMsIGtleTprZXksIHRva2VuOiRzY29wZS51c2VyLnRva2VufTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9Tb2NOZXRDb250ZW50JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBkYXRhLmtleSk7XHJcbiAgICAgICAgICAgIHZhciBvbGRIZWlnaHQgPSBzcG90RWRpdC5oZWlnaHQoKTtcclxuICAgICAgICAgICAgdmFyIG9sZFNjcm9sbCA9IHNwb3RFZGl0Lm9mZnNldCgpLnRvcDtcclxuXHJcbiAgICAgICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShkYXRhLmtleSk7XHJcbiAgICAgICAgICAgIGlmIChvbGRTY3JvbGwgPCAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gJCgnaHRtbCwgYm9keScpLnNjcm9sbFRvcCgpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2Jsb2NrLScgKyBkYXRhLmtleSkuaGVpZ2h0KCkgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsX2hlaWdodFxyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0L/QvtC00YHQstC10YLQutGDINC60L3QvtC/0LrQuCDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS5uZXRDaGVjayA9IGZ1bmN0aW9uKG5ldE5hbWUpIHtcclxuICAgIHZhciBkYXRhID0ge3Rva2VuOiRzY29wZS51c2VyLnRva2VuLCBuZXROYW1lOm5ldE5hbWV9O1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvbmV0Q2hlY2snLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHZhciBidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoXCIjZXh0cmFNZWRpYUZvcm0gYVtuZXQ9J1wiICsgZGF0YS5uZXROYW1lICsgXCInXVwiKTtcclxuICAgICAgICBpZiAoZGF0YS5iaW5kZWQpXHJcbiAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ2JpbmRlZCcpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnYmluZGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0L/QvtC00YHQstC10YLQuNGC0Ywg0LrQvdC+0L/QutGDINGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLm5ldFVwID0gZnVuY3Rpb24obmV0TmFtZSkge1xyXG4gICAgdmFyIGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChcIiNleHRyYU1lZGlhRm9ybSBhW25ldD0nXCIgKyBuZXROYW1lICsgXCInXVwiKTtcclxuICAgIGJ1dHRvbi5hZGRDbGFzcygnYmluZGVkJyk7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9C+0LPQsNGB0LjRgtGMINC60L3QvtC/0LrRgyDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS5uZXREb3duID0gZnVuY3Rpb24obmV0TmFtZSkge1xyXG4gICAgdmFyIGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChcIiNleHRyYU1lZGlhRm9ybSBhW25ldD0nXCIgKyBuZXROYW1lICsgXCInXVwiKTtcclxuICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnYmluZGVkJyk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J/RgNC40LLRj9C30LrQsCDRgdC+0YbRgdC10YLQtdC5XHJcbiAgdmFyIHBvcHVwO1xyXG4gIHZhciBzb2NUaW1lcjtcclxuICB2YXIgbGlrZVRpbWVyO1xyXG4gIHZhciBsb3lhbHR5VGltZXI7XHJcblxyXG4gIC8v0YfQtdGA0LXQtyDQv9C70LDRiNC60YNcclxuICAkc2NvcGUuYmluZEJ5UGFuZWwgPSBmdW5jdGlvbihidXR0b25OYW1lKSB7XHJcbiAgICB2YXIgbmV0TmFtZSA9IGJ1dHRvbk5hbWU7XHJcbiAgICB2YXIgZGF0YSA9IHtzcG90OiAkc2NvcGUuc3BvdCwgdG9rZW46JHNjb3BlLnVzZXIudG9rZW4sIG5ldE5hbWU6bmV0TmFtZX07XHJcbiAgICAvL9C+0L/RgNC10LTQtdC70LXQvdC40LUg0YHQtdGC0Lgg0L/QviDRgdGB0YvQu9C60LVcclxuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5zcG90LmNvbnRlbnQpICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICAgIGRhdGEubGluayA9ICRzY29wZS5zcG90LmNvbnRlbnQ7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc29jX3BhdHRlcm5zLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5zcG90LmNvbnRlbnQuaW5kZXhPZigkc2NvcGUuc29jX3BhdHRlcm5zW2ldLmJhc2VVcmwpICE9IC0xKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuZXROYW1lID0gJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5uZXROYW1lID0gJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgICRodHRwLnBvc3QoJy9zcG90L0JpbmRCeVBhbmVsJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEucHJvZmlsZUhpbnQubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEubG9nZ2VkSW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA0NTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzgwXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIG5ldE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlZGlyZWN0X3VyaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsICs9IHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaT0nKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0X3VyaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJXaWR0aCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoIC0gb3B0aW9ucy5wb3B1cC53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAgPSB3aW5kb3cub3Blbih1cmwgKyAnJmpzJywgXCJ5aWlfZWF1dGhfcG9wdXBcIiwgXCJ3aWR0aD1cIiArIG9wdGlvbnMucG9wdXAud2lkdGggKyBcIixoZWlnaHQ9XCIgKyBvcHRpb25zLnBvcHVwLmhlaWdodCArIFwiLGxlZnQ9XCIgKyBjZW50ZXJXaWR0aCArIFwiLHRvcD1cIiArIGNlbnRlckhlaWdodCArIFwiLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz1ubyx0b29sYmFyPW5vLG1lbnViYXI9bm8sbG9jYXRpb249bm8sZGlyZWN0b3JpZXM9bm8sc3RhdHVzPXllc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cCA9PT0gbnVsbCB8fCB0eXBlb2YocG9wdXApPT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IHVybCArICcmZGlzY29kZXM9JyArICRzY29wZS5zcG90LmRpc2NvZGVzICsgJyZuZXdGaWVsZD0xJyArICcmc3luY2g9dHJ1ZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5zcG90LmNvbnRlbnQgIT09ICd1bmRlZmluZWQnICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZiArPSAnJmxpbms9JyArIGVuY29kZVVSSUNvbXBvbmVudCgkc2NvcGUuc3BvdC5jb250ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmluZE5ldCA9IHtuYW1lOmRhdGEuc29jbmV0LCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2RlcywgbmV3RmllbGQ6MX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5zcG90LmNvbnRlbnQpICYmICRzY29wZS5zcG90LmNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpbmROZXQubGluayA9ICRzY29wZS5zcG90LmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmxpbmtDb3JyZWN0ID09ICdvaycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWRkLWNvbnRlbnQnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50PScnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ3RleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ3B1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzZXRDdXJzb3IoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoJyNibG9jay0nICsgZGF0YS5rZXkpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5ldCA9ICRzY29wZS5nZXRQYXR0ZXJuSW5kKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROZXQgPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbY3VycmVudE5ldF0uQmluZEJ5UGFzdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubGlua0NvcnJlY3QsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0LLQvtC30LLRgNCw0YjQsNC10YIg0LjQvdC00LXQutGBINGB0L7RhtGB0LXRgtC4INCyINGB0LrQvtC/0LUg0L/QviDQuNC80LXQvdC4XHJcbiAgJHNjb3BlLmdldFBhdHRlcm5JbmQgPSBmdW5jdGlvbihuZXROYW1lKXtcclxuICAgICAgdmFyIGN1cnJlbnROZXQgPSAtMTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc29jX3BhdHRlcm5zLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgICBpZiAoJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5uYW1lID09IG5ldE5hbWUpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY3VycmVudE5ldCA9IGk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGN1cnJlbnROZXQ7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9GA0LjQstGP0LfQutCwINC/0L4g0LrQvdC+0L/QutC1XHJcbiAgJHNjb3BlLmJpbmRTb2NpYWwgID0gZnVuY3Rpb24oc3BvdCwga2V5LCBlKSB7XHJcbiAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICBzcG90LmtleSA9IGtleTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2JpbmRTb2NpYWwnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgaWYoKGRhdGEuc29jbmV0ICE9ICdubycpICYmIChkYXRhLnNvY25ldC5sZW5ndGggPiAwKSl7XHJcbiAgICAgICAgICBpZiAoIWRhdGEubG9nZ2VkSW4pIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgaWQ6ICcnLFxyXG4gICAgICAgICAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDUwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzODBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlZGlyZWN0X3VyaSA9ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICcvdXNlci9CaW5kU29jTG9naW4/c2VydmljZT0nICsgZGF0YS5zb2NuZXQ7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSByZWRpcmVjdF91cmk7XHJcblxyXG4gICAgICAgICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nO1xyXG4gICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaT0nKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgdXJsICs9ICdyZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdF91cmkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgIHBvcHVwID0gd2luZG93Lm9wZW4odXJsICsgJyZqcycsIFwieWlpX2VhdXRoX3BvcHVwXCIsIFwid2lkdGg9XCIgKyBvcHRpb25zLnBvcHVwLndpZHRoICsgXCIsaGVpZ2h0PVwiICsgb3B0aW9ucy5wb3B1cC5oZWlnaHQgKyBcIixsZWZ0PVwiICsgY2VudGVyV2lkdGggKyBcIix0b3A9XCIgKyBjZW50ZXJIZWlnaHQgKyBcIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9bm8sdG9vbGJhcj1ubyxtZW51YmFyPW5vLGxvY2F0aW9uPW5vLGRpcmVjdG9yaWVzPW5vLHN0YXR1cz15ZXNcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAocG9wdXAgPT09IG51bGwgfHwgdHlwZW9mKHBvcHVwKT09J3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsICsgJyZkaXNjb2Rlcz0nICsgc3BvdC5kaXNjb2RlcyArICcma2V5PScgKyBzcG90LmtleSArICcmc3luY2g9dHJ1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5iaW5kTmV0ID0ge25hbWU6ZGF0YS5zb2NuZXQsIGRpc2NvZGVzOnNwb3QuZGlzY29kZXMsIGtleTpzcG90LmtleSwgc3BvdEVkaXQ6YW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpfTtcclxuICAgICAgICAgICAgICAgIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5saW5rQ29ycmVjdCA9PSAnb2snKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROZXQgPSAkc2NvcGUuZ2V0UGF0dGVybkluZChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5ldCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbY3VycmVudE5ldF0uQmluZEJ5UGFzdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShzcG90LmtleSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubGlua0NvcnJlY3QsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2UgaWYoZGF0YS5saW5rQ29ycmVjdCAhPSAnb2snKXtcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubGlua0NvcnJlY3QsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9C+0LTQutC70Y7Rh9C10L3QuNC1INCw0LrRhtC40LgsINGC0YDQtdCx0YPRjtGJ0LXQuSDQttC10YLQvtC90LAg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUuY2hlY2tMaWtlID0gZnVuY3Rpb24oaWRfYWN0aW9uLCBlKVxyXG4gIHtcclxuICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBpZDppZF9hY3Rpb24sIGRpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzfTtcclxuICAgICAgdmFyIGFjdDtcclxuICAgICAgXHJcbiAgICAgICRodHRwLnBvc3QoJy91c2VyL2NoZWNrTGlrZScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG5cclxuICAgICAgICAgIGlmICgnbm8nID09IGRhdGEuZXJyb3IpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWYgKCFkYXRhLmlzU29jTG9nZ2VkKVxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDUwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzODBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIHJlZGlyZWN0X3VyaSA9ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICcvdXNlci9CaW5kU29jTG9naW4/c2VydmljZT0nICsgZGF0YS5zZXJ2aWNlO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVkaXJlY3RfdXJpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdXJsICs9IHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCdyZWRpcmVjdF91cmk9JykgPT09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHVybCArPSAncmVkaXJlY3RfdXJpPScgKyBlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RfdXJpKSArICcmJztcclxuICAgICAgICAgICAgICAgICAgdXJsICs9ICdqcyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgY2VudGVyV2lkdGggPSAod2luZG93LnNjcmVlbi53aWR0aCAtIG9wdGlvbnMucG9wdXAud2lkdGgpIC8gMixcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJIZWlnaHQgPSAod2luZG93LnNjcmVlbi5oZWlnaHQgLSBvcHRpb25zLnBvcHVwLmhlaWdodCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cCA9IHdpbmRvdy5vcGVuKHVybCwgJ3lpaV9lYXV0aF9wb3B1cCcsICd3aWR0aD0nICsgb3B0aW9ucy5wb3B1cC53aWR0aCArICcsaGVpZ2h0PScgKyBvcHRpb25zLnBvcHVwLmhlaWdodCArICcsbGVmdD0nICsgY2VudGVyV2lkdGggKyAnLHRvcD0nICsgY2VudGVySGVpZ2h0ICsgJyxyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9bm8sdG9vbGJhcj1ubyxtZW51YmFyPW5vLGxvY2F0aW9uPW5vLGRpcmVjdG9yaWVzPW5vLHN0YXR1cz15ZXMnKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKHBvcHVwID09PSBudWxsIHx8IHR5cGVvZihwb3B1cCk9PSd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgPSB1cmwgKyAnJmRpc2NvZGVzPScgKyAkc2NvcGUuc3BvdC5kaXNjb2RlcyArICcmY2hla19saWtlPScgKyBpZF9hY3Rpb247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tpbmdBY3Rpb24gPSB7aWQ6aWRfYWN0aW9uLCBzaGFyaW5nX2luZDpkYXRhLmluZH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9uRGl2ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCdkaXYuc3BvdC1pdGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlrZVRpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxpa2VzVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKGRhdGEuY29udGVudCkpXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5ob3N0X21vYmlsZSAmJiAhYW5ndWxhci5pc1VuZGVmaW5lZChlKSlcclxuICAgICAgICAgICAgICAgICAgICAgIGFjdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgnZGl2LnNwb3QtaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgYWN0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFjdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICAgJHNjb3BlLmxpa2VzVGltZXIgPSBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgIGlmICghcG9wdXAuY2xvc2VkKSB7XHJcbiAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGlkOiRzY29wZS5jaGVja2luZ0FjdGlvbi5pZCwgc2hhcmluZ19pbmQ6JHNjb3BlLmNoZWNraW5nQWN0aW9uLnNoYXJpbmdfaW5kLCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlc307XHJcbiAgICAgICAgICAkaHR0cC5wb3N0KCcvdXNlci9jaGVja0xpa2UnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5pc1NvY0xvZ2dlZCkge1xyXG4gICAgICAgICAgICAgICAgLy/QsNC60YbQuNGPINC/0L7QtNC60LvRjtGH0LXQvdCwXHJcbiAgICAgICAgICAgICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWN0aW9uRGl2LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdi5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5zaGFyaW5nX2xvZ2dlZCkge1xyXG4gICAgICAgICAgICAgICAgLy/Qt9Cw0LLQtdGA0YjQtdC9INC70L7Qs9C40L0g0L/QviDQv9C+0YHQu9C10LTQvdC10LzRgyDRg9GB0LvQvtCy0LjRjlxyXG4gICAgICAgICAgICAgICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tMaWtlKCRzY29wZS5jaGVja2luZ0FjdGlvbi5pZCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/QttC00LXQvCDQu9C+0LPQuNC90LBcclxuICAgICAgICAgICAgICAgIGxpa2VUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5saWtlc1RpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL9C+0YLRgdC70LXQttC40LLQsNC10YIg0LjQt9C80LXQvdC10L3QuNC1INGB0YLQsNGC0YPRgdCwINCw0LrRhtC40LksINC90LDRhdC+0LTRj9GJ0LjRhdGB0Y8g0LIg0L/RgNC+0YbQtdGB0YHQtSDQv9C+0LTQutC70Y7Rh9C10L3QuNGPXHJcbiAgICAkc2NvcGUubG95YWx0eVRpbWVyID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBpdGVtcyA9IGFuZ3VsYXIuZWxlbWVudChcIi5jb25uZWN0aW5nXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGxveWFsdHlfaWQgPSBhbmd1bGFyLmVsZW1lbnQoaXRlbXNbaV0pLmF0dHIoJ2lkJykuc3Vic3RyaW5nKDcpO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tMb3lhbHR5Q29ubmVjdGlvbihsb3lhbHR5X2lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG95YWx0eVRpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxveWFsdHlUaW1lciwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICRzY29wZS5zZXRMb3lhbHR5VGltZXIgPSBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgbG95YWx0eVRpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxveWFsdHlUaW1lciwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICRzY29wZS5jaGVja0xveWFsdHlDb25uZWN0aW9uID0gZnVuY3Rpb24oaWRfYWN0aW9uKSB7XHJcbiAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgaWQ6aWRfYWN0aW9uLCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlc307XHJcbiAgICAgIHZhciBhY3Q9YW5ndWxhci5lbGVtZW50KCcjY291cG9uLScgKyBpZF9hY3Rpb24pO1xyXG4gICAgICAkaHR0cC5wb3N0KCcvdXNlci9jaGVja0xveWFsdHlDb25uZWN0aW9uJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoZGF0YS5jb25uZWN0ZWQpICYmIGRhdGEuY29ubmVjdGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGFjdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgIGFjdC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkc2NvcGUuZGlzYWJsZUFjdGlvbiA9IGZ1bmN0aW9uKGUsIGlkX2FjdGlvbilcclxuICAgIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGlkOmlkX2FjdGlvbiwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXN9O1xyXG4gICAgICAgIHZhciBhY3Q7XHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3VzZXIvZGlzYWJsZUxveWFsdHknLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCdubycgPT0gZGF0YS5lcnJvcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUpXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCdkaXYuc3BvdC1pdGVtJyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgYWN0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICAgICAgYWN0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8v0L/RgNC40LLRj9C30LrQsCDRgdC+0YbRgdC10YLQuCDQuCDQt9Cw0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCwg0LXRgdC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC30LDQu9C+0LPQuNC90LjQu9GB0Y8g0YfQtdGA0LXQtyDRgdC+0YbRgdC10YLRjFxyXG4gICAgJHNjb3BlLmxvZ2luVGltZXIgPSBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgIGlmICghcG9wdXAuY2xvc2VkKSB7XHJcbiAgICAgICAgdmFyIG5ldFBhcmFtcyA9IHtuYW1lOiRzY29wZS5iaW5kTmV0Lm5hbWUsIGRpc2NvZGVzOiRzY29wZS5iaW5kTmV0LmRpc2NvZGVzLCBrZXk6JHNjb3BlLmJpbmROZXQua2V5fTtcclxuICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuYmluZE5ldC5uZXdGaWVsZCkgJiYgMSA9PSAkc2NvcGUuYmluZE5ldC5uZXdGaWVsZClcclxuICAgICAgICAgICAgbmV0UGFyYW1zLm5ld0ZpZWxkID0gMTtcclxuICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuYmluZE5ldC5saW5rKSAmJiAkc2NvcGUuYmluZE5ldC5saW5rLmxlbmd0aClcclxuICAgICAgICAgICAgbmV0UGFyYW1zLmxpbmsgPSAkc2NvcGUuYmluZE5ldC5saW5rO1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGJpbmROZXQ6bmV0UGFyYW1zfTtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvc3BvdC9iaW5kZWRDb250ZW50JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoZGF0YS5sb2dnZWRJbikgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIChkYXRhLmxpbmtDb3JyZWN0KSAhPSAndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICBpZiAoZGF0YS5sb2dnZWRJbil7XHJcbiAgICAgICAgICAgIHBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIGlmKGRhdGEubGlua0NvcnJlY3QgPT0gJ29rJyl7XHJcbiAgICAgICAgICAgICAgaWYgKGRhdGEubmV3RmllbGQpe1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWRkLWNvbnRlbnQnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUua2V5cy5wdXNoKGRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zcG90LmNvbnRlbnQ9Jyc7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ3RleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ3B1dCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5yZXNldEN1cnNvcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5uZXRVcChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0VmlkZW9TaXplKGRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gJCgnI2Jsb2NrLScgKyBkYXRhLmtleSkub2Zmc2V0KCkudG9wIC0gMTAwO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciBzcG90RWRpdCA9ICRzY29wZS5iaW5kTmV0LnNwb3RFZGl0O1xyXG4gICAgICAgICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICRzY29wZS5uZXRVcChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5iaW5kTmV0ID0ge307XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50TmV0ID0gJHNjb3BlLmdldFBhdHRlcm5JbmQoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudE5ldCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNvY19wYXR0ZXJuc1tjdXJyZW50TmV0XS5CaW5kQnlQYXN0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubGlua0NvcnJlY3QsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Ugc29jVGltZXIgPSAkdGltZW91dCgkc2NvcGUubG9naW5UaW1lciwgMTAwMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIC8v0J7RgtCy0Y/Qt9C60LAg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUudW5CaW5kU29jaWFsICA9IGZ1bmN0aW9uKHNwb3QsIGtleSwgZSkge1xyXG4gICAgc3BvdC5rZXkgPSBrZXk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9VbkJpbmRTb2NpYWwnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIGlmIChkYXRhLm5ldERvd24pXHJcbiAgICAgICAgICAgICRzY29wZS5uZXREb3duKGRhdGEubmV0RG93bik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5nZXRTb2NQYXR0ZXJucyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkc2NvcGUuZnJlZVNvY2lhbCA9IHRydWU7XHJcbiAgICBpZiAodHlwZW9mICgkc2NvcGUuc29jX3BhdHRlcm5zKSA9PSAndW5kZWZpbmVkJylcclxuICAgIHtcclxuICAgICAgdmFyIGRhdGEgPSB7dG9rZW46JHNjb3BlLnVzZXIudG9rZW59O1xyXG4gICAgICAkaHR0cC5wb3N0KCcvc3BvdC9Tb2NQYXR0ZXJucycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICRzY29wZS5zb2NfcGF0dGVybnMgPSBkYXRhLnNvY19wYXR0ZXJucztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zb2NfcGF0dGVybnMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiAoJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5CaW5kQnlQYXN0ZSkgPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2ldLkJpbmRCeVBhc3RlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9GD0YHRgtCw0L3QvtCy0LrQsCDRgNCw0LfQvNC10YAg0L/RgNC+0LjQs9GA0YvQstCw0YLQtdC70Y8gWW91VHViZSDQuNC70LggVmltZW9cclxuICAkc2NvcGUuc2V0VmlkZW9TaXplID0gZnVuY3Rpb24oYmxvY2tLZXkpXHJcbiAge1xyXG4gICAgdmFyIHBsYXllcjtcclxuICAgIGlmIChhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgYmxvY2tLZXkgKyAnIC52aWRlby12aW1lbycpLmxlbmd0aCA9PSAxKVxyXG4gICAge1xyXG4gICAgICBwbGF5ZXIgPSBhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgYmxvY2tLZXkgKyAnIC52aWRlby12aW1lbycpO1xyXG4gICAgICBwbGF5ZXIuY3NzKCd3aWR0aCcsICcxMDAlJyk7XHJcbiAgICAgIHBsYXllci5jc3MoJ2hlaWdodCcsIChwYXJzZUludChwbGF5ZXIuY3NzKCd3aWR0aCcpLCAxMCkgLyBwbGF5ZXIuYXR0cigncmVsJykgKyAncHgnKSk7XHJcbiAgICB9IGVsc2UgaWYgKGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBibG9ja0tleSArICcgLnl0X3BsYXllcicpLmxlbmd0aCA9PSAxKXtcclxuICAgICAgcGxheWVyID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGJsb2NrS2V5ICsgJyAueXRfcGxheWVyJyk7XHJcbiAgICAgIHBsYXllci5jc3MoJ3dpZHRoJywgJzEwMCUnKTtcclxuICAgICAgcGxheWVyLmNzcygnaGVpZ2h0JywgKHBhcnNlSW50KHBsYXllci5jc3MoJ3dpZHRoJyksIDEwKSAvIHBsYXllci5hdHRyKCdyZWwnKSArICdweCcpKTtcclxuICAgIH1cclxufTtcclxuXHJcbiAgJHNjb3BlLnNldE5ld1Bhc3MgPSBmdW5jdGlvbihzcG90KVxyXG4gIHtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3NldFNwb3RQYXNzJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycgJiYgdHlwZW9mIChkYXRhLnNhdmVkKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NhdmVQYXNzQnV0dG9uJykudGV4dChkYXRhLnNhdmVkKTtcclxuICAgICAgICBpZiAodHlwZW9mICgkc2NvcGUuc3BvdC5wYXNzKSAhPSAndW5kZWZpbmVkJyAmJiBzcG90LnBhc3MubGVuZ3RoKVxyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNyZXNldFBhc3NCdXR0b24nKS5zaG93KCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNyZXNldFBhc3NCdXR0b24nKS5oaWRlKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5lcnJvciA9PSAneWVzJykge1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjc2V0UGFzc0Zvcm0gaW5wdXRbbmFtZT1uZXdQYXNzXScpLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmVzZXRQYXNzID0gZnVuY3Rpb24oc3BvdClcclxuICB7XHJcbiAgICBzcG90LnBhc3MgPSAnJztcclxuICAgICRzY29wZS5zZXROZXdQYXNzKHNwb3QpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5zYXZlUGFzc0J1dHRvblRleHQgPSBmdW5jdGlvbih0ZXh0KVxyXG4gIHtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NhdmVQYXNzQnV0dG9uJykudGV4dCh0ZXh0KTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NldFBhc3NGb3JtIGlucHV0W25hbWU9bmV3UGFzc10nKS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuY2hlY2tTdGF0dXNTcG90ID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmVzZXRDdXJzb3IgPSBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoJHNjb3BlLmN1cnNvckJvZHkpICYmICRzY29wZS5jdXJzb3JCb2R5Lmxlbmd0aClcclxuICAgIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5JykuY3NzKCdjdXJzb3InLCAkc2NvcGUuY3Vyc29yQm9keSk7XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuY3Vyc29yQm9keTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5JykuY3NzKCdjdXJzb3InLCAnZGVmYXVsdCcpO1xyXG5cclxuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5jdXJzb3JUZXh0YXJlYSkgJiYgJHNjb3BlLmN1cnNvclRleHRhcmVhLmxlbmd0aClcclxuICAgIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjZHJvcGJveCB0ZXh0YXJlYScpLmNzcygnY3Vyc29yJywgJHNjb3BlLmN1cnNvclRleHRhcmVhKTtcclxuICAgICAgZGVsZXRlICRzY29wZS5jdXJzb3JUZXh0YXJlYTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjZHJvcGJveCB0ZXh0YXJlYScpLmNzcygnY3Vyc29yJywgJ3RleHQnKTtcclxuICB9O1xyXG5cclxuICAvL9C40LfQvNC10L3QtdC90LjQtSDRgdGC0YDQsNC90LjRhtGLINGE0LjQu9GM0YLRgNCwINC60YPQv9C+0L3QvtCyXHJcbiAgJHNjb3BlLiR3YXRjaCgnYWN0aW9ucy5wYWdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgPSAwO1xyXG4gICAgJHNjb3BlLmFjdGlvbnMuY291bnRfYWxsID0gMDtcclxuICAgIHZhciBsaXN0ID0gYW5ndWxhci5lbGVtZW50KCcjY291cG9ucy1saXN0Jyk7XHJcbiAgICBsaXN0LmVtcHR5KCk7XHJcbiAgICAkc2NvcGUubGlzdENvdXBvbnMoJHNjb3BlLnNwb3QsICRzY29wZS5hY3Rpb25zKTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLmNvdXBvbnNTY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzID0gZmFsc2U7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQod2luZG93KS5iaW5kKCdzY3JvbGwnLCAkc2NvcGUubG9hZE1vcmVDb3Vwb25zKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUubG9hZE1vcmVDb3Vwb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZihhbmd1bGFyLmVsZW1lbnQod2luZG93KS5zY3JvbGxUb3AoKSArIGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLmhlaWdodCgpID49IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuaGVpZ2h0KCkgLSAyMDAgJiYgISRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzICYmICRzY29wZS5hY3Rpb25zLm9mZnNldCA8ICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCkge1xyXG4gICAgICAgICRzY29wZS5saXN0Q291cG9ucygkc2NvcGUuc3BvdCwgJHNjb3BlLmFjdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuaW5pdFRyYW5zcG9ydFR5cGUgPSBmdW5jdGlvbih0eXBlX2lkLCB0eXBlX25hbWUsIHR5cGVfaW1nKSB7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X3R5cGVzWyRzY29wZS50cmFuc3BvcnRfdHlwZXMubGVuZ3RoXSA9IHtpZDp0eXBlX2lkLCBuYW1lOnR5cGVfbmFtZSwgaW1nOnR5cGVfaW1nfTtcclxuICB9O1xyXG4gIFxyXG4gIC8v0JLRi9Cx0L7RgCDQt9Cw0LTQvdC40LrQsCDRgtGA0LDQvdGB0L/QvtGA0YLQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS5zZXRUeXBlID0gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgJHNjb3BlLmN1c3RvbV9jYXJkLmJhY2sgPSB0eXBlLmlkO1xyXG5cclxuICAgIGlmICh0eXBlLmltZyl7XHJcbiAgICAgICQoJyNjYXJkLWJhY2snKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC91cGxvYWRzL3RyYW5zcG9ydC8nICsgdHlwZS5pbWcgKyAnKScpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvL9CX0LDQs9GA0YPQt9C60LAg0LrQsNGA0YLQuNC90LrQuCDQtNC70Y8g0LzQsNC60LXRgtCwINGC0YDQsNC90YHQv9C+0YDRgtC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNlbmRJbWcgPSBmdW5jdGlvbihlbCkge1xyXG4gICAgdmFyIGZvcm0gPSAkKGVsKS5wYXJlbnRzKCdmb3JtJyk7XHJcbiAgICBpZiAoJChlbCkudmFsKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgZGlzY29kZXNfaW5wdXQgPSBmb3JtLmNoaWxkcmVuKCdpbnB1dFtuYW1lPWRpc2NvZGVzX2lkXScpO1xyXG4gICAgdmFyIHRva2VuX2lucHV0ID0gZm9ybS5jaGlsZHJlbignaW5wdXRbbmFtZT10b2tlbl0nKTtcclxuICAgIHZhciB0eXBlX2lucHV0ID0gZm9ybS5jaGlsZHJlbignaW5wdXRbbmFtZT1pbWdfdHlwZV0nKTtcclxuICAgIHZhciBmb3JtX3NwYW4gPSBmb3JtLmZpbmQoJ3NwYW4udXBsb2FkLWhvbGRlcicpO1xyXG4gICAgdmFyIGZvcm1faWNvbiA9IGZvcm0uZmluZCgnaS51cGxvYWQtaG9sZGVyJyk7XHJcbiAgICB2YXIgZm9ybV9pbWcgPSBmb3JtLmZpbmQoJ2ltZy51cGxvYWQtaG9sZGVyJyk7XHJcbiAgICBcclxuICAgIHZhciBzcG90ID0gY29udGVudFNlcnZpY2UuZ2V0U3BvdCgpO1xyXG4gICAgXHJcbiAgICBpZiAoZGlzY29kZXNfaW5wdXQubGVuZ3RoKVxyXG4gICAgICAgIGRpc2NvZGVzX2lucHV0LnZhbChzcG90LmRpc2NvZGVzKTtcclxuICAgICAgICBcclxuICAgIGlmICh0b2tlbl9pbnB1dC5sZW5ndGgpXHJcbiAgICAgICAgdG9rZW5faW5wdXQudmFsKHNwb3QudG9rZW4pO1xyXG5cclxuICAgIGZvcm0uYWpheFN1Ym1pdCh7XHJcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGpzb25fZGF0YSwgc3RhdHVzVGV4dCwgeGhyLCBmb3JtKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gYW5ndWxhci5mcm9tSnNvbihqc29uX2RhdGEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3I9XCJub1wiKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGZvcm1fc3Bhbi5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICBmb3JtX3NwYW4uYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICBpZiAoZm9ybV9pY29uLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIGZvcm1faWNvbi5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGZvcm1faW1nLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgZm9ybV9pbWcuYXR0cihcInNyY1wiLCBkYXRhLnBhdGggKyAnP3Zlcj0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3RyYW5zcG9ydF9waG90bycgPT0gdHlwZV9pbnB1dC52YWwoKSlcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbV9jYXJkLnBob3RvID0gZGF0YS5wYXRoO1xyXG4gICAgICAgICAgICAgICAgIGVsc2UgaWYgKCd0cmFuc3BvcnRfbG9nbycgPT0gdHlwZV9pbnB1dC52YWwoKSlcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbV9jYXJkLmxvZ28gPSBkYXRhLnBhdGg7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnNob3dJbWFnZUNyb3BwZXIgPSBmYWxzZTtcclxuICAkc2NvcGUuc2hvd0xvZ29Dcm9wcGVyID0gZmFsc2U7XHJcbiAgXHJcbiAgJHNjb3BlLnNldFNwb3QgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnRlbnRTZXJ2aWNlLnNldFNwb3QoJHNjb3BlLnNwb3QpO1xyXG4gIH1cclxuICBcclxuICAvL9CX0LDQutCw0Lcg0YLRgNCw0L3RgdC/0L7RgNGC0L3QvtC5INC60LDRgNGC0Ysg0L/QviDQvNCw0LrQtdGC0YNcclxuICAkc2NvcGUub3JkZXJUcmFuc3BvcnRDYXJkID0gZnVuY3Rpb24oY3VzdG9tX2NhcmQsIHZhbGlkLCBtZXNzYWdlX3RleHQpIHtcclxuICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgc3BvdCA9IGNvbnRlbnRTZXJ2aWNlLmdldFNwb3QoKTtcclxuICAgIGN1c3RvbV9jYXJkLnRva2VuID0gc3BvdC50b2tlbjtcclxuICAgIGN1c3RvbV9jYXJkLmRpc2NvZGVzID0gc3BvdC5kaXNjb2RlcztcclxuICAgIFxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvb3JkZXJUcmFuc3BvcnRDYXJkJywgY3VzdG9tX2NhcmQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmICgnbm8nID09IGRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICRzY29wZS5oaWRlQ3VzdG9tQ2FyZCgpO1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKG1lc3NhZ2VfdGV4dCwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8v0JfQsNC60LDQtyDQutCw0YDRgtGLINCT0KPQoyDQv9C+INC80LDQutC10YLRg1xyXG4gICRzY29wZS5vcmRlckN1c3RvbUNhcmQgPSBmdW5jdGlvbihjdXN0b21fY2FyZCwgdmFsaWQsIG1lc3NhZ2VfdGV4dCkge1xyXG4gICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICgkc2NvcGUuaXNEb3VibGVDYXJkKGN1c3RvbV9jYXJkKSkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoXCLQktGLINGD0LbQtSDQt9Cw0LrQsNC30LDQu9C4INGN0YLRgyDQutCw0YDRgtGDXCIsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gZmFsc2U7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICRzY29wZS5zYXZlQ2FyZFBhcmFtcyhjdXN0b21fY2FyZCk7XHJcbiAgICBcclxuICAgICRodHRwLnBvc3QoJy9zcG90L29yZGVyQ3VzdG9tQ2FyZCcsIGN1c3RvbV9jYXJkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwobWVzc2FnZV90ZXh0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgIGN1c3RvbV9jYXJkLm51bWJlciA9IGRhdGEubnVtYmVyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuc2F2ZUNhcmRQYXJhbXMgPSBmdW5jdGlvbihjYXJkKSB7XHJcbiAgICBmb3IocHJvcGVydHkgaW4gY2FyZCkge1xyXG4gICAgICAgICRzY29wZS5wcmV2X2N1c3RvbV9jYXJkW3Byb3BlcnR5XSA9IGNhcmRbcHJvcGVydHldO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaXNEb3VibGVDYXJkID0gZnVuY3Rpb24oY2FyZCkge1xyXG4gICAgZm9yKHByb3BlcnR5IGluIGNhcmQpIHsgXHJcbiAgICAgICAgaWYgKHByb3BlcnR5ICE9ICdudW1iZXInICYmICRzY29wZS5wcmV2X2N1c3RvbV9jYXJkW3Byb3BlcnR5XSAhPSBjYXJkW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvL9GC0YDQuNCz0LXRgCDQvdCwINGB0L3Rj9GC0LjQtSDQvtGI0LjQsdC60Lgg0LTQu9GPINC80LDQutC10YLQsCDRgtGA0LDQvdGB0L/QvtGA0YLQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS4kd2F0Y2goJ2N1c3RvbV9jYXJkLnNoaXBwaW5nX25hbWUgKyBjdXN0b21fY2FyZC5waG9uZSArIGN1c3RvbV9jYXJkLmFkZHJlc3MgKyBjdXN0b21fY2FyZC5jaXR5ICsgY3VzdG9tX2NhcmQuemlwICsgY3VzdG9tX2NhcmQuZW1haWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gZmFsc2U7XHJcbiAgfSk7XHJcbiAgXHJcbiAgJHNjb3BlLiR3YXRjaCgnd2FsbGV0X2hpc3RvcnkuZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCEkc2NvcGUud2FsbGV0X2hpc3RvcnkuZGF0ZS5sZW5ndGgpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB2YXIgZGF0YSA9IHsnZGlzY29kZXMnOiAkc2NvcGUuc3BvdC5kaXNjb2RlcywgJ3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdkYXRlJzokc2NvcGUud2FsbGV0X2hpc3RvcnkuZGF0ZX07ICBcclxuICAgIFxyXG4gICAgYmxvY2tfaGlzdG9yeSA9IGFuZ3VsYXIuZWxlbWVudCgnI2hpc3Rvcnktd3JhcHBlcicpO1xyXG4gICAgXHJcbiAgICBibG9ja19oaXN0b3J5LmVtcHR5KCk7XHJcbiAgICAkc2NvcGUud2FsbGV0X2hpc3RvcnkuZW1wdHlfZGF0ZSA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9saXN0SGlzdG9yeScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBibG9ja19oaXN0b3J5LmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIGlmIChkYXRhLmVtcHR5X2Zvcl9kYXRlKVxyXG4gICAgICAgICAgICAkc2NvcGUud2FsbGV0X2hpc3RvcnkuZW1wdHlfZGF0ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgfSk7XHJcbiAgXHJcbiAgJHNjb3BlLmN1c3RvbUNhcmRJbml0ID0gZnVuY3Rpb24oZGVmYXVsdHMpIHtcclxuICAgICAkc2NvcGUuY3VzdG9tX2NhcmQgPSBhbmd1bGFyLmZyb21Kc29uKGRlZmF1bHRzKTsgXHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5zaG93RGF0ZXBpY2tlciA9IGZ1bmN0aW9uKHNlbGVjdG9yKXtcclxuICAgIGlmICgkc2NvcGUuZGF0ZV9oaXN0b3J5X3Nob3duKVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgICRzY29wZS5kYXRlX2hpc3Rvcnlfc2hvd24gPSB0cnVlO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KHNlbGVjdG9yKS5kYXRlcGlja2VyKFwic2hvd1wiKTsgICBcclxuICB9XHJcbiAgXHJcbiAgLy/Qv9GA0LjQstGP0LfQutCwINC90L7QstC+0LPQviDRgtC10LvQtdGE0L7QvdCwINC6INGB0L/QvtGC0YNcclxuICAkc2NvcGUuYWRkUGhvbmUgPSBmdW5jdGlvbihwaG9uZSwgdmFsaWQpIHtcclxuICAgIGlmICghdmFsaWQpIFxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6ICRzY29wZS5zcG90LmRpc2NvZGVzLCAndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ3Bob25lJzogcGhvbmV9XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9hZGRQaG9uZScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUubmV3X3Bob25lID0gJyc7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGhvbmVzLWxpc3QnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5yZW1vdmVQaG9uZSA9IGZ1bmN0aW9uKHBob25lLCBlKSB7XHJcbiAgICB2YXIgZGF0YSA9IHsnZGlzY29kZXMnOiAkc2NvcGUuc3BvdC5kaXNjb2RlcywgJ3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdwaG9uZSc6IHBob25lfVxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlUGhvbmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgdmFyIHBob25lSXRlbSA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5waG9uZS1yb3cnKTtcclxuICAgICAgICBwaG9uZUl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuYWN0aXZhdGVTY2hvb2xFeHRlbmRlZCA9IGZ1bmN0aW9uKGFkZHJlc3MpIHtcclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6ICRzY29wZS5zcG90LmRpc2NvZGVzLCAndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ2FkZHJlc3MnOmFkZHJlc3N9XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9hY3RpdmF0ZVNjaG9vbGxFeHRlbmRlZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUuaG9tZV9hZGRyZXNzID0gJyc7XHJcbiAgICAgICAgdmFyIFBob25lU2VydmljZXMgPSBhbmd1bGFyLmVsZW1lbnQoJyNwaG9uZV9zZXJ2aWNlcycpO1xyXG4gICAgICAgIFBob25lU2VydmljZXMuZW1wdHkoKTtcclxuICAgICAgICBQaG9uZVNlcnZpY2VzLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gICRzY29wZS5yZW1vdmVTY2hvb2xFeHRlbmRlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGRhdGEgPSB7J2Rpc2NvZGVzJzogJHNjb3BlLnNwb3QuZGlzY29kZXMsICd0b2tlbic6ICRzY29wZS5zcG90LnRva2VufVxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlU2Nob29sbEV4dGVuZGVkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS5ob21lX2FkZHJlc3MgPSAnJztcclxuICAgICAgICB2YXIgUGhvbmVTZXJ2aWNlcyA9IGFuZ3VsYXIuZWxlbWVudCgnI3Bob25lX3NlcnZpY2VzJyk7XHJcbiAgICAgICAgUGhvbmVTZXJ2aWNlcy5lbXB0eSgpO1xyXG4gICAgICAgIFBob25lU2VydmljZXMuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignUHJvZHVjdENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UpIHtcclxuICAgIFxyXG4gICAgJHNjb3BlLmhvc3RfdHlwZSA9ICdkZXNrdG9wJztcclxuICAgICRzY29wZS50cmFuc3BvcnRfY2FyZCA9IHt9O1xyXG4gICAgJHNjb3BlLnNpbXBsZV9jYXJkID0ge307XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X3R5cGVzID0gW107XHJcbiAgICAgIFxyXG4gICAgJHNjb3BlLlN0b3JlSW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbn07XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9nZXRQcmljZUxpc3QnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MgPSBkYXRhLnNldHRpbmdzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUgPSAkc2NvcGUucHJvZHVjdHNbaV0uc2l6ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRDb2xvciA9ICRzY29wZS5wcm9kdWN0c1tpXS5jb2xvclswXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTdXJmYWNlID0gJHNjb3BlLnByb2R1Y3RzW2ldLnN1cmZhY2VbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkVG9DYXJ0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvW2pdLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBqICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0c1RvcCA9IDkwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uY29sb3IubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHNUb3AgKz0gMTU1O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoID4gMylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHNUb3AgLT0gNTY7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5kZXNjcmlwdGlvbi5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0c1RvcCArPSAoJHNjb3BlLnByb2R1Y3RzW2ldLmRlc2NyaXB0aW9uLmxlbmd0aC83Ni41KSAqIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS50aHVtYlNoZWxsU3R5bGUgPSB7dG9wOih0c1RvcCtcInB4XCIpfTtcclxuICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLnJlbW92ZUNsYXNzKCdvdmVyZmxvdy1oJyk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLm0tY292ZXItcHJlbG9hZCcpLmZhZGVPdXQoNjAwKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIElNQUdFX1dJRFRIID0gMjQyO1xyXG5cclxuICAgICRzY29wZS5zY3JvbGxUbyA9IGZ1bmN0aW9uKGltYWdlLGluZCwganNJRCkge1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpbmQgKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuYWRkVG9DYXJ0ID0gZnVuY3Rpb24gYWRkVG9DYXJ0KGpzSUQpe1xyXG4gICAgICAgIGlmKCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSA8IDEpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBpZigkc2NvcGUuaW5SZXF1ZXN0KSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICgndHJvaWthJyA9PSAkc2NvcGUucHJvZHVjdHNbanNJRF0udHlwZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnNob3dDb25zdHJ1Y3RvclRyb2lrYSgkc2NvcGUucHJvZHVjdHNbanNJRF0sIGpzSUQpO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoJ3NpbXBsZScgPT0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnR5cGUpIHtcclxuICAgICAgICAgICRzY29wZS5zaG93Q29uc3RydWN0b3JTaW1wbGUoJHNjb3BlLnByb2R1Y3RzW2pzSURdLCBqc0lEKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlOyAgICAgICAgXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRva2VuOiAkc2NvcGUudXNlci50b2tlbixcclxuICAgICAgICAgICAgaWQgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uaWQsXHJcbiAgICAgICAgICAgIHF1YW50aXR5IDogcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5KSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRDb2xvciA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yLFxyXG4gICAgICAgICAgICBzZWxlY3RlZFN1cmZhY2UgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlLFxyXG4gICAgICAgICAgICBzZWxlY3RlZFNpemUgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvYWRkVG9DYXJ0JyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcclxuICAgICAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZGVkO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLml0ZW1zLmNvdW50ICs9IHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFza2V0ID0gYW5ndWxhci5lbGVtZW50KCdhLmljb24tYmFnLWxpbmsgc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgYmFza2V0LnRleHQoJHNjb3BlLml0ZW1zLmNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3IpeyRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTt9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG4gICRzY29wZS5hZGRUcmFuc3BvcnRDYXJkID0gZnVuY3Rpb24odHJhbnNwb3J0X2NhcmQpIHtcclxuICAgICB0cmFuc3BvcnRfY2FyZC50b2tlbiA9ICRzY29wZS51c2VyLnRva2VuO1xyXG4gICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9hZGRDdXN0b21DYXJkJyksIHRyYW5zcG9ydF9jYXJkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUudHJhbnNwb3J0SWQpKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzWyRzY29wZS50cmFuc3BvcnRJZF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRlZDtcclxuICAgICAgICAgICAgJHNjb3BlLml0ZW1zLmNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgIHZhciBiYXNrZXQgPSBhbmd1bGFyLmVsZW1lbnQoJ2EuaWNvbi1iYWctbGluayBzcGFuJyk7XHJcbiAgICAgICAgICAgIGJhc2tldC50ZXh0KCRzY29wZS5pdGVtcy5jb3VudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgJHNjb3BlLmhpZGVDb25zdHJ1Y3RvclRyb2lrYSgpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuYWRkU2ltcGxlQ2FyZCA9IGZ1bmN0aW9uKHNpbXBsZV9jYXJkKSB7XHJcbiAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L2FkZEN1c3RvbUNhcmQnKSwgc2ltcGxlX2NhcmQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgaWYgKCFhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5zaW1wbGVJZCkpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbJHNjb3BlLnNpbXBsZUlkXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZGVkO1xyXG4gICAgICAgICAgICAkc2NvcGUuaXRlbXMuY291bnQgKz0gMTtcclxuICAgICAgICAgICAgdmFyIGJhc2tldCA9IGFuZ3VsYXIuZWxlbWVudCgnYS5pY29uLWJhZy1saW5rIHNwYW4nKTtcclxuICAgICAgICAgICAgYmFza2V0LnRleHQoJHNjb3BlLml0ZW1zLmNvdW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgXHJcbiAgICAkc2NvcGUuaGlkZUNvbnN0cnVjdG9yU2ltcGxlKCk7XHJcbiAgfVxyXG4gICAgXHJcbiAgLy/QntGC0L7QsdGA0LDQttC10L3QuNC1INC60LDRgdGC0L7QvNC90L7Qs9C+INC80LDQutC10YLQsCDRgtGA0LDQvdGB0L/QvtGC0YDQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS5zaG93Q29uc3RydWN0b3JUcm9pa2EgPSBmdW5jdGlvbihwcm9kdWN0LCBqc0lEKXtcclxuICAgICRzY29wZS50cmFuc3BvcnRfY2FyZC5pZCA9IHByb2R1Y3QuaWQ7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0SWQgPSBqc0lEO1xyXG4gICAgJCgnI2NvbnN0cnVjdG9yLXRyb2lrYScpLmFkZENsYXNzKCdzaG93Jyk7XHJcbiAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLmhpZGVDb25zdHJ1Y3RvclRyb2lrYSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkKCcjY29uc3RydWN0b3ItdHJvaWthJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xyXG4gIH1cclxuICBcclxuICAvL9Ce0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQsNGB0YLQvtC80L3QvtCz0L4g0LzQsNC60LXRgtCwXHJcbiAgJHNjb3BlLnNob3dDb25zdHJ1Y3RvclNpbXBsZSA9IGZ1bmN0aW9uKHByb2R1Y3QsIGpzSUQpe1xyXG4gICAgJHNjb3BlLnNpbXBsZV9jYXJkLmlkID0gcHJvZHVjdC5pZDtcclxuICAgICRzY29wZS5zaW1wbGVJZCA9IGpzSUQ7XHJcbiAgICAkKCcjY29uc3RydWN0b3Itc2ltcGxlJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaGlkZUNvbnN0cnVjdG9yU2ltcGxlID0gZnVuY3Rpb24oKXtcclxuICAgICQoJyNjb25zdHJ1Y3Rvci1zaW1wbGUnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5pbml0VHJhbnNwb3J0VHlwZSA9IGZ1bmN0aW9uKHR5cGVfaWQsIHR5cGVfbmFtZSwgdHlwZV9pbWcpIHtcclxuICAgICRzY29wZS50cmFuc3BvcnRfdHlwZXNbJHNjb3BlLnRyYW5zcG9ydF90eXBlcy5sZW5ndGhdID0ge2lkOnR5cGVfaWQsIG5hbWU6dHlwZV9uYW1lLCBpbWc6dHlwZV9pbWd9O1xyXG4gIH07XHJcbiAgXHJcbiAgLy/QktGL0LHQvtGAINC30LDQtNC90LjQutCwINGC0YDQsNC90YHQv9C+0YDRgtC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNldFR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X2NhcmQuYmFjayA9IHR5cGUuaWQ7XHJcblxyXG4gICAgaWYgKHR5cGUuaW1nKXtcclxuICAgICAgJCgnI2NhcmQtYmFjaycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoL3VwbG9hZHMvdHJhbnNwb3J0LycgKyB0eXBlLmltZyArICcpJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAgICRzY29wZS5zaXplQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFNpemUsIHNpemUpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTaXplID09PSBzaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNvbG9yQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZENvbG9yLCBjb2xvcikge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZENvbG9yID09PSBjb2xvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zdXJmYWNlQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFN1cmZhY2UsIHN1cmZhY2UpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTdXJmYWNlID09PSBzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFNpemUgPSBmdW5jdGlvbihqc0lELCBzaXplKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplID0gc2l6ZTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRDb2xvciA9IGZ1bmN0aW9uKGpzSUQsIGNvbG9yKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvciA9IGNvbG9yO1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgY29sb3I7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90b1tpXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvW2ldLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFN1cmZhY2UgPSBmdW5jdGlvbihqc0lELCBzdXJmYWNlKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlID0gc3VyZmFjZTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5yZXNldEFkZGVkVGV4dCA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuICAgICAgICBpZigkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHkgPCAwKXtcclxuICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50aHVtYkNsYXNzID0gZnVuY3Rpb24obGVuKXtcclxuICAgICAgICBpZiAobGVuID4gMylcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlciB4c2Nyb2xsZWRcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXJcIjtcclxuICAgIH07XHJcbi8qXHJcbiAgICAkc2NvcGUudGh1bWJMaUNsYXNzID0gZnVuY3Rpb24oaW5kKXtcclxuICAgICAgICBpZiAoKGluZCAlIDMpID09IDApXHJcbiAgICAgICAgICAgIHJldHVybiBcImJyc2xpZGVcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRoaW1ic2xpZGVcIjtcclxuICAgIH1cclxuKi9cclxufSk7XHJcblxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignQ2FydENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UpIHtcclxuICAgICRzY29wZS5wcm9tb0Vycm9yID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuY3VzdG9tZXJFcnJvciA9IGZhbHNlO1xyXG4gIFxyXG4gICAgJHNjb3BlLkNhcnRJbml0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkc2NvcGUuc3VtbSA9IDA7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VufTtcclxuXHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvR2V0Q2FydCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzO1xyXG4gICAgICAgICAgICAkc2NvcGUuZGlzY291bnQgPSBkYXRhLmRpc2NvdW50O1xyXG4gICAgICAgICAgICBpZigkc2NvcGUucHJvZHVjdHMubGVuZ3RoIDw9IDApe1xyXG4gICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9zdG9yZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkgPSBwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1ZmZpeCA9ICdfJyArICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG9bal0uc3Vic3RyaW5nKDAsICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5sYXN0SW5kZXhPZignLicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaiAqIC0xKSArIFwicHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5wcm9kdWN0cyl7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5pZCA9PSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uaWRfcHJvZHVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gLT0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja2luZ091dCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLnJlbW92ZUNsYXNzKCdvdmVyZmxvdy1oJyk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcubS1jb3Zlci1wcmVsb2FkJykuZmFkZU91dCg2MDApO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgSU1BR0VfV0lEVEggPSAyNDI7XHJcblxyXG4gICAgJHNjb3BlLnNjcm9sbFRvID0gZnVuY3Rpb24oaW1hZ2UsaW5kLCBqc0lEKSB7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGluZCAqIC0xKSArIFwicHhcIn07XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5lbXB0eUNsYXNzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0cyl7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaGlkZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zaXplQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFNpemUsIHNpemUpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTaXplID09PSBzaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNvbG9yQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZENvbG9yLCBjb2xvcikge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZENvbG9yID09PSBjb2xvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zdXJmYWNlQ2xhc3MgPSBmdW5jdGlvbihzZWxlY3RlZFN1cmZhY2UsIHN1cmZhY2UpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRTdXJmYWNlID09PSBzdXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNoZWtpbmdPdXRDbGFzcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoISRzY29wZS5jaGVja2luZ091dCl7XHJcbiAgICAgICAgICAgIHJldHVybiBcImhpZGVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRTaXplID0gZnVuY3Rpb24oanNJRCwgc2l6ZSl7XHJcbiAgICAgICAgJHNjb3BlLnN1bW0gLT0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHk7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZSA9IHNpemU7XHJcbiAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRDb2xvciA9IGZ1bmN0aW9uKGpzSUQsIGNvbG9yKXtcclxuICAgICAgICB2YXIgb2xkUHJvZHVjdCA9IHtpZDokc2NvcGUucHJvZHVjdHNbanNJRF0uaWQsIHF1YW50aXR5OiRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSwgc2VsZWN0ZWRDb2xvcjokc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvcn07XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZSkgIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIG9sZFByb2R1Y3Quc2VsZWN0ZWRTaXplID0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZTtcclxuICAgICAgICBpZiAodHlwZW9mICgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlKSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgb2xkUHJvZHVjdC5zZWxlY3RlZFN1cmZhY2UgPSAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlO1xyXG5cclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvciA9IGNvbG9yO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90byAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8ubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIHZhciBzdWZmaXggPSAnXycgKyBjb2xvcjtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvW2ldLnN1YnN0cmluZygwLCAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG9baV0ubGFzdEluZGV4T2YoJy4nKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSA9PSBzdWZmaXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGkgKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIG9sZFByb2R1Y3Q6b2xkUHJvZHVjdCwgbmV3UHJvZHVjdDokc2NvcGUucHJvZHVjdHNbanNJRF19O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9zdG9yZS9wcm9kdWN0L1NhdmVQcm9kdWN0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmVycm9yICE9ICdubycpe1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRTdXJmYWNlID0gZnVuY3Rpb24oanNJRCwgc3VyZmFjZSl7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU3VyZmFjZSA9IHN1cmZhY2U7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXREZWxpdmVyeSA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZERlbGl2ZXJ5ID0gJHNjb3BlLmRlbGl2ZXJpZXNbanNJRF07XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRQYXltZW50ID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkUGF5bWVudCA9ICRzY29wZS5wYXltZW50c1tqc0lEXTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNoYW5nZVF1YW50aXR5ID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgaWYgKHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSkgPD0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICRzY29wZS5kZWxldGVJdGVtKGpzSUQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkc2NvcGUuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMgIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tICs9ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5kaXNjb3VudCpwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gLT0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgb2xkUHJvZHVjdDokc2NvcGUucHJvZHVjdHNbanNJRF0sIG5ld1Byb2R1Y3Q6JHNjb3BlLnByb2R1Y3RzW2pzSURdfTtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvU2F2ZVByb2R1Y3QnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yICE9ICdubycpe1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2hlY2tPdXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICgkc2NvcGUuc3VtbSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZighJHNjb3BlLmNoZWNraW5nT3V0KXtcclxuICAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbn07XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9zdG9yZS9wcm9kdWN0L2dldEN1c3RvbWVyJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGVsaXZlcmllcyA9IGRhdGEuZGVsaXZlcnk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGF5bWVudHMgPSBkYXRhLnBheW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VzdG9tZXIgPSBkYXRhLmN1c3RvbWVyO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuZGVsaXZlcmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kZWxpdmVyaWVzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucGF5bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGF5bWVudHNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWREZWxpdmVyeSA9ICRzY29wZS5kZWxpdmVyaWVzWzBdO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkUGF5bWVudCA9ICRzY29wZS5wYXltZW50c1swXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja2luZ091dCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Byb2NlZWROZXh0Rm9ybScpLnJlbW92ZUNsYXNzKCdoaWRlLWNvbnRlbnQtYm94Jyk7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjcHJvY2VlZE5leHRGb3JtJykub2Zmc2V0KCkudG9wXHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmRlbGV0ZUl0ZW0gPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICBpZighJHNjb3BlLmluUmVxdWVzdCl7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICRzY29wZS51c2VyLnRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5IDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ29sb3IgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFN1cmZhY2UgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2l6ZSA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemVcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvZGVsZXRlRnJvbUNhcnQnKSwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cy5zcGxpY2UoanNJRCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5wcm9kdWN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tICs9ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5kaXNjb3VudCpwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5wcm9kdWN0cy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9zdG9yZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jb25maXJtUHJvbW8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighJHNjb3BlLmluUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgcHJvbW9Db2RlOiAkc2NvcGUuZGlzY291bnQucHJvbW9Db2RlfTtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L0NvbmZpcm1Qcm9tbycpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9tb0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZERpc2NvdW50ID0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50ID0gZGF0YS5kaXNjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cyAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uaWQgPT0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmlkX3Byb2R1Y3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSArPSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uZGlzY291bnQqcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZERpc2NvdW50ID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdChvbGREaXNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGREaXNjb3VudCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdChvbGREaXNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5kaXNjb3VudC5zdW1tKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnJvcil7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvbW9FcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5kaXNjb3VudC5zdW1tKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLiR3YXRjaCgnZGlzY291bnQucHJvbW9Db2RlJywgZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAkc2NvcGUucHJvbW9FcnJvciA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLnNhdmVDdXN0b21lciA9IGZ1bmN0aW9uKHZhbGlkKSB7XHJcbiAgICAgICAgaWYgKCF2YWxpZCApIHsgXHJcbiAgICAgICAgICAgICRzY29wZS5jdXN0b21lckVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gJHNjb3BlLmN1c3RvbWVySGludDtcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRzY29wZS5zdW1tID09PSAwKSAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZighJHNjb3BlLmluUmVxdWVzdCl7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBjdXN0b21lcjogJHNjb3BlLmN1c3RvbWVyfTtcclxuXHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9zYXZlQ3VzdG9tZXInKSwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Byb2NlZWRGaW5pc2hGb3JtJykucmVtb3ZlQ2xhc3MoJ2hpZGUtY29udGVudC1ib3gnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoJyNwcm9jZWVkRmluaXNoRm9ybScpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXN0b21lckVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuJHdhdGNoKCdjdXN0b21lci5maXJzdF9uYW1lICsgY3VzdG9tZXIubGFzdF9uYW1lICsgY3VzdG9tZXIuZW1haWwgKyBjdXN0b21lci50YXJnZXRfZmlyc3RfbmFtZSArIGN1c3RvbWVyLnRhcmdldF9sYXN0X25hbWUgKyBjdXN0b21lci5waG9uZSArIGN1c3RvbWVyLmFkZHJlc3MgKyBjdXN0b21lci5jaXR5ICsgY3VzdG9tZXIuemlwICsgY3VzdG9tZXIuY291bnRyeScsIGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgJHNjb3BlLmN1c3RvbWVyRXJyb3IgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5idXkgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLnN1bW0gPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRva2VuOiAkc2NvcGUudXNlci50b2tlbixcclxuICAgICAgICAgICAgY3VzdG9tZXIgOiAkc2NvcGUuY3VzdG9tZXIsXHJcbiAgICAgICAgICAgIHByb2R1Y3RzIDogJHNjb3BlLnByb2R1Y3RzLFxyXG4gICAgICAgICAgICBkZWxpdmVyeSA6ICRzY29wZS5zZWxlY3RlZERlbGl2ZXJ5LFxyXG4gICAgICAgICAgICBwYXltZW50ICA6ICRzY29wZS5zZWxlY3RlZFBheW1lbnQsXHJcbiAgICAgICAgICAgIGRpc2NvdW50IDogJHNjb3BlLmRpc2NvdW50XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvYnV5JyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICAgICAgaWYgKCdlbWFpbCcgPT0gZGF0YS5wYXltZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoZGF0YS5tZXNzYWdlLCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL3N0b3JlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9jZWVkRmluaXNoRm9ybScpLmFmdGVyKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Zvcm0teW0tcGF5Jykuc3VibWl0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoZGF0YS5lcnJvciwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS50aHVtYkNsYXNzID0gZnVuY3Rpb24obGVuKXtcclxuICAgICAgICBpZiAobGVuID4gMylcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlciB4c2Nyb2xsZWRcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXJcIjtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnZhbENsYXNzID0gZnVuY3Rpb24oaXNWYWxpZCl7XHJcbiAgICAgICAgaWYoaXNWYWxpZClcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gXCJlcnJvclwiO1xyXG4gICAgfTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1VzZXJDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJGNvb2tpZXMsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG4gICRzY29wZS5yZXN1bHQgPSB7fTtcclxuICAkc2NvcGUubW9kYWwgPSAnbm9uZSc7XHJcbiAgJHNjb3BlLmhvc3RfdHlwZSA9ICdtb2JpbGUnO1xyXG5cclxuICAvL9Ce0YfQuNGB0YLQutCwINC30L3QsNGH0LXQvdC40LlcclxuICAkc2NvcGUuc2V0RW1wdHkgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS51c2VyLnBhc3N3b3JkID0gJyc7XHJcbiAgICAkc2NvcGUudXNlci50ZXJtcyA9IDA7XHJcblxyXG4gICAgJHNjb3BlLmVycm9yID0ge307XHJcbiAgICAkc2NvcGUucmVzdWx0ID0ge307XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmhpZGVNb2RhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLm1vZGFsID0gJ25vbmUnO1xyXG4gIH07XHJcblxyXG4gIC8v0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LTQsNGC0LDQv9C40LrQtdGA0LBcclxuICBhbmd1bGFyLmVsZW1lbnQoJyNiaXJ0aGRheScpLmRhdGVwaWNrZXIoe1xyXG4gICAgeWVhclJhbmdlOiAnMTkwMDotMCcsXHJcbiAgICBkYXRlRm9ybWF0OiAnZGQubW0ueXknLFxyXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChkYXRlVGV4dCwgaW5zdCkge1xyXG4gICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICRzY29wZS51c2VyLmJpcnRoZGF5ID0gZGF0ZVRleHQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL9Ch0YLQvtGA0L7QtiDQvNC+0LTQsNC70YzQvdGL0YUg0L7QutC+0L1cclxuICAkc2NvcGUuJHdhdGNoKCdtb2RhbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnNldEVtcHR5KCRzY29wZS5tb2RhbCk7XHJcbiAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJHNjb3BlLm1vZGFsKTtcclxuICB9KTtcclxuXHJcbiAgLy/QoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICRzY29wZS5zZXRQcm9maWxlID0gZnVuY3Rpb24odXNlcil7XHJcbiAgICAkaHR0cC5wb3N0KCcvdXNlci9lZGl0UHJvZmlsZScsdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9CQ0LLRgtC+0L7Qv9GA0LXQtNC10LvQtdC90LjQtSDRgNCw0LfRgNC10YnQtdC90LjRj1xyXG4gICRzY29wZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcmVzb2x1dGlvbiA9ICRjb29raWVzLnJlc29sdXRpb247XHJcbiAgICBpZiAoIXJlc29sdXRpb24pIHtcclxuICAgICAgdmFyIGNsaWVudFJlcyA9IE1hdGgubWF4KHNjcmVlbi53aWR0aCxzY3JlZW4uaGVpZ2h0KTtcclxuICAgICAgdmFyIHJlcyA9IFsxOTIwLCAxNDAwLCAxMjgwXTtcclxuICAgICAgZm9yKHZhciBpPTA7IGk8cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNsaWVudFJlcyA+PSByZXNbaV0pe1xyXG4gICAgICAgICAgcmVzb2x1dGlvbiA9IHJlc1tpXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAkY29va2llcy5yZXNvbHV0aW9uID0gJycgKyByZXNvbHV0aW9uO1xyXG4gICAgICAkc2NvcGUucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy/QkNCy0YLQvtGA0LjQt9Cw0YbQuNGPXHJcbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24odXNlciwgdmFsaWQpIHtcclxuICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2UvbG9naW4nLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5lbWFpbCA9IHRydWU7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9IGRhdGEuY29udGVudDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGRhdGEuYWNjZXNzX3VybCkgfHwgIWRhdGEuYWNjZXNzX3VybC5sZW5ndGgpXHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvc3BvdC9saXN0LycpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsZGF0YS5hY2Nlc3NfdXJsKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS4kd2F0Y2goJ3VzZXIuZW1haWwgKyB1c2VyLnBhc3N3b3JkICsgdXNlci5jb2RlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuZXJyb3IuZW1haWwgPSBmYWxzZTtcclxuICAgICRzY29wZS5lcnJvci5jb2RlID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IucGFzc3dvcmQgPSBmYWxzZTtcclxuICAgICRzY29wZS5lcnJvci5jb250ZW50ID0gJyc7XHJcbiAgfSk7XHJcblxyXG4gIC8vINCg0LXQs9C40YHRgtGA0LDRhtC40Y9cclxuICAkc2NvcGUuYWN0aXZhdGlvbiA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKXtcclxuICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh1c2VyLnRlcm1zID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2UvcmVnaXN0cmF0aW9uJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcblxyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUudXNlci5lbWFpbCA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLnBhc3N3b3JkID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIudGVybXMgPSAwO1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJykge1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwoZGF0YS5jb250ZW50LCAnbm9uZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChkYXRhLmVycm9yID09PSAnZW1haWwnKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuZW1haWwgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY29kZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5lcnJvci5jb250ZW50ID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJylcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ2Vycm9yJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCS0L7RgdGB0YLQsNC90L7QstC70LXQvdC40LUg0L/QsNGA0L7Qu9GPXHJcbiAgJHNjb3BlLnJlY292ZXJ5ID0gZnVuY3Rpb24odXNlciwgdmFsaWQpe1xyXG4gICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zZXJ2aWNlL3JlY292ZXJ5JywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICd5ZXMnKSB7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmVtYWlsID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpXHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ2Vycm9yJyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUudXNlci5lbWFpbCA9ICcnO1xyXG4gICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpXHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ25vbmUnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQodC80LXQvdCwINC/0LDRgNC+0LvRj1xyXG4gICRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbih1c2VyLCB2YWxpZCl7XHJcbiAgICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgJGh0dHAucG9zdCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL3Nwb3QvbGlzdC8nKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLm1lc3NhZ2VNb2RhbCA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHRleHQpIHx8ICF0ZXh0Lmxlbmd0aClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gdGV4dDtcclxuICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJylcclxuICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwodGV4dCwgJ25vbmUnKTtcclxuICAgIGVsc2VcclxuICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUubG9hZEZyb250ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgcmVzb2x1dGlvbiA9IDE5MjA7XHJcbiAgICBcclxuICAgIGlmIChzY3JlZW4ud2lkdGggPD0gMTQwMClcclxuICAgICAgICByZXNvbHV0aW9uID0gMTQwMDtcclxuICAgIGlmIChzY3JlZW4ud2lkdGggPD0gMTI4MClcclxuICAgICAgICByZXNvbHV0aW9uID0gMTI4MDtcclxuICAgICAgICBcclxuICAgIHZhciBmcm9udEJsb2NrID0gYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoIC5maXJzdC1zY3JlZW4nKTtcclxuICAgICAgIFxyXG4gICAgZnJvbnRCbG9jay5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC4uL3RoZW1lcy9tb2Jpc3BvdC9pbWcvaW5mby9mcm9udF8nICsgcmVzb2x1dGlvbiArICcuanBnKScpO1xyXG4gIH1cclxuICBcclxuICAvKlxyXG4gIGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLmJpbmQoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgIGlmICghYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoJykubGVuZ3RoIHx8ICFhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2ggI3BheW1lbnQnKS5sZW5ndGgpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgdmFyIHJlc29sdXRpb24gPSAxOTIwO1xyXG4gICAgXHJcbiAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDE0MDApXHJcbiAgICAgICAgcmVzb2x1dGlvbiA9IDE0MDA7XHJcbiAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDEyODApXHJcbiAgICAgICAgcmVzb2x1dGlvbiA9IDEyODA7XHJcbiAgICBcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCAjcGF5bWVudCcpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoLi4vdGhlbWVzL21vYmlzcG90L2ltZy9pbmZvL3Bhc3NfJyArIHJlc29sdXRpb24gKyAnLmpwZyknKTtcclxuICAgIFxyXG4gICAgYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoICNzb2MnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC4uL3RoZW1lcy9tb2Jpc3BvdC9pbWcvaW5mby9kaXNjb3VudF8nICsgcmVzb2x1dGlvbiArICcuanBnKScpO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2ggI2NvdXBvbicpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoLi4vdGhlbWVzL21vYmlzcG90L2ltZy9pbmZvL3NvY2lhbF8nICsgcmVzb2x1dGlvbiArICcuanBnKScpO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2ggI3RyYW5zcG9ydCcpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoLi4vdGhlbWVzL21vYmlzcG90L2ltZy9pbmZvL3RyYW5zcG9ydF8nICsgcmVzb2x1dGlvbiArICcuanBnKScpO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2ggI2RldicpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoLi4vdGhlbWVzL21vYmlzcG90L2ltZy9pbmZvL3BhcnRuZXJfJyArIHJlc29sdXRpb24gKyAnLmpwZyknKTtcclxuIFxyXG4gIH0pO1xyXG4gICovXHJcbiAgXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==