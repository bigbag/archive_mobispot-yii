!function(e,t,o){"use strict";t.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){var r,s={},i={},a=!1,c=t.copy,u=t.isUndefined;return n.addPollFn(function(){var t=n.cookies();r!=t&&(r=t,c(t,i),c(t,s),a&&e.$apply())})(),a=!0,e.$watch(function(){var e,r,a;for(e in i)u(s[e])&&n.cookies(e,o);for(e in s)r=s[e],t.isString(r)||(r=""+r,s[e]=r),r!==i[e]&&(n.cookies(e,r),a=!0);if(a)for(e in r=n.cookies(),s)s[e]!==r[e]&&(u(r[e])?delete s[e]:s[e]=r[e])}),s}]).factory("$cookieStore",["$cookies",function(e){return{get:function(o){return(o=e[o])?t.fromJson(o):o},put:function(o,n){e[o]=t.toJson(n)},remove:function(t){delete e[t]}}}])}(window,window.angular),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig",function(e){return{require:"?ngModel",link:function(t,o,n,r){function s(e,t){return t&&"function"==typeof t?function(o,n){e(o,n),t(o,n)}:e}var i={},a={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(i,e),r&&(r.$render=function(){o.sortable(i)},a.start=function(e,t){t.item.sortable={index:t.item.index()}},a.update=function(e,t){t.item.sortable.resort=r},a.receive=function(e,t){t.item.sortable.relocate=!0,r.$modelValue.splice(t.item.index(),0,t.item.sortable.moved)},a.remove=function(e,t){t.item.sortable.moved=1===r.$modelValue.length?r.$modelValue.splice(0,1)[0]:r.$modelValue.splice(t.item.sortable.index,1)[0]},a.stop=function(e,o){if(o.item.sortable.resort&&!o.item.sortable.relocate){var n,r;r=o.item.sortable.index,n=o.item.index(),o.item.sortable.resort.$modelValue.splice(n,0,o.item.sortable.resort.$modelValue.splice(r,1)[0])}(o.item.sortable.resort||o.item.sortable.relocate)&&t.$apply()}),t.$watch(n.uiSortable,function(e){angular.forEach(e,function(e,t){a[t]&&(e=s(a[t],e)),o.sortable("option",t,e)})},!0),angular.forEach(a,function(e,t){i[t]=s(e,i[t])}),o.sortable(i)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0}).directive("uiMask",["uiMaskConfig","$parse",function(e,t){"use strict";return{priority:100,require:"ngModel",restrict:"A",compile:function(){var o=e;return function(e,n,r,s){function i(e){return angular.isDefined(e)?(b(e),H?(l(),p(),!0):d()):d()}function a(e){angular.isDefined(e)&&(P=e,H&&C())}function c(e){return H?(O=g(e||""),L=f(O),s.$setValidity("mask",L),L&&O.length?h(O):void 0):e}function u(e){return H?(O=g(e||""),L=f(O),s.$viewValue=O.length?h(O):"",s.$setValidity("mask",L),""===O&&r.required&&s.$setValidity("required",!s.$error.required),L?O:void 0):e}function d(){return H=!1,m(),angular.isDefined(U)?n.attr("placeholder",U):n.removeAttr("placeholder"),angular.isDefined(N)?n.attr("maxlength",N):n.removeAttr("maxlength"),n.val(s.$modelValue),s.$viewValue=s.$modelValue,!1}function l(){O=R=g(s.$viewValue||""),F=E=h(O),L=f(O);var e=L&&O.length?F:"";r.maxlength&&n.attr("maxlength",2*M[M.length-1]),n.attr("placeholder",P),n.val(e),s.$viewValue=e}function p(){V||(n.bind("blur",_),n.bind("mousedown mouseup",k),n.bind("input keyup click focus",C),V=!0)}function m(){V&&(n.unbind("blur",_),n.unbind("mousedown",k),n.unbind("mouseup",k),n.unbind("input",C),n.unbind("keyup",C),n.unbind("click",C),n.unbind("focus",C),V=!1)}function f(e){return e.length?e.length>=D:!0}function g(e){var t="",o=I.slice();return e=e.toString(),angular.forEach(q,function(t){e=e.replace(t,"")}),angular.forEach(e.split(""),function(e){o.length&&o[0].test(e)&&(t+=e,o.shift())}),t}function h(e){var t="",o=M.slice();return angular.forEach(P.split(""),function(n,r){e.length&&r===o[0]?(t+=e.charAt(0)||"_",e=e.substr(1),o.shift()):t+=n}),t}function v(e){var t=r.placeholder;return"undefined"!=typeof t&&t[e]?t[e]:"_"}function y(){return P.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function b(e){var t=0;if(M=[],I=[],P="","string"==typeof e){D=0;var o=!1,n=e.split("");angular.forEach(n,function(e,n){A.maskDefinitions[e]?(M.push(t),P+=v(n),I.push(A.maskDefinitions[e]),t++,o||D++):"?"===e?o=!0:(P+=e,t++)})}M.push(M.slice().pop()+1),q=y(),H=M.length>1?!0:!1}function _(){A.clearOnBlur&&(z=0,B=0,L&&0!==O.length||(F="",n.val(""),e.$apply(function(){s.$setViewValue("")})))}function k(e){"mousedown"===e.type?n.bind("mouseout",w):n.unbind("mouseout",w)}function w(){B=T(this),n.unbind("mouseout",w)}function C(t){t=t||{};var o=t.which,r=t.type;if(16!==o&&91!==o){var i,a=n.val(),c=E,u=g(a),d=R,l=!1,p=S(this)||0,m=z||0,f=p-m,v=M[0],y=M[u.length]||M.slice().shift(),b=B||0,_=T(this)>0,k=b>0,w=a.length>c.length||b&&a.length>c.length-b,C=a.length<c.length||b&&a.length===c.length-b,I=o>=37&&40>=o&&t.shiftKey,P=37===o,q=8===o||"keyup"!==r&&C&&-1===f,D=46===o||"keyup"!==r&&C&&0===f&&!k,O=(P||q||"click"===r)&&p>v;if(B=T(this),!I&&(!_||"click"!==r&&"keyup"!==r)){if("input"===r&&C&&!k&&u===d){for(;q&&p>v&&!x(p);)p--;for(;D&&y>p&&-1===M.indexOf(p);)p++;var F=M.indexOf(p);u=u.substring(0,F)+u.substring(F+1),l=!0}for(i=h(u),E=i,R=u,n.val(i),l&&e.$apply(function(){s.$setViewValue(u)}),w&&v>=p&&(p=v+1),O&&p--,p=p>y?y:v>p?v:p;!x(p)&&p>v&&y>p;)p+=O?-1:1;(O&&y>p||w&&!x(m))&&p++,z=p,$(this,p)}}}function x(e){return M.indexOf(e)>-1}function S(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function $(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",t),o.moveStart("character",t),o.select()}}function T(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var M,I,P,q,D,O,F,L,E,R,z,B,H=!1,V=!1,U=r.placeholder,N=r.maxlength,A={};r.uiOptions?(A=e.$eval("["+r.uiOptions+"]"),angular.isObject(A[0])&&(A=function(e,t){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(void 0===t[o]?t[o]=angular.copy(e[o]):angular.extend(t[o],e[o]));return t}(o,A[0]))):A=o,r.$observe("uiMask",i),r.$observe("placeholder",a);var j=!1;r.$observe("modelViewValue",function(e){"true"===e&&(j=!0)}),e.$watch(r.ngModel,function(o){if(j&&o){var n=t(r.ngModel);n.assign(e,s.$viewValue)}}),s.$formatters.push(c),s.$parsers.push(u),n.bind("mousedown mouseup",k),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),o=t.length>>>0;if(0===o)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=o)return-1;for(var r=n>=0?n:Math.max(o-Math.abs(n),0);o>r;r++)if(r in t&&t[r]===e)return r;return-1})}}}}]),angular.module("mobispot",["ngCookies","ui.sortable","ui.mask"]),angular.module("mobispot").filter("tel",function(){return function(e){if(!e)return"";var t=e.toString().trim().replace(/^\+/,""),o=t.slice(0,1),n=t.slice(1,4),r=t.slice(4);return r=r.slice(0,3)+" "+r.slice(3,5)+" "+r.slice(5),("+"+o+" ("+n+") "+r).trim()}}),angular.module("mobispot").service("contentService",function(){this.desktopModal=function(e,t){if(angular.isUndefined(t)&&(t=500),angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open"),"none"==e)return $(".show-block.active").removeClass("active").fadeOut(t),!1;var o=angular.element("#"+e);$(".show-block").hasClass("active")&&$(".show-block.active").attr("id")!=e?$(".show-block.active").removeClass("active").fadeOut(t,function(){o.fadeIn(t).addClass("active")}):o.fadeIn(t).addClass("active")},this.mobileModal=function(e,t){var o=angular.element(".m-result"),n=o.find("p");o.removeClass("m-negative"),"error"==t&&o.addClass("m-negative"),o.hide(),o.show(),n.text(e),setTimeout(function(){o.hide()},5e3)},this.messageModal=function(e,t){if(speed=500,"mobile"===t)this.mobileModal(e,"none");else{angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var o=angular.element("#message");o.removeClass("negative"),o.removeClass("alert");var n=angular.element("#message p");$(".show-block").hasClass("active")?$(".show-block.active").removeClass("active").fadeOut(speed,function(){n.html(e),o.fadeIn(speed).addClass("active")}):(n.html(e),o.fadeIn(speed).addClass("active"))}},this.scrollPage=function(e,t){angular.isUndefined(t)&&(t=600);var o=$(e).offset().top;$("html, body").animate({scrollTop:o},t)};var e={};this.setSpot=function(t){e=t},this.getSpot=function(){return e}}),angular.module("mobispot").service("dialogService",function(){var e=function(e,t,o,n,r){function s(){e("yes"),a()}function i(){e("no"),a()}function a(){d.unbind("click",s),l.unbind("click",i),$(document).unbind("click",i),c.removeClass("active").fadeOut(speed)}speed=500,angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var c=angular.element("#b-dialog"),u=angular.element("#b-dialog p"),d=angular.element("#b-dialog .yes-button"),l=angular.element("#b-dialog .no-button");$(".show-block").hasClass("active")&&$(".show-block.active").removeClass("active").fadeOut(0),u.html(n),d.text(t),l.text(o),c.removeClass("alert"),c.removeClass("negative"),"undefined"!=typeof r&&c.addClass(r),c.fadeIn(speed).addClass("active"),d.bind("click",s),l.bind("click",i),$(document).bind("click",i)};return{yesNoDialog:e}}),angular.module("mobispot").controller("DemokitController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,r){e.error={},e.$watch("order.name + order.email + order.phone + order.address + order.city + order.zip + order.country + order.shipping + order.payment",function(){e.error.field=!1}),e.order={name:"",email:"",phone:"",address:"",city:"",zip:"",country:"",shipping:1,payment:1},e.products={},e.max_product_id=0,e.prices={},e.shippings={},e.payments={},e.total=0,e.toMain=!1,e.registerProduct=function(t,o){e.products[t]=0,t>e.max_product_id&&(e.max_product_id=t),e.prices[t]=o},e.addProduct=function(t){e.products[t]<9&&e.products[t]++,e.calculateSumm()},e.deductProduct=function(t){e.products[t]>0&&e.products[t]--,e.calculateSumm()},e.registerShipping=function(t,o){e.shippings[t]=o},e.setShipping=function(t,o){e.order.shipping=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click(),e.calculateSumm()},e.registerPayment=function(t,o){e.payments[t]=o},e.setPayment=function(t,o){e.order.payment=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click()},e.calculateSumm=function(){e.summ=120,e.total=e.summ,e.order.shipping&&"undefined"!=typeof e.shippings[e.order.shipping]&&(e.total+=e.shippings[e.order.shipping])},e.buyDemoKit=function(n){return e.orderForm.$valid?void(e.toMain?window.location.href="/":(n.products=e.products,t.post("/service/buyDemoKit",n).success(function(t){"no"==t.error?"email"==t.action?(e.result.message=t.message,r.desktopModal("message"),e.toMain=!0,e.finishButton=e.toMainMessage):(angular.element("#demo-kit-block").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):(e.result.message=t.message,r.desktopModal("message"),e.error.field=!0)}))):(e.error.field=!0,!1)}}]),angular.module("mobispot").controller("HelpController",["$scope","$http","contentService",function(e,t,o){e.error={},e.send=function(n,r){return r?(n.email=n.help_email,void t.post("/service/sendQuestion",n).success(function(t){"no"==t.error&&(e.user.name="",e.user.help_email="",e.user.question="",e.user.phone="",e.result.message=t.content,o.viewModal("message"))})):!1}}]),angular.module("mobispot").controller("PhonesController",["$scope",function(e){e.initPhones=function(t){e.phonesList=t},e.initDevices=function(t){e.devicesList=t},e.phonesList=[],e.devicesList=[]}]),angular.module("mobispot").controller("SlideController",["$scope","$timeout",function(e,t){e.IMAGE_WIDTH=300,e.FADE_SPEED=0,e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.spots={},e.spots.name="spots",e.spots.listposition={left:"0px"},e.spots.slides=[{id:1,img:"brace_blue.jpg"}],e.spots.wristbands=[1],e.spots.wristbands_current=e.spots.wristbands[0],e.spots.cards=[],e.spots.cards_current=-1,e.spots.keys=[],e.spots.keys_current=-1,e.spots.current=e.spots.wristbands_current,e.spots.current_type="wristband",e.spots.color_rotation=!1,e.spots.timer_rotation=!1,e.scrollTo=function(t,o){t.listposition={left:e.IMAGE_WIDTH*o*-1+"px"}},angular.element(window).bind("load",function(){e.sliderInit()}),e.sliderInit=function(){e.spots.slides=[{id:0,img:"brace_black.png"},{id:1,img:"brace_blue.png"},{id:2,img:"brace_green.png"},{id:3,img:"brace_patt01.png"},{id:4,img:"brace_patt02.png"},{id:5,img:"brace_patt03.png"},{id:6,img:"brace_patt04.png"},{id:7,img:"brace_patt05.png"},{id:8,img:"brace_patt06.png"},{id:9,img:"brace_patt07.png"},{id:10,img:"brace_red.png"},{id:11,img:"brace_white.png"},{id:12,img:"card_black.png"},{id:13,img:"card_blue.png"},{id:14,img:"card_green.png"},{id:15,img:"card_red.png"},{id:16,img:"card_white.png"},{id:17,img:"card_yellow.png"},{id:18,img:"key_black.png"},{id:19,img:"key_blue.png"},{id:20,img:"key_green.png"},{id:21,img:"key_red.png"},{id:22,img:"key_white.png"},{id:23,img:"key_yellow.png"},{id:24,img:"brace_yellow.png"}],e.spots.wristbands=[0,1,4,2,3,5,6,7,8,9,10,11,24],e.spots.wristbands_current=e.spots.wristbands[e.getRandomInt(0,e.spots.wristbands.length-1)],e.spots.cards=[12,13,14,15,16,17],e.spots.cards_current=15,e.spots.keys=[18,19,20,21,22,23],e.spots.keys_current=20,e.spots.inited=!0},e.fadeTo=function(t,o){if(t.current==o)return!1;angular.element("#slider-"+t.name+" .f-slide").stop();var n="#"+t.name+"_"+o;return angular.element(n).length?(t.current=o,angular.element("#slider-"+t.name+" .f-slide[id!="+n+"]").fadeOut(0),angular.element(n).fadeIn(e.FADE_SPEED),!0):!1},e.fadeToWistbrands=function(){e.fadeTo(e.spots,e.spots.wristbands_current)&&(e.spots.current_type="wristband")},e.fadeToCards=function(){e.fadeTo(e.spots,e.spots.cards_current)&&(e.spots.current_type="card")},e.fadeToKeys=function(){e.fadeTo(e.spots,e.spots.keys_current)&&(e.spots.current_type="key")},e.startColors=function(){return e.spots.color_rotation?!1:(e.spots.color_rotation=!0,e.spots.timer_rotation?!1:(e.spots.timer_rotation=!0,void t(function(){e.colorRotation()},100)))},e.stopColors=function(){e.spots.color_rotation=!1},e.colorRotation=function(){if(!e.spots.color_rotation)return e.spots.timer_rotation=!1,!1;if("wristband"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.wristbands.length;n++)e.spots.wristbands[n]==e.spots.wristbands_current&&(o=n);if(0>o)return!1;e.spots.wristbands_current=e.spots.wristbands.length-1==o?e.spots.wristbands[0]:e.spots.wristbands[o+1],e.fadeToWistbrands()}else if("card"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.cards.length;n++)e.spots.cards[n]==e.spots.cards_current&&(o=n);if(0>o)return!1;e.spots.cards_current=e.spots.cards.length-1==o?e.spots.cards[0]:e.spots.cards[o+1],e.fadeToCards()}else{if("key"!=e.spots.current_type)return!1;for(var o=-1,n=0;n<e.spots.keys.length;n++)e.spots.keys[n]==e.spots.keys_current&&(o=n);if(0>o)return!1;e.spots.keys_current=e.spots.keys.length-1==o?e.spots.keys[0]:e.spots.keys[o+1],e.fadeToKeys()}e.spots.timer_rotation=!0,t(function(){e.colorRotation()},1300)},e.randomSlide=function(t){e.fadeTo(t,e.getRandomInt(0,t.slides.length-1))}}]),angular.module("mobispot").controller("SpotController",["$scope","$http","$compile","$timeout","contentService","dialogService",function(e,t,o,n,r,s){function i(e){e.stopPropagation(),e.preventDefault(),"dragover"==e.type?angular.element("#dropbox").addClass("hover"):angular.element("#dropbox").removeClass("hover")}function a(t){i(t);for(var o,n=t.target.files||t.dataTransfer.files,r=0;o=n[r];r++)e.uploadFile(o)}function c(t){e.$apply(function(){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"})}e.maxSize=26214400,e.popup_width=500,e.popup_height=550,e.progress=0,e.keys=[],e.action=!1,e.error={},e.result={},e.spot={},e.spot.discodes=0,e.general={},e.general.views=!1,e.host_mobile=0,e.wallet={},e.wallet.cards={},e.scroll_key=-1,e.actions={},e.actions.page="",e.actions.phrase="",e.actions.in_progress=!1,e.actions.offset=0,e.actions.count_all=0,e.text={},e.transport_types=[],e.custom_card={},e.prev_custom_card={},e.selected_type={},e.in_request=!1,e.wallet_history={},e.wallet_history.date="",e.wallet_history.empty_date=!1,e.date_history_shown=!1,e.$watch("spot.code + spot.terms",function(){e.error.code=!1,e.error.terms=!1}),e.addSpot=function(n){return n.code?e.spot.terms?void t.post("/spot/add",n).success(function(t){"no"==t.error?(e.spot.discodes=t.discodes,angular.element(".spot-list").prepend(o(t.content)(e)),angular.element("#actSpot").click(),delete e.spot.code,delete e.spot.terms,(e.host_mobile||1==n.need_reload)&&(window.location.href="http://"+window.location.hostname+"/spot/list")):"yes"==t.error&&(e.error.code=!0)}):!1:(e.error.code=!0,!1)},e.$watch("general.views + spot.discodes",function(){e.actions.page="",angular.element(window).unbind("scroll",e.loadMoreCoupons),"wallet"==e.general.views||"spot"==e.general.views?e.viewWallet(e.spot):"coupon"==e.general.views?e.viewCoupons(e.spot,e.actions):"settings"==e.general.views?e.viewsSettings(e.spot):"transport"==e.general.views&&e.viewTransport(e.spot)}),e.bodyMinHeight=function(){var e=angular.element(".spot-list").height();angular.element(".spot-content").css("min-height",e+200)},e.addContent=function(){e.addValue(e.spot.content)},e.addValue=function(n){e.spot.content=n,t.post("/spot/spotAddContent",e.spot).success(function(t){if("no"==t.error){angular.element("#add-content").append(o(t.content)(e)),e.spot.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),angular.element("#extraMediaForm").hasClass("open")&&(angular.element("#extraMediaForm").slideUp(0,function(){angular.element("#extraMediaForm a").removeClass("blackout"),angular.element("#extraMediaForm a").fadeTo(0,1)}),angular.element("#extraMediaForm").removeClass("open"));var n=angular.element("#block-"+t.key).offset().top;angular.element("html, body").animate({scrollTop:n},600)}}),e.resetCursor()},e.saveOrder=function(){t.post("/spot/saveOrder",e.spot).success(function(e){"no"==e.error})},e.sortableOptions={update:function(){e.saveOrder()},containment:".spot-content",handle:".move",scrollSensitivity:5,tolerance:"pointer",opacity:.8},e.removeContent=function(o,n,r){o.key=n,t.post("/spot/spotRemoveContent",o).success(function(t){if("no"==t.error){var o=angular.element(r.currentTarget).parents(".spot-item");o.remove(),e.keys=t.keys,t.netDown&&e.netDown(t.netDown)}})},e.editContent=function(t,n,r){if(t.content_new)e.hideSpotEdit();else{t.key=n;var s=angular.element(r.currentTarget).parents(".spot-item"),i=angular.element("#spot-edit").clone();if(s.find("a.type-link").size()>0){var a=s.find("a.type-link");e.spot.content_new=a.find("span.link").text()}else{var c=s.find("p.item-type__text");e.spot.content_new=c.text()}i.removeClass("hide"),i.find("textarea").focus(1),s.hide().before(o(i)(e))}},e.saveContent=function(n,r){var s=angular.element(r.currentTarget).parents(".spot-item"),i=s.next();t.post("/spot/spotSaveContent",n).success(function(t){"no"==t.error?(s.before(o(t.content)(e)),s.remove(),i.remove()):(s.remove(),i.show()),delete e.spot.content_new})},e.hideSpotEdit=function(){if(!e.spot.content&&!e.spot.content_new)return!1;var n=angular.element("#spot-edit"),r=n.next();t.post("/spot/spotSaveContent",e.spot).success(function(t){"no"==t.error?(n.before(o(t.content)(e)),n.remove(),r.remove()):(n.remove(),r.show()),delete e.spot.content_new})},e.renameSpot=function(o){return o.name?void t.post("/spot/rename",o).success(function(t){"no"==t.error&&(angular.element("#"+o.discodes+" h3").text(o.name),r.messageModal(t.content,e.host_type))}):!1},e.cleanSpot=function(o){s.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/clean",o).success(function(t){"no"==t.error&&(e.general.views="spot")})},e.text.yes_btn,e.text.no_btn,e.text.clean_spot,"negative")},e.removeSpot=function(o){s.yesNoDialog(function(e){return"yes"!=e?!1:void t.post("/spot/remove",o).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")})},e.text.yes_btn,e.text.no_btn,e.text.rm_spot,"negative")},e.ivisibleSpot=function(o){var n=e.text.mk_invisible,r=e.text.mk_invisible_descr;6==o.status&&(n=e.text.mk_visible,r=e.text.mk_visible_descr),s.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/invisible",o).success(function(t){"no"==t.error&&(e.spot.status=t.status,angular.element("#"+o.discodes).toggleClass("invisible"))})},e.text.yes_btn,e.text.no_btn,n,"negative")},e.viewsSettings=function(n){var r=angular.element("#spot-block");t.post("/spot/settings",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewWallet=function(n){var r=angular.element("#spot-block");t.post("/spot/wallet",n).success(function(t){"no"==t.error?(r.empty(),r.html(o(t.content)(e)),e.getListCard(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500),angular.element("#date_history").datepicker({yearRange:"1900:-0",maxDate:0,dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.wallet_history.date=t})},onClose:function(){e.$apply(function(){e.date_history_shown=!1})}})):e.general.views="settings"})},e.viewCoupons=function(n){var r=angular.element("#spot-block");t.post("/spot/coupons",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewTransport=function(n){var r=angular.element("#spot-block");t.post("/spot/transport",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.listCoupons=function(n,r){if(!r.page)return!1;var s=angular.element("#coupons-list"),i={discodes:n.discodes,token:n.token,page:r.page,phrase:r.phrase,offset:r.offset};e.actions.in_progress=!0,t.post("/spot/listCoupons",i).success(function(t){"no"==t.error&&(e.actions.offset+=t.count,e.actions.count_all=t.count_all,s.empty(),s.append(o(t.content)(e)),e.actions.in_progress=!1)}).error(function(){e.actions.in_progress=!1})},e.filterCoupons=function(t,o){e.actions.offset=0,e.actions.count_all=0,e.listCoupons(t,o)},e.getListCard=function(){return"wallet"!=e.general.views?!1:(t.post("/spot/listCard",e.wallet).success(function(t){"no"==t.error&&(e.wallet.cards=t.cards,e.wallet.cards_count=t.cards_count,e.wallet.linking_card=t.linking_card)}),void n(function(){e.getListCard()},5e3))},e.showCustomCard=function(){$("#customCard").addClass("show"),$("body").css("overflow","hidden")},e.hideCustomCard=function(){$("#customCard").removeClass("show"),$("body").css("overflow","")},e.blockedWallet=function(){t.post("/spot/blockedWallet",e.wallet).success(function(t){"no"==t.error&&(e.wallet.status=t.status)})},e.linkingCard=function(e){return e.terms?void angular.element("#linking_card").submit():!1},e.setPaymentCard=function(o,n){if(e.in_request)return!1;var r={token:e.spot.token,card_id:o};e.in_request=!0,t.post("/spot/setPaymentCard",r).success(function(t){"no"==t.error&&(angular.element(".main-card").removeClass("main-card"),angular.element(n.currentTarget).parent().parent().addClass("main-card"),e.wallet.blacklist=1,e.listHistory(e.wallet_history.date)),e.in_request=!1}).error(function(){e.in_request=!1})},e.editCardList=function(){$(".table-card").toggleClass("edit"),e.wallet.card_edit=0===e.wallet.card_edit?1:0},e.removeCard=function(o){var n={token:e.spot.token,card_id:o};t.post("/spot/removeCard",n).success(function(t){"no"==t.error&&(e.wallet.cards_count-=1,delete e.wallet.cards[o])})};var u;e.countReset=function(){e.reset_time="undefined"!=typeof e.reset_time?e.reset_time:30,u=n(function(){0===e.reset_time?$(location).attr("href",window.location.pathname):e.reset_time--,e.countReset()},1e3)},e.fileUploadInit=function(){var e=document.getElementById("dropbox"),t=document.getElementById("add-file");if(e&&t){var o=new XMLHttpRequest;o.upload&&(e.addEventListener("dragover",i,!1),e.addEventListener("dragleave",i,!1),e.addEventListener("drop",a,!1),t.addEventListener("change",a,!1))}},e.uploadComplete=function(t){var n=t.target.responseText;if(n){var r=angular.fromJson(n);if("no"==r.error){angular.element("#progress-content").hide(),angular.element("#add-content").append(o(r.content)(e)),e.keys.push(r.key),angular.element("#add-file").val("");var s=$("#block-"+r.key).offset().top;angular.element("html, body").animate({scrollTop:s},600)}}},e.uploadFailed=function(){angular.element("#error-upload").show().delay(800).slideUp("slow")},e.uploadFile=function(t){var o=new XMLHttpRequest;o.upload&&t.size<=e.maxSize&&(angular.element("#progress-content").show(),o.upload.onprogress=function(t){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"},o.upload.addEventListener("progress",c,!1),o.addEventListener("error",e.uploadFailed,!1),o.addEventListener("load",e.uploadComplete,!1),o.open("POST","/spot/upload",!0),o.setRequestHeader("X-File-Name",unescape(encodeURIComponent(t.name))),o.setRequestHeader("X-Discodes",e.spot.discodes),o.send(t))},e.loadSocContent=function(n){var r={discodes:e.spot.discodes,key:n,token:e.user.token};t.post("/spot/SocNetContent",r).success(function(t){if("no"==t.error){var n=angular.element("#block-"+t.key),r=n.height(),s=n.offset().top;if(n.before(o(t.content)(e)),n.remove(),e.setVideoSize(t.key),s<$("html, body").scrollTop()){var i=$("html, body").scrollTop()+$("#block-"+t.key).height()-r;$("html, body").animate({scrollTop:i},0)}}})},e.netCheck=function(o){var n={token:e.user.token,netName:o};t.post("/spot/netCheck",n).success(function(e){if("no"==e.error){var t=angular.element("#extraMediaForm a[net='"+e.netName+"']");e.binded?t.addClass("binded"):t.removeClass("binded")}})},e.netUp=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.addClass("binded")},e.netDown=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.removeClass("binded")};var d,l,p,m,f;e.toggleBinding=function(o,n,r){var i=angular.element(n.currentTarget);return i.hasClass("binded")?void s.yesNoDialog(function(n){if("yes"!=n)return!1;var r={token:e.user.token,net_name:o};t.post("/user/unbindService",r).success(function(t){"no"==t.error&&e.netDown(t.net_name)})},e.text.yes_btn,e.text.no_btn,r,"negative"):(e.bindService(o),!0)},e.bindService=function(t){var o=$.extend({id:"",popup:{width:e.popup_width,height:e.popup_height}},o),r="http://"+window.location.hostname+"/user/BindSocLogin?service="+t,s=r;s+=s.indexOf("?")>=0?"&":"?",-1===s.indexOf("redirect_uri=")&&(s+="redirect_uri="+encodeURIComponent(r));var i=(window.screen.width-o.popup.width)/2,a=(window.screen.height-o.popup.height)/2;if(e.host_mobile||(d=window.open(s+"&js","yii_eauth_popup","width="+o.popup.width+",height="+o.popup.height+",left="+i+",top="+a+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var c=s+"&loginonly=true";"undefined"!=typeof e.spot.content&&e.spot.content.length&&(c+="&link="+encodeURIComponent(e.spot.content)),window.location.href=c}else d.focus(),e.bindNet={name:t,discodes:e.spot.discodes,newField:1},l=n(e.loginTimer,1e3)},e.bindByPanel=function(s){var i=s,a={spot:e.spot,token:e.user.token,netName:i};if("undefined"!=typeof e.spot.content&&e.spot.content.length){a.link=e.spot.content;for(var c=0;c<e.soc_patterns.length;c++)if(-1!=e.spot.content.indexOf(e.soc_patterns[c].baseUrl)){i=e.soc_patterns[c].name,a.netName=e.soc_patterns[c].name;break}}t.post("/spot/BindByPanel",a).success(function(t){if("no"==t.error)if(0===t.profileHint.length)if(t.loggedIn)if("ok"==t.linkCorrect){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.setVideoSize(t.key);var s=$("#block-"+t.key).offset().top;$("html, body").animate({scrollTop:s},600),e.netUp(t.socnet);var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else r.messageModal(t.linkCorrect,e.host_type);else{var c=$.extend({id:"",popup:{width:e.popup_width,height:e.popup_height}},c),u="http://"+window.location.hostname+"/user/BindSocLogin?service="+i,p=u;p+=p.indexOf("?")>=0?"&":"?",-1===p.indexOf("redirect_uri=")&&(p+="redirect_uri="+encodeURIComponent(u));var m=(window.screen.width-c.popup.width)/2,g=(window.screen.height-c.popup.height)/2;if(e.host_mobile||(d=window.open(p+"&js","yii_eauth_popup","width="+c.popup.width+",height="+c.popup.height+",left="+m+",top="+g+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var h=p+"&discodes="+e.spot.discodes+"&newField=1&synch=true";"undefined"!=typeof e.spot.content&&e.spot.content.length&&(h+="&link="+encodeURIComponent(e.spot.content)),window.location.href=h}else d.focus(),e.bindNet={name:t.socnet,discodes:e.spot.discodes,newField:1},"undefined"!=typeof e.spot.content&&e.spot.content.length&&(e.bindNet.link=e.spot.content),l=n(e.loginTimer,1e3)}else n.cancel(f),f=n(e.hintTimer,1e4),angular.element("#socLinkHolder h4").html(t.profileHint),angular.element("#noteHolder").addClass("hide"),angular.element("#socLinkHolder").removeClass("hide"),angular.element("#socLinkHolder h4").stop(),angular.element("#socLinkHolder h4").fadeTo(800,.5,function(){angular.element("#socLinkHolder h4").fadeTo(800,1,function(){angular.element("#socLinkHolder h4").fadeTo(800,.5,function(){angular.element("#socLinkHolder h4").fadeTo(800,1)})})})})},e.hintTimer=function(){angular.element("#socLinkHolder h4").stop(),angular.element("#socLinkHolder h4").html(""),angular.element("#noteHolder").hasClass("hide")&&(angular.element("#socLinkHolder").addClass("hide"),angular.element("#noteHolder").removeClass("hide"))},e.getPatternInd=function(t){for(var o=-1,n=0;n<e.soc_patterns.length;n++)if(e.soc_patterns[n].name==t){o=n;break}return o},e.bindSocial=function(s,i,a){var c=angular.element(a.currentTarget).parents(".spot-item");s.key=i,t.post("/spot/bindSocial",s).success(function(t){if("no"==t.error)if("no"!=t.socnet&&t.socnet.length>0)if(t.loggedIn)if("ok"==t.linkCorrect){c.before(o(t.content)(e)),c.remove();var i=e.getPatternInd(t.socnet);i>-1&&(e.soc_patterns[i].BindByPaste=!0),e.setVideoSize(s.key),e.netUp(t.socnet)}else r.messageModal(t.linkCorrect,e.host_type);else{var u=$.extend({id:"",popup:{width:e.popup_width,height:e.popup_height}},u),p="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.socnet,m=p;m+=m.indexOf("?")>=0?"&":"?",-1===m.indexOf("redirect_uri=")&&(m+="redirect_uri="+encodeURIComponent(p));var f=(window.screen.width-u.popup.width)/2,g=(window.screen.height-u.popup.height)/2;d=window.open(m+"&js","yii_eauth_popup","width="+u.popup.width+",height="+u.popup.height+",left="+f+",top="+g+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes"),null===d||"undefined"==typeof d?window.location.href=m+"&discodes="+s.discodes+"&key="+s.key+"&synch=true":(d.focus(),e.bindNet={name:t.socnet,discodes:s.discodes,key:s.key,spotEdit:angular.element(a.currentTarget).parents(".spot-item")},l=n(e.loginTimer,1e3))}else"ok"!=t.linkCorrect&&r.messageModal(t.linkCorrect,e.host_type)})},e.checkLike=function(r,s){var i,a={token:e.user.token,id:r,discodes:e.spot.discodes};t.post("/user/checkLike",a).success(function(t){if("no"==t.error)if(t.isSocLogged)"undefined"!=typeof t.content&&(e.host_mobile||angular.isUndefined(s)?angular.isUndefined(s)||(i=angular.element(s.currentTarget).parent().parent().parent().parent()):i=angular.element(s.currentTarget).parent().parent("div.spot-item"),i.before(o(t.content)(e)),i.remove());else{var a=$.extend({id:"",popup:{width:e.popup_width,height:e.popup_height}},a),c="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.service,u=c;
u+=u.indexOf("?")>=0?"&":"?",-1===u.indexOf("redirect_uri=")&&(u+="redirect_uri="+encodeURIComponent(c)+"&"),u+="js";var l=(window.screen.width-a.popup.width)/2,m=(window.screen.height-a.popup.height)/2;if(e.host_mobile||(d=window.open(u,"yii_eauth_popup","width="+a.popup.width+",height="+a.popup.height+",left="+l+",top="+m+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var f=u+"&discodes="+e.spot.discodes+"&chek_like="+r;window.location.href=f}else d.focus(),e.checkingAction={id:r,sharing_ind:t.ind},angular.isUndefined(s)||(e.actionDiv=angular.element(s.currentTarget).parent().parent("div.spot-item")),p=n(e.likesTimer,1e3)}})},e.likesTimer=function(){if(!d.closed){var r={token:e.user.token,id:e.checkingAction.id,sharing_ind:e.checkingAction.sharing_ind,discodes:e.spot.discodes};t.post("/user/checkLike",r).success(function(t){t.isSocLogged?(d.close(),e.actionDiv.before(o(t.content)(e)),e.actionDiv.remove()):t.sharing_logged?(d.close(),e.checkLike(e.checkingAction.id)):p=n(e.likesTimer,1e3)})}},e.loyaltyTimer=function(){for(var t=angular.element(".connecting"),o=0;o<t.length;o++){var r=angular.element(t[o]).attr("id").substring(7);e.checkLoyaltyConnection(r)}m=n(e.loyaltyTimer,1e3)},e.setLoyaltyTimer=function(){m=n(e.loyaltyTimer,1e3)},e.checkLoyaltyConnection=function(n){var r={token:e.user.token,id:n,discodes:e.spot.discodes},s=angular.element("#coupon-"+n);t.post("/user/checkLoyaltyConnection",r).success(function(t){"undefined"!=typeof t.connected&&t.connected&&(s.before(o(t.content)(e)),s.remove())})},e.disableAction=function(n,r){var s,i={token:e.user.token,id:r,discodes:e.spot.discodes};t.post("/user/disableLoyalty",i).success(function(t){"no"==t.error&&(s=e.host_mobile?angular.element(n.currentTarget).parent().parent().parent().parent():angular.element(n.currentTarget).parent().parent("div.spot-item"),s.before(o(t.content)(e)),s.remove())})},e.loginTimer=function(){if(!d.closed){var o={token:e.user.token,netName:e.bindNet.name};t.post("/user/isLoggedByService",o).success(function(t){t.loggedIn?(d.close(),e.resetCursor(),e.netUp(t.socnet)):l=n(e.loginTimer,1e3)})}},e.unBindSocial=function(n,r,s){n.key=r,t.post("/spot/UnBindSocial",n).success(function(t){if("no"==t.error){var n=angular.element(s.currentTarget).parents(".spot-item");n.before(o(t.content)(e)),n.remove(),t.netDown&&e.netDown(t.netDown)}})},e.getSocPatterns=function(){if(e.freeSocial=!0,"undefined"==typeof e.soc_patterns){var o={token:e.user.token};t.post("/spot/SocPatterns",o).success(function(t){e.soc_patterns=t.soc_patterns;for(var o=0;o<e.soc_patterns.length;o++)"undefined"==typeof e.soc_patterns[o].BindByPaste&&(e.soc_patterns[o].BindByPaste=!1)})}},e.setVideoSize=function(e){var t;1==angular.element("#block-"+e+" .video-vimeo").length?(t=angular.element("#block-"+e+" .video-vimeo"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px")):1==angular.element("#block-"+e+" .yt_player").length&&(t=angular.element("#block-"+e+" .yt_player"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px"))},e.setNewPass=function(o){t.post("/spot/setSpotPass",o).success(function(t){"no"==t.error&&"undefined"!=typeof t.saved?(angular.element("#savePassButton").text(t.saved),"undefined"!=typeof e.spot.pass&&o.pass.length?angular.element("#resetPassButton").show():angular.element("#resetPassButton").hide()):"yes"==t.error&&angular.element("#setPassForm input[name=newPass]").addClass("error")})},e.resetPass=function(t){t.pass="",e.setNewPass(t)},e.savePassButtonText=function(e){angular.element("#savePassButton").text(e),angular.element("#setPassForm input[name=newPass]").removeClass("error")},e.checkStatusSpot=function(){return!0},e.resetCursor=function(){"undefined"!=typeof e.cursorBody&&e.cursorBody.length?(angular.element("body").css("cursor",e.cursorBody),delete e.cursorBody):angular.element("body").css("cursor","default"),"undefined"!=typeof e.cursorTextarea&&e.cursorTextarea.length?(angular.element("#dropbox textarea").css("cursor",e.cursorTextarea),delete e.cursorTextarea):angular.element("#dropbox textarea").css("cursor","text")},e.$watch("actions.page",function(){e.actions.offset=0,e.actions.count_all=0,e.listCoupons(e.spot,e.actions)}),e.couponsScroll=function(){e.actions.in_progress=!1,angular.element(window).bind("scroll",e.loadMoreCoupons)},e.loadMoreCoupons=function(){angular.element(window).scrollTop()+angular.element(window).height()>=angular.element(document).height()-200&&!e.actions.in_progress&&e.actions.offset<e.actions.count_all&&e.listCoupons(e.spot,e.actions)},e.initTransportType=function(t,o,n){e.transport_types[e.transport_types.length]={id:t,name:o,img:n}},e.setType=function(t){e.custom_card.back=t.id,t.img&&$("#card-back").css("background-image","url(/uploads/transport/"+t.img+")")},e.sendImg=function(t){var o=$(t).parents("form");if(""===$(t).val())return!1;var n=o.children("input[name=discodes_id]"),s=o.children("input[name=token]"),i=o.children("input[name=img_type]"),a=o.find("span.upload-holder"),c=o.find("i.upload-holder"),u=o.find("img.upload-holder"),d=r.getSpot();n.length&&n.val(d.discodes),s.length&&s.val(d.token),o.ajaxSubmit({type:"POST",success:function(t){var o=angular.fromJson(t);(o.error="no")?(a.length&&a.addClass("hide"),c.length&&c.addClass("hide"),u.removeClass("hide"),u.attr("src",o.path+"?ver="+(new Date).getTime()),e.$apply(function(){"transport_photo"==i.val()?e.custom_card.photo=o.path:"transport_logo"==i.val()&&(e.custom_card.logo=o.path),e.error.custom_card=!1})):e.error.custom_card=!0}})},e.showImageCropper=!1,e.showLogoCropper=!1,e.setSpot=function(){r.setSpot(e.spot)},e.orderTransportCard=function(o,n,s){if(!n)return e.error.custom_card=!0,!1;var i=r.getSpot();o.token=i.token,o.discodes=i.discodes,t.post("/spot/orderTransportCard",o).success(function(t){"no"==t.error?(e.hideCustomCard(),r.messageModal(s,e.host_type)):e.error.custom_card=!0})},e.orderCustomCard=function(o,s,i){return s?e.isDoubleCard(o)?(e.error.custom_card=!0,r.messageModal("Вы уже заказали эту карту",e.host_type),n(function(){e.error.custom_card=!1},1e3),!1):(e.saveCardParams(o),void t.post("/spot/orderCustomCard",o).success(function(t){"no"==t.error?(r.messageModal(i,e.host_type),o.number=t.number):e.error.custom_card=!0})):(e.error.custom_card=!0,!1)},e.saveCardParams=function(t){for(property in t)e.prev_custom_card[property]=t[property]},e.isDoubleCard=function(t){for(property in t)if("number"!=property&&e.prev_custom_card[property]!=t[property])return!1;return!0},e.$watch("custom_card.shipping_name + custom_card.phone + custom_card.address + custom_card.city + custom_card.zip + custom_card.email",function(){e.error.custom_card=!1}),e.$watch("wallet_history.date",function(){e.listHistory(e.wallet_history.date)}),e.listHistory=function(n){var r={discodes:e.spot.discodes,token:e.spot.token,date:n};block_history=angular.element("#history-wrapper"),block_history.empty(),e.wallet_history.empty_date=!1,t.post("/spot/listHistory",r).success(function(t){"no"==t.error&&(block_history.append(o(t.content)(e)),t.empty_for_date&&(e.wallet_history.empty_date=!0))})},e.customCardInit=function(t){e.custom_card=angular.fromJson(t)},e.showDatepicker=function(t){return e.date_history_shown?!1:(e.date_history_shown=!0,void angular.element(t).datepicker("show"))},e.addPhone=function(n,r){if(!r)return!1;var s={discodes:e.spot.discodes,token:e.spot.token,phone:n};t.post("/spot/addPhone",s).success(function(t){"no"==t.error&&(e.new_phone="",angular.element("#phones-list").append(o(t.content)(e)))})},e.removePhone=function(o,n){var r={discodes:e.spot.discodes,token:e.spot.token,phone:o};t.post("/spot/removePhone",r).success(function(e){if("no"==e.error){var t=angular.element(n.currentTarget).parents(".phone-row");t.remove()}})},e.activateSchoolExtended=function(n){var r={discodes:e.spot.discodes,token:e.spot.token,address:n};t.post("/spot/activateSchoollExtended",r).success(function(t){if("no"==t.error){e.home_address="";var n=angular.element("#phone_services");n.empty(),n.append(o(t.content)(e))}})},e.removeSchoolExtended=function(){var n={discodes:e.spot.discodes,token:e.spot.token};t.post("/spot/removeSchoollExtended",n).success(function(t){if("no"==t.error){e.home_address="";var n=angular.element("#phone_services");n.empty(),n.append(o(t.content)(e))}})},e.blockTroika=function(o){s.yesNoDialog(function(e){return"yes"!=e?!1:void t.post("/spot/blockTroika",o).success(function(e){"no"==e.error&&(angular.element("#blockTroika").addClass("disabled"),angular.element("#"+o.discodes).addClass("invisible"),window.location.reload())})},e.text.yes_btn,e.text.no_btn,e.text.block_troika,"negative")}}]),angular.module("mobispot").controller("ProductController",["$scope","$http","$compile","$timeout","contentService",function(e,t){e.host_type="desktop",e.transport_card={},e.simple_card={},e.transport_types=[],e.StoreInit=function(){var n={token:e.user.token};t.post("/store/product/getPriceList",n).success(function(t){e.products=t.products,e.settings=t.settings;for(var n=0;n<e.products.length;n++)if(e.products[n].jsID=n,e.products[n].selectedSize=e.products[n].size[0],e.products[n].selectedColor=e.products[n].color[0],e.products[n].selectedSurface=e.products[n].surface[0],e.products[n].quantity=1,e.products[n].listposition={left:"0px"},e.products[n].addText=e.settings.addToCart,"undefined"!=typeof e.products[n].selectedColor&&"undefined"!=typeof e.products[n].photo&&e.products[n].photo.length>0)for(var r="_"+e.products[n].selectedColor,s=0;s<e.products[n].photo.length;s++){var i=e.products[n].photo[s].substring(0,e.products[n].photo[s].lastIndexOf("."));if(i.substr(i.length-r.length)==r){e.products[n].listposition={left:o*s*-1+"px"};break}}e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var o=242;e.scrollTo=function(t,n,r){e.products[r].listposition={left:o*n*-1+"px"}},e.addToCart=function(o){if(e.products[o].quantity<1)return!1;if(e.inRequest)return!1;if("troika"==e.products[o].type)return e.showConstructorTroika(e.products[o],o),!1;if("simple"==e.products[o].type)return e.showConstructorSimple(e.products[o],o),!1;e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:parseInt(e.products[o].quantity),selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/addToCart",n).success(function(t){if("no"==t.error){e.products[o].addText=e.settings.added,e.items.count+=parseInt(e.products[o].quantity);var n=angular.element("a.icon-bag-link span");n.text(e.items.count)}e.inRequest=!1}).error(function(){e.inRequest=!1})},e.addTransportCard=function(o){o.token=e.user.token,t.post("/store/product/addCustomCard",o).success(function(t){if("no"==t.error){angular.isUndefined(e.transportId)||(e.products[e.transportId].addText=e.settings.added),e.items.count+=1;var o=angular.element("a.icon-bag-link span");o.text(e.items.count)}}),e.hideConstructorTroika()},e.addSimpleCard=function(o){t.post("/store/product/addCustomCard",o).success(function(t){if("no"==t.error){angular.isUndefined(e.simpleId)||(e.products[e.simpleId].addText=e.settings.added),e.items.count+=1;var o=angular.element("a.icon-bag-link span");o.text(e.items.count)}}),e.hideConstructorSimple()},e.showConstructorTroika=function(t,o){e.transport_card.id=t.id,e.transportId=o,$("#constructor-troika").addClass("show"),$("body").css("overflow","hidden")},e.hideConstructorTroika=function(){$("#constructor-troika").removeClass("show"),$("body").css("overflow","")},e.showConstructorSimple=function(t,o){e.simple_card.id=t.id,e.simpleId=o,$("#constructor-simple").addClass("show"),$("body").css("overflow","hidden")},e.hideConstructorSimple=function(){$("#constructor-simple").removeClass("show"),$("body").css("overflow","")},e.initTransportType=function(t,o,n){e.transport_types[e.transport_types.length]={id:t,name:o,img:n}},e.showCardPattern=function(){angular.element("#card-menu").hide(),angular.element("#card-pattern").show()},e.hideCardPattern=function(){angular.element("#card-menu").show(),angular.element("#card-pattern").hide(),e.clearFormImg("#form-photo"),e.clearFormImg("#form-logo"),delete e.transport_card.name,delete e.transport_card.position,delete e.transport_card.photo,delete e.transport_card.logo},e.clearFormImg=function(e){var t=angular.element(e),o=t.find("label.face-holder"),n=t.find(".ng-image-crop"),r=t.find(".upload-photo");o.removeClass("hide"),n.addClass("hide"),r.length&&r.removeClass("noborder")},e.setType=function(t){e.transport_card.back=t.id,t.img&&$("#card-back").css("background-image","url(/uploads/transport/"+t.img+")")},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.setSize=function(t,o){e.products[t].selectedSize=o,e.products[t].addText=e.settings.addToCart},e.setColor=function(t,n){if(e.products[t].selectedColor=n,e.products[t].addText=e.settings.addToCart,"undefined"!=typeof e.products[t].photo&&e.products[t].photo.length>0)for(var r="_"+n,s=0;s<e.products[t].photo.length;s++){var i=e.products[t].photo[s].substring(0,e.products[t].photo[s].lastIndexOf("."));if(i.substr(i.length-r.length)==r){e.products[t].listposition={left:o*s*-1+"px"};break}}},e.setSurface=function(t,o){e.products[t].selectedSurface=o,e.products[t].addText=e.settings.addToCart},e.resetAddedText=function(t){e.products[t].addText=e.settings.addToCart,e.products[t].quantity<0&&(e.products[t].quantity=0)},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"}}]),angular.module("mobispot").controller("CartController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,r){e.promoError=!1,e.customerError=!1,e.CartInit=function(){e.summ=0;var o={token:e.user.token};t.post("/store/product/GetCart",o).success(function(t){e.products=t.products,e.discount=t.discount,e.products.length<=0&&(window.location="/store");for(var o=0;o<e.products.length;o++)if(e.products[o].jsID=o,e.products[o].quantity=parseInt(e.products[o].quantity),e.summ+=parseFloat(e.products[o].selectedSize.price)*e.products[o].quantity,e.products[o].listposition={left:"0px"},"undefined"!=typeof e.products[o].selectedColor&&"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var n="_"+e.products[o].selectedColor,r=0;r<e.products[o].photo.length;r++){var i=e.products[o].photo[r].substring(0,e.products[o].photo[r].lastIndexOf("."));if(i.substr(i.length-n.length)==n){e.products[o].listposition={left:s*r*-1+"px"};break}}if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var o=0;o<e.products.length;o++)for(var r=0;r<e.discount.products.length;r++)if(e.products[o].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[o].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.checkingOut=!1,e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var s=242;e.scrollTo=function(t,o,n){e.products[n].listposition={left:s*o*-1+"px"}},e.emptyClass=function(){return e.products?e.products.length>0?"hide":"":void 0},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.chekingOutClass=function(){return e.checkingOut?"":"hide"},e.setSize=function(t,o){e.summ-=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity,e.products[t].selectedSize=o,e.summ+=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity},e.setColor=function(o,n){var r={id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor};if("undefined"!=typeof e.products[o].selectedSize&&(r.selectedSize=e.products[o].selectedSize),"undefined"!=typeof e.products[o].selectedSurface&&(r.selectedSurface=e.products[o].selectedSurface),e.products[o].selectedColor=n,"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var i="_"+n,a=0;a<e.products[o].photo.length;a++){var c=e.products[o].photo[a].substring(0,e.products[o].photo[a].lastIndexOf("."));if(c.substr(c.length-i.length)==i){e.products[o].listposition={left:s*a*-1+"px"};break}}var u={token:e.user.token,oldProduct:r,newProduct:e.products[o]};t.post("/store/product/SaveProduct",u).success(function(e){"no"!=e.error})},e.setSurface=function(t,o){e.products[t].selectedSurface=o},e.setDelivery=function(t){e.selectedDelivery=e.deliveries[t]},e.setPayment=function(t){e.selectedPayment=e.payments[t]},e.changeQuantity=function(o){if(parseInt(e.products[o].quantity)<=0)e.deleteItem(o);else{e.summ=0;for(var n=0;n<e.products.length;n++)e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if("undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var r=0;r<e.discount.products.length;r++)if(e.products[n].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}var s={token:e.user.token,oldProduct:e.products[o],newProduct:e.products[o]};t.post("/store/product/SaveProduct",s).success(function(e){"no"!=e.error})}},e.checkOut=function(){if(0===e.summ)return!1;if(!e.checkingOut){var o={token:e.user.token};t.post("/store/product/getCustomer",o).success(function(t){e.deliveries=t.delivery,e.payments=t.payment,e.customer=t.customer;for(var o=0;o<e.deliveries.length;o++)e.deliveries[o].jsID=o;for(var o=0;o<e.payments.length;o++)e.payments[o].jsID=o;e.selectedDelivery=e.deliveries[0],e.selectedPayment=e.payments[0]}),e.checkingOut=!0}angular.element("#proceedNextForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedNextForm").offset().top},600)},e.deleteItem=function(o){if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/deleteFromCart",n).success(function(t){if("no"==t.error){e.products.splice(o,1),e.summ=0;for(var n=0;n<e.products.length;n++)e.products[n].jsID=n,e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var r=0;r<e.discount.products.length;r++)if(e.products[n].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.products.length<=0&&(window.location="/store")}}),e.inRequest=!1}},e.confirmPromo=function(){if(!e.inRequest){e.inRequest=!0;var o={token:e.user.token,promoCode:e.discount.promoCode};t.post("/store/product/ConfirmPromo",o).success(function(t){if("no"==t.error){e.promoError=!1;var o=e.discount.summ;if(e.discount=t.discount,"undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0?(o>0&&(e.summ+=parseFloat(o)),e.summ-=e.discount.summ):o>0&&(e.summ+=parseFloat(o))}}else e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0),e.result.message=t.error,r.desktopModal("message")}).error(function(){e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0)})}e.inRequest=!1},e.$watch("discount.promoCode",function(){e.promoError=!1}),e.saveCustomer=function(o){if(!o)return e.customerError=!0,e.result.message=e.customerHint,r.desktopModal("message"),!1;if(0===e.summ)return!1;if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,customer:e.customer};t.post("/store/product/saveCustomer",n).success(function(t){"no"==t.error?(angular.element("#proceedFinishForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedFinishForm").offset().top},600)):(e.customerError=!0,e.result.message=t.error,r.desktopModal("message"))}),e.inRequest=!1}},e.$watch("customer.first_name + customer.last_name + customer.email + customer.target_first_name + customer.target_last_name + customer.phone + customer.address + customer.city + customer.zip + customer.country",function(){e.customerError=!1}),e.buy=function(){if(0===e.summ)return!1;var n={token:e.user.token,customer:e.customer,products:e.products,delivery:e.selectedDelivery,payment:e.selectedPayment,discount:e.discount};t.post("/store/product/buy",n).success(function(t){"no"==t.error?"email"==t.payment?r.messageModal(t.message,e.host_type):(angular.element("#proceedFinishForm").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):r.messageModal(t.error,e.host_type)})},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"},e.valClass=function(e){return e?"":"error"}}]),angular.module("mobispot").controller("UserController",["$scope","$http","$compile","$cookies","contentService",function(e,t,o,n,r){e.error={},e.result={},e.modal="none",e.host_type="mobile",e.setEmpty=function(){e.user.password="",e.user.terms=0,e.error={},e.result={}},e.hideModal=function(){e.modal="none"},angular.element("#birthday").datepicker({yearRange:"1900:-0",dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.user.birthday=t})}}),e.$watch("modal",function(){e.setEmpty(e.modal),r.desktopModal(e.modal)}),e.setProfile=function(o){t.post("/user/editProfile",o).success(function(t){"no"==t.error&&(e.result.message=t.content,r.desktopModal("message"))})},e.getResolution=function(){var t=n.resolution;if(!t){for(var o=Math.max(screen.width,screen.height),r=[1920,1400,1280],s=0;s<r.length;s++)if(o>=r[s]){t=r[s];break}n.resolution=""+t,e.resolution=t}},e.login=function(o,n){return n?void t.post("/service/login",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content):"no"==t.error?angular.isUndefined(t.access_url)||!t.access_url.length?angular.element(location).attr("href","/spot/list/"):angular.element(location).attr("href",t.access_url):angular.element(location).attr("href","/")}):!1},e.$watch("user.email + user.password + user.code",function(){e.error.email=!1,e.error.code=!1,e.error.password=!1,e.error.content=""}),e.activation=function(o,n){return n?0===o.terms?!1:void t.post("/service/registration",o).success(function(t){"no"==t.error?(e.user.email="",e.user.password="",e.user.activ_code="",e.user.terms=0,"mobile"===e.host_type?r.mobileModal(t.content,"none"):(e.result.message=t.content,r.desktopModal("message"))):("email"===t.error?e.error.email=!0:e.error.code=!0,e.error.content=t.content,"mobile"===e.host_type&&r.mobileModal(t.content,"error"))}):!1},e.recovery=function(o,n){return n?void t.post("/service/recovery",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content,"mobile"===e.host_type&&r.mobileModal(t.content,"error")):"no"==t.error&&(e.user.email="",e.result.message=t.content,"mobile"===e.host_type?r.mobileModal(t.content,"none"):r.desktopModal("message"))}):!1},e.change=function(e,o){return o?void t.post(window.location.pathname,e).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")}):!1},e.messageModal=function(t){return angular.isUndefined(t)||!t.length?!1:(e.result.message=t,void("mobile"===e.host_type?r.mobileModal(t,"none"):r.desktopModal("message")))},e.loadFront=function(){var e=1920;screen.width<=1400&&(e=1400),screen.width<=1280&&(e=1280);var t=angular.element(".splash .first-screen");t.css("background-image","url(../themes/mobispot/img/info/front_"+e+".jpg)")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXMiOlsiYW5ndWxhci1jb29raWVzLm1pbi5qcyIsInNvcnRhYmxlLmpzIiwibWFzay5qcyIsImFwcC5qcyIsInNlcnZpY2UuanMiLCJkZW1va2l0LmpzIiwiaGVscC5qcyIsInBob25lLmpzIiwic2xpZGUuanMiLCJzcG90LmpzIiwic3RvcmUuanMiLCJ1c2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUtBLFNBQUEsRUFBQSxFQUFBLEdBQUEsWUFBQSxHQUFBLE9BQUEsYUFBQSxPQUFBLFFBQUEsWUFBQSxhQUFBLFdBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEtBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFdBQUEsT0FBQSxHQUFBLFVBQUEsV0FBQSxHQUFBLEdBQUEsRUFBQSxTQUFBLElBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLGNBQUEsR0FBQSxFQUFBLEVBQUEsT0FBQSxXQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLFNBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsVUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLFFBQUEsZ0JBQ0EsV0FBQSxTQUFBLEdBQUEsT0FBQSxJQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUEsSUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLElBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLE9BQUEsT0FBQSxTQ0RBLFFBQUEsT0FBQSxrQkFDQSxNQUFBLHVCQUNBLFVBQUEsY0FBQSxtQkFDQSxTQUFBLEdBQ0EsT0FDQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsa0JBQUEsR0FDQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsSUFHQSxFQUdBLEdBQUEsTUFFQSxHQUNBLFFBQUEsS0FDQSxPQUFBLEtBQ0EsTUFBQSxLQUNBLEtBQUEsS0FDQSxPQUFBLEtBR0EsU0FBQSxPQUFBLEVBQUEsR0FFQSxJQUVBLEVBQUEsUUFBQSxXQUNBLEVBQUEsU0FBQSxJQUdBLEVBQUEsTUFBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsVUFBQSxNQUFBLEVBQUEsS0FBQSxVQUdBLEVBQUEsT0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsU0FBQSxPQUFBLEdBR0EsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxTQUFBLFVBQUEsRUFFQSxFQUFBLFlBQUEsT0FBQSxFQUFBLEtBQUEsUUFBQSxFQUFBLEVBQUEsS0FBQSxTQUFBLFFBR0EsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUdBLEVBQUEsS0FBQSxTQUFBLE1BREEsSUFBQSxFQUFBLFlBQUEsT0FDQSxFQUFBLFlBQUEsT0FBQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFlBQUEsT0FBQSxFQUFBLEtBQUEsU0FBQSxNQUFBLEdBQUEsSUFJQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLEtBQUEsU0FBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsQ0FHQSxHQUFBLEdBQUEsQ0FDQSxHQUFBLEVBQUEsS0FBQSxTQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQUEsUUFHQSxFQUFBLEtBQUEsU0FBQSxPQUFBLFlBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsT0FBQSxZQUFBLE9BQUEsRUFBQSxHQUFBLEtBR0EsRUFBQSxLQUFBLFNBQUEsUUFBQSxFQUFBLEtBQUEsU0FBQSxXQUNBLEVBQUEsV0FNQSxFQUFBLE9BQUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxRQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEtBRUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxJQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsT0FFQSxHQUVBLFFBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxNQUtBLEVBQUEsU0FBQSxRQ3RHQSxRQUFBLE9BQUEsY0FDQSxNQUFBLGdCQUNBLGlCQUNBLEVBQUEsS0FDQSxFQUFBLFdBQ0EsSUFBQSxlQUVBLGFBQUEsSUFFQSxVQUFBLFVBQUEsZUFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLFlBRUEsUUFDQSxTQUFBLElBQ0EsUUFBQSxVQUNBLFNBQUEsSUFDQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLENBRUEsT0FBQSxVQUFBLEVBQUEsRUFBQSxFQUFBLEdBWUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxTQUFBLFVBQUEsSUFHQSxFQUFBLEdBQ0EsR0FHQSxJQUNBLEtBQ0EsR0FKQSxLQUpBLElBV0EsUUFBQSxHQUFBLEdBQ0EsUUFBQSxVQUFBLEtBSUEsRUFBQSxFQUdBLEdBQ0EsS0FJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLElBR0EsRUFBQSxFQUFBLEdBQUEsSUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGFBQUEsT0FBQSxHQUNBLEdBQUEsRUFBQSxPQUFBLEVBQUEsR0FBQSxRQUxBLEVBUUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxJQUdBLEVBQUEsRUFBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLEdBS0EsRUFBQSxXQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLGFBQUEsT0FBQSxHQUNBLEtBQUEsR0FBQSxFQUFBLFVBQ0EsRUFBQSxhQUFBLFlBQUEsRUFBQSxPQUFBLFVBRUEsRUFBQSxFQUFBLFFBYkEsRUF3REEsUUFBQSxLQWtCQSxNQWpCQSxJQUFBLEVBQ0EsSUFFQSxRQUFBLFVBQUEsR0FDQSxFQUFBLEtBQUEsY0FBQSxHQUVBLEVBQUEsV0FBQSxlQUdBLFFBQUEsVUFBQSxHQUNBLEVBQUEsS0FBQSxZQUFBLEdBRUEsRUFBQSxXQUFBLGFBR0EsRUFBQSxJQUFBLEVBQUEsYUFDQSxFQUFBLFdBQUEsRUFBQSxhQUNBLEVBR0EsUUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsWUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsRUFDQSxHQUFBLFdBQ0EsRUFBQSxLQUFBLFlBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUVBLEVBQUEsS0FBQSxjQUFBLEdBQ0EsRUFBQSxJQUFBLEdBQ0EsRUFBQSxXQUFBLEVBS0EsUUFBQSxLQUNBLElBR0EsRUFBQSxLQUFBLE9BQUEsR0FDQSxFQUFBLEtBQUEsb0JBQUEsR0FDQSxFQUFBLEtBQUEsMEJBQUEsR0FDQSxHQUFBLEdBR0EsUUFBQSxLQUNBLElBR0EsRUFBQSxPQUFBLE9BQUEsR0FDQSxFQUFBLE9BQUEsWUFBQSxHQUNBLEVBQUEsT0FBQSxVQUFBLEdBQ0EsRUFBQSxPQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsUUFBQSxHQUNBLEVBQUEsT0FBQSxRQUFBLEdBQ0EsRUFBQSxPQUFBLFFBQUEsR0FDQSxHQUFBLEdBR0EsUUFBQSxHQUFBLEdBRUEsTUFBQSxHQUFBLE9BQUEsRUFBQSxRQUFBLEdBQUEsRUFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsT0FZQSxPQVZBLEdBQUEsRUFBQSxXQUNBLFFBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsUUFBQSxFQUFBLE1BRUEsUUFBQSxRQUFBLEVBQUEsTUFBQSxJQUFBLFNBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEtBQUEsS0FDQSxHQUFBLEVBQ0EsRUFBQSxXQUdBLEVBR0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE9BWUEsT0FWQSxTQUFBLFFBQUEsRUFBQSxNQUFBLElBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLElBQUEsRUFBQSxJQUNBLEdBQUEsRUFBQSxPQUFBLElBQUEsSUFDQSxFQUFBLEVBQUEsT0FBQSxHQUNBLEVBQUEsU0FHQSxHQUFBLElBR0EsRUFHQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxXQUVBLE9BQUEsbUJBQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUVBLElBWUEsUUFBQSxLQUNBLE1BQUEsR0FBQSxRQUFBLFFBQUEsS0FBQSxRQUFBLDhCQUFBLFdBQUEsTUFBQSxLQUdBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxDQU1BLElBSkEsS0FDQSxLQUNBLEVBQUEsR0FFQSxnQkFBQSxHQUFBLENBQ0EsRUFBQSxDQUVBLElBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEdBRUEsU0FBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxnQkFBQSxJQUVBLEVBQUEsS0FBQSxHQUVBLEdBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLGdCQUFBLElBRUEsSUFDQSxHQUNBLEtBR0EsTUFBQSxFQUNBLEdBQUEsR0FHQSxHQUFBLEVBQ0EsT0FLQSxFQUFBLEtBQUEsRUFBQSxRQUFBLE1BQUEsR0FFQSxFQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLEVBR0EsUUFBQSxLQUNBLEVBQUEsY0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEdBQUEsSUFBQSxFQUFBLFNBQ0EsRUFBQSxHQUNBLEVBQUEsSUFBQSxJQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsY0FBQSxRQU1BLFFBQUEsR0FBQSxHQUNBLGNBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxXQUFBLEdBRUEsRUFBQSxPQUFBLFdBQUEsR0FNQSxRQUFBLEtBRUEsRUFBQSxFQUFBLE1BQ0EsRUFBQSxPQUFBLFdBQUEsR0FHQSxRQUFBLEdBQUEsR0FFQSxFQUFBLEtBRUEsSUFBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsSUFHQSxJQUFBLEtBQUEsR0FBQSxLQUFBLEVBQUEsQ0FFQSxHQUVBLEdBRkEsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUVBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFDQSxHQUFBLEVBRUEsRUFBQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxRQUVBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxFQUFBLEVBR0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUVBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFDQSxFQUFBLEdBQUEsSUFBQSxJQUFBLEdBQUEsRUFBQSxTQUVBLEVBQUEsS0FBQSxFQUVBLEVBQUEsSUFBQSxHQUFBLFVBQUEsR0FBQSxHQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsR0FBQSxVQUFBLEdBQUEsR0FBQSxJQUFBLElBQUEsRUFNQSxHQUFBLEdBQUEsR0FBQSxVQUFBLElBQUEsRUFBQSxDQUtBLElBSEEsRUFBQSxFQUFBLE9BR0EsS0FBQSxHQUFBLFVBQUEsR0FBQSxVQUFBLEdBQUEsQ0FRQSxHQUFBLFVBQUEsR0FBQSxJQUFBLEdBQUEsSUFBQSxFQUFBLENBQ0EsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQ0EsR0FFQSxNQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxRQUFBLElBQ0EsR0FFQSxJQUFBLEdBQUEsRUFBQSxRQUFBLEVBRUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEdBQ0EsR0FBQSxFQWlDQSxJQTdCQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsSUFBQSxHQUNBLEdBRUEsRUFBQSxPQUFBLFdBQ0EsRUFBQSxjQUFBLEtBU0EsR0FBQSxHQUFBLElBQ0EsRUFBQSxFQUFBLEdBR0EsR0FDQSxJQUlBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsR0FBQSxHQUdBLEdBQUEsRUFBQSxHQUFBLElBQUEsRUFBQSxLQUNBLElBRUEsRUFBQSxFQUNBLEVBQUEsS0FBQSxLQUdBLFFBQUEsR0FBQSxHQUFBLE1BQUEsR0FBQSxRQUFBLEdBQUEsR0FFQSxRQUFBLEdBQUEsR0FDQSxJQUFBLEVBQUEsTUFBQSxFQUNBLElBQUEsU0FBQSxFQUFBLGVBQ0EsTUFBQSxHQUFBLGNBQ0EsSUFBQSxTQUFBLFVBQUEsQ0FFQSxFQUFBLE9BQ0EsSUFBQSxHQUFBLFNBQUEsVUFBQSxhQUVBLE9BREEsR0FBQSxVQUFBLFlBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxPQUFBLEdBQ0EsRUFBQSxLQUFBLE9BRUEsTUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLE1BQUEsRUFDQSxJQUFBLElBQUEsRUFBQSxhQUFBLElBQUEsRUFBQSxhQUdBLEdBQUEsRUFBQSxrQkFDQSxFQUFBLFFBQ0EsRUFBQSxrQkFBQSxFQUFBLE9BRUEsSUFBQSxFQUFBLGdCQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsaUJBQ0EsR0FBQSxVQUFBLEdBQ0EsRUFBQSxRQUFBLFlBQUEsR0FDQSxFQUFBLFVBQUEsWUFBQSxHQUNBLEVBQUEsVUFJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLEdBQ0EsU0FBQSxFQUFBLGVBQ0EsRUFBQSxhQUFBLEVBQUEsZUFFQSxTQUFBLFVBQ0EsU0FBQSxVQUFBLGNBQUEsS0FBQSxPQUVBLEVBUEEsRUEzYkEsR0FDQSxHQUFBLEVBQUEsRUFBQSxFQUVBLEVBQ0EsRUFBQSxFQUFBLEVBS0EsRUFBQSxFQUFBLEVBQUEsRUFUQSxHQUFBLEVBQUEsR0FBQSxFQU1BLEVBQUEsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQTBEQSxJQUVBLEdBQUEsV0FDQSxFQUFBLEVBQUEsTUFBQSxJQUFBLEVBQUEsVUFBQSxLQUNBLFFBQUEsU0FBQSxFQUFBLE1BRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQUEsS0FBQSxHQUNBLE9BQUEsVUFBQSxlQUFBLEtBQUEsRUFBQSxLQUNBLFNBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxRQUFBLEtBQUEsRUFBQSxJQUVBLFFBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUlBLE9BQUEsSUFDQSxFQUFBLEVBQUEsTUFHQSxFQUFBLEVBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsY0FBQSxFQUNBLElBQUEsSUFBQSxDQUNBLEdBQUEsU0FBQSxpQkFBQSxTQUFBLEdBQ0EsU0FBQSxJQUNBLEdBQUEsS0FHQSxFQUFBLE9BQUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsUUFDQSxHQUFBLE9BQUEsRUFBQSxFQUFBLGVBR0EsRUFBQSxZQUFBLEtBQUEsR0FDQSxFQUFBLFNBQUEsS0FBQSxHQTJMQSxFQUFBLEtBQUEsb0JBQUEsR0FvS0EsTUFBQSxVQUFBLFVBQ0EsTUFBQSxVQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsT0FBQSxLQUNBLEtBQUEsSUFBQSxVQUVBLElBQUEsR0FBQSxPQUFBLE1BQ0EsRUFBQSxFQUFBLFNBQUEsQ0FDQSxJQUFBLElBQUEsRUFDQSxNQUFBLEVBRUEsSUFBQSxHQUFBLENBU0EsSUFSQSxVQUFBLE9BQUEsSUFDQSxFQUFBLE9BQUEsVUFBQSxJQUNBLElBQUEsRUFDQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLE1BQ0EsR0FBQSxFQUFBLEdBQUEsSUFBQSxLQUFBLE1BQUEsS0FBQSxJQUFBLE1BR0EsR0FBQSxFQUNBLE1BQUEsRUFHQSxLQURBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxJQUNBLEdBQUEsSUFBQSxJQUFBLEVBQUEsS0FBQSxFQUNBLE1BQUEsRUFHQSxPQUFBLFdDeGZBLFFBQUEsT0FBQSxZQUFBLFlBQUEsY0FBQSxZQUVBLFFBQUEsT0FBQSxZQUFBLE9BQUEsTUFBQSxXQUNBLE1BQUEsVUFBQSxHQUNBLElBQUEsRUFBQSxNQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsV0FBQSxPQUFBLFFBQUEsTUFBQSxJQUVBLEVBQUEsRUFBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsRUFJQSxPQUZBLEdBQUEsRUFBQSxNQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLE1BQUEsSUFFQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsR0FBQSxVQ2JBLFFBQUEsT0FBQSxZQUFBLFFBQUEsaUJBQUEsV0FHQSxLQUFBLGFBQUEsU0FBQSxFQUFBLEdBTUEsR0FMQSxRQUFBLFlBQUEsS0FBQSxFQUFBLEtBRUEsUUFBQSxRQUFBLGNBQUEsVUFDQSxRQUFBLFFBQUEsU0FBQSxZQUFBLFFBRUEsUUFBQSxFQUVBLE1BREEsR0FBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxJQUNBLENBRUEsSUFBQSxHQUFBLFFBQUEsUUFBQSxJQUFBLEVBRUEsR0FBQSxlQUFBLFNBQUEsV0FBQSxFQUFBLHNCQUFBLEtBQUEsT0FBQSxFQUNBLEVBQUEsc0JBQUEsWUFBQSxVQUFBLFFBQUEsRUFBQSxXQUNBLEVBQUEsT0FBQSxHQUFBLFNBQUEsWUFHQSxFQUFBLE9BQUEsR0FBQSxTQUFBLFdBSUEsS0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsYUFDQSxFQUFBLEVBQUEsS0FBQSxJQUVBLEdBQUEsWUFBQSxjQUNBLFNBQUEsR0FDQSxFQUFBLFNBQUEsY0FFQSxFQUFBLE9BQ0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxHQUNBLFdBQUEsV0FDQSxFQUFBLFFBQ0EsTUFHQSxLQUFBLGFBQUEsU0FBQSxFQUFBLEdBRUEsR0FEQSxNQUFBLElBQ0EsV0FBQSxFQUNBLEtBQUEsWUFBQSxFQUFBLFlBQ0EsQ0FDQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsT0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLFdBQ0EsR0FBQSxZQUFBLFlBQ0EsRUFBQSxZQUFBLFFBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxhQUVBLEdBQUEsZUFBQSxTQUFBLFVBQ0EsRUFBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxNQUFBLFdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxPQUFBLE9BQUEsU0FBQSxhQUdBLEVBQUEsS0FBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLFNBQUEsYUFNQSxLQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxZQUFBLEtBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxHQUdBLElBQUEsS0FFQSxNQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsR0FHQSxLQUFBLFFBQUEsV0FDQSxNQUFBLE1BS0EsUUFBQSxPQUFBLFlBQUEsUUFBQSxnQkFBQSxXQUVBLEdBQUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0EyQkEsUUFBQSxLQUNBLEVBQUEsT0FDQSxJQUdBLFFBQUEsS0FDQSxFQUFBLE1BQ0EsSUFHQSxRQUFBLEtBQ0EsRUFBQSxPQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsUUFBQSxHQUNBLEVBQUEsVUFBQSxPQUFBLFFBQUEsR0FFQSxFQUFBLFlBQUEsVUFBQSxRQUFBLE9BekNBLE1BQUEsSUFFQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsT0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGFBQ0EsRUFBQSxRQUFBLFFBQUEsZUFDQSxFQUFBLFFBQUEsUUFBQSx5QkFDQSxFQUFBLFFBQUEsUUFBQSx1QkFFQSxHQUFBLGVBQUEsU0FBQSxXQUNBLEVBQUEsc0JBQUEsWUFBQSxVQUFBLFFBQUEsR0FFQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFlBQUEsU0FDQSxFQUFBLFlBQUEsWUFDQSxtQkFBQSxJQUNBLEVBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLFNBQUEsVUFFQSxFQUFBLEtBQUEsUUFBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsRUFBQSxVQUFBLEtBQUEsUUFBQSxHQXNCQSxRQUNBLFlBQUEsS0N4SUEsUUFBQSxPQUFBLFlBQUEsV0FBQSxxQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FFQSxFQUFBLE9BQUEsbUlBQUEsV0FDQSxFQUFBLE1BQUEsT0FBQSxJQUdBLEVBQUEsT0FDQSxLQUFBLEdBQ0EsTUFBQSxHQUNBLE1BQUEsR0FDQSxRQUFBLEdBQ0EsS0FBQSxHQUNBLElBQUEsR0FDQSxRQUFBLEdBQ0EsU0FBQSxFQUNBLFFBQUEsR0FHQSxFQUFBLFlBQ0EsRUFBQSxlQUFBLEVBQ0EsRUFBQSxVQUNBLEVBQUEsYUFDQSxFQUFBLFlBRUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxRQUFBLEVBRUEsRUFBQSxnQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLGVBQUEsR0FDQSxFQUFBLE9BQUEsR0FBQSxHQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLFNBQUEsS0FDQSxFQUFBLGlCQUdBLEVBQUEsY0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLFNBQUEsS0FDQSxFQUFBLGlCQUdBLEVBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFDQSxtQkFBQSxJQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFDQSxFQUFBLGlCQUdBLEVBQUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FHQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFFBQUEsRUFDQSxtQkFBQSxJQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FHQSxFQUFBLGNBQUEsV0FDQSxFQUFBLEtBQUEsSUFFQSxFQUFBLE1BQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxVQUFBLG1CQUFBLEdBQUEsVUFBQSxFQUFBLE1BQUEsWUFDQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsTUFBQSxZQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQUEsWUFLQSxFQUFBLE9BQ0EsT0FBQSxTQUFBLEtBQUEsS0FFQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsS0FBQSxzQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxNQUNBLFNBQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFBQSxnQkFFQSxRQUFBLFFBQUEsbUJBQUEsTUFBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLFFBQUEsUUFBQSxnQkFBQSxXQUdBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLE1BQUEsT0FBQSxRQXRCQSxFQUFBLE1BQUEsT0FBQSxHQUNBLE9DakZBLFFBQUEsT0FBQSxZQUFBLFdBQUEsa0JBQ0EsU0FBQSxRQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUVBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQ0EsRUFBQSxNQUFBLEVBQUEsZUFDQSxHQUFBLEtBQUEsd0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxXQUFBLEdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxHQUVBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLFVBQUEsZ0JBVkEsTUNQQSxRQUFBLE9BQUEsWUFBQSxXQUFBLG9CQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsV0FBQSxTQUFBLEdBRUEsRUFBQSxXQUFBLEdBR0EsRUFBQSxZQUFBLFNBQUEsR0FFQSxFQUFBLFlBQUEsR0FHQSxFQUFBLGNBRUEsRUFBQSxrQkNkQSxRQUFBLE9BQUEsWUFBQSxXQUFBLG1CQUNBLFNBQUEsV0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLFlBQUEsSUFFQSxFQUFBLFdBQUEsRUFFQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxVQUFBLEVBQUEsRUFBQSxJQUFBLEdBR0EsRUFBQSxTQUNBLEVBQUEsTUFBQSxLQUFBLFFBQ0EsRUFBQSxNQUFBLGNBQUEsS0FBQSxPQUNBLEVBQUEsTUFBQSxTQUNBLEdBQUEsRUFBQSxJQUFBLG1CQUdBLEVBQUEsTUFBQSxZQUFBLEdBQ0EsRUFBQSxNQUFBLG1CQUFBLEVBQUEsTUFBQSxXQUFBLEdBRUEsRUFBQSxNQUFBLFNBQ0EsRUFBQSxNQUFBLGNBQUEsR0FFQSxFQUFBLE1BQUEsUUFDQSxFQUFBLE1BQUEsYUFBQSxHQUVBLEVBQUEsTUFBQSxRQUFBLEVBQUEsTUFBQSxtQkFDQSxFQUFBLE1BQUEsYUFBQSxZQUNBLEVBQUEsTUFBQSxnQkFBQSxFQUNBLEVBQUEsTUFBQSxnQkFBQSxFQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLGNBQUEsS0FBQSxFQUFBLFlBQUEsRUFBQSxHQUFBLE9BR0EsUUFBQSxRQUFBLFFBQUEsS0FBQSxPQUFBLFdBRUEsRUFBQSxlQUdBLEVBQUEsV0FBQSxXQUVBLEVBQUEsTUFBQSxTQUNBLEdBQUEsRUFBQSxJQUFBLG9CQUNBLEdBQUEsRUFBQSxJQUFBLG1CQUNBLEdBQUEsRUFBQSxJQUFBLG9CQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLHFCQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLG9CQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLGlCQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLG9CQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLGlCQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLGdCQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUNBLEdBQUEsR0FBQSxJQUFBLG1CQUNBLEdBQUEsR0FBQSxJQUFBLHFCQUdBLEVBQUEsTUFBQSxZQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLElBQ0EsRUFBQSxNQUFBLG1CQUFBLEVBQUEsTUFBQSxXQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsTUFBQSxXQUFBLE9BQUEsSUFFQSxFQUFBLE1BQUEsT0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFDQSxFQUFBLE1BQUEsY0FBQSxHQUVBLEVBQUEsTUFBQSxNQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUNBLEVBQUEsTUFBQSxhQUFBLEdBRUEsRUFBQSxNQUFBLFFBQUEsR0FLQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFNBQUEsRUFBQSxPQUFBLENBRUEsU0FBQSxRQUFBLFdBQUEsRUFBQSxLQUFBLGFBQUEsTUFDQSxJQUFBLEdBQUEsSUFBQSxFQUFBLEtBQUEsSUFBQSxDQUNBLE9BQUEsU0FBQSxRQUFBLEdBQUEsUUFHQSxFQUFBLFFBQUEsRUFDQSxRQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsaUJBQUEsRUFBQSxLQUFBLFFBQUEsR0FDQSxRQUFBLFFBQUEsR0FBQSxPQUFBLEVBQUEsYUFFQSxJQU5BLEdBU0EsRUFBQSxpQkFBQSxXQUNBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLHNCQUNBLEVBQUEsTUFBQSxhQUFBLGNBR0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsaUJBQ0EsRUFBQSxNQUFBLGFBQUEsU0FHQSxFQUFBLFdBQUEsV0FDQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxnQkFDQSxFQUFBLE1BQUEsYUFBQSxRQUdBLEVBQUEsWUFBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLGdCQUNBLEdBRUEsRUFBQSxNQUFBLGdCQUFBLEVBRUEsRUFBQSxNQUFBLGdCQUNBLEdBRUEsRUFBQSxNQUFBLGdCQUFBLE1BQ0EsR0FBQSxXQUNBLEVBQUEsaUJBQ0EsUUFHQSxFQUFBLFdBQUEsV0FDQSxFQUFBLE1BQUEsZ0JBQUEsR0FHQSxFQUFBLGNBQUEsV0FDQSxJQUFBLEVBQUEsTUFBQSxlQUVBLE1BREEsR0FBQSxNQUFBLGdCQUFBLEdBQ0EsQ0FHQSxJQUFBLGFBQUEsRUFBQSxNQUFBLGFBQUEsQ0FHQSxJQUFBLEdBRkEsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxXQUFBLE9BQUEsSUFDQSxFQUFBLE1BQUEsV0FBQSxJQUFBLEVBQUEsTUFBQSxxQkFDQSxFQUFBLEVBRUEsSUFBQSxFQUFBLEVBQ0EsT0FBQSxDQUlBLEdBQUEsTUFBQSxtQkFEQSxFQUFBLE1BQUEsV0FBQSxPQUFBLEdBQUEsRUFDQSxFQUFBLE1BQUEsV0FBQSxHQUVBLEVBQUEsTUFBQSxXQUFBLEVBQUEsR0FFQSxFQUFBLHVCQUVBLElBQUEsUUFBQSxFQUFBLE1BQUEsYUFBQSxDQUdBLElBQUEsR0FGQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLE1BQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxNQUFBLGdCQUNBLEVBQUEsRUFFQSxJQUFBLEVBQUEsRUFDQSxPQUFBLENBSUEsR0FBQSxNQUFBLGNBREEsRUFBQSxNQUFBLE1BQUEsT0FBQSxHQUFBLEVBQ0EsRUFBQSxNQUFBLE1BQUEsR0FFQSxFQUFBLE1BQUEsTUFBQSxFQUFBLEdBRUEsRUFBQSxrQkFFQSxDQUFBLEdBQUEsT0FBQSxFQUFBLE1BQUEsYUFtQkEsT0FBQSxDQWhCQSxLQUFBLEdBRkEsR0FBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsSUFDQSxFQUFBLE1BQUEsS0FBQSxJQUFBLEVBQUEsTUFBQSxlQUNBLEVBQUEsRUFFQSxJQUFBLEVBQUEsRUFDQSxPQUFBLENBSUEsR0FBQSxNQUFBLGFBREEsRUFBQSxNQUFBLEtBQUEsT0FBQSxHQUFBLEVBQ0EsRUFBQSxNQUFBLEtBQUEsR0FFQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxhQUtBLEVBQUEsTUFBQSxnQkFBQSxFQUNBLEVBQUEsV0FDQSxFQUFBLGlCQUNBLE9BSUEsRUFBQSxZQUFBLFNBQUEsR0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLE9BQUEsT0FBQSxRQzdNQSxRQUFBLE9BQUEsWUFBQSxXQUFBLGtCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0E2aUJBLFFBQUEsR0FBQSxHQUNBLEVBQUEsa0JBQ0EsRUFBQSxpQkFDQSxZQUFBLEVBQUEsS0FDQSxRQUFBLFFBQUEsWUFBQSxTQUFBLFNBRUEsUUFBQSxRQUFBLFlBQUEsWUFBQSxTQUtBLFFBQUEsR0FBQSxHQUNBLEVBQUEsRUFHQSxLQUFBLEdBQUEsR0FGQSxFQUFBLEVBQUEsT0FBQSxPQUFBLEVBQUEsYUFBQSxNQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxJQUNBLEVBQUEsV0FBQSxHQXlCQSxRQUFBLEdBQUEsR0FDQSxFQUFBLE9BQUEsV0FFQSxFQUFBLFNBREEsRUFBQSxpQkFDQSxLQUFBLE1BQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUVBLHNCQXZsQkEsRUFBQSxRQUFBLFNBQ0EsRUFBQSxZQUFBLElBQ0EsRUFBQSxhQUFBLElBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxRQUNBLEVBQUEsUUFBQSxFQUVBLEVBQUEsU0FDQSxFQUFBLFVBRUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxTQUFBLEVBRUEsRUFBQSxXQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxZQUFBLEVBRUEsRUFBQSxVQUNBLEVBQUEsT0FBQSxTQUVBLEVBQUEsV0FBQSxHQUVBLEVBQUEsV0FDQSxFQUFBLFFBQUEsS0FBQSxHQUNBLEVBQUEsUUFBQSxPQUFBLEdBQ0EsRUFBQSxRQUFBLGFBQUEsRUFDQSxFQUFBLFFBQUEsT0FBQSxFQUNBLEVBQUEsUUFBQSxVQUFBLEVBRUEsRUFBQSxRQUVBLEVBQUEsbUJBQ0EsRUFBQSxlQUNBLEVBQUEsb0JBQ0EsRUFBQSxpQkFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLGtCQUNBLEVBQUEsZUFBQSxLQUFBLEdBQ0EsRUFBQSxlQUFBLFlBQUEsRUFDQSxFQUFBLG9CQUFBLEVBS0EsRUFBQSxPQUFBLHlCQUFBLFdBQ0EsRUFBQSxNQUFBLE1BQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxJQUlBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEtBS0EsRUFBQSxLQUFBLFVBR0EsR0FBQSxLQUFBLFlBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsU0FBQSxFQUFBLFNBQ0EsUUFBQSxRQUFBLGNBQUEsUUFBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLFFBQUEsUUFBQSxZQUFBLGNBQ0EsR0FBQSxLQUFBLFdBQ0EsR0FBQSxLQUFBLE9BQ0EsRUFBQSxhQUFBLEdBQUEsRUFBQSxlQUNBLE9BQUEsU0FBQSxLQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsZUFDQSxPQUFBLEVBQUEsUUFDQSxFQUFBLE1BQUEsTUFBQSxNQVpBLEdBTEEsRUFBQSxNQUFBLE1BQUEsR0FDQSxJQXNCQSxFQUFBLE9BQUEsZ0NBQUEsV0FDQSxFQUFBLFFBQUEsS0FBQSxHQUNBLFFBQUEsUUFBQSxRQUFBLE9BQUEsU0FBQSxFQUFBLGlCQUVBLFVBQUEsRUFBQSxRQUFBLE9BQUEsUUFBQSxFQUFBLFFBQUEsTUFDQSxFQUFBLFdBQUEsRUFBQSxNQUNBLFVBQUEsRUFBQSxRQUFBLE1BQ0EsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLFNBQ0EsWUFBQSxFQUFBLFFBQUEsTUFDQSxFQUFBLGNBQUEsRUFBQSxNQUNBLGFBQUEsRUFBQSxRQUFBLE9BQ0EsRUFBQSxjQUFBLEVBQUEsUUFJQSxFQUFBLGNBQUEsV0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQUEsUUFDQSxTQUFBLFFBQUEsaUJBQUEsSUFBQSxhQUFBLEVBQUEsTUErQkEsRUFBQSxXQUFBLFdBQ0EsRUFBQSxTQUFBLEVBQUEsS0FBQSxVQUlBLEVBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsRUFDQSxFQUFBLEtBQUEsdUJBQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsS0FBQSxLQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsUUFBQSxRQUFBLFlBQUEsWUFBQSxPQUVBLFFBQUEsUUFBQSxtQkFBQSxTQUFBLFVBRUEsUUFBQSxRQUFBLG1CQUFBLFFBQUEsRUFBQSxXQUFBLFFBQUEsUUFBQSxxQkFBQSxZQUFBLFlBQUEsUUFBQSxRQUFBLHFCQUFBLE9BQUEsRUFBQSxLQUNBLFFBQUEsUUFBQSxtQkFBQSxZQUFBLFFBR0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsU0FBQSxRQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsUUFHQSxFQUFBLGVBSUEsRUFBQSxVQUFBLFdBQ0EsRUFBQSxLQUFBLGtCQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsU0FPQSxFQUFBLGlCQUNBLE9BQUEsV0FDQSxFQUFBLGFBRUEsWUFBQSxnQkFDQSxPQUFBLFFBQ0Esa0JBQUEsRUFDQSxVQUFBLFVBQ0EsUUFBQSxJQUlBLEVBQUEsY0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsS0FBQSwwQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxTQUNBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxTQUNBLEVBQUEsUUFBQSxFQUFBLGFBTUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLFlBbUJBLEVBQUEsbUJBbkJBLENBQ0EsRUFBQSxJQUFBLENBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxjQUNBLEVBQUEsUUFBQSxRQUFBLGNBQUEsT0FFQSxJQUFBLEVBQUEsS0FBQSxlQUFBLE9BQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLEtBQUEsY0FDQSxHQUFBLEtBQUEsWUFBQSxFQUFBLEtBQUEsYUFBQSxXQUNBLENBRUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxvQkFDQSxHQUFBLEtBQUEsWUFBQSxFQUFBLE9BR0EsRUFBQSxZQUFBLFFBQ0EsRUFBQSxLQUFBLFlBQUEsTUFBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLEVBQUEsR0FBQSxNQU9BLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGNBQ0EsRUFBQSxFQUFBLE1BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsV0FHQSxFQUFBLFNBQ0EsRUFBQSxjQUVBLEdBQUEsS0FBQSxlQUtBLEVBQUEsYUFBQSxXQUNBLElBQUEsRUFBQSxLQUFBLFVBQUEsRUFBQSxLQUFBLFlBQUEsT0FBQSxDQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxFQUFBLEVBQUEsTUFFQSxHQUFBLEtBQUEsd0JBQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxTQUNBLEVBQUEsY0FFQSxHQUFBLEtBQUEsZUFLQSxFQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxTQUNBLEdBQUEsS0FBQSxlQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsUUFBQSxRQUFBLElBQUEsRUFBQSxTQUFBLE9BQUEsS0FBQSxFQUFBLE1BQ0EsRUFBQSxhQUFBLEVBQUEsUUFBQSxFQUFBLGVBSkEsR0FVQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxPQUFBLEdBQ0EsTUFFQSxHQUFBLEtBQUEsY0FBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFBQSxNQUFBLFdBSUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxLQUFBLFdBQ0EsYUFLQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxPQUFBLEdBQ0EsTUFFQSxHQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxrQkFJQSxFQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEtBQUEsUUFDQSxhQUtBLEVBQUEsYUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxhQUNBLEVBQUEsRUFBQSxLQUFBLGtCQUVBLElBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEtBQUEsa0JBR0EsRUFBQSxZQUFBLFNBQUEsR0FDQSxNQUFBLE9BQUEsR0FDQSxNQUVBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsSUFBQSxFQUFBLFVBQUEsWUFBQSxpQkFJQSxFQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEsT0FDQSxFQUNBLGFBS0EsRUFBQSxjQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGlCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsU0FNQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxHQUFBLEtBQUEsZUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLGNBRUEsRUFBQSxnQkFDQSxRQUFBLFFBQUEscUJBQUEsT0FBQSxTQUNBLFFBQUEsR0FDQSxLQUVBLFFBQUEsUUFBQSxpQkFBQSxZQUNBLFVBQUEsVUFDQSxRQUFBLEVBQ0EsV0FBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsZUFBQSxLQUFBLEtBR0EsUUFBQSxXQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsb0JBQUEsUUFLQSxFQUFBLFFBQUEsTUFBQSxjQU9BLEVBQUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxnQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLFNBTUEsRUFBQSxjQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQ0EsR0FBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsZ0JBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQUEsU0FDQSxRQUFBLEdBQ0EsU0FNQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsaUJBRUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxNQUFBLEVBQUEsTUFBQSxLQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsT0FBQSxPQUFBLEVBQUEsT0FFQSxHQUFBLFFBQUEsYUFBQSxFQUNBLEVBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFBQSxRQUFBLEVBQUEsTUFDQSxFQUFBLFFBQUEsVUFBQSxFQUFBLFVBRUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsUUFBQSxhQUFBLEtBRUEsTUFBQSxXQUNBLEVBQUEsUUFBQSxhQUFBLEtBS0EsRUFBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxRQUFBLFVBQUEsRUFDQSxFQUFBLFlBQUEsRUFBQSxJQUlBLEVBQUEsWUFBQSxXQUNBLE1BQUEsVUFBQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsS0FBQSxpQkFBQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxZQUFBLEVBQUEsWUFDQSxFQUFBLE9BQUEsYUFBQSxFQUFBLG9CQUdBLEdBQUEsV0FDQSxFQUFBLGVBQ0EsT0FJQSxFQUFBLGVBQUEsV0FDQSxFQUFBLGVBQUEsU0FBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsV0FHQSxFQUFBLGVBQUEsV0FDQSxFQUFBLGVBQUEsWUFBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsS0FJQSxFQUFBLGNBQUEsV0FDQSxFQUFBLEtBQUEsc0JBQUEsRUFBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxPQUFBLEVBQUEsV0FNQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxVQUNBLFNBQUEsUUFBQSxpQkFBQSxVQURBLEdBS0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxXQUNBLE9BQUEsQ0FFQSxJQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBQ0EsR0FBQSxZQUFBLEVBQ0EsRUFBQSxLQUFBLHVCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsUUFBQSxRQUFBLGNBQUEsWUFBQSxhQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxTQUFBLFNBQUEsYUFDQSxFQUFBLE9BQUEsVUFBQSxFQUVBLEVBQUEsWUFBQSxFQUFBLGVBQUEsT0FFQSxFQUFBLFlBQUEsSUFDQSxNQUFBLFdBQUEsRUFBQSxZQUFBLEtBR0EsRUFBQSxhQUFBLFdBQ0EsRUFBQSxlQUFBLFlBQUEsUUFHQSxFQUFBLE9BQUEsVUFEQSxJQUFBLEVBQUEsT0FBQSxVQUNBLEVBRUEsR0FLQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFDQSxHQUFBLEtBQUEsbUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsYUFBQSxRQUNBLEdBQUEsT0FBQSxNQUFBLE1BTUEsSUFBQSxFQUNBLEdBQUEsV0FBQSxXQUNBLEVBQUEsV0FBQSxtQkFBQSxHQUFBLFdBQUEsRUFBQSxXQUFBLEdBQ0EsRUFBQSxFQUFBLFdBQ0EsSUFBQSxFQUFBLFdBQ0EsRUFBQSxVQUFBLEtBQUEsT0FBQSxPQUFBLFNBQUEsVUFDQSxFQUFBLGFBQ0EsRUFBQSxjQUNBLE1BT0EsRUFBQSxlQUFBLFdBQ0EsR0FBQSxHQUFBLFNBQUEsZUFBQSxXQUNBLEVBQUEsU0FBQSxlQUFBLFdBQ0EsSUFBQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsR0FBQSxlQUNBLEdBQUEsU0FDQSxFQUFBLGlCQUFBLFdBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQUEsWUFBQSxHQUFBLEdBQ0EsRUFBQSxpQkFBQSxPQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUFBLFNBQUEsR0FBQSxNQTJCQSxFQUFBLGVBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsWUFDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxTQUFBLEVBQ0EsSUFBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUNBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxLQUFBLEtBQUEsRUFBQSxLQUVBLFFBQUEsUUFBQSxhQUFBLElBQUEsR0FFQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsU0FBQSxRQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsUUFpQkEsRUFBQSxhQUFBLFdBQ0EsUUFBQSxRQUFBLGlCQUFBLE9BQUEsTUFBQSxLQUFBLFFBQUEsU0FHQSxFQUFBLFdBQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxHQUFBLGVBQ0EsR0FBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLFVBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BRUEsRUFBQSxPQUFBLFdBQUEsU0FBQSxHQUVBLEVBQUEsU0FEQSxFQUFBLGlCQUNBLEtBQUEsTUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BRUEscUJBSUEsRUFBQSxPQUFBLGlCQUFBLFdBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQUEsUUFBQSxFQUFBLGNBQUEsR0FDQSxFQUFBLGlCQUFBLE9BQUEsRUFBQSxnQkFBQSxHQUNBLEVBQUEsS0FBQSxPQUFBLGdCQUFBLEdBQ0EsRUFBQSxpQkFBQSxjQUFBLFNBQUEsbUJBQUEsRUFBQSxRQUNBLEVBQUEsaUJBQUEsYUFBQSxFQUFBLEtBQUEsVUFDQSxFQUFBLEtBQUEsS0FPQSxFQUFBLGVBQUEsU0FBQSxHQUVBLEdBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxNQUVBLEdBQUEsS0FBQSxzQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxTQUFBLEdBS0EsSUFIQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFNBQ0EsRUFBQSxhQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsY0FBQSxZQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsY0FBQSxZQUNBLEVBQUEsVUFBQSxFQUFBLEtBQUEsU0FDQSxDQUVBLEdBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxRQU9BLEVBQUEsU0FBQSxTQUFBLEdBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxpQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLDBCQUFBLEVBQUEsUUFBQSxLQUNBLEdBQUEsT0FDQSxFQUFBLFNBQUEsVUFFQSxFQUFBLFlBQUEsY0FNQSxFQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsMEJBQUEsRUFBQSxLQUNBLEdBQUEsU0FBQSxXQUlBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSwwQkFBQSxFQUFBLEtBQ0EsR0FBQSxZQUFBLFVBSUEsSUFBQSxHQUNBLEVBQ0EsRUFDQSxFQUNBLENBRUEsR0FBQSxjQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGNBRUEsT0FBQSxHQUFBLFNBQUEsY0FLQSxHQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsT0FBQSxFQUNBLE9BQUEsQ0FFQSxJQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxTQUFBLEVBRUEsR0FBQSxLQUFBLHNCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxRQUFBLEVBQUEsYUFJQSxFQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEsT0FDQSxFQUNBLGFBbkJBLEVBQUEsWUFBQSxJQUNBLElBdUJBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEdBQ0EsT0FDQSxNQUFBLEVBQUEsWUFDQSxPQUFBLEVBQUEsZUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUNBLEVBQUEsQ0FFQSxJQUFBLEVBQUEsUUFBQSxNQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsRUFBQSxRQUFBLG1CQUNBLEdBQUEsZ0JBQUEsbUJBQUEsR0FFQSxJQUFBLElBQUEsT0FBQSxPQUFBLE1BQUEsRUFBQSxNQUFBLE9BQUEsRUFDQSxHQUFBLE9BQUEsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBLENBTUEsSUFKQSxFQUFBLGNBQ0EsRUFBQSxPQUFBLEtBQUEsRUFBQSxNQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDZGQUdBLE9BQUEsR0FBQSxtQkFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsaUJBRUEsb0JBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsU0FDQSxHQUFBLFNBQUEsbUJBQUEsRUFBQSxLQUFBLFVBRUEsT0FBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxTQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxXQUFBLE1BS0EsRUFBQSxZQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxHQUFBLEtBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUVBLElBQUEsbUJBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsT0FDQSxDQUNBLEVBQUEsS0FBQSxFQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxHQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsUUFBQSxFQUFBLGFBQUEsR0FBQSxTQUNBLENBQ0EsRUFBQSxFQUFBLGFBQUEsR0FBQSxLQUNBLEVBQUEsUUFBQSxFQUFBLGFBQUEsR0FBQSxJQUNBLFFBTUEsRUFBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxHQUFBLElBQUEsRUFBQSxZQUFBLE9BRUEsR0FBQSxFQUFBLFNBMENBLEdBQUEsTUFBQSxFQUFBLFlBQ0EsQ0FFQSxRQUFBLFFBQUEsZ0JBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsS0FBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxHQUNBLFFBQUEsUUFBQSxZQUFBLFlBQUEsT0FDQSxFQUFBLGNBRUEsRUFBQSxhQUFBLEVBQUEsSUFDQSxJQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLEtBRUEsRUFBQSxNQUFBLEVBQUEsT0FDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLEVBQUEsT0FDQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEdBQUEsYUFBQSxPQUlBLEdBQUEsYUFBQSxFQUFBLFlBQUEsRUFBQSxlQWpFQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsR0FBQSxHQUNBLE9BQ0EsTUFBQSxFQUFBLFlBQ0EsT0FBQSxFQUFBLGVBRUEsR0FFQSxFQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsOEJBQUEsRUFDQSxFQUFBLENBRUEsSUFBQSxFQUFBLFFBQUEsTUFBQSxFQUFBLElBQUEsSUFDQSxLQUFBLEVBQUEsUUFBQSxtQkFDQSxHQUFBLGdCQUFBLG1CQUFBLEdBRUEsSUFBQSxJQUFBLE9BQUEsT0FBQSxNQUFBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsR0FBQSxPQUFBLE9BQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxDQU1BLElBSkEsRUFBQSxjQUNBLEVBQUEsT0FBQSxLQUFBLEVBQUEsTUFBQSxrQkFBQSxTQUFBLEVBQUEsTUFBQSxNQUFBLFdBQUEsRUFBQSxNQUFBLE9BQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSw2RkFHQSxPQUFBLEdBQUEsbUJBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGFBQUEsRUFBQSxLQUFBLFNBQUEsd0JBRUEsb0JBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsU0FDQSxHQUFBLFNBQUEsbUJBQUEsRUFBQSxLQUFBLFVBRUEsT0FBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxTQUFBLEtBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxHQUNBLG1CQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxRQUFBLFNBQ0EsRUFBQSxRQUFBLEtBQUEsRUFBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxTQWlDQSxHQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxVQUFBLEtBQ0EsUUFBQSxRQUFBLHFCQUFBLEtBQUEsRUFBQSxhQUNBLFFBQUEsUUFBQSxlQUFBLFNBQUEsUUFDQSxRQUFBLFFBQUEsa0JBQUEsWUFBQSxRQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsR0FDQSxXQUFBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsRUFDQSxXQUFBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsR0FBQSxXQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLElBQUEsWUFPQSxFQUFBLFVBQUEsV0FFQSxRQUFBLFFBQUEscUJBQUEsT0FDQSxRQUFBLFFBQUEscUJBQUEsS0FBQSxJQUNBLFFBQUEsUUFBQSxlQUFBLFNBQUEsVUFFQSxRQUFBLFFBQUEsa0JBQUEsU0FBQSxRQUNBLFFBQUEsUUFBQSxlQUFBLFlBQUEsVUFLQSxFQUFBLGNBQUEsU0FBQSxHQUVBLElBQUEsR0FEQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxHQUFBLEVBQUEsYUFBQSxHQUFBLE1BQUEsRUFDQSxDQUNBLEVBQUEsQ0FDQSxPQUdBLE1BQUEsSUFJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxJQUFBLEVBQ0EsRUFBQSxLQUFBLG1CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxHQUFBLE1BQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxPQUFBLEVBQ0EsR0FBQSxFQUFBLFNBZ0NBLEdBQUEsTUFBQSxFQUFBLFlBQ0EsQ0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFFBQ0EsSUFBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLE9BQ0EsR0FBQSxLQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsR0FDQSxFQUFBLGFBQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxFQUFBLFlBSUEsR0FBQSxhQUFBLEVBQUEsWUFBQSxFQUFBLGVBNUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEdBQ0EsT0FDQSxNQUFBLEVBQUEsWUFDQSxPQUFBLEVBQUEsZUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUFBLE9BQ0EsRUFBQSxDQUVBLElBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFFBQUEsbUJBQ0EsR0FBQSxnQkFBQSxtQkFBQSxHQUVBLElBQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxNQUFBLFFBQUEsQ0FFQSxHQUFBLE9BQUEsS0FBQSxFQUFBLE1BQUEsa0JBQUEsU0FBQSxFQUFBLE1BQUEsTUFBQSxXQUFBLEVBQUEsTUFBQSxPQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsNEZBRUEsT0FBQSxHQUFBLG1CQUFBLEdBQ0EsT0FBQSxTQUFBLEtBQUEsRUFBQSxhQUFBLEVBQUEsU0FBQSxRQUFBLEVBQUEsSUFBQSxlQUdBLEVBQUEsUUFFQSxFQUFBLFNBQUEsS0FBQSxFQUFBLE9BQUEsU0FBQSxFQUFBLFNBQUEsSUFBQSxFQUFBLElBQUEsU0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxXQUFBLFVBbUJBLE1BQUEsRUFBQSxhQUNBLEVBQUEsYUFBQSxFQUFBLFlBQUEsRUFBQSxjQU9BLEVBQUEsVUFBQSxTQUFBLEVBQUEsR0FFQSxHQUNBLEdBREEsR0FBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxTQUdBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUVBLEdBQUEsTUFBQSxFQUFBLE1BRUEsR0FBQSxFQUFBLFlBeUNBLG1CQUFBLEdBQUEsVUFFQSxFQUFBLGFBQUEsUUFBQSxZQUFBLEdBRUEsUUFBQSxZQUFBLEtBQ0EsRUFBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsU0FBQSxTQUFBLFVBRkEsRUFBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsT0FBQSxpQkFJQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGNBaERBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEdBQ0EsT0FDQSxNQUFBLEVBQUEsWUFDQSxPQUFBLEVBQUEsZUFFQSxHQUVBLEVBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSw4QkFBQSxFQUFBLFFBQ0EsRUFBQSxDQUVBO0dBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxJQUFBLElBQ0EsS0FBQSxFQUFBLFFBQUEsbUJBQ0EsR0FBQSxnQkFBQSxtQkFBQSxHQUFBLEtBQ0EsR0FBQSxJQUVBLElBQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUEsRUFBQSxNQUFBLFFBQUEsQ0FNQSxJQUpBLEVBQUEsY0FDQSxFQUFBLE9BQUEsS0FBQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsV0FBQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLDZGQUdBLE9BQUEsR0FBQSxtQkFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsYUFBQSxFQUFBLEtBQUEsU0FBQSxjQUFBLENBRUEsUUFBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxnQkFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEtBQ0EsUUFBQSxZQUFBLEtBQ0EsRUFBQSxVQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxPQUFBLGtCQUNBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0FvQkEsRUFBQSxXQUFBLFdBRUEsSUFBQSxFQUFBLE9BQUEsQ0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsZUFBQSxHQUFBLFlBQUEsRUFBQSxlQUFBLFlBQUEsU0FBQSxFQUFBLEtBQUEsU0FDQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGFBRUEsRUFBQSxRQUVBLEVBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxVQUFBLFVBRUEsRUFBQSxnQkFFQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLEVBQUEsZUFBQSxLQUlBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0FPQSxFQUFBLGFBQUEsV0FHQSxJQUFBLEdBREEsR0FBQSxRQUFBLFFBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxJQUFBLEtBQUEsTUFBQSxVQUFBLEVBQ0EsR0FBQSx1QkFBQSxHQUVBLEVBQUEsRUFBQSxFQUFBLGFBQUEsTUFHQSxFQUFBLGdCQUFBLFdBRUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxNQUdBLEVBQUEsdUJBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxVQUNBLEVBQUEsUUFBQSxRQUFBLFdBQUEsRUFDQSxHQUFBLEtBQUEsK0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxtQkFBQSxHQUFBLFdBQUEsRUFBQSxZQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsYUFLQSxFQUFBLGNBQUEsU0FBQSxFQUFBLEdBRUEsR0FDQSxHQURBLEdBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsU0FFQSxHQUFBLEtBQUEsdUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFLQSxFQUhBLEVBQUEsWUFHQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsU0FBQSxTQUFBLFNBRkEsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLE9BQUEsaUJBSUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxhQU1BLEVBQUEsV0FBQSxXQUVBLElBQUEsRUFBQSxPQUFBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUFBLFFBQUEsS0FDQSxHQUFBLEtBQUEsMEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFVBQ0EsRUFBQSxRQUNBLEVBQUEsY0FDQSxFQUFBLE1BQUEsRUFBQSxTQUVBLEVBQUEsRUFBQSxFQUFBLFdBQUEsU0EyREEsRUFBQSxhQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLEVBQ0EsRUFBQSxLQUFBLHFCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsYUFDQSxHQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFNBQ0EsRUFBQSxTQUNBLEVBQUEsUUFBQSxFQUFBLGFBS0EsRUFBQSxlQUFBLFdBRUEsR0FEQSxFQUFBLFlBQUEsRUFDQSxtQkFBQSxHQUFBLGFBQ0EsQ0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGFBQUEsRUFBQSxZQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLGFBQUEsT0FBQSxJQUVBLG1CQUFBLEdBQUEsYUFBQSxHQUFBLGNBQ0EsRUFBQSxhQUFBLEdBQUEsYUFBQSxPQU9BLEVBQUEsYUFBQSxTQUFBLEdBRUEsR0FBQSxFQUNBLElBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxpQkFBQSxRQUVBLEVBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxpQkFDQSxFQUFBLElBQUEsUUFBQSxRQUNBLEVBQUEsSUFBQSxTQUFBLFNBQUEsRUFBQSxJQUFBLFNBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxPQUNBLEdBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxlQUFBLFNBQ0EsRUFBQSxRQUFBLFFBQUEsVUFBQSxFQUFBLGVBQ0EsRUFBQSxJQUFBLFFBQUEsUUFDQSxFQUFBLElBQUEsU0FBQSxTQUFBLEVBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsUUFJQSxFQUFBLFdBQUEsU0FBQSxHQUVBLEVBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUFBLG1CQUFBLEdBQUEsT0FDQSxRQUFBLFFBQUEsbUJBQUEsS0FBQSxFQUFBLE9BQ0EsbUJBQUEsR0FBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE9BQ0EsUUFBQSxRQUFBLG9CQUFBLE9BRUEsUUFBQSxRQUFBLG9CQUFBLFFBQ0EsT0FBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLG9DQUFBLFNBQUEsWUFLQSxFQUFBLFVBQUEsU0FBQSxHQUVBLEVBQUEsS0FBQSxHQUNBLEVBQUEsV0FBQSxJQUdBLEVBQUEsbUJBQUEsU0FBQSxHQUVBLFFBQUEsUUFBQSxtQkFBQSxLQUFBLEdBQ0EsUUFBQSxRQUFBLG9DQUFBLFlBQUEsVUFHQSxFQUFBLGdCQUFBLFdBQ0EsT0FBQSxHQUdBLEVBQUEsWUFBQSxXQUVBLG1CQUFBLEdBQUEsWUFBQSxFQUFBLFdBQUEsUUFFQSxRQUFBLFFBQUEsUUFBQSxJQUFBLFNBQUEsRUFBQSxrQkFDQSxHQUFBLFlBR0EsUUFBQSxRQUFBLFFBQUEsSUFBQSxTQUFBLFdBRUEsbUJBQUEsR0FBQSxnQkFBQSxFQUFBLGVBQUEsUUFFQSxRQUFBLFFBQUEscUJBQUEsSUFBQSxTQUFBLEVBQUEsc0JBQ0EsR0FBQSxnQkFHQSxRQUFBLFFBQUEscUJBQUEsSUFBQSxTQUFBLFNBSUEsRUFBQSxPQUFBLGVBQUEsV0FDQSxFQUFBLFFBQUEsT0FBQSxFQUNBLEVBQUEsUUFBQSxVQUFBLEVBQ0EsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLFdBR0EsRUFBQSxjQUFBLFdBQ0EsRUFBQSxRQUFBLGFBQUEsRUFDQSxRQUFBLFFBQUEsUUFBQSxLQUFBLFNBQUEsRUFBQSxrQkFHQSxFQUFBLGdCQUFBLFdBQ0EsUUFBQSxRQUFBLFFBQUEsWUFBQSxRQUFBLFFBQUEsUUFBQSxVQUFBLFFBQUEsUUFBQSxVQUFBLFNBQUEsTUFBQSxFQUFBLFFBQUEsYUFBQSxFQUFBLFFBQUEsT0FBQSxFQUFBLFFBQUEsV0FDQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsVUFJQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxnQkFBQSxFQUFBLGdCQUFBLFNBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLElBSUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxLQUNBLEVBQUEsY0FBQSxJQUFBLG1CQUFBLDBCQUFBLEVBQUEsSUFBQSxNQUtBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLE9BQ0EsSUFBQSxLQUFBLEVBQUEsR0FBQSxNQUNBLE9BQUEsQ0FHQSxJQUFBLEdBQUEsRUFBQSxTQUFBLDJCQUNBLEVBQUEsRUFBQSxTQUFBLHFCQUNBLEVBQUEsRUFBQSxTQUFBLHdCQUNBLEVBQUEsRUFBQSxLQUFBLHNCQUNBLEVBQUEsRUFBQSxLQUFBLG1CQUNBLEVBQUEsRUFBQSxLQUFBLHFCQUVBLEVBQUEsRUFBQSxTQUVBLEdBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxVQUVBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxPQUVBLEVBQUEsWUFDQSxLQUFBLE9BQ0EsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsU0FBQSxJQUVBLEVBQUEsTUFBQSxPQUNBLEVBQUEsUUFDQSxFQUFBLFNBQUEsUUFDQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLFFBRUEsRUFBQSxZQUFBLFFBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLFNBQUEsR0FBQSxPQUFBLFdBQ0EsRUFBQSxPQUFBLFdBQ0EsbUJBQUEsRUFBQSxNQUNBLEVBQUEsWUFBQSxNQUFBLEVBQUEsS0FDQSxrQkFBQSxFQUFBLFFBQ0EsRUFBQSxZQUFBLEtBQUEsRUFBQSxNQUNBLEVBQUEsTUFBQSxhQUFBLEtBR0EsRUFBQSxNQUFBLGFBQUEsTUFNQSxFQUFBLGtCQUFBLEVBQ0EsRUFBQSxpQkFBQSxFQUVBLEVBQUEsUUFBQSxXQUNBLEVBQUEsUUFBQSxFQUFBLE9BSUEsRUFBQSxtQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLElBQUEsRUFFQSxNQURBLEdBQUEsTUFBQSxhQUFBLEdBQ0EsQ0FHQSxJQUFBLEdBQUEsRUFBQSxTQUNBLEdBQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxTQUFBLEVBQUEsU0FFQSxFQUFBLEtBQUEsMkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLGlCQUNBLEVBQUEsYUFBQSxFQUFBLEVBQUEsWUFFQSxFQUFBLE1BQUEsYUFBQSxLQU1BLEVBQUEsZ0JBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBS0EsRUFBQSxhQUFBLElBQ0EsRUFBQSxNQUFBLGFBQUEsRUFDQSxFQUFBLGFBQUEsNEJBQUEsRUFBQSxXQUNBLEVBQUEsV0FDQSxFQUFBLE1BQUEsYUFBQSxHQUNBLE1BQ0EsSUFHQSxFQUFBLGVBQUEsT0FFQSxHQUFBLEtBQUEsd0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLGFBQUEsRUFBQSxFQUFBLFdBQ0EsRUFBQSxPQUFBLEVBQUEsUUFFQSxFQUFBLE1BQUEsYUFBQSxNQXBCQSxFQUFBLE1BQUEsYUFBQSxHQUNBLElBd0JBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsSUFBQSxXQUFBLEdBQ0EsRUFBQSxpQkFBQSxVQUFBLEVBQUEsV0FJQSxFQUFBLGFBQUEsU0FBQSxHQUNBLElBQUEsV0FBQSxHQUNBLEdBQUEsVUFBQSxVQUFBLEVBQUEsaUJBQUEsV0FBQSxFQUFBLFVBRUEsT0FBQSxDQUtBLFFBQUEsR0FJQSxFQUFBLE9BQUEsK0hBQUEsV0FDQSxFQUFBLE1BQUEsYUFBQSxJQUdBLEVBQUEsT0FBQSxzQkFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLGVBQUEsUUFHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxTQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxFQUVBLGVBQUEsUUFBQSxRQUFBLG9CQUVBLGNBQUEsUUFDQSxFQUFBLGVBQUEsWUFBQSxFQUVBLEVBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLGNBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsaUJBQ0EsRUFBQSxlQUFBLFlBQUEsT0FLQSxFQUFBLGVBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxRQUFBLFNBQUEsSUFHQSxFQUFBLGVBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxvQkFDQSxHQUVBLEVBQUEsb0JBQUEsTUFDQSxTQUFBLFFBQUEsR0FBQSxXQUFBLFVBSUEsRUFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsRUFDQSxPQUFBLENBRUEsSUFBQSxJQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxNQUFBLEVBQ0EsR0FBQSxLQUFBLGlCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxVQUFBLEdBQ0EsUUFBQSxRQUFBLGdCQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsUUFLQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxNQUFBLEVBQ0EsR0FBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsYUFDQSxHQUFBLGFBS0EsRUFBQSx1QkFBQSxTQUFBLEdBQ0EsR0FBQSxJQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBQ0EsR0FBQSxLQUFBLGdDQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEVBQUEsYUFBQSxFQUNBLElBQUEsR0FBQSxRQUFBLFFBQUEsa0JBQ0EsR0FBQSxRQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxRQUtBLEVBQUEscUJBQUEsV0FDQSxHQUFBLElBQUEsU0FBQSxFQUFBLEtBQUEsU0FBQSxNQUFBLEVBQUEsS0FBQSxNQUNBLEdBQUEsS0FBQSw4QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxFQUFBLGFBQUEsRUFDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGtCQUNBLEdBQUEsUUFDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsUUFNQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsTUFBQSxPQUFBLEdBQ0EsTUFFQSxHQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxRQUFBLFFBQUEsZ0JBQUEsU0FBQSxZQUNBLFFBQUEsUUFBQSxJQUFBLEVBQUEsVUFBQSxTQUFBLGFBQ0EsT0FBQSxTQUFBLGFBSUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxLQUFBLGFBQ0EsZ0JDbC9DQSxRQUFBLE9BQUEsWUFBQSxXQUFBLHFCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxVQUFBLFVBQ0EsRUFBQSxrQkFDQSxFQUFBLGVBQ0EsRUFBQSxtQkFFQSxFQUFBLFVBQUEsV0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFFQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxFQUFBLFFBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBU0EsR0FSQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsYUFBQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsRUFBQSxTQUFBLEdBQUEsUUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsT0FDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxVQUVBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGVBQUEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsRUFHQSxJQUFBLEdBREEsR0FBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLGNBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLElBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxLQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFDQSxDQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxLQUNBLFFBZUEsRUFBQSxXQUFBLElBR0EsUUFBQSxRQUFBLFFBQUEsWUFBQSxjQUNBLFFBQUEsUUFBQSxvQkFBQSxRQUFBLEtBR0EsSUFBQSxHQUFBLEdBRUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLE9BR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLFNBQUEsRUFBQSxPQUFBLENBRUEsSUFBQSxFQUFBLFVBQUEsT0FBQSxDQUVBLElBQUEsVUFBQSxFQUFBLFNBQUEsR0FBQSxLQUVBLE1BREEsR0FBQSxzQkFBQSxFQUFBLFNBQUEsR0FBQSxJQUNBLENBR0EsSUFBQSxVQUFBLEVBQUEsU0FBQSxHQUFBLEtBRUEsTUFEQSxHQUFBLHNCQUFBLEVBQUEsU0FBQSxHQUFBLElBQ0EsQ0FHQSxHQUFBLFdBQUEsQ0FDQSxJQUFBLElBQ0EsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFVBQ0EsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGdCQUNBLGFBQUEsRUFBQSxTQUFBLEdBQUEsYUFFQSxHQUFBLEtBQUEsMkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsTUFDQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSx1QkFDQSxHQUFBLEtBQUEsRUFBQSxNQUFBLE9BRUEsRUFBQSxXQUFBLElBQ0EsTUFBQSxXQUFBLEVBQUEsV0FBQSxLQUlBLEVBQUEsaUJBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxFQUFBLEtBQUEsK0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsUUFBQSxZQUFBLEVBQUEsZUFDQSxFQUFBLFNBQUEsRUFBQSxhQUFBLFFBQUEsRUFBQSxTQUFBLE9BQ0EsRUFBQSxNQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLHVCQUNBLEdBQUEsS0FBQSxFQUFBLE1BQUEsVUFJQSxFQUFBLHlCQUdBLEVBQUEsY0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLCtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLFFBQUEsWUFBQSxFQUFBLFlBQ0EsRUFBQSxTQUFBLEVBQUEsVUFBQSxRQUFBLEVBQUEsU0FBQSxPQUNBLEVBQUEsTUFBQSxPQUFBLENBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSx1QkFDQSxHQUFBLEtBQUEsRUFBQSxNQUFBLFVBSUEsRUFBQSx5QkFJQSxFQUFBLHNCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsZUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLHVCQUFBLFNBQUEsUUFDQSxFQUFBLFFBQUEsSUFBQSxXQUFBLFdBR0EsRUFBQSxzQkFBQSxXQUNBLEVBQUEsdUJBQUEsWUFBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsS0FJQSxFQUFBLHNCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsWUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLHVCQUFBLFNBQUEsUUFDQSxFQUFBLFFBQUEsSUFBQSxXQUFBLFdBR0EsRUFBQSxzQkFBQSxXQUNBLEVBQUEsdUJBQUEsWUFBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsS0FHQSxFQUFBLGtCQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxnQkFBQSxFQUFBLGdCQUFBLFNBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxJQUFBLElBR0EsRUFBQSxnQkFBQSxXQUNBLFFBQUEsUUFBQSxjQUFBLE9BQ0EsUUFBQSxRQUFBLGlCQUFBLFFBR0EsRUFBQSxnQkFBQSxXQUNBLFFBQUEsUUFBQSxjQUFBLE9BQ0EsUUFBQSxRQUFBLGlCQUFBLE9BRUEsRUFBQSxhQUFBLGVBQ0EsRUFBQSxhQUFBLG9CQUVBLEdBQUEsZUFBQSxXQUNBLEdBQUEsZUFBQSxlQUNBLEdBQUEsZUFBQSxZQUNBLEdBQUEsZUFBQSxNQUdBLEVBQUEsYUFBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLFFBQUEsUUFBQSxHQUNBLEVBQUEsRUFBQSxLQUFBLHFCQUNBLEVBQUEsRUFBQSxLQUFBLGtCQUNBLEVBQUEsRUFBQSxLQUFBLGdCQUVBLEdBQUEsWUFBQSxRQUNBLEVBQUEsU0FBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLFlBQUEsYUFJQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsZUFBQSxLQUFBLEVBQUEsR0FFQSxFQUFBLEtBQ0EsRUFBQSxjQUFBLElBQUEsbUJBQUEsMEJBQUEsRUFBQSxJQUFBLE1BSUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGFBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxXQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FJQSxHQUhBLEVBQUEsU0FBQSxHQUFBLGNBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxVQUVBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLEVBRUEsSUFBQSxHQURBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxJQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsS0FDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEVBQ0EsQ0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsS0FDQSxVQU1BLEVBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxnQkFBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLFFBQUEsRUFBQSxTQUFBLFdBR0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxVQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsSUFDQSxFQUFBLFNBQUEsR0FBQSxTQUFBLElBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFDQSwwQkFFQSxvQkFhQSxRQUFBLE9BQUEsWUFBQSxXQUFBLGtCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxlQUFBLEVBRUEsRUFBQSxTQUFBLFdBQ0EsRUFBQSxLQUFBLENBQ0EsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BRUEsR0FBQSxLQUFBLHlCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxRQUFBLElBQ0EsT0FBQSxTQUFBLFNBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBS0EsR0FKQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFVBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLE9BQ0EsbUJBQUEsR0FBQSxTQUFBLEdBQUEsZUFBQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUdBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsUUFNQSxHQUFBLEVBQUEsU0FBQSxVQUNBLEVBQUEsU0FBQSxTQUFBLE9BQUEsRUFBQSxDQUNBLEVBQUEsU0FBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsSUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLElBQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxXQUFBLENBQ0EsRUFBQSxTQUFBLE1BQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FDQSxPQUlBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLEVBQUEsU0FBQSxNQUlBLEVBQUEsYUFBQSxFQUNBLEVBQUEsV0FBQSxJQUdBLFFBQUEsUUFBQSxRQUFBLFlBQUEsY0FDQSxRQUFBLFFBQUEsb0JBQUEsUUFBQSxLQUdBLElBQUEsR0FBQSxHQUVBLEdBQUEsU0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxPQUdBLEVBQUEsV0FBQSxXQUNBLE1BQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxPQUFBLEVBQ0EsT0FFQSxHQUpBLFFBU0EsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxnQkFBQSxXQUNBLE1BQUEsR0FBQSxZQUdBLEdBRkEsUUFNQSxFQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsRUFBQSxTQUFBLEdBQUEsYUFBQSxFQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxVQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FBQSxjQUFBLEVBQUEsU0FBQSxHQUFBLGNBUUEsSUFQQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxlQUNBLEVBQUEsYUFBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGtCQUNBLEVBQUEsZ0JBQUEsRUFBQSxTQUFBLEdBQUEsaUJBRUEsRUFBQSxTQUFBLEdBQUEsY0FBQSxFQUVBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLEVBRUEsSUFBQSxHQURBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxJQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsS0FDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEVBQ0EsQ0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsS0FDQSxRQUtBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFdBQUEsRUFBQSxXQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsS0FBQSw2QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxTQUtBLEVBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxnQkFBQSxHQUdBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsRUFBQSxpQkFBQSxFQUFBLFdBQUEsSUFHQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxTQUFBLElBR0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsV0FBQSxFQUVBLEVBQUEsV0FBQSxPQUdBLENBQ0EsRUFBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFFBR0EsSUFBQSxtQkFBQSxHQUFBLFNBQUEsVUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFJQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLFdBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFVBT0EsRUFBQSxTQUFBLFdBQ0EsR0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLENBRUEsS0FBQSxFQUFBLFlBQUEsQ0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEtBQUEsNkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFdBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQUEsUUFDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLE9BQUEsSUFDQSxFQUFBLFdBQUEsR0FBQSxLQUFBLENBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsRUFBQSxTQUFBLEdBQUEsS0FBQSxDQUVBLEdBQUEsaUJBQUEsRUFBQSxXQUFBLEdBQ0EsRUFBQSxnQkFBQSxFQUFBLFNBQUEsS0FFQSxFQUFBLGFBQUEsRUFFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxvQkFDQSxFQUFBLGNBQUEsU0FDQSxVQUFBLEVBQUEsb0JBQUEsU0FBQSxLQUNBLE1BR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxJQUFBLEVBQUEsVUFBQSxDQUNBLEVBQUEsV0FBQSxDQUNBLElBQUEsSUFFQSxNQUFBLEVBQUEsS0FBQSxNQUNBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FDQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGdCQUNBLGFBQUEsRUFBQSxTQUFBLEdBQUEsYUFHQSxHQUFBLEtBQUEsZ0NBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxTQUFBLE9BQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsU0FBQSxHQUFBLEtBQUEsRUFDQSxFQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxhQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsUUFFQSxJQUFBLEVBQUEsU0FBQSxVQUNBLEVBQUEsU0FBQSxTQUFBLE9BQUEsRUFBQSxDQUNBLEVBQUEsU0FBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsSUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLElBQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxXQUFBLENBQ0EsRUFBQSxTQUFBLE1BQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FDQSxPQUlBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLEVBQUEsU0FBQSxNQU1BLEVBQUEsU0FBQSxRQUFBLElBQ0EsT0FBQSxTQUFBLGFBSUEsRUFBQSxXQUFBLElBSUEsRUFBQSxhQUFBLFdBQ0EsSUFBQSxFQUFBLFVBQUEsQ0FDQSxFQUFBLFdBQUEsQ0FFQSxJQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxVQUFBLEVBQUEsU0FBQSxVQUNBLEdBQUEsS0FBQSw4QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxFQUFBLFlBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxTQUFBLElBRUEsSUFEQSxFQUFBLFNBQUEsRUFBQSxTQUNBLG1CQUFBLEdBQUEsU0FBQSxVQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsRUFBQSxDQUNBLEVBQUEsU0FBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsSUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLElBQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxXQUFBLENBQ0EsRUFBQSxTQUFBLE1BQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FDQSxPQUlBLEVBQUEsU0FBQSxLQUFBLEdBQ0EsRUFBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLElBRUEsRUFBQSxNQUFBLEVBQUEsU0FBQSxNQUVBLEVBQUEsSUFDQSxFQUFBLE1BQUEsV0FBQSxTQU1BLEdBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxTQUFBLEtBQUEsR0FFQSxFQUFBLE9BQUEsUUFBQSxFQUFBLE1BQ0EsRUFBQSxhQUFBLGFBRUEsTUFBQSxXQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxTQUFBLEtBQUEsS0FLQSxFQUFBLFdBQUEsR0FHQSxFQUFBLE9BQUEscUJBQUEsV0FFQSxFQUFBLFlBQUEsSUFHQSxFQUFBLGFBQUEsU0FBQSxHQUNBLElBQUEsRUFJQSxNQUhBLEdBQUEsZUFBQSxFQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsYUFDQSxFQUFBLGFBQUEsWUFDQSxDQUVBLElBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUVBLEtBQUEsRUFBQSxVQUFBLENBQ0EsRUFBQSxXQUFBLENBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsU0FBQSxFQUFBLFNBRUEsR0FBQSxLQUFBLDhCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLHNCQUFBLFlBQUEsb0JBQ0EsRUFBQSxjQUFBLFNBQ0EsVUFBQSxFQUFBLHNCQUFBLFNBQUEsS0FDQSxPQUdBLEVBQUEsZUFBQSxFQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsTUFDQSxFQUFBLGFBQUEsY0FJQSxFQUFBLFdBQUEsSUFJQSxFQUFBLE9BQUEsMk1BQUEsV0FFQSxFQUFBLGVBQUEsSUFHQSxFQUFBLElBQUEsV0FFQSxHQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FFQSxJQUFBLElBQ0EsTUFBQSxFQUFBLEtBQUEsTUFDQSxTQUFBLEVBQUEsU0FDQSxTQUFBLEVBQUEsU0FDQSxTQUFBLEVBQUEsaUJBQ0EsUUFBQSxFQUFBLGdCQUNBLFNBQUEsRUFBQSxTQUdBLEdBQUEsS0FBQSxxQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxNQUNBLFNBQUEsRUFBQSxRQUNBLEVBQUEsYUFBQSxFQUFBLFFBQUEsRUFBQSxZQVFBLFFBQUEsUUFBQSxzQkFBQSxNQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsUUFBQSxRQUFBLGdCQUFBLFVBSUEsRUFBQSxhQUFBLEVBQUEsTUFBQSxFQUFBLGNBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFDQSwwQkFFQSxpQkFHQSxFQUFBLFNBQUEsU0FBQSxHQUNBLE1BQUEsR0FDQSxHQUVBLFlDbnFCQSxRQUFBLE9BQUEsWUFBQSxXQUFBLGtCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUNBLEVBQUEsVUFDQSxFQUFBLE1BQUEsT0FDQSxFQUFBLFVBQUEsU0FHQSxFQUFBLFNBQUEsV0FDQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBRUEsRUFBQSxTQUNBLEVBQUEsV0FHQSxFQUFBLFVBQUEsV0FDQSxFQUFBLE1BQUEsUUFJQSxRQUFBLFFBQUEsYUFBQSxZQUNBLFVBQUEsVUFDQSxXQUFBLFdBQ0EsU0FBQSxTQUFBLEdBQ0EsRUFBQSxPQUFBLFdBQ0EsRUFBQSxLQUFBLFNBQUEsT0FNQSxFQUFBLE9BQUEsUUFBQSxXQUNBLEVBQUEsU0FBQSxFQUFBLE9BQ0EsRUFBQSxhQUFBLEVBQUEsU0FJQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsZUFNQSxFQUFBLGNBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxVQUNBLEtBQUEsRUFBQSxDQUdBLElBQUEsR0FGQSxHQUFBLEtBQUEsSUFBQSxPQUFBLE1BQUEsT0FBQSxRQUNBLEdBQUEsS0FBQSxLQUFBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxDQUNBLEVBQUEsRUFBQSxFQUNBLE9BR0EsRUFBQSxXQUFBLEdBQUEsRUFDQSxFQUFBLFdBQUEsSUFLQSxFQUFBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxPQUNBLEdBQUEsS0FBQSxpQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE9BQUEsRUFBQSxPQUNBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsRUFBQSxNQUFBLFFBQUEsRUFBQSxTQUVBLE1BQUEsRUFBQSxNQUNBLFFBQUEsWUFBQSxFQUFBLGNBQUEsRUFBQSxXQUFBLE9BQ0EsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLGVBRUEsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLEVBQUEsWUFHQSxRQUFBLFFBQUEsVUFBQSxLQUFBLE9BQUEsUUFiQSxHQWtCQSxFQUFBLE9BQUEseUNBQUEsV0FDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxNQUFBLEVBQ0EsRUFBQSxNQUFBLFVBQUEsRUFDQSxFQUFBLE1BQUEsUUFBQSxLQUlBLEVBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQ0EsSUFBQSxFQUFBLE9BQUEsTUFFQSxHQUFBLEtBQUEsd0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FFQSxNQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsTUFBQSxHQUNBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLFdBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUNBLFdBQUEsRUFBQSxVQUNBLEVBQUEsWUFBQSxFQUFBLFFBQUEsU0FFQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLGNBSUEsVUFBQSxFQUFBLE1BQ0EsRUFBQSxNQUFBLE9BQUEsRUFFQSxFQUFBLE1BQUEsTUFBQSxFQUVBLEVBQUEsTUFBQSxRQUFBLEVBQUEsUUFDQSxXQUFBLEVBQUEsV0FDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLGFBekJBLEdBK0JBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE9BRUEsR0FBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsT0FBQSxFQUFBLE9BQ0EsRUFBQSxNQUFBLE9BQUEsRUFDQSxFQUFBLE1BQUEsUUFBQSxFQUFBLFFBQ0EsV0FBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQUEsUUFBQSxVQUVBLE1BQUEsRUFBQSxRQUNBLEVBQUEsS0FBQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLFFBQUEsRUFBQSxRQUNBLFdBQUEsRUFBQSxVQUNBLEVBQUEsWUFBQSxFQUFBLFFBQUEsUUFFQSxFQUFBLGFBQUEsZUFmQSxHQXFCQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxPQUVBLEdBQUEsS0FBQSxPQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxrQkFKQSxHQVNBLEVBQUEsYUFBQSxTQUFBLEdBQ0EsTUFBQSxTQUFBLFlBQUEsS0FBQSxFQUFBLFFBQ0EsR0FFQSxFQUFBLE9BQUEsUUFBQSxPQUNBLFdBQUEsRUFBQSxVQUNBLEVBQUEsWUFBQSxFQUFBLFFBRUEsRUFBQSxhQUFBLGNBR0EsRUFBQSxVQUFBLFdBQ0EsR0FBQSxHQUFBLElBRUEsUUFBQSxPQUFBLE9BQ0EsRUFBQSxNQUNBLE9BQUEsT0FBQSxPQUNBLEVBQUEsS0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLHdCQUVBLEdBQUEsSUFBQSxtQkFBQSx5Q0FBQSxFQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuIEFuZ3VsYXJKUyB2MS4yLjIyXHJcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xyXG4gTGljZW5zZTogTUlUXHJcbiovXHJcbihmdW5jdGlvbihwLGYsbil7J3VzZSBzdHJpY3QnO2YubW9kdWxlKFwibmdDb29raWVzXCIsW1wibmdcIl0pLmZhY3RvcnkoXCIkY29va2llc1wiLFtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsZnVuY3Rpb24oZSxiKXt2YXIgYz17fSxnPXt9LGgsaz0hMSxsPWYuY29weSxtPWYuaXNVbmRlZmluZWQ7Yi5hZGRQb2xsRm4oZnVuY3Rpb24oKXt2YXIgYT1iLmNvb2tpZXMoKTtoIT1hJiYoaD1hLGwoYSxnKSxsKGEsYyksayYmZS4kYXBwbHkoKSl9KSgpO2s9ITA7ZS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYSxkLGU7Zm9yKGEgaW4gZyltKGNbYV0pJiZiLmNvb2tpZXMoYSxuKTtmb3IoYSBpbiBjKWQ9Y1thXSxmLmlzU3RyaW5nKGQpfHwoZD1cIlwiK2QsY1thXT1kKSxkIT09Z1thXSYmKGIuY29va2llcyhhLGQpLGU9ITApO2lmKGUpZm9yKGEgaW4gZD1iLmNvb2tpZXMoKSxjKWNbYV0hPT1kW2FdJiYobShkW2FdKT9kZWxldGUgY1thXTpjW2FdPWRbYV0pfSk7cmV0dXJuIGN9XSkuZmFjdG9yeShcIiRjb29raWVTdG9yZVwiLFxyXG5bXCIkY29va2llc1wiLGZ1bmN0aW9uKGUpe3JldHVybntnZXQ6ZnVuY3Rpb24oYil7cmV0dXJuKGI9ZVtiXSk/Zi5mcm9tSnNvbihiKTpifSxwdXQ6ZnVuY3Rpb24oYixjKXtlW2JdPWYudG9Kc29uKGMpfSxyZW1vdmU6ZnVuY3Rpb24oYil7ZGVsZXRlIGVbYl19fX1dKX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItY29va2llcy5taW4uanMubWFwXHJcbiIsIi8qXHJcbiBqUXVlcnkgVUkgU29ydGFibGUgcGx1Z2luIHdyYXBwZXJcclxuXHJcbiBAcGFyYW0gW3VpLXNvcnRhYmxlXSB7b2JqZWN0fSBPcHRpb25zIHRvIHBhc3MgdG8gJC5mbi5zb3J0YWJsZSgpIG1lcmdlZCBvbnRvIHVpLmNvbmZpZ1xyXG4qL1xyXG5hbmd1bGFyLm1vZHVsZSgndWkuc29ydGFibGUnLCBbXSlcclxuICAudmFsdWUoJ3VpU29ydGFibGVDb25maWcnLHt9KVxyXG4gIC5kaXJlY3RpdmUoJ3VpU29ydGFibGUnLCBbICd1aVNvcnRhYmxlQ29uZmlnJyxcclxuICAgICAgICBmdW5jdGlvbih1aVNvcnRhYmxlQ29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXHJcbiAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24gY29tYmluZUNhbGxiYWNrcyhmaXJzdCxzZWNvbmQpe1xyXG4gICAgICAgICAgICAgICAgICBpZiggc2Vjb25kICYmICh0eXBlb2Ygc2Vjb25kID09PSBcImZ1bmN0aW9uXCIpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSx1aSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3QoZSx1aSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kKGUsdWkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Q7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG9wdHMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSB7XHJcbiAgICAgICAgICAgICAgICByZWNlaXZlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlOm51bGwsXHJcbiAgICAgICAgICAgICAgICBzdGFydDpudWxsLFxyXG4gICAgICAgICAgICAgICAgc3RvcDpudWxsLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlOm51bGxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG9wdHMsIHVpU29ydGFibGVDb25maWcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5nTW9kZWwpIHtcclxuXHJcbiAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNvcnRhYmxlKG9wdHMpO1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrcy5zdGFydCA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTYXZlIHBvc2l0aW9uIG9mIGRyYWdnZWQgaXRlbVxyXG4gICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZSA9IHsgaW5kZXg6IHVpLml0ZW0uaW5kZXgoKSB9O1xyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrcy51cGRhdGUgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHRoZSByZWZlcmVuY2UgdG8gbmdNb2RlbCBpbiBzdG9wKCkgaXMgd3JvbmdcclxuICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUucmVzb3J0ID0gbmdNb2RlbDtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3MucmVjZWl2ZSA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlLnJlbG9jYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIGFkZGVkIGl0ZW0gdG8gYXJyYXkgaW50byBjb3JyZWN0IHBvc2l0aW9uIGFuZCBzZXQgdXAgZmxhZ1xyXG4gICAgICAgICAgICAgICAgbmdNb2RlbC4kbW9kZWxWYWx1ZS5zcGxpY2UodWkuaXRlbS5pbmRleCgpLCAwLCB1aS5pdGVtLnNvcnRhYmxlLm1vdmVkKTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3MucmVtb3ZlID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvcHkgZGF0YSBpbnRvIGl0ZW1cclxuICAgICAgICAgICAgICAgIGlmIChuZ01vZGVsLiRtb2RlbFZhbHVlLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlLm1vdmVkID0gbmdNb2RlbC4kbW9kZWxWYWx1ZS5zcGxpY2UoMCwgMSlbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlLm1vdmVkID0gIG5nTW9kZWwuJG1vZGVsVmFsdWUuc3BsaWNlKHVpLml0ZW0uc29ydGFibGUuaW5kZXgsIDEpWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrcy5zdG9wID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpZ2VzdCBhbGwgcHJlcGFyZWQgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgaWYgKHVpLml0ZW0uc29ydGFibGUucmVzb3J0ICYmICF1aS5pdGVtLnNvcnRhYmxlLnJlbG9jYXRlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAvLyBGZXRjaCBzYXZlZCBhbmQgY3VycmVudCBwb3NpdGlvbiBvZiBkcm9wcGVkIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgdmFyIGVuZCwgc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gdWkuaXRlbS5zb3J0YWJsZS5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgZW5kID0gdWkuaXRlbS5pbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gUmVvcmRlciBhcnJheSBhbmQgYXBwbHkgY2hhbmdlIHRvIHNjb3BlXHJcbiAgICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUucmVzb3J0LiRtb2RlbFZhbHVlLnNwbGljZShlbmQsIDAsIHVpLml0ZW0uc29ydGFibGUucmVzb3J0LiRtb2RlbFZhbHVlLnNwbGljZShzdGFydCwgMSlbMF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh1aS5pdGVtLnNvcnRhYmxlLnJlc29ydCB8fCB1aS5pdGVtLnNvcnRhYmxlLnJlbG9jYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChhdHRycy51aVNvcnRhYmxlLCBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCl7XHJcbiAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChuZXdWYWwsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlmKCBjYWxsYmFja3Nba2V5XSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdyYXAgdGhlIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb21iaW5lQ2FsbGJhY2tzKCBjYWxsYmFja3Nba2V5XSwgdmFsdWUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNvcnRhYmxlKCdvcHRpb24nLCBrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChjYWxsYmFja3MsIGZ1bmN0aW9uKHZhbHVlLCBrZXkgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0c1trZXldID0gY29tYmluZUNhbGxiYWNrcyh2YWx1ZSwgb3B0c1trZXldKTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gQ3JlYXRlIHNvcnRhYmxlXHJcbiAgICAgICAgICAgIC8vZWxlbWVudC5zb3J0YWJsZSgnZGVzdHJveScpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnNvcnRhYmxlKG9wdHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXSk7XHJcbiIsIi8qXHJcbiBBdHRhY2hlcyBpbnB1dCBtYXNrIG9udG8gaW5wdXQgZWxlbWVudFxyXG4gKi9cclxuYW5ndWxhci5tb2R1bGUoJ3VpLm1hc2snLCBbXSlcclxuICAudmFsdWUoJ3VpTWFza0NvbmZpZycsIHtcclxuICAgICdtYXNrRGVmaW5pdGlvbnMnOiB7XHJcbiAgICAgICc5JzogL1xcZC8sXHJcbiAgICAgICdBJzogL1thLXpBLVpdLyxcclxuICAgICAgJyonOiAvW2EtekEtWjAtOV0vXHJcbiAgICB9LFxyXG4gICAgJ2NsZWFyT25CbHVyJzogdHJ1ZVxyXG4gIH0pXHJcbiAgLmRpcmVjdGl2ZSgndWlNYXNrJywgWyd1aU1hc2tDb25maWcnLCAnJHBhcnNlJywgZnVuY3Rpb24gKG1hc2tDb25maWcsICRwYXJzZSkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgY29tcGlsZTogZnVuY3Rpb24gdWlNYXNrQ29tcGlsaW5nRnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IG1hc2tDb25maWc7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiB1aU1hc2tMaW5raW5nRnVuY3Rpb24oc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpe1xyXG4gICAgICAgICAgdmFyIG1hc2tQcm9jZXNzZWQgPSBmYWxzZSwgZXZlbnRzQm91bmQgPSBmYWxzZSxcclxuICAgICAgICAgICAgbWFza0NhcmV0TWFwLCBtYXNrUGF0dGVybnMsIG1hc2tQbGFjZWhvbGRlciwgbWFza0NvbXBvbmVudHMsXHJcbiAgICAgICAgICAvLyBNaW5pbXVtIHJlcXVpcmVkIGxlbmd0aCBvZiB0aGUgdmFsdWUgdG8gYmUgY29uc2lkZXJlZCB2YWxpZFxyXG4gICAgICAgICAgICBtaW5SZXF1aXJlZExlbmd0aCxcclxuICAgICAgICAgICAgdmFsdWUsIHZhbHVlTWFza2VkLCBpc1ZhbGlkLFxyXG4gICAgICAgICAgLy8gVmFycyBmb3IgaW5pdGlhbGl6aW5nL3VuaW5pdGlhbGl6aW5nXHJcbiAgICAgICAgICAgIG9yaWdpbmFsUGxhY2Vob2xkZXIgPSBpQXR0cnMucGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsTWF4bGVuZ3RoID0gaUF0dHJzLm1heGxlbmd0aCxcclxuICAgICAgICAgIC8vIFZhcnMgdXNlZCBleGNsdXNpdmVseSBpbiBldmVudEhhbmRsZXIoKVxyXG4gICAgICAgICAgICBvbGRWYWx1ZSwgb2xkVmFsdWVVbm1hc2tlZCwgb2xkQ2FyZXRQb3NpdGlvbiwgb2xkU2VsZWN0aW9uTGVuZ3RoO1xyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemUobWFza0F0dHIpe1xyXG4gICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNEZWZpbmVkKG1hc2tBdHRyKSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB1bmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9jZXNzUmF3TWFzayhtYXNrQXR0cik7XHJcbiAgICAgICAgICAgIGlmICghbWFza1Byb2Nlc3NlZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB1bmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbml0aWFsaXplRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBiaW5kRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gaW5pdFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyQXR0cikge1xyXG4gICAgICAgICAgICBpZighIGFuZ3VsYXIuaXNEZWZpbmVkKHBsYWNlaG9sZGVyQXR0cikpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1hc2tQbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyQXR0cjtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBtYXNrIGlzIHByb2Nlc3NlZCwgdGhlbiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgdmFsdWVcclxuICAgICAgICAgICAgaWYgKG1hc2tQcm9jZXNzZWQpIHtcclxuICAgICAgICAgICAgICBldmVudEhhbmRsZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdHRlcihmcm9tTW9kZWxWYWx1ZSl7XHJcbiAgICAgICAgICAgIGlmICghbWFza1Byb2Nlc3NlZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmcm9tTW9kZWxWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YWx1ZSA9IHVubWFza1ZhbHVlKGZyb21Nb2RlbFZhbHVlIHx8ICcnKTtcclxuICAgICAgICAgICAgaXNWYWxpZCA9IHZhbGlkYXRlVmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWYWxpZGl0eSgnbWFzaycsIGlzVmFsaWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNWYWxpZCAmJiB2YWx1ZS5sZW5ndGggPyBtYXNrVmFsdWUodmFsdWUpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlcihmcm9tVmlld1ZhbHVlKXtcclxuICAgICAgICAgICAgaWYgKCFtYXNrUHJvY2Vzc2VkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZyb21WaWV3VmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFsdWUgPSB1bm1hc2tWYWx1ZShmcm9tVmlld1ZhbHVlIHx8ICcnKTtcclxuICAgICAgICAgICAgaXNWYWxpZCA9IHZhbGlkYXRlVmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHNldCB2aWV3VmFsdWUgbWFudWFsbHkgYXMgdGhlIHJlZm9ybWF0dGluZyBvZiB0aGUgaW5wdXRcclxuICAgICAgICAgICAgLy8gdmFsdWUgcGVyZm9ybWVkIGJ5IGV2ZW50SGFuZGxlcigpIGRvZXNuJ3QgaGFwcGVuIHVudGlsIGFmdGVyXHJcbiAgICAgICAgICAgIC8vIHRoaXMgcGFyc2VyIGlzIGNhbGxlZCwgd2hpY2ggY2F1c2VzIHdoYXQgdGhlIHVzZXIgc2VlcyBpbiB0aGUgaW5wdXRcclxuICAgICAgICAgICAgLy8gdG8gYmUgb3V0LW9mLXN5bmMgd2l0aCB3aGF0IHRoZSBjb250cm9sbGVyJ3MgJHZpZXdWYWx1ZSBpcyBzZXQgdG8uXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuJHZpZXdWYWx1ZSA9IHZhbHVlLmxlbmd0aCA/IG1hc2tWYWx1ZSh2YWx1ZSkgOiAnJztcclxuICAgICAgICAgICAgY29udHJvbGxlci4kc2V0VmFsaWRpdHkoJ21hc2snLCBpc1ZhbGlkKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJyAmJiBpQXR0cnMucmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCdyZXF1aXJlZCcsICFjb250cm9sbGVyLiRlcnJvci5yZXF1aXJlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgbGlua09wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgICBpZiAoaUF0dHJzLnVpT3B0aW9ucykge1xyXG4gICAgICAgICAgICBsaW5rT3B0aW9ucyA9IHNjb3BlLiRldmFsKCdbJyArIGlBdHRycy51aU9wdGlvbnMgKyAnXScpO1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc09iamVjdChsaW5rT3B0aW9uc1swXSkpIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBjYW4ndCB1c2UgYW5ndWxhci5jb3B5IG5vciBhbmd1bGFyLmV4dGVuZCwgdGhleSBsYWNrIHRoZSBwb3dlciB0byBkbyBhIGRlZXAgbWVyZ2VcclxuICAgICAgICAgICAgICBsaW5rT3B0aW9ucyA9IChmdW5jdGlvbihvcmlnaW5hbCwgY3VycmVudCl7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gb3JpZ2luYWwpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvcmlnaW5hbCwgaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFtpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W2ldID0gYW5ndWxhci5jb3B5KG9yaWdpbmFsW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoY3VycmVudFtpXSwgb3JpZ2luYWxbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgfSkob3B0aW9ucywgbGlua09wdGlvbnNbMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaW5rT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaUF0dHJzLiRvYnNlcnZlKCd1aU1hc2snLCBpbml0aWFsaXplKTtcclxuICAgICAgICAgIGlBdHRycy4kb2JzZXJ2ZSgncGxhY2Vob2xkZXInLCBpbml0UGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgdmFyIG1vZGVsVmlld1ZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICBpQXR0cnMuJG9ic2VydmUoJ21vZGVsVmlld1ZhbHVlJywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIGlmKHZhbCA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgbW9kZWxWaWV3VmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHNjb3BlLiR3YXRjaChpQXR0cnMubmdNb2RlbCwgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgIGlmKG1vZGVsVmlld1ZhbHVlICYmIHZhbCkge1xyXG4gICAgICAgICAgICAgIHZhciBtb2RlbCA9ICRwYXJzZShpQXR0cnMubmdNb2RlbCk7XHJcbiAgICAgICAgICAgICAgbW9kZWwuYXNzaWduKHNjb3BlLCBjb250cm9sbGVyLiR2aWV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGNvbnRyb2xsZXIuJGZvcm1hdHRlcnMucHVzaChmb3JtYXR0ZXIpO1xyXG4gICAgICAgICAgY29udHJvbGxlci4kcGFyc2Vycy5wdXNoKHBhcnNlcik7XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gdW5pbml0aWFsaXplKCl7XHJcbiAgICAgICAgICAgIG1hc2tQcm9jZXNzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdW5iaW5kRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChvcmlnaW5hbFBsYWNlaG9sZGVyKSkge1xyXG4gICAgICAgICAgICAgIGlFbGVtZW50LmF0dHIoJ3BsYWNlaG9sZGVyJywgb3JpZ2luYWxQbGFjZWhvbGRlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaUVsZW1lbnQucmVtb3ZlQXR0cigncGxhY2Vob2xkZXInKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKG9yaWdpbmFsTWF4bGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgIGlFbGVtZW50LmF0dHIoJ21heGxlbmd0aCcsIG9yaWdpbmFsTWF4bGVuZ3RoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpRWxlbWVudC5yZW1vdmVBdHRyKCdtYXhsZW5ndGgnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaUVsZW1lbnQudmFsKGNvbnRyb2xsZXIuJG1vZGVsVmFsdWUpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLiR2aWV3VmFsdWUgPSBjb250cm9sbGVyLiRtb2RlbFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUVsZW1lbnQoKXtcclxuICAgICAgICAgICAgdmFsdWUgPSBvbGRWYWx1ZVVubWFza2VkID0gdW5tYXNrVmFsdWUoY29udHJvbGxlci4kdmlld1ZhbHVlIHx8ICcnKTtcclxuICAgICAgICAgICAgdmFsdWVNYXNrZWQgPSBvbGRWYWx1ZSA9IG1hc2tWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB2YWxpZGF0ZVZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIHZpZXdWYWx1ZSA9IGlzVmFsaWQgJiYgdmFsdWUubGVuZ3RoID8gdmFsdWVNYXNrZWQgOiAnJztcclxuICAgICAgICAgICAgaWYgKGlBdHRycy5tYXhsZW5ndGgpIHsgLy8gRG91YmxlIG1heGxlbmd0aCB0byBhbGxvdyBwYXN0aW5nIG5ldyB2YWwgYXQgZW5kIG9mIG1hc2tcclxuICAgICAgICAgICAgICBpRWxlbWVudC5hdHRyKCdtYXhsZW5ndGgnLCBtYXNrQ2FyZXRNYXBbbWFza0NhcmV0TWFwLmxlbmd0aCAtIDFdICogMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaUVsZW1lbnQuYXR0cigncGxhY2Vob2xkZXInLCBtYXNrUGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICBpRWxlbWVudC52YWwodmlld1ZhbHVlKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci4kdmlld1ZhbHVlID0gdmlld1ZhbHVlO1xyXG4gICAgICAgICAgICAvLyBOb3QgdXNpbmcgJHNldFZpZXdWYWx1ZSBzbyB3ZSBkb24ndCBjbG9iYmVyIHRoZSBtb2RlbCB2YWx1ZSBhbmQgZGlydHkgdGhlIGZvcm1cclxuICAgICAgICAgICAgLy8gd2l0aG91dCBhbnkga2luZCBvZiB1c2VyIGludGVyYWN0aW9uLlxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRzQm91bmQpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaUVsZW1lbnQuYmluZCgnYmx1cicsIGJsdXJIYW5kbGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQuYmluZCgnbW91c2Vkb3duIG1vdXNldXAnLCBtb3VzZURvd25VcEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpRWxlbWVudC5iaW5kKCdpbnB1dCBrZXl1cCBjbGljayBmb2N1cycsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgIGV2ZW50c0JvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiB1bmJpbmRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50c0JvdW5kKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlFbGVtZW50LnVuYmluZCgnYmx1cicsIGJsdXJIYW5kbGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQudW5iaW5kKCdtb3VzZWRvd24nLCBtb3VzZURvd25VcEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpRWxlbWVudC51bmJpbmQoJ21vdXNldXAnLCBtb3VzZURvd25VcEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpRWxlbWVudC51bmJpbmQoJ2lucHV0JywgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQudW5iaW5kKCdrZXl1cCcsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgIGlFbGVtZW50LnVuYmluZCgnY2xpY2snLCBldmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICBpRWxlbWVudC51bmJpbmQoJ2ZvY3VzJywgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgZXZlbnRzQm91bmQgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVZhbHVlKHZhbHVlKXtcclxuICAgICAgICAgICAgLy8gWmVyby1sZW5ndGggdmFsdWUgdmFsaWRpdHkgaXMgbmdSZXF1aXJlZCdzIGRldGVybWluYXRpb25cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA/IHZhbHVlLmxlbmd0aCA+PSBtaW5SZXF1aXJlZExlbmd0aCA6IHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gdW5tYXNrVmFsdWUodmFsdWUpe1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVVbm1hc2tlZCA9ICcnLFxyXG4gICAgICAgICAgICAgIG1hc2tQYXR0ZXJuc0NvcHkgPSBtYXNrUGF0dGVybnMuc2xpY2UoKTtcclxuICAgICAgICAgICAgLy8gUHJlcHJvY2VzcyBieSBzdHJpcHBpbmcgbWFzayBjb21wb25lbnRzIGZyb20gdmFsdWVcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobWFza0NvbXBvbmVudHMsIGZ1bmN0aW9uIChjb21wb25lbnQpe1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShjb21wb25lbnQsICcnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2YWx1ZS5zcGxpdCgnJyksIGZ1bmN0aW9uIChjaHIpe1xyXG4gICAgICAgICAgICAgIGlmIChtYXNrUGF0dGVybnNDb3B5Lmxlbmd0aCAmJiBtYXNrUGF0dGVybnNDb3B5WzBdLnRlc3QoY2hyKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVVbm1hc2tlZCArPSBjaHI7XHJcbiAgICAgICAgICAgICAgICBtYXNrUGF0dGVybnNDb3B5LnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlVW5tYXNrZWQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gbWFza1ZhbHVlKHVubWFza2VkVmFsdWUpe1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVNYXNrZWQgPSAnJyxcclxuICAgICAgICAgICAgICAgIG1hc2tDYXJldE1hcENvcHkgPSBtYXNrQ2FyZXRNYXAuc2xpY2UoKTtcclxuXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtYXNrUGxhY2Vob2xkZXIuc3BsaXQoJycpLCBmdW5jdGlvbiAoY2hyLCBpKXtcclxuICAgICAgICAgICAgICBpZiAodW5tYXNrZWRWYWx1ZS5sZW5ndGggJiYgaSA9PT0gbWFza0NhcmV0TWFwQ29weVswXSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVNYXNrZWQgICs9IHVubWFza2VkVmFsdWUuY2hhckF0KDApIHx8ICdfJztcclxuICAgICAgICAgICAgICAgIHVubWFza2VkVmFsdWUgPSB1bm1hc2tlZFZhbHVlLnN1YnN0cigxKTtcclxuICAgICAgICAgICAgICAgIG1hc2tDYXJldE1hcENvcHkuc2hpZnQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZU1hc2tlZCArPSBjaHI7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlTWFza2VkO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGdldFBsYWNlaG9sZGVyQ2hhcihpKSB7XHJcbiAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGlBdHRycy5wbGFjZWhvbGRlcjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGxhY2Vob2xkZXIgIT09ICd1bmRlZmluZWQnICYmIHBsYWNlaG9sZGVyW2ldKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyW2ldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJldHVybiAnXyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBHZW5lcmF0ZSBhcnJheSBvZiBtYXNrIGNvbXBvbmVudHMgdGhhdCB3aWxsIGJlIHN0cmlwcGVkIGZyb20gYSBtYXNrZWQgdmFsdWVcclxuICAgICAgICAgIC8vIGJlZm9yZSBwcm9jZXNzaW5nIHRvIHByZXZlbnQgbWFzayBjb21wb25lbnRzIGZyb20gYmVpbmcgYWRkZWQgdG8gdGhlIHVubWFza2VkIHZhbHVlLlxyXG4gICAgICAgICAgLy8gRS5nLiwgYSBtYXNrIHBhdHRlcm4gb2YgJys3IDk5OTknIHdvbid0IGhhdmUgdGhlIDcgYmxlZWQgaW50byB0aGUgdW5tYXNrZWQgdmFsdWUuXHJcbiAgICAgICAgICAvLyBJZiBhIG1hc2thYmxlIGNoYXIgaXMgZm9sbG93ZWQgYnkgYSBtYXNrIGNoYXIgYW5kIGhhcyBhIG1hc2tcclxuICAgICAgICAgIC8vIGNoYXIgYmVoaW5kIGl0LCB3ZSdsbCBzcGxpdCBpdCBpbnRvIGl0J3Mgb3duIGNvbXBvbmVudCBzbyBpZlxyXG4gICAgICAgICAgLy8gYSB1c2VyIGlzIGFnZ3Jlc3NpdmVseSBkZWxldGluZyBpbiB0aGUgaW5wdXQgYW5kIGEgY2hhciBhaGVhZFxyXG4gICAgICAgICAgLy8gb2YgdGhlIG1hc2thYmxlIGNoYXIgZ2V0cyBkZWxldGVkLCB3ZSdsbCBzdGlsbCBiZSBhYmxlIHRvIHN0cmlwXHJcbiAgICAgICAgICAvLyBpdCBpbiB0aGUgdW5tYXNrVmFsdWUoKSBwcmVwcm9jZXNzaW5nLlxyXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0TWFza0NvbXBvbmVudHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXNrUGxhY2Vob2xkZXIucmVwbGFjZSgvW19dKy9nLCAnXycpLnJlcGxhY2UoLyhbXl9dKykoW2EtekEtWjAtOV0pKFteX10pL2csICckMSQyXyQzJykuc3BsaXQoJ18nKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBwcm9jZXNzUmF3TWFzayhtYXNrKXtcclxuICAgICAgICAgICAgdmFyIGNoYXJhY3RlckNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIG1hc2tDYXJldE1hcCAgICA9IFtdO1xyXG4gICAgICAgICAgICBtYXNrUGF0dGVybnMgICAgPSBbXTtcclxuICAgICAgICAgICAgbWFza1BsYWNlaG9sZGVyID0gJyc7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1hc2sgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgbWluUmVxdWlyZWRMZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgaXNPcHRpb25hbCA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICBzcGxpdE1hc2sgID0gbWFzay5zcGxpdCgnJyk7XHJcblxyXG4gICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzcGxpdE1hc2ssIGZ1bmN0aW9uIChjaHIsIGkpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmtPcHRpb25zLm1hc2tEZWZpbml0aW9uc1tjaHJdKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICBtYXNrQ2FyZXRNYXAucHVzaChjaGFyYWN0ZXJDb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBtYXNrUGxhY2Vob2xkZXIgKz0gZ2V0UGxhY2Vob2xkZXJDaGFyKGkpO1xyXG4gICAgICAgICAgICAgICAgICBtYXNrUGF0dGVybnMucHVzaChsaW5rT3B0aW9ucy5tYXNrRGVmaW5pdGlvbnNbY2hyXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoIWlzT3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5SZXF1aXJlZExlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaHIgPT09ICc/Jykge1xyXG4gICAgICAgICAgICAgICAgICBpc09wdGlvbmFsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBtYXNrUGxhY2Vob2xkZXIgKz0gY2hyO1xyXG4gICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENhcmV0IHBvc2l0aW9uIGltbWVkaWF0ZWx5IGZvbGxvd2luZyBsYXN0IHBvc2l0aW9uIGlzIHZhbGlkLlxyXG4gICAgICAgICAgICBtYXNrQ2FyZXRNYXAucHVzaChtYXNrQ2FyZXRNYXAuc2xpY2UoKS5wb3AoKSArIDEpO1xyXG5cclxuICAgICAgICAgICAgbWFza0NvbXBvbmVudHMgPSBnZXRNYXNrQ29tcG9uZW50cygpO1xyXG4gICAgICAgICAgICBtYXNrUHJvY2Vzc2VkICA9IG1hc2tDYXJldE1hcC5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGJsdXJIYW5kbGVyKCl7XHJcbiAgICAgICAgICAgIGlmIChsaW5rT3B0aW9ucy5jbGVhck9uQmx1cikge1xyXG4gICAgICAgICAgICAgIG9sZENhcmV0UG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgIG9sZFNlbGVjdGlvbkxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVNYXNrZWQgPSAnJztcclxuICAgICAgICAgICAgICAgIGlFbGVtZW50LnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoJycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gbW91c2VEb3duVXBIYW5kbGVyKGUpe1xyXG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJykge1xyXG4gICAgICAgICAgICAgIGlFbGVtZW50LmJpbmQoJ21vdXNlb3V0JywgbW91c2VvdXRIYW5kbGVyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpRWxlbWVudC51bmJpbmQoJ21vdXNlb3V0JywgbW91c2VvdXRIYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlFbGVtZW50LmJpbmQoJ21vdXNlZG93biBtb3VzZXVwJywgbW91c2VEb3duVXBIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBtb3VzZW91dEhhbmRsZXIoKXtcclxuICAgICAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgICAgIG9sZFNlbGVjdGlvbkxlbmd0aCA9IGdldFNlbGVjdGlvbkxlbmd0aCh0aGlzKTtcclxuICAgICAgICAgICAgaUVsZW1lbnQudW5iaW5kKCdtb3VzZW91dCcsIG1vdXNlb3V0SGFuZGxlcik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gZXZlbnRIYW5kbGVyKGUpe1xyXG4gICAgICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICAgICAgZSA9IGUgfHwge307XHJcbiAgICAgICAgICAgIC8vIEFsbG93cyBtb3JlIGVmZmljaWVudCBtaW5pZmljYXRpb25cclxuICAgICAgICAgICAgdmFyIGV2ZW50V2hpY2ggPSBlLndoaWNoLFxyXG4gICAgICAgICAgICAgIGV2ZW50VHlwZSA9IGUudHlwZTtcclxuXHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgc2hpZnQgYW5kIGN0cmwgZnJvbSBtdWNraW5nIHdpdGggb2xkIHZhbHVlc1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRXaGljaCA9PT0gMTYgfHwgZXZlbnRXaGljaCA9PT0gOTEpIHsgcmV0dXJuO31cclxuXHJcbiAgICAgICAgICAgIHZhciB2YWwgPSBpRWxlbWVudC52YWwoKSxcclxuICAgICAgICAgICAgICB2YWxPbGQgPSBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICB2YWxNYXNrZWQsXHJcbiAgICAgICAgICAgICAgdmFsVW5tYXNrZWQgPSB1bm1hc2tWYWx1ZSh2YWwpLFxyXG4gICAgICAgICAgICAgIHZhbFVubWFza2VkT2xkID0gb2xkVmFsdWVVbm1hc2tlZCxcclxuICAgICAgICAgICAgICB2YWxBbHRlcmVkID0gZmFsc2UsXHJcblxyXG4gICAgICAgICAgICAgIGNhcmV0UG9zID0gZ2V0Q2FyZXRQb3NpdGlvbih0aGlzKSB8fCAwLFxyXG4gICAgICAgICAgICAgIGNhcmV0UG9zT2xkID0gb2xkQ2FyZXRQb3NpdGlvbiB8fCAwLFxyXG4gICAgICAgICAgICAgIGNhcmV0UG9zRGVsdGEgPSBjYXJldFBvcyAtIGNhcmV0UG9zT2xkLFxyXG4gICAgICAgICAgICAgIGNhcmV0UG9zTWluID0gbWFza0NhcmV0TWFwWzBdLFxyXG4gICAgICAgICAgICAgIGNhcmV0UG9zTWF4ID0gbWFza0NhcmV0TWFwW3ZhbFVubWFza2VkLmxlbmd0aF0gfHwgbWFza0NhcmV0TWFwLnNsaWNlKCkuc2hpZnQoKSxcclxuXHJcbiAgICAgICAgICAgICAgc2VsZWN0aW9uTGVuT2xkID0gb2xkU2VsZWN0aW9uTGVuZ3RoIHx8IDAsXHJcbiAgICAgICAgICAgICAgaXNTZWxlY3RlZCA9IGdldFNlbGVjdGlvbkxlbmd0aCh0aGlzKSA+IDAsXHJcbiAgICAgICAgICAgICAgd2FzU2VsZWN0ZWQgPSBzZWxlY3Rpb25MZW5PbGQgPiAwLFxyXG5cclxuICAgICAgICAgICAgLy8gQ2FzZTogVHlwaW5nIGEgY2hhcmFjdGVyIHRvIG92ZXJ3cml0ZSBhIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgIGlzQWRkaXRpb24gPSAodmFsLmxlbmd0aCA+IHZhbE9sZC5sZW5ndGgpIHx8IChzZWxlY3Rpb25MZW5PbGQgJiYgdmFsLmxlbmd0aCA+IHZhbE9sZC5sZW5ndGggLSBzZWxlY3Rpb25MZW5PbGQpLFxyXG4gICAgICAgICAgICAvLyBDYXNlOiBEZWxldGUgYW5kIGJhY2tzcGFjZSBiZWhhdmUgaWRlbnRpY2FsbHkgb24gYSBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICBpc0RlbGV0aW9uID0gKHZhbC5sZW5ndGggPCB2YWxPbGQubGVuZ3RoKSB8fCAoc2VsZWN0aW9uTGVuT2xkICYmIHZhbC5sZW5ndGggPT09IHZhbE9sZC5sZW5ndGggLSBzZWxlY3Rpb25MZW5PbGQpLFxyXG4gICAgICAgICAgICAgIGlzU2VsZWN0aW9uID0gKGV2ZW50V2hpY2ggPj0gMzcgJiYgZXZlbnRXaGljaCA8PSA0MCkgJiYgZS5zaGlmdEtleSwgLy8gQXJyb3cga2V5IGNvZGVzXHJcblxyXG4gICAgICAgICAgICAgIGlzS2V5TGVmdEFycm93ID0gZXZlbnRXaGljaCA9PT0gMzcsXHJcbiAgICAgICAgICAgIC8vIE5lY2Vzc2FyeSBkdWUgdG8gXCJpbnB1dFwiIGV2ZW50IG5vdCBwcm92aWRpbmcgYSBrZXkgY29kZVxyXG4gICAgICAgICAgICAgIGlzS2V5QmFja3NwYWNlID0gZXZlbnRXaGljaCA9PT0gOCB8fCAoZXZlbnRUeXBlICE9PSAna2V5dXAnICYmIGlzRGVsZXRpb24gJiYgKGNhcmV0UG9zRGVsdGEgPT09IC0xKSksXHJcbiAgICAgICAgICAgICAgaXNLZXlEZWxldGUgPSBldmVudFdoaWNoID09PSA0NiB8fCAoZXZlbnRUeXBlICE9PSAna2V5dXAnICYmIGlzRGVsZXRpb24gJiYgKGNhcmV0UG9zRGVsdGEgPT09IDAgKSAmJiAhd2FzU2VsZWN0ZWQpLFxyXG5cclxuICAgICAgICAgICAgLy8gSGFuZGxlcyBjYXNlcyB3aGVyZSBjYXJldCBpcyBtb3ZlZCBhbmQgcGxhY2VkIGluIGZyb250IG9mIGludmFsaWQgbWFza0NhcmV0TWFwIHBvc2l0aW9uLiBMb2dpYyBiZWxvd1xyXG4gICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQsIG9uIGNsaWNrIG9yIGxlZnR3YXJkIGNhcmV0IHBsYWNlbWVudCwgY2FyZXQgaXMgbW92ZWQgbGVmdHdhcmQgdW50aWwgZGlyZWN0bHkgcmlnaHQgb2ZcclxuICAgICAgICAgICAgLy8gbm9uLW1hc2sgY2hhcmFjdGVyLiBBbHNvIGFwcGxpZWQgdG8gY2xpY2sgc2luY2UgdXNlcnMgYXJlIChhcmd1YWJseSkgbW9yZSBsaWtlbHkgdG8gYmFja3NwYWNlXHJcbiAgICAgICAgICAgIC8vIGEgY2hhcmFjdGVyIHdoZW4gY2xpY2tpbmcgd2l0aGluIGEgZmlsbGVkIGlucHV0LlxyXG4gICAgICAgICAgICAgIGNhcmV0QnVtcEJhY2sgPSAoaXNLZXlMZWZ0QXJyb3cgfHwgaXNLZXlCYWNrc3BhY2UgfHwgZXZlbnRUeXBlID09PSAnY2xpY2snKSAmJiBjYXJldFBvcyA+IGNhcmV0UG9zTWluO1xyXG5cclxuICAgICAgICAgICAgb2xkU2VsZWN0aW9uTGVuZ3RoID0gZ2V0U2VsZWN0aW9uTGVuZ3RoKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlc2UgZXZlbnRzIGRvbid0IHJlcXVpcmUgYW55IGFjdGlvblxyXG4gICAgICAgICAgICBpZiAoaXNTZWxlY3Rpb24gfHwgKGlzU2VsZWN0ZWQgJiYgKGV2ZW50VHlwZSA9PT0gJ2NsaWNrJyB8fCBldmVudFR5cGUgPT09ICdrZXl1cCcpKSkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVmFsdWUgSGFuZGxpbmdcclxuICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT1cclxuXHJcbiAgICAgICAgICAgIC8vIFVzZXIgYXR0ZW1wdGVkIHRvIGRlbGV0ZSBidXQgcmF3IHZhbHVlIHdhcyB1bmFmZmVjdGVkLS1jb3JyZWN0IHRoaXMgZ3JpZXZvdXMgb2ZmZW5zZVxyXG4gICAgICAgICAgICBpZiAoKGV2ZW50VHlwZSA9PT0gJ2lucHV0JykgJiYgaXNEZWxldGlvbiAmJiAhd2FzU2VsZWN0ZWQgJiYgdmFsVW5tYXNrZWQgPT09IHZhbFVubWFza2VkT2xkKSB7XHJcbiAgICAgICAgICAgICAgd2hpbGUgKGlzS2V5QmFja3NwYWNlICYmIGNhcmV0UG9zID4gY2FyZXRQb3NNaW4gJiYgIWlzVmFsaWRDYXJldFBvc2l0aW9uKGNhcmV0UG9zKSkge1xyXG4gICAgICAgICAgICAgICAgY2FyZXRQb3MtLTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgd2hpbGUgKGlzS2V5RGVsZXRlICYmIGNhcmV0UG9zIDwgY2FyZXRQb3NNYXggJiYgbWFza0NhcmV0TWFwLmluZGV4T2YoY2FyZXRQb3MpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY2FyZXRQb3MrKztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdmFyIGNoYXJJbmRleCA9IG1hc2tDYXJldE1hcC5pbmRleE9mKGNhcmV0UG9zKTtcclxuICAgICAgICAgICAgICAvLyBTdHJpcCBvdXQgbm9uLW1hc2sgY2hhcmFjdGVyIHRoYXQgdXNlciB3b3VsZCBoYXZlIGRlbGV0ZWQgaWYgbWFzayBoYWRuJ3QgYmVlbiBpbiB0aGUgd2F5LlxyXG4gICAgICAgICAgICAgIHZhbFVubWFza2VkID0gdmFsVW5tYXNrZWQuc3Vic3RyaW5nKDAsIGNoYXJJbmRleCkgKyB2YWxVbm1hc2tlZC5zdWJzdHJpbmcoY2hhckluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgdmFsQWx0ZXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB2YWx1ZXNcclxuICAgICAgICAgICAgdmFsTWFza2VkID0gbWFza1ZhbHVlKHZhbFVubWFza2VkKTtcclxuXHJcbiAgICAgICAgICAgIG9sZFZhbHVlID0gdmFsTWFza2VkO1xyXG4gICAgICAgICAgICBvbGRWYWx1ZVVubWFza2VkID0gdmFsVW5tYXNrZWQ7XHJcbiAgICAgICAgICAgIGlFbGVtZW50LnZhbCh2YWxNYXNrZWQpO1xyXG4gICAgICAgICAgICBpZiAodmFsQWx0ZXJlZCkge1xyXG4gICAgICAgICAgICAgIC8vIFdlJ3ZlIGFsdGVyZWQgdGhlIHJhdyB2YWx1ZSBhZnRlciBpdCdzIGJlZW4gJGRpZ2VzdCdlZCwgd2UgbmVlZCB0byAkYXBwbHkgdGhlIG5ldyB2YWx1ZS5cclxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLiRzZXRWaWV3VmFsdWUodmFsVW5tYXNrZWQpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDYXJldCBSZXBvc2l0aW9uaW5nXHJcbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGF0IHR5cGluZyBhbHdheXMgcGxhY2VzIGNhcmV0IGFoZWFkIG9mIHR5cGVkIGNoYXJhY3RlciBpbiBjYXNlcyB3aGVyZSB0aGUgZmlyc3QgY2hhciBvZlxyXG4gICAgICAgICAgICAvLyB0aGUgaW5wdXQgaXMgYSBtYXNrIGNoYXIgYW5kIHRoZSBjYXJldCBpcyBwbGFjZWQgYXQgdGhlIDAgcG9zaXRpb24uXHJcbiAgICAgICAgICAgIGlmIChpc0FkZGl0aW9uICYmIChjYXJldFBvcyA8PSBjYXJldFBvc01pbikpIHtcclxuICAgICAgICAgICAgICBjYXJldFBvcyA9IGNhcmV0UG9zTWluICsgMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNhcmV0QnVtcEJhY2spIHtcclxuICAgICAgICAgICAgICBjYXJldFBvcy0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgY2FyZXQgaXMgd2l0aGluIG1pbiBhbmQgbWF4IHBvc2l0aW9uIGxpbWl0c1xyXG4gICAgICAgICAgICBjYXJldFBvcyA9IGNhcmV0UG9zID4gY2FyZXRQb3NNYXggPyBjYXJldFBvc01heCA6IGNhcmV0UG9zIDwgY2FyZXRQb3NNaW4gPyBjYXJldFBvc01pbiA6IGNhcmV0UG9zO1xyXG5cclxuICAgICAgICAgICAgLy8gU2Nvb3QgdGhlIGNhcmV0IGJhY2sgb3IgZm9ydGggdW50aWwgaXQncyBpbiBhIG5vbi1tYXNrIHBvc2l0aW9uIGFuZCB3aXRoaW4gbWluL21heCBwb3NpdGlvbiBsaW1pdHNcclxuICAgICAgICAgICAgd2hpbGUgKCFpc1ZhbGlkQ2FyZXRQb3NpdGlvbihjYXJldFBvcykgJiYgY2FyZXRQb3MgPiBjYXJldFBvc01pbiAmJiBjYXJldFBvcyA8IGNhcmV0UG9zTWF4KSB7XHJcbiAgICAgICAgICAgICAgY2FyZXRQb3MgKz0gY2FyZXRCdW1wQmFjayA/IC0xIDogMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKChjYXJldEJ1bXBCYWNrICYmIGNhcmV0UG9zIDwgY2FyZXRQb3NNYXgpIHx8IChpc0FkZGl0aW9uICYmICFpc1ZhbGlkQ2FyZXRQb3NpdGlvbihjYXJldFBvc09sZCkpKSB7XHJcbiAgICAgICAgICAgICAgY2FyZXRQb3MrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvbGRDYXJldFBvc2l0aW9uID0gY2FyZXRQb3M7XHJcbiAgICAgICAgICAgIHNldENhcmV0UG9zaXRpb24odGhpcywgY2FyZXRQb3MpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZ1bmN0aW9uIGlzVmFsaWRDYXJldFBvc2l0aW9uKHBvcyl7IHJldHVybiBtYXNrQ2FyZXRNYXAuaW5kZXhPZihwb3MpID4gLTE7IH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBnZXRDYXJldFBvc2l0aW9uKGlucHV0KXtcclxuICAgICAgICAgICAgaWYgKCFpbnB1dCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5zZWxlY3Rpb25TdGFydCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnNlbGVjdGlvblN0YXJ0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgIC8vIEN1cnNlIHlvdSBJRVxyXG4gICAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xyXG4gICAgICAgICAgICAgIHNlbGVjdGlvbi5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIGlucHV0LnZhbHVlID8gLWlucHV0LnZhbHVlLmxlbmd0aCA6IDApO1xyXG4gICAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb24udGV4dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnVuY3Rpb24gc2V0Q2FyZXRQb3NpdGlvbihpbnB1dCwgcG9zKXtcclxuICAgICAgICAgICAgaWYgKCFpbnB1dCkgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC5vZmZzZXRXaWR0aCA9PT0gMCB8fCBpbnB1dC5vZmZzZXRIZWlnaHQgPT09IDApIHtcclxuICAgICAgICAgICAgICByZXR1cm47IC8vIElucHV0J3MgaGlkZGVuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0LnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZShwb3MsIHBvcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaW5wdXQuY3JlYXRlVGV4dFJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgLy8gQ3Vyc2UgeW91IElFXHJcbiAgICAgICAgICAgICAgdmFyIHJhbmdlID0gaW5wdXQuY3JlYXRlVGV4dFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgcG9zKTtcclxuICAgICAgICAgICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHBvcyk7XHJcbiAgICAgICAgICAgICAgcmFuZ2Uuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmdW5jdGlvbiBnZXRTZWxlY3Rpb25MZW5ndGgoaW5wdXQpe1xyXG4gICAgICAgICAgICBpZiAoIWlucHV0KSByZXR1cm4gMDtcclxuICAgICAgICAgICAgaWYgKGlucHV0LnNlbGVjdGlvblN0YXJ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gKGlucHV0LnNlbGVjdGlvbkVuZCAtIGlucHV0LnNlbGVjdGlvblN0YXJ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIChkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS50ZXh0Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pbmRleE9mXHJcbiAgICAgICAgICBpZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7XHJcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCAqLyl7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdmFyIHQgPSBPYmplY3QodGhpcyk7XHJcbiAgICAgICAgICAgICAgdmFyIGxlbiA9IHQubGVuZ3RoID4+PiAwO1xyXG4gICAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgbiA9IE51bWJlcihhcmd1bWVudHNbMV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gIT09IG4pIHsgLy8gc2hvcnRjdXQgZm9yIHZlcmlmeWluZyBpZiBpdCdzIE5hTlxyXG4gICAgICAgICAgICAgICAgICBuID0gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobiAhPT0gMCAmJiBuICE9PSBJbmZpbml0eSAmJiBuICE9PSAtSW5maW5pdHkpIHtcclxuICAgICAgICAgICAgICAgICAgbiA9IChuID4gMCB8fCAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKG4pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKG4gPj0gbGVuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHZhciBrID0gbiA+PSAwID8gbiA6IE1hdGgubWF4KGxlbiAtIE1hdGguYWJzKG4pLCAwKTtcclxuICAgICAgICAgICAgICBmb3IgKDsgayA8IGxlbjsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoayBpbiB0ICYmIHRba10gPT09IHNlYXJjaEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbl0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcsIFsnbmdDb29raWVzJywgJ3VpLnNvcnRhYmxlJywndWkubWFzayddKTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmZpbHRlcigndGVsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0ZWwpIHtcclxuICAgICAgICBpZiAoIXRlbCkgeyByZXR1cm4gJyc7IH1cclxuXHJcbiAgICAgICAgdmFyIHZhbHVlID0gdGVsLnRvU3RyaW5nKCkudHJpbSgpLnJlcGxhY2UoL15cXCsvLCAnJyk7XHJcblxyXG4gICAgICAgIHZhciBjb3VudHJ5ID0gdmFsdWUuc2xpY2UoMCwgMSk7XHJcbiAgICAgICAgdmFyIGNvZGUgPSB2YWx1ZS5zbGljZSgxLCA0KTtcclxuICAgICAgICB2YXIgbnVtYmVyID0gdmFsdWUuc2xpY2UoNCk7XHJcblxyXG4gICAgICAgIG51bWJlciA9IG51bWJlci5zbGljZSgwLCAzKSArICcgJyArIG51bWJlci5zbGljZSgzLCA1KSArICcgJyArIG51bWJlci5zbGljZSg1KTtcclxuXHJcbiAgICAgICAgcmV0dXJuICgnKycgKyBjb3VudHJ5ICsgXCIgKFwiICsgY29kZSArIFwiKSBcIiArIG51bWJlcikudHJpbSgpO1xyXG4gICAgfTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLnNlcnZpY2UoJ2NvbnRlbnRTZXJ2aWNlJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgLy/QntGC0L7QsdGA0LDQttC10L3QuNC1INC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwXHJcbiAgICB0aGlzLmRlc2t0b3BNb2RhbCA9IGZ1bmN0aW9uKGFjdGlvbiwgc3BlZWQpe1xyXG4gICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChzcGVlZCkpIHNwZWVkID0gNTAwO1xyXG5cclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZy1saXN0JykuZmFkZU91dCgpO1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuXHJcbiAgICAgIGlmIChhY3Rpb24gPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgJCgnLnNob3ctYmxvY2suYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZhZGVPdXQoc3BlZWQpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgbW9kYWwgPSBhbmd1bGFyLmVsZW1lbnQoJyMnICsgYWN0aW9uKTtcclxuXHJcbiAgICAgIGlmKCQoJy5zaG93LWJsb2NrJykuaGFzQ2xhc3MoJ2FjdGl2ZScpICAmJiAoJCgnLnNob3ctYmxvY2suYWN0aXZlJykuYXR0cignaWQnKSAhPSBhY3Rpb24pKXtcclxuICAgICAgICAkKCcuc2hvdy1ibG9jay5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmFkZU91dChzcGVlZCwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgIG1vZGFsLmZhZGVJbihzcGVlZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgIHtcclxuICAgICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm1vYmlsZU1vZGFsID0gZnVuY3Rpb24oY29udGVudCwgdHlwZSl7XHJcbiAgICAgIHZhciByZXN1bHRNb2RhbCA9IGFuZ3VsYXIuZWxlbWVudCgnLm0tcmVzdWx0Jyk7XHJcbiAgICAgIHZhciByZXN1bHRDb250ZW50ID0gcmVzdWx0TW9kYWwuZmluZCgncCcpO1xyXG5cclxuICAgICAgcmVzdWx0TW9kYWwucmVtb3ZlQ2xhc3MoJ20tbmVnYXRpdmUnKTtcclxuICAgICAgaWYgKHR5cGUgPT0gJ2Vycm9yJykge1xyXG4gICAgICAgICAgcmVzdWx0TW9kYWwuYWRkQ2xhc3MoJ20tbmVnYXRpdmUnKTtcclxuICAgICAgfVxyXG4gICAgICByZXN1bHRNb2RhbC5oaWRlKCk7XHJcbiAgICAgIHJlc3VsdE1vZGFsLnNob3coKTtcclxuICAgICAgcmVzdWx0Q29udGVudC50ZXh0KGNvbnRlbnQpO1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmVzdWx0TW9kYWwuaGlkZSgpO1xyXG4gICAgICB9LCA1MDAwKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMubWVzc2FnZU1vZGFsID0gZnVuY3Rpb24obWVzc2FnZSwgaG9zdF90eXBlKXtcclxuICAgICAgc3BlZWQgPSA1MDA7XHJcbiAgICAgIGlmIChob3N0X3R5cGUgPT09ICdtb2JpbGUnKSB7XHJcbiAgICAgICAgICB0aGlzLm1vYmlsZU1vZGFsKG1lc3NhZ2UsICdub25lJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZy1saXN0JykuZmFkZU91dCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmcnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICBcclxuICAgICAgICB2YXIgbW9kYWwgPSBhbmd1bGFyLmVsZW1lbnQoJyNtZXNzYWdlJyk7XHJcbiAgICAgICAgbW9kYWwucmVtb3ZlQ2xhc3MoJ25lZ2F0aXZlJyk7XHJcbiAgICAgICAgbW9kYWwucmVtb3ZlQ2xhc3MoJ2FsZXJ0Jyk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBhbmd1bGFyLmVsZW1lbnQoJyNtZXNzYWdlIHAnKTtcclxuICAgICAgXHJcbiAgICAgICAgaWYoJCgnLnNob3ctYmxvY2snKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgJCgnLnNob3ctYmxvY2suYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZhZGVPdXQoc3BlZWQsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaHRtbChtZXNzYWdlKTtcclxuICAgICAgICAgICAgbW9kYWwuZmFkZUluKHNwZWVkKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgIHtcclxuICAgICAgICAgIGNvbnRlbnQuaHRtbChtZXNzYWdlKTtcclxuICAgICAgICAgIG1vZGFsLmZhZGVJbihzcGVlZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0gICAgXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy/QkNCy0YLQvtGB0LrRgNC+0LvQuNC90LMg0LTQviDQvdGD0LbQvdC+0LPQviDQsdC70L7QutCwXHJcbiAgICB0aGlzLnNjcm9sbFBhZ2UgPSBmdW5jdGlvbihpZCwgc3BlZWQpe1xyXG4gICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChzcGVlZCkpIHNwZWVkID0gNjAwO1xyXG4gICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoaWQpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICB9LCBzcGVlZCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB2YXIgY3VycmVudF9zcG90ID0ge307XHJcbiAgICBcclxuICAgIHRoaXMuc2V0U3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgICAgICBjdXJyZW50X3Nwb3QgPSBzcG90O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLmdldFNwb3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gY3VycmVudF9zcG90O1xyXG4gICAgfVxyXG4gICAgXHJcbn0pO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90Jykuc2VydmljZSgnZGlhbG9nU2VydmljZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbiAgICB2YXIgeWVzTm9EaWFsb2cgPSBmdW5jdGlvbihjYWxsYmFjaywgdGV4dFllcywgdGV4dE5vLCBtZXNzYWdlLCBkaWFsb2dfY2xhc3MpIHtcclxuICAgICAgc3BlZWQgPSA1MDA7XHJcblxyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nLWxpc3QnKS5mYWRlT3V0KCk7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmcnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgXHJcbiAgICAgIHZhciBtb2RhbCA9IGFuZ3VsYXIuZWxlbWVudCgnI2ItZGlhbG9nJyk7XHJcbiAgICAgIHZhciBjb250ZW50ID0gYW5ndWxhci5lbGVtZW50KCcjYi1kaWFsb2cgcCcpO1xyXG4gICAgICB2YXIgYnRuWWVzID0gYW5ndWxhci5lbGVtZW50KCcjYi1kaWFsb2cgLnllcy1idXR0b24nKTtcclxuICAgICAgdmFyIGJ0bk5vID0gYW5ndWxhci5lbGVtZW50KCcjYi1kaWFsb2cgLm5vLWJ1dHRvbicpO1xyXG4gICAgICBcclxuICAgICAgaWYoJCgnLnNob3ctYmxvY2snKS5oYXNDbGFzcygnYWN0aXZlJykpXHJcbiAgICAgICAgJCgnLnNob3ctYmxvY2suYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZhZGVPdXQoMCk7XHJcbiAgICAgIFxyXG4gICAgICBjb250ZW50Lmh0bWwobWVzc2FnZSk7XHJcbiAgICAgIGJ0blllcy50ZXh0KHRleHRZZXMpO1xyXG4gICAgICBidG5Oby50ZXh0KHRleHRObyk7XHJcbiAgICAgIG1vZGFsLnJlbW92ZUNsYXNzKCdhbGVydCcpO1xyXG4gICAgICBtb2RhbC5yZW1vdmVDbGFzcygnbmVnYXRpdmUnKTtcclxuICAgICAgaWYgKHR5cGVvZiBkaWFsb2dfY2xhc3MgIT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgIG1vZGFsLmFkZENsYXNzKGRpYWxvZ19jbGFzcyk7XHJcbiAgICAgIG1vZGFsLmZhZGVJbihzcGVlZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICBcclxuICAgICAgYnRuWWVzLmJpbmQoXCJjbGlja1wiLCBjYlllcyk7ICAgXHJcbiAgICAgIGJ0bk5vLmJpbmQoXCJjbGlja1wiLCBjYk5vKTtcclxuICAgICAgJChkb2N1bWVudCkuYmluZChcImNsaWNrXCIsIGNiTm8pO1xyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gY2JZZXMoKSB7XHJcbiAgICAgICAgY2FsbGJhY2soJ3llcycpO1xyXG4gICAgICAgIGNsb3NlRGlhbG9nKCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGNiTm8oKSB7XHJcbiAgICAgICAgY2FsbGJhY2soJ25vJyk7XHJcbiAgICAgICAgY2xvc2VEaWFsb2coKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gY2xvc2VEaWFsb2coKSB7XHJcbiAgICAgICAgYnRuWWVzLnVuYmluZChcImNsaWNrXCIsIGNiWWVzKTsgIFxyXG4gICAgICAgIGJ0bk5vLnVuYmluZChcImNsaWNrXCIsIGNiTm8pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLnVuYmluZChcImNsaWNrXCIsIGNiTm8pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1vZGFsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KHNwZWVkKTsgICAgICBcclxuICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeWVzTm9EaWFsb2c6IHllc05vRGlhbG9nXHJcbiAgICB9O1xyXG5cclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignRGVtb2tpdENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UpIHtcclxuXHJcbiAgJHNjb3BlLmVycm9yID0ge307XHJcblxyXG4gICRzY29wZS4kd2F0Y2goJ29yZGVyLm5hbWUgKyBvcmRlci5lbWFpbCArIG9yZGVyLnBob25lICsgb3JkZXIuYWRkcmVzcyArIG9yZGVyLmNpdHkgKyBvcmRlci56aXAgKyBvcmRlci5jb3VudHJ5ICsgb3JkZXIuc2hpcHBpbmcgKyBvcmRlci5wYXltZW50JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICRzY29wZS5lcnJvci5maWVsZCA9IGZhbHNlO1xyXG4gIH0pO1xyXG5cclxuICAkc2NvcGUub3JkZXIgPSB7XHJcbiAgICBuYW1lOicnLFxyXG4gICAgZW1haWw6JycsXHJcbiAgICBwaG9uZTonJyxcclxuICAgIGFkZHJlc3M6JycsXHJcbiAgICBjaXR5OicnLFxyXG4gICAgemlwOicnLFxyXG4gICAgY291bnRyeTonJyxcclxuICAgIHNoaXBwaW5nOiAxLFxyXG4gICAgcGF5bWVudDogMVxyXG4gIH07XHJcblxyXG4gICRzY29wZS5wcm9kdWN0cyA9IHt9O1xyXG4gICRzY29wZS5tYXhfcHJvZHVjdF9pZCA9IDA7XHJcbiAgJHNjb3BlLnByaWNlcyA9IHt9O1xyXG4gICRzY29wZS5zaGlwcGluZ3MgPSB7fTtcclxuICAkc2NvcGUucGF5bWVudHMgPSB7fTtcclxuXHJcbiAgJHNjb3BlLnRvdGFsID0gMDtcclxuICAkc2NvcGUudG9NYWluID0gZmFsc2U7XHJcblxyXG4gICRzY29wZS5yZWdpc3RlclByb2R1Y3QgPSBmdW5jdGlvbihwcm9kdWN0X2lkLCBwcmljZSkge1xyXG4gICAgJHNjb3BlLnByb2R1Y3RzW3Byb2R1Y3RfaWRdID0gMDtcclxuICAgIGlmIChwcm9kdWN0X2lkID4gJHNjb3BlLm1heF9wcm9kdWN0X2lkKVxyXG4gICAgICAgICRzY29wZS5tYXhfcHJvZHVjdF9pZCA9IHByb2R1Y3RfaWQ7XHJcbiAgICAkc2NvcGUucHJpY2VzW3Byb2R1Y3RfaWRdID0gcHJpY2U7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmFkZFByb2R1Y3QgPSBmdW5jdGlvbihwcm9kdWN0X2lkKSB7XHJcbiAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW3Byb2R1Y3RfaWRdIDwgOSlcclxuICAgICAgJHNjb3BlLnByb2R1Y3RzW3Byb2R1Y3RfaWRdKys7XHJcbiAgICAkc2NvcGUuY2FsY3VsYXRlU3VtbSgpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5kZWR1Y3RQcm9kdWN0ID0gZnVuY3Rpb24ocHJvZHVjdF9pZCkge1xyXG4gICAgaWYgKCRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSA+IDApXHJcbiAgICAgICRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXS0tO1xyXG4gICAgJHNjb3BlLmNhbGN1bGF0ZVN1bW0oKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmVnaXN0ZXJTaGlwcGluZyA9IGZ1bmN0aW9uKHNoaXBwaW5nX2lkLCBwcmljZSkge1xyXG4gICAgJHNjb3BlLnNoaXBwaW5nc1tzaGlwcGluZ19pZF0gPSBwcmljZTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc2V0U2hpcHBpbmcgPSBmdW5jdGlvbihzaGlwcGluZ19pZCwgZSkge1xyXG4gICAgICAkc2NvcGUub3JkZXIuc2hpcHBpbmcgPSBzaGlwcGluZ19pZDtcclxuICAgICAgaWYgKHR5cGVvZiBlICE9ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkuY2xpY2soKTtcclxuICAgICAgJHNjb3BlLmNhbGN1bGF0ZVN1bW0oKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUucmVnaXN0ZXJQYXltZW50ID0gZnVuY3Rpb24ocGF5bWVudF9pZCwgYWN0aW9uKSB7XHJcbiAgICAgICRzY29wZS5wYXltZW50c1twYXltZW50X2lkXSA9IGFjdGlvbjtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc2V0UGF5bWVudCA9IGZ1bmN0aW9uKHBheW1lbnRfaWQsIGUpIHtcclxuICAgICAgJHNjb3BlLm9yZGVyLnBheW1lbnQgPSBwYXltZW50X2lkO1xyXG4gICAgICBpZiAodHlwZW9mIGUgIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5jbGljaygpO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5jYWxjdWxhdGVTdW1tID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuc3VtbSA9IDEyMDtcclxuXHJcbiAgICAkc2NvcGUudG90YWwgPSAkc2NvcGUuc3VtbTtcclxuICAgIGlmICgkc2NvcGUub3JkZXIuc2hpcHBpbmcgJiYgdHlwZW9mICRzY29wZS5zaGlwcGluZ3NbJHNjb3BlLm9yZGVyLnNoaXBwaW5nXSAhPSAndW5kZWZpbmVkJylcclxuICAgICRzY29wZS50b3RhbCArPSAkc2NvcGUuc2hpcHBpbmdzWyRzY29wZS5vcmRlci5zaGlwcGluZ107XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmJ1eURlbW9LaXQgPSBmdW5jdGlvbihvcmRlcikge1xyXG4gICAgaWYgKCEkc2NvcGUub3JkZXJGb3JtLiR2YWxpZCkge1xyXG4gICAgICAgICRzY29wZS5lcnJvci5maWVsZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkc2NvcGUudG9NYWluKVxyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcclxuICAgIGVsc2Uge1xyXG4gICAgICBvcmRlci5wcm9kdWN0cz0kc2NvcGUucHJvZHVjdHM7XHJcbiAgICAgICRodHRwLnBvc3QoJy9zZXJ2aWNlL2J1eURlbW9LaXQnLCBvcmRlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICBpZiAoJ2VtYWlsJyA9PSBkYXRhLmFjdGlvbikge1xyXG4gICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAkc2NvcGUudG9NYWluID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLmZpbmlzaEJ1dHRvbiA9ICRzY29wZS50b01haW5NZXNzYWdlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZGVtby1raXQtYmxvY2snKS5hZnRlcigkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNmb3JtLXltLXBheScpLnN1Ym1pdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5maWVsZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG59KTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignSGVscENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG5cclxuICAkc2NvcGUuc2VuZCA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKXtcclxuICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuICAgIHVzZXIuZW1haWwgPSB1c2VyLmhlbHBfZW1haWw7XHJcbiAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9zZW5kUXVlc3Rpb24nLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIubmFtZSA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLmhlbHBfZW1haWwgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5xdWVzdGlvbiA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLnBob25lID0gJyc7XHJcblxyXG4gICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBjb250ZW50U2VydmljZS52aWV3TW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdQaG9uZXNDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUpIHtcclxuICAgICRzY29wZS5pbml0UGhvbmVzID0gZnVuY3Rpb24oaW5pdFZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgICRzY29wZS5waG9uZXNMaXN0ID0gaW5pdFZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuaW5pdERldmljZXMgPSBmdW5jdGlvbihpbml0VmFsdWUpXHJcbiAgICB7XHJcbiAgICAgICAgJHNjb3BlLmRldmljZXNMaXN0ID0gaW5pdFZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUucGhvbmVzTGlzdCA9IFtdO1xyXG5cclxuICAgICRzY29wZS5kZXZpY2VzTGlzdCA9IFtdO1xyXG59KTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdTbGlkZUNvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQpIHtcclxuXHJcbiAgJHNjb3BlLklNQUdFX1dJRFRIID0gMzAwO1xyXG4gIC8vJHNjb3BlLkZBREVfU1BFRUQgPSA2MDA7XHJcbiAgJHNjb3BlLkZBREVfU1BFRUQgPSAwO1xyXG5cclxuICAkc2NvcGUuZ2V0UmFuZG9tSW50ID0gZnVuY3Rpb24obWluLCBtYXgpe1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNwb3RzID0ge307XHJcbiAgJHNjb3BlLnNwb3RzLm5hbWUgPSAnc3BvdHMnO1xyXG4gICRzY29wZS5zcG90cy5saXN0cG9zaXRpb24gPSB7bGVmdDpcIjBweFwifTtcclxuICAkc2NvcGUuc3BvdHMuc2xpZGVzID0gW1xyXG4gICAge2lkOjEsIGltZzonYnJhY2VfYmx1ZS5qcGcnfSxcclxuICBdO1xyXG4gIFxyXG4gICRzY29wZS5zcG90cy53cmlzdGJhbmRzID0gWzFdO1xyXG4gICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1swXTtcclxuICBcclxuICAkc2NvcGUuc3BvdHMuY2FyZHMgPSBbXTtcclxuICAkc2NvcGUuc3BvdHMuY2FyZHNfY3VycmVudCAgPSAtMTtcclxuICBcclxuICAkc2NvcGUuc3BvdHMua2V5cyA9IFtdO1xyXG4gICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQgID0gLTE7XHJcbiAgXHJcbiAgJHNjb3BlLnNwb3RzLmN1cnJlbnQgPSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50O1xyXG4gICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUgPSAnd3Jpc3RiYW5kJztcclxuICAkc2NvcGUuc3BvdHMuY29sb3Jfcm90YXRpb24gPSBmYWxzZTtcclxuICAkc2NvcGUuc3BvdHMudGltZXJfcm90YXRpb24gPSBmYWxzZTtcclxuICAvLyRzY29wZS5nZXRSYW5kb21JbnQoMCwgJHNjb3BlLndyaXN0YmFuZC5zbGlkZXMubGVuZ3RoIC0gMSk7XHJcbiAgXHJcbiAgJHNjb3BlLnNjcm9sbFRvID0gZnVuY3Rpb24oc2xpZGVyLCBpbmQpIHtcclxuICAgIHNsaWRlci5saXN0cG9zaXRpb24gPSB7bGVmdDooJHNjb3BlLklNQUdFX1dJRFRIICogaW5kICogLTEpICsgXCJweFwifTtcclxuICB9O1xyXG4gIFxyXG4gIGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLmJpbmQoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICBcclxuICAgICRzY29wZS5zbGlkZXJJbml0KCk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgJHNjb3BlLnNsaWRlckluaXQgPSBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgICAkc2NvcGUuc3BvdHMuc2xpZGVzID0gW1xyXG4gICAgICAgIHtpZDowLCBpbWc6J2JyYWNlX2JsYWNrLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxLCBpbWc6J2JyYWNlX2JsdWUucG5nJ30sXHJcbiAgICAgICAge2lkOjIsIGltZzonYnJhY2VfZ3JlZW4ucG5nJ30sXHJcbiAgICAgICAge2lkOjMsIGltZzonYnJhY2VfcGF0dDAxLnBuZyd9LFxyXG4gICAgICAgIHtpZDo0LCBpbWc6J2JyYWNlX3BhdHQwMi5wbmcnfSxcclxuICAgICAgICB7aWQ6NSwgaW1nOidicmFjZV9wYXR0MDMucG5nJ30sXHJcbiAgICAgICAge2lkOjYsIGltZzonYnJhY2VfcGF0dDA0LnBuZyd9LFxyXG4gICAgICAgIHtpZDo3LCBpbWc6J2JyYWNlX3BhdHQwNS5wbmcnfSxcclxuICAgICAgICB7aWQ6OCwgaW1nOidicmFjZV9wYXR0MDYucG5nJ30sXHJcbiAgICAgICAge2lkOjksIGltZzonYnJhY2VfcGF0dDA3LnBuZyd9LFxyXG4gICAgICAgIHtpZDoxMCwgaW1nOidicmFjZV9yZWQucG5nJ30sXHJcbiAgICAgICAge2lkOjExLCBpbWc6J2JyYWNlX3doaXRlLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxMiwgaW1nOidjYXJkX2JsYWNrLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxMywgaW1nOidjYXJkX2JsdWUucG5nJ30sXHJcbiAgICAgICAge2lkOjE0LCBpbWc6J2NhcmRfZ3JlZW4ucG5nJ30sXHJcbiAgICAgICAge2lkOjE1LCBpbWc6J2NhcmRfcmVkLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxNiwgaW1nOidjYXJkX3doaXRlLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxNywgaW1nOidjYXJkX3llbGxvdy5wbmcnfSxcclxuICAgICAgICB7aWQ6MTgsIGltZzona2V5X2JsYWNrLnBuZyd9LFxyXG4gICAgICAgIHtpZDoxOSwgaW1nOidrZXlfYmx1ZS5wbmcnfSxcclxuICAgICAgICB7aWQ6MjAsIGltZzona2V5X2dyZWVuLnBuZyd9LFxyXG4gICAgICAgIHtpZDoyMSwgaW1nOidrZXlfcmVkLnBuZyd9LFxyXG4gICAgICAgIHtpZDoyMiwgaW1nOidrZXlfd2hpdGUucG5nJ30sXHJcbiAgICAgICAge2lkOjIzLCBpbWc6J2tleV95ZWxsb3cucG5nJ30sXHJcbiAgICAgICAge2lkOjI0LCBpbWc6J2JyYWNlX3llbGxvdy5wbmcnfSxcclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgICRzY29wZS5zcG90cy53cmlzdGJhbmRzID0gWzAsIDEsIDQsIDIsIDMsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMjRdO1xyXG4gICAgICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNbJHNjb3BlLmdldFJhbmRvbUludCgwLCAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kcy5sZW5ndGggLSAxKV07XHJcbiAgICAgIFxyXG4gICAgICAkc2NvcGUuc3BvdHMuY2FyZHMgPSBbMTIsIDEzLCAxNCwgMTUsIDE2LCAxN107XHJcbiAgICAgICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50ICA9IDE1O1xyXG4gICAgICBcclxuICAgICAgJHNjb3BlLnNwb3RzLmtleXMgPSBbMTgsIDE5LCAyMCwgMjEsIDIyLCAyM107XHJcbiAgICAgICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQgID0gMjA7ICBcclxuICAgICAgXHJcbiAgICAgICRzY29wZS5zcG90cy5pbml0ZWQgPSB0cnVlO1xyXG4gIFxyXG4gIH1cclxuICBcclxuXHJcbiAgJHNjb3BlLmZhZGVUbyA9IGZ1bmN0aW9uKHNsaWRlciwgaW5kKSB7XHJcbiAgICBpZiAoc2xpZGVyLmN1cnJlbnQgPT0gaW5kKSByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgIGFuZ3VsYXIuZWxlbWVudChcIiNzbGlkZXItXCIgKyBzbGlkZXIubmFtZSArIFwiIC5mLXNsaWRlXCIpLnN0b3AoKTtcclxuICAgIHZhciBpZCA9IFwiI1wiICsgc2xpZGVyLm5hbWUgKyBcIl9cIiArIGluZDtcclxuICAgIGlmICghYW5ndWxhci5lbGVtZW50KGlkKS5sZW5ndGgpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgc2xpZGVyLmN1cnJlbnQgPSBpbmQ7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoXCIjc2xpZGVyLVwiICsgc2xpZGVyLm5hbWUgKyBcIiAuZi1zbGlkZVtpZCE9XCIgK2lkICtcIl1cIikuZmFkZU91dCgwKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudChpZCkuZmFkZUluKCRzY29wZS5GQURFX1NQRUVEKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuZmFkZVRvV2lzdGJyYW5kcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCRzY29wZS5mYWRlVG8oJHNjb3BlLnNwb3RzLCAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50KSlcclxuICAgICAgJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSA9ICd3cmlzdGJhbmQnO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmZhZGVUb0NhcmRzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJHNjb3BlLmZhZGVUbygkc2NvcGUuc3BvdHMsICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50KSlcclxuICAgICAgJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSA9ICdjYXJkJztcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5mYWRlVG9LZXlzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJHNjb3BlLmZhZGVUbygkc2NvcGUuc3BvdHMsICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQpKVxyXG4gICAgICAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlID0gJ2tleSc7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuc3RhcnRDb2xvcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkc2NvcGUuc3BvdHMuY29sb3Jfcm90YXRpb24pXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgJHNjb3BlLnNwb3RzLmNvbG9yX3JvdGF0aW9uID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgIGlmICgkc2NvcGUuc3BvdHMudGltZXJfcm90YXRpb24pXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICAkc2NvcGUuc3BvdHMudGltZXJfcm90YXRpb24gPSB0cnVlO1xyXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAkc2NvcGUuY29sb3JSb3RhdGlvbigpO1xyXG4gICAgfSwgMTAwKTtcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5zdG9wQ29sb3JzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuc3BvdHMuY29sb3Jfcm90YXRpb24gPSBmYWxzZTtcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5jb2xvclJvdGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoISRzY29wZS5zcG90cy5jb2xvcl9yb3RhdGlvbikge1xyXG4gICAgICAkc2NvcGUuc3BvdHMudGltZXJfcm90YXRpb24gPSBmYWxzZTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgIFxyXG4gICAgaWYgKCd3cmlzdGJhbmQnID09ICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUpIHtcclxuICAgICAgICB2YXIgY3VycmVudF9pbmQgPSAtMTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zcG90cy53cmlzdGJhbmRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNbaV0gPT0gJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNfY3VycmVudClcclxuICAgICAgICAgICAgICBjdXJyZW50X2luZCA9IGk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50X2luZCA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoKCRzY29wZS5zcG90cy53cmlzdGJhbmRzLmxlbmd0aCAtIDEpID09IGN1cnJlbnRfaW5kKVxyXG4gICAgICAgICAgICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNbMF07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNfY3VycmVudCA9ICRzY29wZS5zcG90cy53cmlzdGJhbmRzW2N1cnJlbnRfaW5kICsgMV07XHJcblxyXG4gICAgICAgICRzY29wZS5mYWRlVG9XaXN0YnJhbmRzKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICgnY2FyZCcgPT0gJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSkge1xyXG4gICAgICAgIHZhciBjdXJyZW50X2luZCA9IC0xO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNwb3RzLmNhcmRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNwb3RzLmNhcmRzW2ldID09ICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50KVxyXG4gICAgICAgICAgICAgIGN1cnJlbnRfaW5kID0gaTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRfaW5kIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICgoJHNjb3BlLnNwb3RzLmNhcmRzLmxlbmd0aCAtIDEpID09IGN1cnJlbnRfaW5kKVxyXG4gICAgICAgICAgICAkc2NvcGUuc3BvdHMuY2FyZHNfY3VycmVudCA9ICRzY29wZS5zcG90cy5jYXJkc1swXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAkc2NvcGUuc3BvdHMuY2FyZHNfY3VycmVudCA9ICRzY29wZS5zcG90cy5jYXJkc1tjdXJyZW50X2luZCArIDFdO1xyXG5cclxuICAgICAgICAkc2NvcGUuZmFkZVRvQ2FyZHMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCdrZXknID09ICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUpIHtcclxuICAgICAgICB2YXIgY3VycmVudF9pbmQgPSAtMTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zcG90cy5rZXlzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNwb3RzLmtleXNbaV0gPT0gJHNjb3BlLnNwb3RzLmtleXNfY3VycmVudClcclxuICAgICAgICAgICAgICBjdXJyZW50X2luZCA9IGk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50X2luZCA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoKCRzY29wZS5zcG90cy5rZXlzLmxlbmd0aCAtIDEpID09IGN1cnJlbnRfaW5kKVxyXG4gICAgICAgICAgICAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLmtleXNbMF07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgJHNjb3BlLnNwb3RzLmtleXNfY3VycmVudCA9ICRzY29wZS5zcG90cy5rZXlzW2N1cnJlbnRfaW5kICsgMV07XHJcblxyXG4gICAgICAgICRzY29wZS5mYWRlVG9LZXlzKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAkc2NvcGUuc3BvdHMudGltZXJfcm90YXRpb24gPSB0cnVlO1xyXG4gICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICRzY29wZS5jb2xvclJvdGF0aW9uKCk7XHJcbiAgIH0sIDEzMDApO1xyXG4gXHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUucmFuZG9tU2xpZGUgPSBmdW5jdGlvbihzbGlkZXIpIHtcclxuICAgICRzY29wZS5mYWRlVG8oc2xpZGVyLCAkc2NvcGUuZ2V0UmFuZG9tSW50KDAsIHNsaWRlci5zbGlkZXMubGVuZ3RoIC0gMSkpO1xyXG4gIH07XHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1Nwb3RDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJHRpbWVvdXQsIGNvbnRlbnRTZXJ2aWNlLCBkaWFsb2dTZXJ2aWNlKSB7XHJcblxyXG4vKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9C10YDQtdC80LXQvdC90YvRhSAqL1xyXG5cclxuICAkc2NvcGUubWF4U2l6ZSA9IDI1KjEwMjQqMTAyNDtcclxuICAkc2NvcGUucG9wdXBfd2lkdGggPSA1MDA7XHJcbiAgJHNjb3BlLnBvcHVwX2hlaWdodCA9IDU1MDtcclxuICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xyXG4gICRzY29wZS5rZXlzID0gW107XHJcbiAgJHNjb3BlLmFjdGlvbiA9IGZhbHNlO1xyXG5cclxuICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuICAkc2NvcGUucmVzdWx0ID0ge307XHJcblxyXG4gICRzY29wZS5zcG90ID0ge307XHJcbiAgJHNjb3BlLnNwb3QuZGlzY29kZXMgPSAwO1xyXG5cclxuICAkc2NvcGUuZ2VuZXJhbCA9IHt9O1xyXG4gICRzY29wZS5nZW5lcmFsLnZpZXdzID0gZmFsc2U7XHJcbiAgJHNjb3BlLmhvc3RfbW9iaWxlID0gMDtcclxuXHJcbiAgJHNjb3BlLndhbGxldCA9IHt9O1xyXG4gICRzY29wZS53YWxsZXQuY2FyZHMgPSB7fTtcclxuXHJcbiAgJHNjb3BlLnNjcm9sbF9rZXkgPSAtMTtcclxuXHJcbiAgJHNjb3BlLmFjdGlvbnMgPSB7fTtcclxuICAkc2NvcGUuYWN0aW9ucy5wYWdlID0gJyc7XHJcbiAgJHNjb3BlLmFjdGlvbnMucGhyYXNlID0gJyc7XHJcbiAgJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgPSAwO1xyXG4gICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCA9IDA7XHJcbiAgXHJcbiAgJHNjb3BlLnRleHQgPSB7fTtcclxuICBcclxuICAkc2NvcGUudHJhbnNwb3J0X3R5cGVzID0gW107XHJcbiAgJHNjb3BlLmN1c3RvbV9jYXJkID0ge307XHJcbiAgJHNjb3BlLnByZXZfY3VzdG9tX2NhcmQgPSB7fTtcclxuICAkc2NvcGUuc2VsZWN0ZWRfdHlwZT17fTtcclxuICAkc2NvcGUuaW5fcmVxdWVzdCA9IGZhbHNlO1xyXG4gICRzY29wZS53YWxsZXRfaGlzdG9yeSA9IHt9XHJcbiAgJHNjb3BlLndhbGxldF9oaXN0b3J5LmRhdGUgPSAnJztcclxuICAkc2NvcGUud2FsbGV0X2hpc3RvcnkuZW1wdHlfZGF0ZSA9IGZhbHNlO1xyXG4gICRzY29wZS5kYXRlX2hpc3Rvcnlfc2hvd24gPSBmYWxzZTtcclxuICBcclxuLyogQ1JVRCDQtNC70Y8g0YHQv9C+0YLQsCAqL1xyXG5cclxuICAvL9Ci0YDQuNCz0LXRgCDQvdCwINGB0L3Rj9GC0LjQtSDQvtGI0LjQsdC60Lgg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQv9C+0LvRj1xyXG4gICRzY29wZS4kd2F0Y2goJ3Nwb3QuY29kZSArIHNwb3QudGVybXMnLCBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5lcnJvci5jb2RlID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IudGVybXMgPSBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0YHQv9C+0YLQsFxyXG4gICRzY29wZS5hZGRTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgaWYgKCFzcG90LmNvZGUpIHtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuY29kZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoISRzY29wZS5zcG90LnRlcm1zKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvYWRkJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICRzY29wZS5zcG90LmRpc2NvZGVzID0gZGF0YS5kaXNjb2RlcztcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWxpc3QnKS5wcmVwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWN0U3BvdCcpLmNsaWNrKCk7XHJcbiAgICAgICAgZGVsZXRlICRzY29wZS5zcG90LmNvZGU7XHJcbiAgICAgICAgZGVsZXRlICRzY29wZS5zcG90LnRlcm1zO1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF9tb2JpbGUgfHwgMT09c3BvdC5uZWVkX3JlbG9hZClcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3Nwb3QvbGlzdCc7XHJcbiAgICAgIH1lbHNlIGlmIChkYXRhLmVycm9yID09ICd5ZXMnKSB7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmNvZGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9Cj0L/RgNCw0LLQu9C10L3QuNC1INC+0YHQvdC+0LLQvdGL0LzQuCDQsdC70L7QutCw0LzQuCDRgdC/0L7Rgiwg0LrQvtGI0LXQu9C10LosINC60YPQv9C+0L3Riy5cclxuICAkc2NvcGUuJHdhdGNoKCdnZW5lcmFsLnZpZXdzICsgc3BvdC5kaXNjb2RlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmFjdGlvbnMucGFnZSA9ICcnO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KHdpbmRvdykudW5iaW5kKCdzY3JvbGwnLCAkc2NvcGUubG9hZE1vcmVDb3Vwb25zKTtcclxuXHJcbiAgICBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ3dhbGxldCcgfHwgJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ3Nwb3QnKXtcclxuICAgICAgJHNjb3BlLnZpZXdXYWxsZXQoJHNjb3BlLnNwb3QpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnY291cG9uJyl7XHJcbiAgICAgICRzY29wZS52aWV3Q291cG9ucygkc2NvcGUuc3BvdCwgJHNjb3BlLmFjdGlvbnMpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAnc2V0dGluZ3MnKXtcclxuICAgICAgJHNjb3BlLnZpZXdzU2V0dGluZ3MoJHNjb3BlLnNwb3QpO1xyXG4gICAgfSBlbHNlIGlmICgkc2NvcGUuZ2VuZXJhbC52aWV3cyA9PSAndHJhbnNwb3J0Jyl7XHJcbiAgICAgICRzY29wZS52aWV3VHJhbnNwb3J0KCRzY29wZS5zcG90KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLmJvZHlNaW5IZWlnaHQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGxpc3RIZWlnaHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWxpc3QnKS5oZWlnaHQoKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudCcpLmNzcygnbWluLWhlaWdodCcsIGxpc3RIZWlnaHQrMjAwKTtcclxuICB9O1xyXG4vKlxyXG4gICRzY29wZS52aWV3U3BvdCA9IGZ1bmN0aW9uIChzcG90KSB7XHJcbiAgICBpZiAoc3BvdC5kaXNjb2RlcyA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvdmlldycsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBzcG90X2Jsb2NrLmVtcHR5KCk7XHJcbiAgICAgICAgc3BvdF9ibG9jay5odG1sKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcblxyXG4gICAgICAgICRzY29wZS5rZXlzID0gW107XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnRfaXRlcmF0aW9uID0gMDtcclxuICAgICAgICAkc2NvcGUuZmlsZVVwbG9hZEluaXQoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmJvZHlNaW5IZWlnaHQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWNvbnRlbnRfcm93Jykuc2hvdygpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgIH0sNTAwKTtcclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5zY3JvbGxfa2V5ICYmICRzY29wZS5zY3JvbGxfa2V5ID4gMSlcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLnNjcm9sbFBhZ2UoJyNibG9jay0nICsgJHNjb3BlLnNjcm9sbF9rZXkpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLnNjcm9sbFBhZ2UoJ2JvZHknKTtcclxuICAgICAgICAkc2NvcGUuc2Nyb2xsX2tleSA9IC0xO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG4qL1xyXG4gIC8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0LPQviDQsdC70L7QutCwINCyINGB0L/QvtGCXHJcbiAgJHNjb3BlLmFkZENvbnRlbnQgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5hZGRWYWx1ZSgkc2NvcGUuc3BvdC5jb250ZW50KTtcclxuICB9O1xyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC10L/RgNC40LLRj9C30LDQvdC90L7Qs9C+INC6INGB0L7RhtGB0LXRgtGP0Lwg0LrQvtC90YLQtdC90YLQsFxyXG4gICRzY29wZS5hZGRWYWx1ZSA9IGZ1bmN0aW9uKG5ld1ZhbHVlKXtcclxuICAgICRzY29wZS5zcG90LmNvbnRlbnQgPSBuZXdWYWx1ZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3Nwb3RBZGRDb250ZW50JywgJHNjb3BlLnNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3BvdC5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICRzY29wZS5zcG90LmNvbnRlbnQgPSAnJztcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ3RleHRhcmVhJykucmVtb3ZlQ2xhc3MoJ3B1dCcpO1xyXG5cclxuICAgICAgICBpZiAoYW5ndWxhci5lbGVtZW50KCcjZXh0cmFNZWRpYUZvcm0nKS5oYXNDbGFzcygnb3BlbicpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybScpLnNsaWRlVXAoMCwgZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybSBhJykucmVtb3ZlQ2xhc3MoJ2JsYWNrb3V0Jyk7YW5ndWxhci5lbGVtZW50KCcjZXh0cmFNZWRpYUZvcm0gYScpLmZhZGVUbygwLCAxKTt9KTtcclxuICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNleHRyYU1lZGlhRm9ybScpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9IGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBkYXRhLmtleSkub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkc2NvcGUucmVzZXRDdXJzb3IoKTtcclxuICB9O1xyXG5cclxuICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L/QvtGA0Y/QtNC+0Log0LHQu9C+0LrQvtCyXHJcbiAgJHNjb3BlLnNhdmVPcmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc2F2ZU9yZGVyJywgJHNjb3BlLnNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0LDRgNCw0LzQtdGC0YDRiyDRgdC+0YDRgtC40YDQvtCy0LrQuFxyXG4gICRzY29wZS5zb3J0YWJsZU9wdGlvbnMgPSB7XHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAkc2NvcGUuc2F2ZU9yZGVyKCk7XHJcbiAgICB9LFxyXG4gICAgJ2NvbnRhaW5tZW50JzonLnNwb3QtY29udGVudCcsXHJcbiAgICAnaGFuZGxlJzogJy5tb3ZlJyxcclxuICAgICdzY3JvbGxTZW5zaXRpdml0eSc6IDUsXHJcbiAgICAndG9sZXJhbmNlJzogJ3BvaW50ZXInLFxyXG4gICAgJ29wYWNpdHknOjAuOFxyXG4gIH07XHJcblxyXG4gIC8vINCj0LTQsNC70LXQvdC40LUg0LHQu9C+0LrQsCDQsiDRgdC/0L7RgtC1XHJcbiAgJHNjb3BlLnJlbW92ZUNvbnRlbnQgPSBmdW5jdGlvbihzcG90LCBrZXksIGUpIHtcclxuICAgIHNwb3Qua2V5ID0ga2V5O1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc3BvdFJlbW92ZUNvbnRlbnQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgdmFyIHNwb3RJdGVtID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgICAgIHNwb3RJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgICRzY29wZS5rZXlzPWRhdGEua2V5cztcclxuICAgICAgICBpZiAoZGF0YS5uZXREb3duKVxyXG4gICAgICAgICAgICAkc2NvcGUubmV0RG93bihkYXRhLm5ldERvd24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQoNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INGC0LXQutGB0YLQvtCy0L7Qs9C+INCx0LvQvtC60LAg0LIg0YHQv9C+0YLQtVxyXG4gICRzY29wZS5lZGl0Q29udGVudCA9IGZ1bmN0aW9uKHNwb3QsIGtleSwgZSkge1xyXG4gICAgaWYgKCFzcG90LmNvbnRlbnRfbmV3KXtcclxuICAgICAgc3BvdC5rZXkgPSBrZXk7XHJcbiAgICAgIHZhciBzcG90SXRlbSA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1lZGl0JykuY2xvbmUoKTtcclxuXHJcbiAgICAgIGlmIChzcG90SXRlbS5maW5kKCdhLnR5cGUtbGluaycpLnNpemUoKSA+IDApe1xyXG4gICAgICAgICAgLy/RgdGB0YvQu9C60LBcclxuICAgICAgICAgIHZhciBzcG90TGluayA9IHNwb3RJdGVtLmZpbmQoJ2EudHlwZS1saW5rJyk7XHJcbiAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50X25ldyA9IHNwb3RMaW5rLmZpbmQoJ3NwYW4ubGluaycpLnRleHQoKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAvL9GC0LXQutGB0YJcclxuICAgICAgICAgIHZhciBzcG90RGF0YSA9IHNwb3RJdGVtLmZpbmQoJ3AuaXRlbS10eXBlX190ZXh0Jyk7XHJcbiAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50X25ldyA9IHNwb3REYXRhLnRleHQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc3BvdEVkaXQucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgc3BvdEVkaXQuZmluZCgndGV4dGFyZWEnKS5mb2N1cygxKTtcclxuICAgICAgc3BvdEl0ZW0uaGlkZSgpLmJlZm9yZSgkY29tcGlsZShzcG90RWRpdCkoJHNjb3BlKSk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgICRzY29wZS5oaWRlU3BvdEVkaXQoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQodC+0YXRgNCw0L3QtdC90LjQtSDRgtC10LrRgdGC0L7QstC+0LPQviDQsdC70L7QutCwINCyINGB0L/QvtGC0LVcclxuICAkc2NvcGUuc2F2ZUNvbnRlbnQgPSBmdW5jdGlvbihzcG90LCBlKSB7XHJcbiAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICB2YXIgc3BvdEl0ZW0gPSBzcG90RWRpdC5uZXh0KCk7XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc3BvdFNhdmVDb250ZW50Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBkZWxldGUgJHNjb3BlLnNwb3QuY29udGVudF9uZXc7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQn9GA0Y/Rh9C10Lwg0YLQtdC60YHRgtC+0LLRi9C5INCx0LvQvtC6INC/0YDQuCDQutC70LjQutC1INCy0L3QtSwg0LTQsNC90L3Ri9C1INGB0L7RhdGA0LDQvdGP0LXQvFxyXG4gICRzY29wZS5oaWRlU3BvdEVkaXQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICghJHNjb3BlLnNwb3QuY29udGVudCAmJiAhJHNjb3BlLnNwb3QuY29udGVudF9uZXcpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWVkaXQnKTtcclxuICAgIHZhciBzcG90SXRlbSA9IHNwb3RFZGl0Lm5leHQoKTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zcG90U2F2ZUNvbnRlbnQnLCAkc2NvcGUuc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHNwb3RFZGl0LmJlZm9yZSgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgIHNwb3RJdGVtLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICBkZWxldGUgJHNjb3BlLnNwb3QuY29udGVudF9uZXc7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQn9C10YDQtdC40LzQtdC90L7QstGL0LLQsNC10Lwg0YHQv9C+0YJcclxuICAkc2NvcGUucmVuYW1lU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIGlmICghc3BvdC5uYW1lKSByZXR1cm4gZmFsc2U7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9yZW5hbWUnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjJyArIHNwb3QuZGlzY29kZXMgKyAnIGgzJykudGV4dChzcG90Lm5hbWUpO1xyXG4gICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmNvbnRlbnQsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQntGH0LjRidCw0LXQvCDRgdC/0L7RglxyXG4gICRzY29wZS5jbGVhblNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICBkaWFsb2dTZXJ2aWNlLnllc05vRGlhbG9nKGZ1bmN0aW9uKGRpYWxvZ19yZXN1bHQpIHtcclxuICAgICAgaWYgKGRpYWxvZ19yZXN1bHQgIT0gJ3llcycpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvY2xlYW4nLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgICRzY29wZS5nZW5lcmFsLnZpZXdzID0gJ3Nwb3QnO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7ICBcclxuICAgIH0sXHJcbiAgICAkc2NvcGUudGV4dC55ZXNfYnRuLFxyXG4gICAgJHNjb3BlLnRleHQubm9fYnRuLFxyXG4gICAgJHNjb3BlLnRleHQuY2xlYW5fc3BvdCxcclxuICAgICduZWdhdGl2ZSdcclxuICAgICk7ICBcclxuICB9O1xyXG5cclxuICAvLyDQo9C00LDQu9GP0LXQvCDRgdC/0L7RglxyXG4gICRzY29wZS5yZW1vdmVTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgZGlhbG9nU2VydmljZS55ZXNOb0RpYWxvZyhmdW5jdGlvbihkaWFsb2dfcmVzdWx0KSB7XHJcbiAgICAgIGlmIChkaWFsb2dfcmVzdWx0ICE9ICd5ZXMnKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICBcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvc3BvdC9saXN0LycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgJHNjb3BlLnRleHQueWVzX2J0bixcclxuICAgICRzY29wZS50ZXh0Lm5vX2J0bixcclxuICAgICRzY29wZS50ZXh0LnJtX3Nwb3QsXHJcbiAgICAnbmVnYXRpdmUnXHJcbiAgICApOyAgXHJcbiAgfTtcclxuXHJcbiAgLy8g0JzQtdC90Y/QtdC8INGB0YLQsNGC0YPRgSDRgdC/0L7RgtCwXHJcbiAgJHNjb3BlLml2aXNpYmxlU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIHZhciB0aXRsZSA9ICRzY29wZS50ZXh0Lm1rX2ludmlzaWJsZTtcclxuICAgIHZhciBkZXNjciA9ICRzY29wZS50ZXh0Lm1rX2ludmlzaWJsZV9kZXNjcjtcclxuXHJcbiAgICBpZiAoc3BvdC5zdGF0dXMgPT0gNikge1xyXG4gICAgICAgIHRpdGxlID0gJHNjb3BlLnRleHQubWtfdmlzaWJsZTtcclxuICAgICAgICBkZXNjciA9ICRzY29wZS50ZXh0Lm1rX3Zpc2libGVfZGVzY3I7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBkaWFsb2dTZXJ2aWNlLnllc05vRGlhbG9nKGZ1bmN0aW9uKGRpYWxvZ19yZXN1bHQpIHtcclxuICAgICAgaWYgKGRpYWxvZ19yZXN1bHQgIT0gJ3llcycpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvc3BvdC9pbnZpc2libGUnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgICRzY29wZS5zcG90LnN0YXR1cyA9IGRhdGEuc3RhdHVzO1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjJytzcG90LmRpc2NvZGVzKS50b2dnbGVDbGFzcygnaW52aXNpYmxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAkc2NvcGUudGV4dC55ZXNfYnRuLFxyXG4gICAgJHNjb3BlLnRleHQubm9fYnRuLFxyXG4gICAgdGl0bGUsXHJcbiAgICAnbmVnYXRpdmUnXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0L7QutC90LAg0L3QsNGB0YLRgNC+0LXQulxyXG4gICRzY29wZS52aWV3c1NldHRpbmdzID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc2V0dGluZ3MnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQvtGI0LXQu9GM0LrQsFxyXG4gICRzY29wZS52aWV3V2FsbGV0ID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvd2FsbGV0Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldExpc3RDYXJkKCk7XHJcblxyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZGF0ZV9oaXN0b3J5JykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgICB5ZWFyUmFuZ2U6ICcxOTAwOi0wJyxcclxuICAgICAgICAgIG1heERhdGU6MCxcclxuICAgICAgICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXHJcbiAgICAgICAgICBvblNlbGVjdDogZnVuY3Rpb24gKGRhdGVUZXh0LCBpbnN0KSB7XHJcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICRzY29wZS53YWxsZXRfaGlzdG9yeS5kYXRlID0gZGF0ZVRleHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIChkYXRlVGV4dCwgaW5zdCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZGF0ZV9oaXN0b3J5X3Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRzY29wZS5nZW5lcmFsLnZpZXdzID0gJ3NldHRpbmdzJztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LrRg9C/0L7QvdC+0LJcclxuICAkc2NvcGUudmlld0NvdXBvbnMgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9jb3Vwb25zJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIFxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LXQvdC40LUg0LLQutC70LDQtNC60Lgg0KLRgNCw0L3RgdC/0L7RgNGCXHJcbiAgJHNjb3BlLnZpZXdUcmFuc3BvcnQgPSBmdW5jdGlvbiAoc3BvdCkge1xyXG4gICAgdmFyIHNwb3RfYmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJyNzcG90LWJsb2NrJyk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC90cmFuc3BvcnQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgc3BvdF9ibG9jay5lbXB0eSgpO1xyXG4gICAgICAgIHNwb3RfYmxvY2suaHRtbCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5ib2R5TWluSGVpZ2h0KCk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50X3JvdycpLnNob3coKS5hbmltYXRlKHtcclxuICAgICAgICAgIG9wYWNpdHk6IDFcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vQ9C/0LjRgdC+0Log0LrRg9C/0L7QvdC+0LJcclxuICAkc2NvcGUubGlzdENvdXBvbnMgPSBmdW5jdGlvbiAoc3BvdCwgYWN0aW9ucykge1xyXG4gICAgaWYgKCFhY3Rpb25zLnBhZ2UpIHJldHVybiBmYWxzZTtcclxuICAgIHZhciBsaXN0ID0gYW5ndWxhci5lbGVtZW50KCcjY291cG9ucy1saXN0Jyk7XHJcblxyXG4gICAgdmFyIGRhdGEgPSB7J2Rpc2NvZGVzJzogc3BvdC5kaXNjb2RlcywgJ3Rva2VuJzogc3BvdC50b2tlbiwgJ3BhZ2UnOiBhY3Rpb25zLnBhZ2UsICdwaHJhc2UnOiBhY3Rpb25zLnBocmFzZSwgJ29mZnNldCc6YWN0aW9ucy5vZmZzZXR9O1xyXG5cclxuICAgICRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzID0gdHJ1ZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2xpc3RDb3Vwb25zJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS5hY3Rpb25zLm9mZnNldCArPSBkYXRhLmNvdW50O1xyXG4gICAgICAgICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCA9IGRhdGEuY291bnRfYWxsO1xyXG5cclxuICAgICAgICBsaXN0LmVtcHR5KCk7XHJcbiAgICAgICAgbGlzdC5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KS5lcnJvcihmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICB9O1xyXG5cclxuICAkc2NvcGUuZmlsdGVyQ291cG9ucyA9IGZ1bmN0aW9uKHNwb3QsIGFjdGlvbnMpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLm9mZnNldCA9IDA7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSAwO1xyXG4gICAgJHNjb3BlLmxpc3RDb3Vwb25zKHNwb3QsIGFjdGlvbnMpO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0L/QuNGB0L7QuiDQutCw0YDRglxyXG4gICRzY29wZS5nZXRMaXN0Q2FyZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgIT0gJ3dhbGxldCcpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2xpc3RDYXJkJywgJHNjb3BlLndhbGxldCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHMgPSBkYXRhLmNhcmRzO1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHNfY291bnQgPSBkYXRhLmNhcmRzX2NvdW50O1xyXG4gICAgICAgICRzY29wZS53YWxsZXQubGlua2luZ19jYXJkID0gZGF0YS5saW5raW5nX2NhcmQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICRzY29wZS5nZXRMaXN0Q2FyZCgpO1xyXG4gICB9LCA1MDAwKTtcclxuICB9O1xyXG5cclxuICAvL9Ce0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQsNGB0YLQvtC80L3QvtCz0L4g0LzQsNC60LXRgtCwINGC0YDQsNC90YHQv9C+0YLRgNC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNob3dDdXN0b21DYXJkID0gZnVuY3Rpb24oKXtcclxuICAgICQoJyNjdXN0b21DYXJkJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaGlkZUN1c3RvbUNhcmQgPSBmdW5jdGlvbigpe1xyXG4gICAgJCgnI2N1c3RvbUNhcmQnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINCR0LvQvtC60LjRgNC+0LLQutCwINC60L7RiNC10LvRjNC60LBcclxuICAkc2NvcGUuYmxvY2tlZFdhbGxldCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9ibG9ja2VkV2FsbGV0JywgJHNjb3BlLndhbGxldCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuc3RhdHVzID0gZGF0YS5zdGF0dXM7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0LfQsNC/0YDQvtGB0LAg0L3QsCDQv9GA0LjQstGP0LfQutGDINC60LDRgNGC0YtcclxuICAkc2NvcGUubGlua2luZ0NhcmQgPSBmdW5jdGlvbihjYXJkKXtcclxuICAgIGlmICghY2FyZC50ZXJtcykgcmV0dXJuIGZhbHNlO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KFwiI2xpbmtpbmdfY2FyZFwiICkuc3VibWl0KCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0JTQtdC70LDQtdC8INC60LDRgNGC0YMg0L/Qu9Cw0YLQtdC20L3QvtC5XHJcbiAgJHNjb3BlLnNldFBheW1lbnRDYXJkID0gZnVuY3Rpb24oY2FyZF9pZCwgZSl7XHJcbiAgICBpZiAoJHNjb3BlLmluX3JlcXVlc3QpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgdmFyIGRhdGEgPSB7J3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdjYXJkX2lkJzogY2FyZF9pZH07XHJcbiAgICAkc2NvcGUuaW5fcmVxdWVzdCA9IHRydWU7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zZXRQYXltZW50Q2FyZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5tYWluLWNhcmQnKS5yZW1vdmVDbGFzcygnbWFpbi1jYXJkJyk7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoJ21haW4tY2FyZCcpO1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuYmxhY2tsaXN0ID0gMTtcclxuICAgICAgICBcclxuICAgICAgICAkc2NvcGUubGlzdEhpc3RvcnkoJHNjb3BlLndhbGxldF9oaXN0b3J5LmRhdGUpO1xyXG4gICAgICB9XHJcbiAgICAgICRzY29wZS5pbl9yZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICB9KS5lcnJvcihmdW5jdGlvbihlcnJvcil7JHNjb3BlLmluX3JlcXVlc3QgPSBmYWxzZTt9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZWRpdENhcmRMaXN0ID0gZnVuY3Rpb24oKXtcclxuICAgICQoJy50YWJsZS1jYXJkJykudG9nZ2xlQ2xhc3MoJ2VkaXQnKTtcclxuXHJcbiAgICBpZiAoJHNjb3BlLndhbGxldC5jYXJkX2VkaXQgPT09IDApIHtcclxuICAgICAgJHNjb3BlLndhbGxldC5jYXJkX2VkaXQgPSAxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJHNjb3BlLndhbGxldC5jYXJkX2VkaXQgPSAwO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCj0LTQsNC70Y/QtdC8INC60LDRgNGC0YNcclxuICAkc2NvcGUucmVtb3ZlQ2FyZCA9IGZ1bmN0aW9uKGNhcmRfaWQpe1xyXG4gICAgdmFyIGRhdGEgPSB7J3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdjYXJkX2lkJzogY2FyZF9pZH07XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9yZW1vdmVDYXJkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHNfY291bnQgLT0gMTtcclxuICAgICAgICBkZWxldGUgJHNjb3BlLndhbGxldC5jYXJkc1tjYXJkX2lkXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHRh9C10YLRh9C40Log0L3QsCDRgdGC0YDQsNC90LjRhtC1INGB0L7Qs9C70LDRiNC10L3QuNGPINC+0LEg0L7Qv9C70LDRgtC1XHJcbiAgdmFyIHN0b3BwZWQ7XHJcbiAgJHNjb3BlLmNvdW50UmVzZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5yZXNldF90aW1lID0gdHlwZW9mICRzY29wZS5yZXNldF90aW1lICE9PSAndW5kZWZpbmVkJyA/ICRzY29wZS5yZXNldF90aW1lOjMwO1xyXG4gICAgc3RvcHBlZCA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoJHNjb3BlLnJlc2V0X3RpbWUgPT09IDApIHtcclxuICAgICAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJyx3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xyXG4gICAgICB9IGVsc2UgJHNjb3BlLnJlc2V0X3RpbWUtLTtcclxuICAgICAgJHNjb3BlLmNvdW50UmVzZXQoKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH07XHJcblxyXG5cclxuLyrQl9Cw0LPRgNGD0LfQutCwINGE0LDQudC70L7QsiAqL1xyXG5cclxuICAvLyDQktC10YjQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQtNC70Y8g0LfQsNCz0YDRg9C30LrQuCDRhNCw0LnQu9C+0LJcclxuICAkc2NvcGUuZmlsZVVwbG9hZEluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZmlsZV9kcmFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Ryb3Bib3gnKTtcclxuICAgIHZhciBmaWxlX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmlsZScpO1xyXG4gICAgaWYgKGZpbGVfZHJhZyAmJiBmaWxlX2J1dHRvbikge1xyXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgIGlmICh4aHIudXBsb2FkKSB7XHJcbiAgICAgICAgZmlsZV9kcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZmlsZURyYWdIb3ZlciwgZmFsc2UpO1xyXG4gICAgICAgIGZpbGVfZHJhZy5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBmaWxlRHJhZ0hvdmVyLCBmYWxzZSk7XHJcbiAgICAgICAgZmlsZV9kcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBmaWxlU2VsZWN0SGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgIGZpbGVfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZpbGVTZWxlY3RIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQl9Cw0LrQsNGH0LrQsCDRhNCw0LnQu9CwIGh0bWw1XHJcbiAgZnVuY3Rpb24gZmlsZURyYWdIb3ZlcihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKGUudHlwZSA9PSAnZHJhZ292ZXInKXtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjZHJvcGJveCcpLmFkZENsYXNzKCdob3ZlcicpO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkcm9wYm94JykucmVtb3ZlQ2xhc3MoJ2hvdmVyJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgZnVuY3Rpb24gZmlsZVNlbGVjdEhhbmRsZXIoZSkge1xyXG4gICAgZmlsZURyYWdIb3ZlcihlKTtcclxuICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwLCBmOyBmID0gZmlsZXNbaV07IGkrKykge1xyXG4gICAgICAkc2NvcGUudXBsb2FkRmlsZShmKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINCe0YLQvtCx0YDQsNC20LDQtdC8INC/0YDQvtCz0YDQtdGB0YEg0LHQsNGAINC4INC/0YDQvtC70LjRgdGC0YvQstCw0LXQvCDRjdC60YDQsNC9INC6INC90L7QstC+0LzRgyDQsdC70L7QutGDXHJcbiAgJHNjb3BlLnVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IGUudGFyZ2V0LnJlc3BvbnNlVGV4dDtcclxuICAgIGlmIChyZXN1bHQpe1xyXG4gICAgICB2YXIgZGF0YSA9IGFuZ3VsYXIuZnJvbUpzb24ocmVzdWx0KTtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvZ3Jlc3MtY29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG5cclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtZmlsZScpLnZhbCgnJyk7XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gJCgnI2Jsb2NrLScgKyBkYXRhLmtleSkub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgfSwgNjAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCh0LvRg9GH0LDQudC90YvQvCDQvtCx0YDQsNC30L7QvCDQs9C10L3QtdGA0LjRgNGD0LXQvCDQt9C90LDRh9C10L3QuNC1INC00LvRjyDRjdGE0YTQtdC60YLQsCDQt9Cw0LPRgNGD0LfQutC4XHJcbiAgZnVuY3Rpb24gdXBsb2FkUHJvZ3Jlc3MoZXZ0KSB7XHJcbiAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XHJcbiAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gTWF0aC5yb3VuZChldnQubG9hZGVkICogMTAwIC8gZXZ0LnRvdGFsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9ICd1bmFibGUgdG8gY29tcHV0ZSc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g0JTQtdC50YHRgtCy0LjQtSDQtdGB0LvQuCDQt9Cw0LPRgNGD0LfQutCwINC90LUg0YPQtNCw0LvQsNGB0YxcclxuICAkc2NvcGUudXBsb2FkRmFpbGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNlcnJvci11cGxvYWQnKS5zaG93KCkuZGVsYXkoODAwKS5zbGlkZVVwKCdzbG93Jyk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnVwbG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlKSB7XHJcblxyXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgaWYgKHhoci51cGxvYWQgJiYgZmlsZS5zaXplIDw9ICRzY29wZS5tYXhTaXplKSB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3Byb2dyZXNzLWNvbnRlbnQnKS5zaG93KCk7XHJcblxyXG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xyXG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gTWF0aC5yb3VuZChlLmxvYWRlZCAqIDEwMCAvIGUudG90YWwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAndW5hYmxlIHRvIGNvbXB1dGUnO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCB1cGxvYWRQcm9ncmVzcywgZmFsc2UpO1xyXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAkc2NvcGUudXBsb2FkRmFpbGVkLCBmYWxzZSk7XHJcbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgJHNjb3BlLnVwbG9hZENvbXBsZXRlLCBmYWxzZSk7XHJcbiAgICAgIHhoci5vcGVuKCdQT1NUJywgJy9zcG90L3VwbG9hZCcsIHRydWUpO1xyXG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1GaWxlLU5hbWUnLCB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZmlsZS5uYW1lKSkpO1xyXG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1EaXNjb2RlcycsICRzY29wZS5zcG90LmRpc2NvZGVzKTtcclxuICAgICAgeGhyLnNlbmQoZmlsZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbi8qINCh0L7RhiDRgdC10YLQuCAqL1xyXG5cclxuICAvL9C/0L7QtNCz0YDRg9C30LrQsCDQsdC70L7QutCwINGBINC60L7QvdGC0LXQvdGC0L7QvCDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS5sb2FkU29jQ29udGVudCA9IGZ1bmN0aW9uKGtleSlcclxuICB7XHJcbiAgICB2YXIgZGF0YSA9IHtkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlcywga2V5OmtleSwgdG9rZW46JHNjb3BlLnVzZXIudG9rZW59O1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zcG90L1NvY05ldENvbnRlbnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGRhdGEua2V5KTtcclxuICAgICAgICAgICAgdmFyIG9sZEhlaWdodCA9IHNwb3RFZGl0LmhlaWdodCgpO1xyXG4gICAgICAgICAgICB2YXIgb2xkU2Nyb2xsID0gc3BvdEVkaXQub2Zmc2V0KCkudG9wO1xyXG5cclxuICAgICAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2V0VmlkZW9TaXplKGRhdGEua2V5KTtcclxuICAgICAgICAgICAgaWYgKG9sZFNjcm9sbCA8ICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCdodG1sLCBib2R5Jykuc2Nyb2xsVG9wKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5oZWlnaHQoKSAtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/Rg9GB0YLQsNC90L7QstC40YLRjCDQv9C+0LTRgdCy0LXRgtC60YMg0LrQvdC+0L/QutC4INGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLm5ldENoZWNrID0gZnVuY3Rpb24obmV0TmFtZSkge1xyXG4gICAgdmFyIGRhdGEgPSB7dG9rZW46JHNjb3BlLnVzZXIudG9rZW4sIG5ldE5hbWU6bmV0TmFtZX07XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9uZXRDaGVjaycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChcIiNleHRyYU1lZGlhRm9ybSBhW25ldD0nXCIgKyBkYXRhLm5ldE5hbWUgKyBcIiddXCIpO1xyXG4gICAgICAgIGlmIChkYXRhLmJpbmRlZClcclxuICAgICAgICAgIGJ1dHRvbi5hZGRDbGFzcygnYmluZGVkJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgYnV0dG9uLnJlbW92ZUNsYXNzKCdiaW5kZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9C+0LTRgdCy0LXRgtC40YLRjCDQutC90L7Qv9C60YMg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUubmV0VXAgPSBmdW5jdGlvbihuZXROYW1lKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KFwiI2V4dHJhTWVkaWFGb3JtIGFbbmV0PSdcIiArIG5ldE5hbWUgKyBcIiddXCIpO1xyXG4gICAgYnV0dG9uLmFkZENsYXNzKCdiaW5kZWQnKTtcclxuICB9O1xyXG5cclxuICAvL9C/0L7Qs9Cw0YHQuNGC0Ywg0LrQvdC+0L/QutGDINGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLm5ldERvd24gPSBmdW5jdGlvbihuZXROYW1lKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KFwiI2V4dHJhTWVkaWFGb3JtIGFbbmV0PSdcIiArIG5ldE5hbWUgKyBcIiddXCIpO1xyXG4gICAgYnV0dG9uLnJlbW92ZUNsYXNzKCdiaW5kZWQnKTtcclxuICB9O1xyXG5cclxuICAvLyDQn9GA0LjQstGP0LfQutCwINGB0L7RhtGB0LXRgtC10LlcclxuICB2YXIgcG9wdXA7XHJcbiAgdmFyIHNvY1RpbWVyO1xyXG4gIHZhciBsaWtlVGltZXI7XHJcbiAgdmFyIGxveWFsdHlUaW1lcjtcclxuICB2YXIgaG9sZGVyVGltZXI7XHJcblxyXG4gICRzY29wZS50b2dnbGVCaW5kaW5nID0gZnVuY3Rpb24obmV0X25hbWUsIGUsIHdhcm5pbmcpIHtcclxuICAgIHZhciBidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KTtcclxuXHJcbiAgICBpZiAoIShidXR0b24uaGFzQ2xhc3MoJ2JpbmRlZCcpKSkge1xyXG4gICAgICAkc2NvcGUuYmluZFNlcnZpY2UobmV0X25hbWUpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZGlhbG9nU2VydmljZS55ZXNOb0RpYWxvZyhmdW5jdGlvbihkaWFsb2dfcmVzdWx0KSB7XHJcbiAgICAgIGlmIChkaWFsb2dfcmVzdWx0ICE9ICd5ZXMnKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgIHZhciBkYXRhID0ge3Rva2VuOiRzY29wZS51c2VyLnRva2VuLCBuZXRfbmFtZTpuZXRfbmFtZX07XHJcbiAgICAgIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvdXNlci91bmJpbmRTZXJ2aWNlJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5uZXREb3duKGRhdGEubmV0X25hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgJHNjb3BlLnRleHQueWVzX2J0bixcclxuICAgICRzY29wZS50ZXh0Lm5vX2J0bixcclxuICAgIHdhcm5pbmcsXHJcbiAgICAnbmVnYXRpdmUnXHJcbiAgICApOyAgICBcclxuICBcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLmJpbmRTZXJ2aWNlID0gZnVuY3Rpb24obmV0TmFtZSkge1xyXG4gICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgIGlkOiAnJyxcclxuICAgICAgcG9wdXA6IHtcclxuICAgICAgICB3aWR0aDogJHNjb3BlLnBvcHVwX3dpZHRoLFxyXG4gICAgICAgIGhlaWdodDogJHNjb3BlLnBvcHVwX2hlaWdodFxyXG4gICAgICB9XHJcbiAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICB2YXIgcmVkaXJlY3RfdXJpID0gJ2h0dHA6Ly8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJy91c2VyL0JpbmRTb2NMb2dpbj9zZXJ2aWNlPScgKyBuZXROYW1lO1xyXG4gICAgdmFyIHVybCA9IHJlZGlyZWN0X3VyaTtcclxuXHJcbiAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nO1xyXG4gICAgaWYgKHVybC5pbmRleE9mKCdyZWRpcmVjdF91cmk9JykgPT09IC0xKVxyXG4gICAgICB1cmwgKz0gJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0X3VyaSk7XHJcblxyXG4gICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgIGNlbnRlckhlaWdodCA9ICh3aW5kb3cuc2NyZWVuLmhlaWdodCAtIG9wdGlvbnMucG9wdXAuaGVpZ2h0KSAvIDI7XHJcblxyXG4gICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUpIHtcclxuICAgICAgICBwb3B1cCA9IHdpbmRvdy5vcGVuKHVybCArICcmanMnLCBcInlpaV9lYXV0aF9wb3B1cFwiLCBcIndpZHRoPVwiICsgb3B0aW9ucy5wb3B1cC53aWR0aCArIFwiLGhlaWdodD1cIiArIG9wdGlvbnMucG9wdXAuaGVpZ2h0ICsgXCIsbGVmdD1cIiArIGNlbnRlcldpZHRoICsgXCIsdG9wPVwiICsgY2VudGVySGVpZ2h0ICsgXCIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9eWVzXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwb3B1cCA9PT0gbnVsbCB8fCB0eXBlb2YocG9wdXApPT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHZhciBocmVmID0gdXJsICsgJyZsb2dpbm9ubHk9dHJ1ZSc7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnNwb3QuY29udGVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnNwb3QuY29udGVudC5sZW5ndGgpXHJcbiAgICAgICAgICAgIGhyZWYgKz0gJyZsaW5rPScgKyBlbmNvZGVVUklDb21wb25lbnQoJHNjb3BlLnNwb3QuY29udGVudCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHBvcHVwLmZvY3VzKCk7XHJcblxyXG4gICAgICAgICRzY29wZS5iaW5kTmV0ID0ge25hbWU6bmV0TmFtZSwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXMsIG5ld0ZpZWxkOjF9O1xyXG4gICAgICAgIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvL9GH0LXRgNC10Lcg0L/Qu9Cw0YjQutGDXHJcbiAgJHNjb3BlLmJpbmRCeVBhbmVsID0gZnVuY3Rpb24oYnV0dG9uTmFtZSkge1xyXG4gICAgdmFyIG5ldE5hbWUgPSBidXR0b25OYW1lO1xyXG4gICAgdmFyIGRhdGEgPSB7c3BvdDogJHNjb3BlLnNwb3QsIHRva2VuOiRzY29wZS51c2VyLnRva2VuLCBuZXROYW1lOm5ldE5hbWV9O1xyXG4gICAgLy/QvtC/0YDQtdC00LXQu9C10L3QuNC1INGB0LXRgtC4INC/0L4g0YHRgdGL0LvQutC1XHJcbiAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuc3BvdC5jb250ZW50KSAmJiAkc2NvcGUuc3BvdC5jb250ZW50Lmxlbmd0aClcclxuICAgIHtcclxuICAgICAgICBkYXRhLmxpbmsgPSAkc2NvcGUuc3BvdC5jb250ZW50O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNvY19wYXR0ZXJucy5sZW5ndGg7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdC5jb250ZW50LmluZGV4T2YoJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5iYXNlVXJsKSAhPSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmV0TmFtZSA9ICRzY29wZS5zb2NfcGF0dGVybnNbaV0ubmFtZTtcclxuICAgICAgICAgICAgICAgIGRhdGEubmV0TmFtZSA9ICRzY29wZS5zb2NfcGF0dGVybnNbaV0ubmFtZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9CaW5kQnlQYW5lbCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgICBpZihkYXRhLnByb2ZpbGVIaW50Lmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmxvZ2dlZEluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwb3B1cDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJHNjb3BlLnBvcHVwX3dpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICRzY29wZS5wb3B1cF9oZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZGlyZWN0X3VyaSA9ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICcvdXNlci9CaW5kU29jTG9naW4/c2VydmljZT0nICsgbmV0TmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVkaXJlY3RfdXJpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigncmVkaXJlY3RfdXJpPScpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgIHVybCArPSAncmVkaXJlY3RfdXJpPScgKyBlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RfdXJpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJIZWlnaHQgPSAod2luZG93LnNjcmVlbi5oZWlnaHQgLSBvcHRpb25zLnBvcHVwLmhlaWdodCkgLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISRzY29wZS5ob3N0X21vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cCA9IHdpbmRvdy5vcGVuKHVybCArICcmanMnLCBcInlpaV9lYXV0aF9wb3B1cFwiLCBcIndpZHRoPVwiICsgb3B0aW9ucy5wb3B1cC53aWR0aCArIFwiLGhlaWdodD1cIiArIG9wdGlvbnMucG9wdXAuaGVpZ2h0ICsgXCIsbGVmdD1cIiArIGNlbnRlcldpZHRoICsgXCIsdG9wPVwiICsgY2VudGVySGVpZ2h0ICsgXCIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9eWVzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcHVwID09PSBudWxsIHx8IHR5cGVvZihwb3B1cCk9PSd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gdXJsICsgJyZkaXNjb2Rlcz0nICsgJHNjb3BlLnNwb3QuZGlzY29kZXMgKyAnJm5ld0ZpZWxkPTEnICsgJyZzeW5jaD10cnVlJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnNwb3QuY29udGVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnNwb3QuY29udGVudC5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmICs9ICcmbGluaz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KCRzY29wZS5zcG90LmNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXAuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5iaW5kTmV0ID0ge25hbWU6ZGF0YS5zb2NuZXQsIGRpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzLCBuZXdGaWVsZDoxfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoJHNjb3BlLnNwb3QuY29udGVudCkgJiYgJHNjb3BlLnNwb3QuY29udGVudC5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmluZE5ldC5saW5rID0gJHNjb3BlLnNwb3QuY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc29jVGltZXIgPSAkdGltZW91dCgkc2NvcGUubG9naW5UaW1lciwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEubGlua0NvcnJlY3QgPT0gJ29rJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmtleXMucHVzaChkYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zcG90LmNvbnRlbnQ9Jyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgndGV4dGFyZWEnKS5yZW1vdmVDbGFzcygncHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXNldEN1cnNvcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShkYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxfaGVpZ2h0ID0gJCgnI2Jsb2NrLScgKyBkYXRhLmtleSkub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uZXRVcChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmV0ID0gJHNjb3BlLmdldFBhdHRlcm5JbmQoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5ldCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNvY19wYXR0ZXJuc1tjdXJyZW50TmV0XS5CaW5kQnlQYXN0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoZGF0YS5saW5rQ29ycmVjdCwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKGhvbGRlclRpbWVyKTtcclxuICAgICAgICAgICAgICAgIGhvbGRlclRpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmhpbnRUaW1lciwgMTAwMDApO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjc29jTGlua0hvbGRlciBoNCcpLmh0bWwoZGF0YS5wcm9maWxlSGludCk7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNub3RlSG9sZGVyJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXInKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjc29jTGlua0hvbGRlciBoNCcpLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXIgaDQnKS5mYWRlVG8oODAwLCAwLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoJyNzb2NMaW5rSG9sZGVyIGg0JykuZmFkZVRvKDgwMCwgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKXthbmd1bGFyLmVsZW1lbnQoJyNzb2NMaW5rSG9sZGVyIGg0JykuZmFkZVRvKDgwMCwgMC41LCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjc29jTGlua0hvbGRlciBoNCcpLmZhZGVUbyg4MDAsIDEpO30pfSl9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0LLQvtC30LLRgNCw0YjQsNC10YIg0LjRgdGF0L7QtNC90YvQuSDQv9C70LXQudGB0YXQvtC70LTQtdGAINC90L7QstC+0LPQviDQv9C+0LvRjywg0LLQvNC10YHRgtC+INGB0L7QvtCx0YnQtdC90LjRjyDRgSDQv9GA0L7RgdGM0LHQvtC5INCy0YHRgtCw0LLQuNGC0Ywg0YHRgdGL0LvQutGDINC90LAg0YHQvtGG0YHQtdGC0YxcclxuICAkc2NvcGUuaGludFRpbWVyID0gZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjc29jTGlua0hvbGRlciBoNCcpLnN0b3AoKTtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjc29jTGlua0hvbGRlciBoNCcpLmh0bWwoJycpO1xyXG4gICAgICBpZiAoYW5ndWxhci5lbGVtZW50KCcjbm90ZUhvbGRlcicpLmhhc0NsYXNzKCdoaWRlJykpXHJcbiAgICAgIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NvY0xpbmtIb2xkZXInKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjbm90ZUhvbGRlcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy/QstC+0LfQstGA0LDRiNCw0LXRgiDQuNC90LTQtdC60YEg0YHQvtGG0YHQtdGC0Lgg0LIg0YHQutC+0L/QtSDQv9C+INC40LzQtdC90LhcclxuICAkc2NvcGUuZ2V0UGF0dGVybkluZCA9IGZ1bmN0aW9uKG5ldE5hbWUpe1xyXG4gICAgICB2YXIgY3VycmVudE5ldCA9IC0xO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5zb2NfcGF0dGVybnMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICAgIGlmICgkc2NvcGUuc29jX3BhdHRlcm5zW2ldLm5hbWUgPT0gbmV0TmFtZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjdXJyZW50TmV0ID0gaTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY3VycmVudE5ldDtcclxuICB9O1xyXG5cclxuICAvL9C/0YDQuNCy0Y/Qt9C60LAg0L/QviDQutC90L7Qv9C60LVcclxuICAkc2NvcGUuYmluZFNvY2lhbCAgPSBmdW5jdGlvbihzcG90LCBrZXksIGUpIHtcclxuICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgIHNwb3Qua2V5ID0ga2V5O1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvYmluZFNvY2lhbCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBpZigoZGF0YS5zb2NuZXQgIT0gJ25vJykgJiYgKGRhdGEuc29jbmV0Lmxlbmd0aCA+IDApKXtcclxuICAgICAgICAgIGlmICghZGF0YS5sb2dnZWRJbikge1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgICBpZDogJycsXHJcbiAgICAgICAgICAgICAgcG9wdXA6IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAkc2NvcGUucG9wdXBfd2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICRzY29wZS5wb3B1cF9oZWlnaHRcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlZGlyZWN0X3VyaSA9ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICcvdXNlci9CaW5kU29jTG9naW4/c2VydmljZT0nICsgZGF0YS5zb2NuZXQ7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSByZWRpcmVjdF91cmk7XHJcblxyXG4gICAgICAgICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA+PSAwID8gJyYnIDogJz8nO1xyXG4gICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaT0nKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgdXJsICs9ICdyZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdF91cmkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgIHBvcHVwID0gd2luZG93Lm9wZW4odXJsICsgJyZqcycsIFwieWlpX2VhdXRoX3BvcHVwXCIsIFwid2lkdGg9XCIgKyBvcHRpb25zLnBvcHVwLndpZHRoICsgXCIsaGVpZ2h0PVwiICsgb3B0aW9ucy5wb3B1cC5oZWlnaHQgKyBcIixsZWZ0PVwiICsgY2VudGVyV2lkdGggKyBcIix0b3A9XCIgKyBjZW50ZXJIZWlnaHQgKyBcIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9bm8sdG9vbGJhcj1ubyxtZW51YmFyPW5vLGxvY2F0aW9uPW5vLGRpcmVjdG9yaWVzPW5vLHN0YXR1cz15ZXNcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAocG9wdXAgPT09IG51bGwgfHwgdHlwZW9mKHBvcHVwKT09J3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsICsgJyZkaXNjb2Rlcz0nICsgc3BvdC5kaXNjb2RlcyArICcma2V5PScgKyBzcG90LmtleSArICcmc3luY2g9dHJ1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5iaW5kTmV0ID0ge25hbWU6ZGF0YS5zb2NuZXQsIGRpc2NvZGVzOnNwb3QuZGlzY29kZXMsIGtleTpzcG90LmtleSwgc3BvdEVkaXQ6YW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpfTtcclxuICAgICAgICAgICAgICAgIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5saW5rQ29ycmVjdCA9PSAnb2snKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgIHNwb3RFZGl0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROZXQgPSAkc2NvcGUuZ2V0UGF0dGVybkluZChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5ldCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbY3VycmVudE5ldF0uQmluZEJ5UGFzdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShzcG90LmtleSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubGlua0NvcnJlY3QsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2UgaWYoZGF0YS5saW5rQ29ycmVjdCAhPSAnb2snKXtcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubGlua0NvcnJlY3QsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/Qv9C+0LTQutC70Y7Rh9C10L3QuNC1INCw0LrRhtC40LgsINGC0YDQtdCx0YPRjtGJ0LXQuSDQttC10YLQvtC90LAg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUuY2hlY2tMaWtlID0gZnVuY3Rpb24oaWRfYWN0aW9uLCBlKVxyXG4gIHtcclxuICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBpZDppZF9hY3Rpb24sIGRpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzfTtcclxuICAgICAgdmFyIGFjdDtcclxuICAgICAgXHJcbiAgICAgICRodHRwLnBvc3QoJy91c2VyL2NoZWNrTGlrZScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG5cclxuICAgICAgICAgIGlmICgnbm8nID09IGRhdGEuZXJyb3IpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWYgKCFkYXRhLmlzU29jTG9nZ2VkKVxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJHNjb3BlLnBvcHVwX3dpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAkc2NvcGUucG9wdXBfaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIGRhdGEuc2VydmljZTtcclxuICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlZGlyZWN0X3VyaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHVybCArPSB1cmwuaW5kZXhPZignPycpID49IDAgPyAnJicgOiAnPyc7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigncmVkaXJlY3RfdXJpPScpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB1cmwgKz0gJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0X3VyaSkgKyAnJic7XHJcbiAgICAgICAgICAgICAgICAgIHVybCArPSAnanMnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAgPSB3aW5kb3cub3Blbih1cmwsICd5aWlfZWF1dGhfcG9wdXAnLCAnd2lkdGg9JyArIG9wdGlvbnMucG9wdXAud2lkdGggKyAnLGhlaWdodD0nICsgb3B0aW9ucy5wb3B1cC5oZWlnaHQgKyAnLGxlZnQ9JyArIGNlbnRlcldpZHRoICsgJyx0b3A9JyArIGNlbnRlckhlaWdodCArICcscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9eWVzJyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChwb3B1cCA9PT0gbnVsbCB8fCB0eXBlb2YocG9wdXApPT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gdXJsICsgJyZkaXNjb2Rlcz0nICsgJHNjb3BlLnNwb3QuZGlzY29kZXMgKyAnJmNoZWtfbGlrZT0nICsgaWRfYWN0aW9uO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNraW5nQWN0aW9uID0ge2lkOmlkX2FjdGlvbiwgc2hhcmluZ19pbmQ6ZGF0YS5pbmR9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZChlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdiA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgnZGl2LnNwb3QtaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpa2VUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5saWtlc1RpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIChkYXRhLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUgJiYgIWFuZ3VsYXIuaXNVbmRlZmluZWQoZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICBhY3QgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoJ2Rpdi5zcG90LWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZChlKSlcclxuICAgICAgICAgICAgICAgICAgICAgIGFjdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhY3QuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAgICRzY29wZS5saWtlc1RpbWVyID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICBpZiAoIXBvcHVwLmNsb3NlZCkge1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBpZDokc2NvcGUuY2hlY2tpbmdBY3Rpb24uaWQsIHNoYXJpbmdfaW5kOiRzY29wZS5jaGVja2luZ0FjdGlvbi5zaGFyaW5nX2luZCwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXN9O1xyXG4gICAgICAgICAgJGh0dHAucG9zdCgnL3VzZXIvY2hlY2tMaWtlJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGRhdGEuaXNTb2NMb2dnZWQpIHtcclxuICAgICAgICAgICAgICAgIC8v0LDQutGG0LjRjyDQv9C+0LTQutC70Y7Rh9C10L3QsFxyXG4gICAgICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdi5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25EaXYucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuc2hhcmluZ19sb2dnZWQpIHtcclxuICAgICAgICAgICAgICAgIC8v0LfQsNCy0LXRgNGI0LXQvSDQu9C+0LPQuNC9INC/0L4g0L/QvtGB0LvQtdC00L3QtdC80YMg0YPRgdC70L7QstC40Y5cclxuICAgICAgICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrTGlrZSgkc2NvcGUuY2hlY2tpbmdBY3Rpb24uaWQpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v0LbQtNC10Lwg0LvQvtCz0LjQvdCwXHJcbiAgICAgICAgICAgICAgICBsaWtlVGltZXIgPSAkdGltZW91dCgkc2NvcGUubGlrZXNUaW1lciwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy/QvtGC0YHQu9C10LbQuNCy0LDQtdGCINC40LfQvNC10L3QtdC90LjQtSDRgdGC0LDRgtGD0YHQsCDQsNC60YbQuNC5LCDQvdCw0YXQvtC00Y/RidC40YXRgdGPINCyINC/0YDQvtGG0LXRgdGB0LUg0L/QvtC00LrQu9GO0YfQtdC90LjRj1xyXG4gICAgJHNjb3BlLmxveWFsdHlUaW1lciA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICB2YXIgaXRlbXMgPSBhbmd1bGFyLmVsZW1lbnQoXCIuY29ubmVjdGluZ1wiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsb3lhbHR5X2lkID0gYW5ndWxhci5lbGVtZW50KGl0ZW1zW2ldKS5hdHRyKCdpZCcpLnN1YnN0cmluZyg3KTtcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrTG95YWx0eUNvbm5lY3Rpb24obG95YWx0eV9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxveWFsdHlUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb3lhbHR5VGltZXIsIDEwMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkc2NvcGUuc2V0TG95YWx0eVRpbWVyID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGxveWFsdHlUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb3lhbHR5VGltZXIsIDEwMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkc2NvcGUuY2hlY2tMb3lhbHR5Q29ubmVjdGlvbiA9IGZ1bmN0aW9uKGlkX2FjdGlvbikge1xyXG4gICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGlkOmlkX2FjdGlvbiwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXN9O1xyXG4gICAgICB2YXIgYWN0PWFuZ3VsYXIuZWxlbWVudCgnI2NvdXBvbi0nICsgaWRfYWN0aW9uKTtcclxuICAgICAgJGh0dHAucG9zdCgnL3VzZXIvY2hlY2tMb3lhbHR5Q29ubmVjdGlvbicsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKGRhdGEuY29ubmVjdGVkKSAmJiBkYXRhLmNvbm5lY3RlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBhY3QuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICBhY3QucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgJHNjb3BlLmRpc2FibGVBY3Rpb24gPSBmdW5jdGlvbihlLCBpZF9hY3Rpb24pXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBpZDppZF9hY3Rpb24sIGRpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzfTtcclxuICAgICAgICB2YXIgYWN0O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy91c2VyL2Rpc2FibGVMb3lhbHR5JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICgnbm8nID09IGRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgnZGl2LnNwb3QtaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFjdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgIGFjdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy/QvtC20LjQtNCw0L3QuNC1INC70L7Qs9C40L3QsCDRh9GA0LXQtyDQv9C+0L/QsNC/LCDQtdGB0LvQuCDQt9Cw0LvQvtCz0LjQvdC40LvRgdGPIC0g0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAsINC/0L7QtNGB0LLQtdGC0LrQsCDRgdC+0YbRgdC10YLQuFxyXG4gICAgJHNjb3BlLmxvZ2luVGltZXIgPSBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgIGlmICghcG9wdXAuY2xvc2VkKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBuZXROYW1lOiRzY29wZS5iaW5kTmV0Lm5hbWV9O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy91c2VyL2lzTG9nZ2VkQnlTZXJ2aWNlJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICBpZiAoZGF0YS5sb2dnZWRJbikge1xyXG4gICAgICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5yZXNldEN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBzb2NUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb2dpblRpbWVyLCAxMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4vKlxyXG4gICAgLy/Qv9GA0LjQstGP0LfQutCwINGB0L7RhtGB0LXRgtC4INC4INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwLCDQtdGB0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LfQsNC70L7Qs9C40L3QuNC70YHRjyDRh9C10YDQtdC3INGB0L7RhtGB0LXRgtGMXHJcbiAgICAkc2NvcGUubG9naW5UaW1lciA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgaWYgKCFwb3B1cC5jbG9zZWQpIHtcclxuICAgICAgICB2YXIgbmV0UGFyYW1zID0ge25hbWU6JHNjb3BlLmJpbmROZXQubmFtZSwgZGlzY29kZXM6JHNjb3BlLmJpbmROZXQuZGlzY29kZXMsIGtleTokc2NvcGUuYmluZE5ldC5rZXl9O1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5iaW5kTmV0Lm5ld0ZpZWxkKSAmJiAxID09ICRzY29wZS5iaW5kTmV0Lm5ld0ZpZWxkKVxyXG4gICAgICAgICAgICBuZXRQYXJhbXMubmV3RmllbGQgPSAxO1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5iaW5kTmV0LmxpbmspICYmICRzY29wZS5iaW5kTmV0LmxpbmsubGVuZ3RoKVxyXG4gICAgICAgICAgICBuZXRQYXJhbXMubGluayA9ICRzY29wZS5iaW5kTmV0Lmxpbms7XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgYmluZE5ldDpuZXRQYXJhbXN9O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9zcG90L2JpbmRlZENvbnRlbnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAodHlwZW9mIChkYXRhLmxvZ2dlZEluKSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgKGRhdGEubGlua0NvcnJlY3QpICE9ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgIGlmIChkYXRhLmxvZ2dlZEluKXtcclxuICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgaWYoZGF0YS5saW5rQ29ycmVjdCA9PSAnb2snKXtcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5uZXdGaWVsZCl7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhZGQtY29udGVudCcpLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudD0nJztcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgndGV4dGFyZWEnKS5yZW1vdmVDbGFzcygncHV0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc2V0Q3Vyc29yKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3AgLSAxMDA7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICAgICAgICAgIH0sIDYwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdmFyIHNwb3RFZGl0ID0gJHNjb3BlLmJpbmROZXQuc3BvdEVkaXQ7XHJcbiAgICAgICAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShkYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmJpbmROZXQgPSB7fTtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnROZXQgPSAkc2NvcGUuZ2V0UGF0dGVybkluZChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50TmV0ID4gLTEpXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2N1cnJlbnROZXRdLkJpbmRCeVBhc3RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoZGF0YS5saW5rQ29ycmVjdCwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBzb2NUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb2dpblRpbWVyLCAxMDAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuKi9cclxuICAvL9Ce0YLQstGP0LfQutCwINGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLnVuQmluZFNvY2lhbCAgPSBmdW5jdGlvbihzcG90LCBrZXksIGUpIHtcclxuICAgIHNwb3Qua2V5ID0ga2V5O1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvVW5CaW5kU29jaWFsJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICBpZiAoZGF0YS5uZXREb3duKVxyXG4gICAgICAgICAgICAkc2NvcGUubmV0RG93bihkYXRhLm5ldERvd24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZ2V0U29jUGF0dGVybnMgPSBmdW5jdGlvbigpe1xyXG4gICAgJHNjb3BlLmZyZWVTb2NpYWwgPSB0cnVlO1xyXG4gICAgaWYgKHR5cGVvZiAoJHNjb3BlLnNvY19wYXR0ZXJucykgPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICB7XHJcbiAgICAgIHZhciBkYXRhID0ge3Rva2VuOiRzY29wZS51c2VyLnRva2VufTtcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvU29jUGF0dGVybnMnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zID0gZGF0YS5zb2NfcGF0dGVybnM7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc29jX3BhdHRlcm5zLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgKCRzY29wZS5zb2NfcGF0dGVybnNbaV0uQmluZEJ5UGFzdGUpID09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5CaW5kQnlQYXN0ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy/Rg9GB0YLQsNC90L7QstC60LAg0YDQsNC30LzQtdGAINC/0YDQvtC40LPRgNGL0LLQsNGC0LXQu9GPIFlvdVR1YmUg0LjQu9C4IFZpbWVvXHJcbiAgJHNjb3BlLnNldFZpZGVvU2l6ZSA9IGZ1bmN0aW9uKGJsb2NrS2V5KVxyXG4gIHtcclxuICAgIHZhciBwbGF5ZXI7XHJcbiAgICBpZiAoYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGJsb2NrS2V5ICsgJyAudmlkZW8tdmltZW8nKS5sZW5ndGggPT0gMSlcclxuICAgIHtcclxuICAgICAgcGxheWVyID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGJsb2NrS2V5ICsgJyAudmlkZW8tdmltZW8nKTtcclxuICAgICAgcGxheWVyLmNzcygnd2lkdGgnLCAnMTAwJScpO1xyXG4gICAgICBwbGF5ZXIuY3NzKCdoZWlnaHQnLCAocGFyc2VJbnQocGxheWVyLmNzcygnd2lkdGgnKSwgMTApIC8gcGxheWVyLmF0dHIoJ3JlbCcpICsgJ3B4JykpO1xyXG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgYmxvY2tLZXkgKyAnIC55dF9wbGF5ZXInKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgIHBsYXllciA9IGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBibG9ja0tleSArICcgLnl0X3BsYXllcicpO1xyXG4gICAgICBwbGF5ZXIuY3NzKCd3aWR0aCcsICcxMDAlJyk7XHJcbiAgICAgIHBsYXllci5jc3MoJ2hlaWdodCcsIChwYXJzZUludChwbGF5ZXIuY3NzKCd3aWR0aCcpLCAxMCkgLyBwbGF5ZXIuYXR0cigncmVsJykgKyAncHgnKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4gICRzY29wZS5zZXROZXdQYXNzID0gZnVuY3Rpb24oc3BvdClcclxuICB7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zZXRTcG90UGFzcycsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nICYmIHR5cGVvZiAoZGF0YS5zYXZlZCkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNzYXZlUGFzc0J1dHRvbicpLnRleHQoZGF0YS5zYXZlZCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoJHNjb3BlLnNwb3QucGFzcykgIT0gJ3VuZGVmaW5lZCcgJiYgc3BvdC5wYXNzLmxlbmd0aClcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcmVzZXRQYXNzQnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcmVzZXRQYXNzQnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NldFBhc3NGb3JtIGlucHV0W25hbWU9bmV3UGFzc10nKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlc2V0UGFzcyA9IGZ1bmN0aW9uKHNwb3QpXHJcbiAge1xyXG4gICAgc3BvdC5wYXNzID0gJyc7XHJcbiAgICAkc2NvcGUuc2V0TmV3UGFzcyhzcG90KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc2F2ZVBhc3NCdXR0b25UZXh0ID0gZnVuY3Rpb24odGV4dClcclxuICB7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNzYXZlUGFzc0J1dHRvbicpLnRleHQodGV4dCk7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNzZXRQYXNzRm9ybSBpbnB1dFtuYW1lPW5ld1Bhc3NdJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmNoZWNrU3RhdHVzU3BvdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlc2V0Q3Vyc29yID0gZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5jdXJzb3JCb2R5KSAmJiAkc2NvcGUuY3Vyc29yQm9keS5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLmNzcygnY3Vyc29yJywgJHNjb3BlLmN1cnNvckJvZHkpO1xyXG4gICAgICBkZWxldGUgJHNjb3BlLmN1cnNvckJvZHk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLmNzcygnY3Vyc29yJywgJ2RlZmF1bHQnKTtcclxuXHJcbiAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuY3Vyc29yVGV4dGFyZWEpICYmICRzY29wZS5jdXJzb3JUZXh0YXJlYS5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Ryb3Bib3ggdGV4dGFyZWEnKS5jc3MoJ2N1cnNvcicsICRzY29wZS5jdXJzb3JUZXh0YXJlYSk7XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuY3Vyc29yVGV4dGFyZWE7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Ryb3Bib3ggdGV4dGFyZWEnKS5jc3MoJ2N1cnNvcicsICd0ZXh0Jyk7XHJcbiAgfTtcclxuXHJcbiAgLy/QuNC30LzQtdC90LXQvdC40LUg0YHRgtGA0LDQvdC40YbRiyDRhNC40LvRjNGC0YDQsCDQutGD0L/QvtC90L7QslxyXG4gICRzY29wZS4kd2F0Y2goJ2FjdGlvbnMucGFnZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmFjdGlvbnMub2Zmc2V0ID0gMDtcclxuICAgICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCA9IDA7XHJcbiAgICAkc2NvcGUubGlzdENvdXBvbnMoJHNjb3BlLnNwb3QsICRzY29wZS5hY3Rpb25zKTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLmNvdXBvbnNTY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzID0gZmFsc2U7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQod2luZG93KS5iaW5kKCdzY3JvbGwnLCAkc2NvcGUubG9hZE1vcmVDb3Vwb25zKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUubG9hZE1vcmVDb3Vwb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZihhbmd1bGFyLmVsZW1lbnQod2luZG93KS5zY3JvbGxUb3AoKSArIGFuZ3VsYXIuZWxlbWVudCh3aW5kb3cpLmhlaWdodCgpID49IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuaGVpZ2h0KCkgLSAyMDAgJiYgISRzY29wZS5hY3Rpb25zLmluX3Byb2dyZXNzICYmICRzY29wZS5hY3Rpb25zLm9mZnNldCA8ICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCkge1xyXG4gICAgICAgICRzY29wZS5saXN0Q291cG9ucygkc2NvcGUuc3BvdCwgJHNjb3BlLmFjdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuaW5pdFRyYW5zcG9ydFR5cGUgPSBmdW5jdGlvbih0eXBlX2lkLCB0eXBlX25hbWUsIHR5cGVfaW1nKSB7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X3R5cGVzWyRzY29wZS50cmFuc3BvcnRfdHlwZXMubGVuZ3RoXSA9IHtpZDp0eXBlX2lkLCBuYW1lOnR5cGVfbmFtZSwgaW1nOnR5cGVfaW1nfTtcclxuICB9O1xyXG4gIFxyXG4gIC8v0JLRi9Cx0L7RgCDQt9Cw0LTQvdC40LrQsCDRgtGA0LDQvdGB0L/QvtGA0YLQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS5zZXRUeXBlID0gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgJHNjb3BlLmN1c3RvbV9jYXJkLmJhY2sgPSB0eXBlLmlkO1xyXG5cclxuICAgIGlmICh0eXBlLmltZyl7XHJcbiAgICAgICQoJyNjYXJkLWJhY2snKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC91cGxvYWRzL3RyYW5zcG9ydC8nICsgdHlwZS5pbWcgKyAnKScpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvL9CX0LDQs9GA0YPQt9C60LAg0LrQsNGA0YLQuNC90LrQuCDQtNC70Y8g0LzQsNC60LXRgtCwINGC0YDQsNC90YHQv9C+0YDRgtC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNlbmRJbWcgPSBmdW5jdGlvbihlbCkge1xyXG4gICAgdmFyIGZvcm0gPSAkKGVsKS5wYXJlbnRzKCdmb3JtJyk7XHJcbiAgICBpZiAoJChlbCkudmFsKCkgPT09ICcnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgZGlzY29kZXNfaW5wdXQgPSBmb3JtLmNoaWxkcmVuKCdpbnB1dFtuYW1lPWRpc2NvZGVzX2lkXScpO1xyXG4gICAgdmFyIHRva2VuX2lucHV0ID0gZm9ybS5jaGlsZHJlbignaW5wdXRbbmFtZT10b2tlbl0nKTtcclxuICAgIHZhciB0eXBlX2lucHV0ID0gZm9ybS5jaGlsZHJlbignaW5wdXRbbmFtZT1pbWdfdHlwZV0nKTtcclxuICAgIHZhciBmb3JtX3NwYW4gPSBmb3JtLmZpbmQoJ3NwYW4udXBsb2FkLWhvbGRlcicpO1xyXG4gICAgdmFyIGZvcm1faWNvbiA9IGZvcm0uZmluZCgnaS51cGxvYWQtaG9sZGVyJyk7XHJcbiAgICB2YXIgZm9ybV9pbWcgPSBmb3JtLmZpbmQoJ2ltZy51cGxvYWQtaG9sZGVyJyk7XHJcbiAgICBcclxuICAgIHZhciBzcG90ID0gY29udGVudFNlcnZpY2UuZ2V0U3BvdCgpO1xyXG4gICAgXHJcbiAgICBpZiAoZGlzY29kZXNfaW5wdXQubGVuZ3RoKVxyXG4gICAgICAgIGRpc2NvZGVzX2lucHV0LnZhbChzcG90LmRpc2NvZGVzKTtcclxuICAgICAgICBcclxuICAgIGlmICh0b2tlbl9pbnB1dC5sZW5ndGgpXHJcbiAgICAgICAgdG9rZW5faW5wdXQudmFsKHNwb3QudG9rZW4pO1xyXG5cclxuICAgIGZvcm0uYWpheFN1Ym1pdCh7XHJcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGpzb25fZGF0YSwgc3RhdHVzVGV4dCwgeGhyLCBmb3JtKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gYW5ndWxhci5mcm9tSnNvbihqc29uX2RhdGEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3I9XCJub1wiKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGZvcm1fc3Bhbi5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICBmb3JtX3NwYW4uYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICBpZiAoZm9ybV9pY29uLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIGZvcm1faWNvbi5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGZvcm1faW1nLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgZm9ybV9pbWcuYXR0cihcInNyY1wiLCBkYXRhLnBhdGggKyAnP3Zlcj0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJ3RyYW5zcG9ydF9waG90bycgPT0gdHlwZV9pbnB1dC52YWwoKSlcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbV9jYXJkLnBob3RvID0gZGF0YS5wYXRoO1xyXG4gICAgICAgICAgICAgICAgIGVsc2UgaWYgKCd0cmFuc3BvcnRfbG9nbycgPT0gdHlwZV9pbnB1dC52YWwoKSlcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbV9jYXJkLmxvZ28gPSBkYXRhLnBhdGg7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnNob3dJbWFnZUNyb3BwZXIgPSBmYWxzZTtcclxuICAkc2NvcGUuc2hvd0xvZ29Dcm9wcGVyID0gZmFsc2U7XHJcbiAgXHJcbiAgJHNjb3BlLnNldFNwb3QgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnRlbnRTZXJ2aWNlLnNldFNwb3QoJHNjb3BlLnNwb3QpO1xyXG4gIH1cclxuICBcclxuICAvL9CX0LDQutCw0Lcg0YLRgNCw0L3RgdC/0L7RgNGC0L3QvtC5INC60LDRgNGC0Ysg0L/QviDQvNCw0LrQtdGC0YNcclxuICAkc2NvcGUub3JkZXJUcmFuc3BvcnRDYXJkID0gZnVuY3Rpb24oY3VzdG9tX2NhcmQsIHZhbGlkLCBtZXNzYWdlX3RleHQpIHtcclxuICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgc3BvdCA9IGNvbnRlbnRTZXJ2aWNlLmdldFNwb3QoKTtcclxuICAgIGN1c3RvbV9jYXJkLnRva2VuID0gc3BvdC50b2tlbjtcclxuICAgIGN1c3RvbV9jYXJkLmRpc2NvZGVzID0gc3BvdC5kaXNjb2RlcztcclxuICAgIFxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvb3JkZXJUcmFuc3BvcnRDYXJkJywgY3VzdG9tX2NhcmQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmICgnbm8nID09IGRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICRzY29wZS5oaWRlQ3VzdG9tQ2FyZCgpO1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKG1lc3NhZ2VfdGV4dCwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8v0JfQsNC60LDQtyDQutCw0YDRgtGLINCT0KPQoyDQv9C+INC80LDQutC10YLRg1xyXG4gICRzY29wZS5vcmRlckN1c3RvbUNhcmQgPSBmdW5jdGlvbihjdXN0b21fY2FyZCwgdmFsaWQsIG1lc3NhZ2VfdGV4dCkge1xyXG4gICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICgkc2NvcGUuaXNEb3VibGVDYXJkKGN1c3RvbV9jYXJkKSkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwoXCLQktGLINGD0LbQtSDQt9Cw0LrQsNC30LDQu9C4INGN0YLRgyDQutCw0YDRgtGDXCIsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gZmFsc2U7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICRzY29wZS5zYXZlQ2FyZFBhcmFtcyhjdXN0b21fY2FyZCk7XHJcbiAgICBcclxuICAgICRodHRwLnBvc3QoJy9zcG90L29yZGVyQ3VzdG9tQ2FyZCcsIGN1c3RvbV9jYXJkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5tZXNzYWdlTW9kYWwobWVzc2FnZV90ZXh0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgIGN1c3RvbV9jYXJkLm51bWJlciA9IGRhdGEubnVtYmVyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuc2F2ZUNhcmRQYXJhbXMgPSBmdW5jdGlvbihjYXJkKSB7XHJcbiAgICBmb3IocHJvcGVydHkgaW4gY2FyZCkge1xyXG4gICAgICAgICRzY29wZS5wcmV2X2N1c3RvbV9jYXJkW3Byb3BlcnR5XSA9IGNhcmRbcHJvcGVydHldO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaXNEb3VibGVDYXJkID0gZnVuY3Rpb24oY2FyZCkge1xyXG4gICAgZm9yKHByb3BlcnR5IGluIGNhcmQpIHsgXHJcbiAgICAgICAgaWYgKHByb3BlcnR5ICE9ICdudW1iZXInICYmICRzY29wZS5wcmV2X2N1c3RvbV9jYXJkW3Byb3BlcnR5XSAhPSBjYXJkW3Byb3BlcnR5XSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvL9GC0YDQuNCz0LXRgCDQvdCwINGB0L3Rj9GC0LjQtSDQvtGI0LjQsdC60Lgg0LTQu9GPINC80LDQutC10YLQsCDRgtGA0LDQvdGB0L/QvtGA0YLQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS4kd2F0Y2goJ2N1c3RvbV9jYXJkLnNoaXBwaW5nX25hbWUgKyBjdXN0b21fY2FyZC5waG9uZSArIGN1c3RvbV9jYXJkLmFkZHJlc3MgKyBjdXN0b21fY2FyZC5jaXR5ICsgY3VzdG9tX2NhcmQuemlwICsgY3VzdG9tX2NhcmQuZW1haWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gZmFsc2U7XHJcbiAgfSk7XHJcbiAgXHJcbiAgJHNjb3BlLiR3YXRjaCgnd2FsbGV0X2hpc3RvcnkuZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmxpc3RIaXN0b3J5KCRzY29wZS53YWxsZXRfaGlzdG9yeS5kYXRlKTtcclxuICB9KTtcclxuICBcclxuICAkc2NvcGUubGlzdEhpc3RvcnkgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgdmFyIGRhdGEgPSB7J2Rpc2NvZGVzJzogJHNjb3BlLnNwb3QuZGlzY29kZXMsICd0b2tlbic6ICRzY29wZS5zcG90LnRva2VuLCAnZGF0ZSc6ZGF0ZX07XHJcbiAgICBcclxuICAgIGJsb2NrX2hpc3RvcnkgPSBhbmd1bGFyLmVsZW1lbnQoJyNoaXN0b3J5LXdyYXBwZXInKTtcclxuICAgIFxyXG4gICAgYmxvY2tfaGlzdG9yeS5lbXB0eSgpO1xyXG4gICAgJHNjb3BlLndhbGxldF9oaXN0b3J5LmVtcHR5X2RhdGUgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvbGlzdEhpc3RvcnknLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgYmxvY2tfaGlzdG9yeS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICBpZiAoZGF0YS5lbXB0eV9mb3JfZGF0ZSlcclxuICAgICAgICAgICAgJHNjb3BlLndhbGxldF9oaXN0b3J5LmVtcHR5X2RhdGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLmN1c3RvbUNhcmRJbml0ID0gZnVuY3Rpb24oZGVmYXVsdHMpIHtcclxuICAgICAkc2NvcGUuY3VzdG9tX2NhcmQgPSBhbmd1bGFyLmZyb21Kc29uKGRlZmF1bHRzKTsgXHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5zaG93RGF0ZXBpY2tlciA9IGZ1bmN0aW9uKHNlbGVjdG9yKXtcclxuICAgIGlmICgkc2NvcGUuZGF0ZV9oaXN0b3J5X3Nob3duKVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgICRzY29wZS5kYXRlX2hpc3Rvcnlfc2hvd24gPSB0cnVlO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KHNlbGVjdG9yKS5kYXRlcGlja2VyKFwic2hvd1wiKTsgICBcclxuICB9XHJcbiAgXHJcbiAgLy/Qv9GA0LjQstGP0LfQutCwINC90L7QstC+0LPQviDRgtC10LvQtdGE0L7QvdCwINC6INGB0L/QvtGC0YNcclxuICAkc2NvcGUuYWRkUGhvbmUgPSBmdW5jdGlvbihwaG9uZSwgdmFsaWQpIHtcclxuICAgIGlmICghdmFsaWQpIFxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6ICRzY29wZS5zcG90LmRpc2NvZGVzLCAndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ3Bob25lJzogcGhvbmV9XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9hZGRQaG9uZScsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUubmV3X3Bob25lID0gJyc7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGhvbmVzLWxpc3QnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5yZW1vdmVQaG9uZSA9IGZ1bmN0aW9uKHBob25lLCBlKSB7XHJcbiAgICB2YXIgZGF0YSA9IHsnZGlzY29kZXMnOiAkc2NvcGUuc3BvdC5kaXNjb2RlcywgJ3Rva2VuJzogJHNjb3BlLnNwb3QudG9rZW4sICdwaG9uZSc6IHBob25lfVxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlUGhvbmUnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgdmFyIHBob25lSXRlbSA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5waG9uZS1yb3cnKTtcclxuICAgICAgICBwaG9uZUl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuYWN0aXZhdGVTY2hvb2xFeHRlbmRlZCA9IGZ1bmN0aW9uKGFkZHJlc3MpIHtcclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6ICRzY29wZS5zcG90LmRpc2NvZGVzLCAndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ2FkZHJlc3MnOmFkZHJlc3N9XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9hY3RpdmF0ZVNjaG9vbGxFeHRlbmRlZCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUuaG9tZV9hZGRyZXNzID0gJyc7XHJcbiAgICAgICAgdmFyIFBob25lU2VydmljZXMgPSBhbmd1bGFyLmVsZW1lbnQoJyNwaG9uZV9zZXJ2aWNlcycpO1xyXG4gICAgICAgIFBob25lU2VydmljZXMuZW1wdHkoKTtcclxuICAgICAgICBQaG9uZVNlcnZpY2VzLmFwcGVuZCgkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gICRzY29wZS5yZW1vdmVTY2hvb2xFeHRlbmRlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGRhdGEgPSB7J2Rpc2NvZGVzJzogJHNjb3BlLnNwb3QuZGlzY29kZXMsICd0b2tlbic6ICRzY29wZS5zcG90LnRva2VufVxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVtb3ZlU2Nob29sbEV4dGVuZGVkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS5ob21lX2FkZHJlc3MgPSAnJztcclxuICAgICAgICB2YXIgUGhvbmVTZXJ2aWNlcyA9IGFuZ3VsYXIuZWxlbWVudCgnI3Bob25lX3NlcnZpY2VzJyk7XHJcbiAgICAgICAgUGhvbmVTZXJ2aWNlcy5lbXB0eSgpO1xyXG4gICAgICAgIFBob25lU2VydmljZXMuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAvLyDQkdC70L7QutC40YDQvtCy0LrQsCDQutCw0YDRgtGLINCi0YDQvtC50LrQsFxyXG4gICRzY29wZS5ibG9ja1Ryb2lrYSA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIGRpYWxvZ1NlcnZpY2UueWVzTm9EaWFsb2coZnVuY3Rpb24oZGlhbG9nX3Jlc3VsdCkge1xyXG4gICAgICBpZiAoZGlhbG9nX3Jlc3VsdCAhPSAneWVzJylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICBcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvYmxvY2tUcm9pa2EnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrVHJvaWthJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyMnK3Nwb3QuZGlzY29kZXMpLmFkZENsYXNzKCdpbnZpc2libGUnKTtcclxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgICRzY29wZS50ZXh0Lnllc19idG4sXHJcbiAgICAkc2NvcGUudGV4dC5ub19idG4sXHJcbiAgICAkc2NvcGUudGV4dC5ibG9ja190cm9pa2EsXHJcbiAgICAnbmVnYXRpdmUnXHJcbiAgICApO1xyXG4gIH07XHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ1Byb2R1Y3RDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJHRpbWVvdXQsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICBcclxuICAgICRzY29wZS5ob3N0X3R5cGUgPSAnZGVza3RvcCc7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X2NhcmQgPSB7fTtcclxuICAgICRzY29wZS5zaW1wbGVfY2FyZCA9IHt9O1xyXG4gICAgJHNjb3BlLnRyYW5zcG9ydF90eXBlcyA9IFtdO1xyXG4gICAgICBcclxuICAgICRzY29wZS5TdG9yZUluaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW59O1xyXG5cclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvZ2V0UHJpY2VMaXN0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBkYXRhLnByb2R1Y3RzO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzID0gZGF0YS5zZXR0aW5ncztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTaXplID0gJHNjb3BlLnByb2R1Y3RzW2ldLnNpemVbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3IgPSAkc2NvcGUucHJvZHVjdHNbaV0uY29sb3JbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkU3VyZmFjZSA9ICRzY29wZS5wcm9kdWN0c1tpXS5zdXJmYWNlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OlwiMHB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRDb2xvciAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5wcm9kdWN0c1tpXS5waG90by5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1ZmZpeCA9ICdfJyArICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5wcm9kdWN0c1tpXS5waG90by5sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG9bal0uc3Vic3RyaW5nKDAsICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5sYXN0SW5kZXhPZignLicpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLnN1YnN0cihuYW1lLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpID09IHN1ZmZpeClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaiAqIC0xKSArIFwicHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHNUb3AgPSA5MDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmNvbG9yLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRzVG9wICs9IDE1NTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvLmxlbmd0aCA+IDMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRzVG9wIC09IDU2O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uZGVzY3JpcHRpb24ubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHNUb3AgKz0gKCRzY29wZS5wcm9kdWN0c1tpXS5kZXNjcmlwdGlvbi5sZW5ndGgvNzYuNSkgKiAxMDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0udGh1bWJTaGVsbFN0eWxlID0ge3RvcDoodHNUb3ArXCJweFwiKX07XHJcbiAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2JvZHknKS5yZW1vdmVDbGFzcygnb3ZlcmZsb3ctaCcpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5tLWNvdmVyLXByZWxvYWQnKS5mYWRlT3V0KDYwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBJTUFHRV9XSURUSCA9IDI0MjtcclxuXHJcbiAgICAkc2NvcGUuc2Nyb2xsVG8gPSBmdW5jdGlvbihpbWFnZSxpbmQsIGpzSUQpIHtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaW5kICogLTEpICsgXCJweFwifTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmFkZFRvQ2FydCA9IGZ1bmN0aW9uIGFkZFRvQ2FydChqc0lEKXtcclxuICAgICAgICBpZigkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHkgPCAxKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoJHNjb3BlLmluUmVxdWVzdCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoJ3Ryb2lrYScgPT0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnR5cGUpIHtcclxuICAgICAgICAgICRzY29wZS5zaG93Q29uc3RydWN0b3JUcm9pa2EoJHNjb3BlLnByb2R1Y3RzW2pzSURdLCBqc0lEKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCdzaW1wbGUnID09ICRzY29wZS5wcm9kdWN0c1tqc0lEXS50eXBlKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc2hvd0NvbnN0cnVjdG9yU2ltcGxlKCRzY29wZS5wcm9kdWN0c1tqc0lEXSwganNJRCk7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTsgICAgICAgIFxyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sXHJcbiAgICAgICAgICAgIGlkIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLmlkLFxyXG4gICAgICAgICAgICBxdWFudGl0eSA6IHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSksXHJcbiAgICAgICAgICAgIHNlbGVjdGVkQ29sb3IgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvcixcclxuICAgICAgICAgICAgc2VsZWN0ZWRTdXJmYWNlIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU3VyZmFjZSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRTaXplIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L2FkZFRvQ2FydCcpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRlZDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pdGVtcy5jb3VudCArPSBwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhc2tldCA9IGFuZ3VsYXIuZWxlbWVudCgnYS5pY29uLWJhZy1saW5rIHNwYW4nKTtcclxuICAgICAgICAgICAgICAgIGJhc2tldC50ZXh0KCRzY29wZS5pdGVtcy5jb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycm9yKXskc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7fSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAkc2NvcGUuYWRkVHJhbnNwb3J0Q2FyZCA9IGZ1bmN0aW9uKHRyYW5zcG9ydF9jYXJkKSB7XHJcbiAgICAgdHJhbnNwb3J0X2NhcmQudG9rZW4gPSAkc2NvcGUudXNlci50b2tlbjtcclxuICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvYWRkQ3VzdG9tQ2FyZCcpLCB0cmFuc3BvcnRfY2FyZCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNVbmRlZmluZWQoJHNjb3BlLnRyYW5zcG9ydElkKSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1skc2NvcGUudHJhbnNwb3J0SWRdLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkZWQ7XHJcbiAgICAgICAgICAgICRzY29wZS5pdGVtcy5jb3VudCArPSAxO1xyXG4gICAgICAgICAgICB2YXIgYmFza2V0ID0gYW5ndWxhci5lbGVtZW50KCdhLmljb24tYmFnLWxpbmsgc3BhbicpO1xyXG4gICAgICAgICAgICBiYXNrZXQudGV4dCgkc2NvcGUuaXRlbXMuY291bnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICBcclxuICAgICRzY29wZS5oaWRlQ29uc3RydWN0b3JUcm9pa2EoKTtcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLmFkZFNpbXBsZUNhcmQgPSBmdW5jdGlvbihzaW1wbGVfY2FyZCkge1xyXG4gICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9hZGRDdXN0b21DYXJkJyksIHNpbXBsZV9jYXJkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZCgkc2NvcGUuc2ltcGxlSWQpKVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzWyRzY29wZS5zaW1wbGVJZF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRlZDtcclxuICAgICAgICAgICAgJHNjb3BlLml0ZW1zLmNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgIHZhciBiYXNrZXQgPSBhbmd1bGFyLmVsZW1lbnQoJ2EuaWNvbi1iYWctbGluayBzcGFuJyk7XHJcbiAgICAgICAgICAgIGJhc2tldC50ZXh0KCRzY29wZS5pdGVtcy5jb3VudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgJHNjb3BlLmhpZGVDb25zdHJ1Y3RvclNpbXBsZSgpO1xyXG4gIH1cclxuICAgIFxyXG4gIC8v0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQutCw0YHRgtC+0LzQvdC+0LPQviDQvNCw0LrQtdGC0LAg0YLRgNCw0L3RgdC/0L7RgtGA0L3QvtC5INC60LDRgNGC0YtcclxuICAkc2NvcGUuc2hvd0NvbnN0cnVjdG9yVHJvaWthID0gZnVuY3Rpb24ocHJvZHVjdCwganNJRCkge1xyXG4gICAgJHNjb3BlLnRyYW5zcG9ydF9jYXJkLmlkID0gcHJvZHVjdC5pZDtcclxuICAgICRzY29wZS50cmFuc3BvcnRJZCA9IGpzSUQ7XHJcbiAgICAkKCcjY29uc3RydWN0b3ItdHJvaWthJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaGlkZUNvbnN0cnVjdG9yVHJvaWthID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkKCcjY29uc3RydWN0b3ItdHJvaWthJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xyXG4gIH1cclxuICBcclxuICAvL9Ce0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQsNGB0YLQvtC80L3QvtCz0L4g0LzQsNC60LXRgtCwXHJcbiAgJHNjb3BlLnNob3dDb25zdHJ1Y3RvclNpbXBsZSA9IGZ1bmN0aW9uKHByb2R1Y3QsIGpzSUQpe1xyXG4gICAgJHNjb3BlLnNpbXBsZV9jYXJkLmlkID0gcHJvZHVjdC5pZDtcclxuICAgICRzY29wZS5zaW1wbGVJZCA9IGpzSUQ7XHJcbiAgICAkKCcjY29uc3RydWN0b3Itc2ltcGxlJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaGlkZUNvbnN0cnVjdG9yU2ltcGxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkKCcjY29uc3RydWN0b3Itc2ltcGxlJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJycpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaW5pdFRyYW5zcG9ydFR5cGUgPSBmdW5jdGlvbih0eXBlX2lkLCB0eXBlX25hbWUsIHR5cGVfaW1nKSB7XHJcbiAgICAkc2NvcGUudHJhbnNwb3J0X3R5cGVzWyRzY29wZS50cmFuc3BvcnRfdHlwZXMubGVuZ3RoXSA9IHtpZDp0eXBlX2lkLCBuYW1lOnR5cGVfbmFtZSwgaW1nOnR5cGVfaW1nfTtcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5zaG93Q2FyZFBhdHRlcm4gPSBmdW5jdGlvbigpIHtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI2NhcmQtbWVudScpLmhpZGUoKTtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI2NhcmQtcGF0dGVybicpLnNob3coKTtcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLmhpZGVDYXJkUGF0dGVybiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcjY2FyZC1tZW51Jykuc2hvdygpO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcjY2FyZC1wYXR0ZXJuJykuaGlkZSgpO1xyXG4gICAgXHJcbiAgICAkc2NvcGUuY2xlYXJGb3JtSW1nKCcjZm9ybS1waG90bycpO1xyXG4gICAgJHNjb3BlLmNsZWFyRm9ybUltZygnI2Zvcm0tbG9nbycpO1xyXG4gICAgXHJcbiAgICBkZWxldGUoJHNjb3BlLnRyYW5zcG9ydF9jYXJkLm5hbWUpO1xyXG4gICAgZGVsZXRlKCRzY29wZS50cmFuc3BvcnRfY2FyZC5wb3NpdGlvbik7XHJcbiAgICBkZWxldGUoJHNjb3BlLnRyYW5zcG9ydF9jYXJkLnBob3RvKTtcclxuICAgIGRlbGV0ZSgkc2NvcGUudHJhbnNwb3J0X2NhcmQubG9nbyk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5jbGVhckZvcm1JbWcgPSBmdW5jdGlvbihmb3JtX3NlbGVjdG9yKVxyXG4gIHtcclxuICAgIHZhciBmb3JtID0gYW5ndWxhci5lbGVtZW50KGZvcm1fc2VsZWN0b3IpO1xyXG4gICAgdmFyIGZvcm1fbGFiZWwgPSBmb3JtLmZpbmQoJ2xhYmVsLmZhY2UtaG9sZGVyJyk7XHJcbiAgICB2YXIgaW1nX2Nyb3AgPSBmb3JtLmZpbmQoJy5uZy1pbWFnZS1jcm9wJyk7XHJcbiAgICB2YXIgZGl2X3VwbG9hZCA9IGZvcm0uZmluZCgnLnVwbG9hZC1waG90bycpO1xyXG4gICAgXHJcbiAgICBmb3JtX2xhYmVsLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICBpbWdfY3JvcC5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgaWYgKGRpdl91cGxvYWQubGVuZ3RoKVxyXG4gICAgICAgIGRpdl91cGxvYWQucmVtb3ZlQ2xhc3MoJ25vYm9yZGVyJyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8v0JLRi9Cx0L7RgCDQt9Cw0LTQvdC40LrQsCDRgtGA0LDQvdGB0L/QvtGA0YLQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS5zZXRUeXBlID0gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgJHNjb3BlLnRyYW5zcG9ydF9jYXJkLmJhY2sgPSB0eXBlLmlkO1xyXG5cclxuICAgIGlmICh0eXBlLmltZyl7XHJcbiAgICAgICQoJyNjYXJkLWJhY2snKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC91cGxvYWRzL3RyYW5zcG9ydC8nICsgdHlwZS5pbWcgKyAnKScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgICAkc2NvcGUuc2l6ZUNsYXNzID0gZnVuY3Rpb24oc2VsZWN0ZWRTaXplLCBzaXplKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkU2l6ZSA9PT0gc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jb2xvckNsYXNzID0gZnVuY3Rpb24oc2VsZWN0ZWRDb2xvciwgY29sb3IpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRDb2xvciA9PT0gY29sb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc3VyZmFjZUNsYXNzID0gZnVuY3Rpb24oc2VsZWN0ZWRTdXJmYWNlLCBzdXJmYWNlKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkU3VyZmFjZSA9PT0gc3VyZmFjZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRTaXplID0gZnVuY3Rpb24oanNJRCwgc2l6ZSl7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZSA9IHNpemU7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkVG9DYXJ0O1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0Q29sb3IgPSBmdW5jdGlvbihqc0lELCBjb2xvcil7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkQ29sb3IgPSBjb2xvcjtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90by5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgdmFyIHN1ZmZpeCA9ICdfJyArIGNvbG9yO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90by5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG9baV0uc3Vic3RyaW5nKDAsICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90b1tpXS5sYXN0SW5kZXhPZignLicpKTtcclxuICAgICAgICAgICAgICAgIGlmIChuYW1lLnN1YnN0cihuYW1lLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpID09IHN1ZmZpeClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaSAqIC0xKSArIFwicHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zZXRTdXJmYWNlID0gZnVuY3Rpb24oanNJRCwgc3VyZmFjZSl7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU3VyZmFjZSA9IHN1cmZhY2U7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkVG9DYXJ0O1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUucmVzZXRBZGRlZFRleHQgPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRUb0NhcnQ7XHJcbiAgICAgICAgaWYoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5IDwgMCl7XHJcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudGh1bWJDbGFzcyA9IGZ1bmN0aW9uKGxlbil7XHJcbiAgICAgICAgaWYgKGxlbiA+IDMpXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXIgeHNjcm9sbGVkXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gXCJ0aHVtYnN3cmFwcGVyXCI7XHJcbiAgICB9O1xyXG4vKlxyXG4gICAgJHNjb3BlLnRodW1iTGlDbGFzcyA9IGZ1bmN0aW9uKGluZCl7XHJcbiAgICAgICAgaWYgKChpbmQgJSAzKSA9PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJicnNsaWRlXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gXCJ0aGltYnNsaWRlXCI7XHJcbiAgICB9XHJcbiovXHJcbn0pO1xyXG5cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ0NhcnRDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJHRpbWVvdXQsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcbiAgICAkc2NvcGUucHJvbW9FcnJvciA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmN1c3RvbWVyRXJyb3IgPSBmYWxzZTtcclxuICBcclxuICAgICRzY29wZS5DYXJ0SW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHNjb3BlLnN1bW0gPSAwO1xyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbn07XHJcblxyXG4gICAgICAgICRodHRwLnBvc3QoJy9zdG9yZS9wcm9kdWN0L0dldENhcnQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzID0gZGF0YS5wcm9kdWN0cztcclxuICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50ID0gZGF0YS5kaXNjb3VudDtcclxuICAgICAgICAgICAgaWYoJHNjb3BlLnByb2R1Y3RzLmxlbmd0aCA8PSAwKXtcclxuICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gXCIvc3RvcmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5ID0gcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkU2l6ZS5wcmljZSkqJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OlwiMHB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRDb2xvciAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5wcm9kdWN0c1tpXS5waG90by5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWZmaXggPSAnXycgKyAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5wcm9kdWN0c1tpXS5waG90by5sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvW2pdLnN1YnN0cmluZygwLCAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG9bal0ubGFzdEluZGV4T2YoJy4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLnN1YnN0cihuYW1lLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpID09IHN1ZmZpeClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGogKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQucHJvZHVjdHMpe1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uaWQgPT0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmlkX3Byb2R1Y3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tICs9ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5kaXNjb3VudCpwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tIC09ICRzY29wZS5kaXNjb3VudC5zdW1tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tpbmdPdXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2JvZHknKS5yZW1vdmVDbGFzcygnb3ZlcmZsb3ctaCcpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLm0tY292ZXItcHJlbG9hZCcpLmZhZGVPdXQoNjAwKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIElNQUdFX1dJRFRIID0gMjQyO1xyXG5cclxuICAgICRzY29wZS5zY3JvbGxUbyA9IGZ1bmN0aW9uKGltYWdlLGluZCwganNJRCkge1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpbmQgKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZW1wdHlDbGFzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHMpe1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImhpZGVcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2l6ZUNsYXNzID0gZnVuY3Rpb24oc2VsZWN0ZWRTaXplLCBzaXplKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkU2l6ZSA9PT0gc2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jb2xvckNsYXNzID0gZnVuY3Rpb24oc2VsZWN0ZWRDb2xvciwgY29sb3IpIHtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRDb2xvciA9PT0gY29sb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc3VyZmFjZUNsYXNzID0gZnVuY3Rpb24oc2VsZWN0ZWRTdXJmYWNlLCBzdXJmYWNlKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkU3VyZmFjZSA9PT0gc3VyZmFjZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJhY3RpdmVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jaGVraW5nT3V0Q2xhc3MgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCEkc2NvcGUuY2hlY2tpbmdPdXQpe1xyXG4gICAgICAgICAgICByZXR1cm4gXCJoaWRlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0U2l6ZSA9IGZ1bmN0aW9uKGpzSUQsIHNpemUpe1xyXG4gICAgICAgICRzY29wZS5zdW1tIC09IHBhcnNlRmxvYXQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZS5wcmljZSkqJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5O1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemUgPSBzaXplO1xyXG4gICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZS5wcmljZSkqJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5O1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0Q29sb3IgPSBmdW5jdGlvbihqc0lELCBjb2xvcil7XHJcbiAgICAgICAgdmFyIG9sZFByb2R1Y3QgPSB7aWQ6JHNjb3BlLnByb2R1Y3RzW2pzSURdLmlkLCBxdWFudGl0eTokc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHksIHNlbGVjdGVkQ29sb3I6JHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkQ29sb3J9O1xyXG4gICAgICAgIGlmICh0eXBlb2YgKCRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemUpICE9ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICBvbGRQcm9kdWN0LnNlbGVjdGVkU2l6ZSA9ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemU7XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU3VyZmFjZSkgIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgIG9sZFByb2R1Y3Quc2VsZWN0ZWRTdXJmYWNlID0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU3VyZmFjZTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkQ29sb3IgPSBjb2xvcjtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8gIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgY29sb3I7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90b1tpXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvW2ldLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgPT0gc3VmZml4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBpICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBvbGRQcm9kdWN0Om9sZFByb2R1Y3QsIG5ld1Byb2R1Y3Q6JHNjb3BlLnByb2R1Y3RzW2pzSURdfTtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9TYXZlUHJvZHVjdCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5lcnJvciAhPSAnbm8nKXtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0U3VyZmFjZSA9IGZ1bmN0aW9uKGpzSUQsIHN1cmZhY2Upe1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2UgPSBzdXJmYWNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0RGVsaXZlcnkgPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWREZWxpdmVyeSA9ICRzY29wZS5kZWxpdmVyaWVzW2pzSURdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0UGF5bWVudCA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFBheW1lbnQgPSAkc2NvcGUucGF5bWVudHNbanNJRF07XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jaGFuZ2VRdWFudGl0eSA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgIGlmIChwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHkpIDw9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkc2NvcGUuZGVsZXRlSXRlbShqc0lEKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJHNjb3BlLnN1bW0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5pZCA9PSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uaWRfcHJvZHVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSArPSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uZGlzY291bnQqcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tIC09ICRzY29wZS5kaXNjb3VudC5zdW1tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIG9sZFByb2R1Y3Q6JHNjb3BlLnByb2R1Y3RzW2pzSURdLCBuZXdQcm9kdWN0OiRzY29wZS5wcm9kdWN0c1tqc0lEXX07XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9zdG9yZS9wcm9kdWN0L1NhdmVQcm9kdWN0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciAhPSAnbm8nKXtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNoZWNrT3V0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoJHNjb3BlLnN1bW0gPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYoISRzY29wZS5jaGVja2luZ091dCl7XHJcbiAgICAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW59O1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9nZXRDdXN0b21lcicsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRlbGl2ZXJpZXMgPSBkYXRhLmRlbGl2ZXJ5O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBheW1lbnRzID0gZGF0YS5wYXltZW50O1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbWVyID0gZGF0YS5jdXN0b21lcjtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmRlbGl2ZXJpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsaXZlcmllc1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnBheW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBheW1lbnRzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRGVsaXZlcnkgPSAkc2NvcGUuZGVsaXZlcmllc1swXTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFBheW1lbnQgPSAkc2NvcGUucGF5bWVudHNbMF07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tpbmdPdXQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9jZWVkTmV4dEZvcm0nKS5yZW1vdmVDbGFzcygnaGlkZS1jb250ZW50LWJveCcpO1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogJCgnI3Byb2NlZWROZXh0Rm9ybScpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgIH0sIDYwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5kZWxldGVJdGVtID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgaWYoISRzY29wZS5pblJlcXVlc3Qpe1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAkc2NvcGUudXNlci50b2tlbixcclxuICAgICAgICAgICAgICAgICAgICBpZCA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5pZCxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eSA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENvbG9yIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTdXJmYWNlIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU3VyZmFjZSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFNpemUgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L2RlbGV0ZUZyb21DYXJ0JyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMuc3BsaWNlKGpzSUQsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTaXplLnByaWNlKSokc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQucHJvZHVjdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5pZCA9PSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uaWRfcHJvZHVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSArPSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uZGlzY291bnQqcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gLT0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUucHJvZHVjdHMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gXCIvc3RvcmVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY29uZmlybVByb21vID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYoISRzY29wZS5pblJlcXVlc3QpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIHByb21vQ29kZTogJHNjb3BlLmRpc2NvdW50LnByb21vQ29kZX07XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9Db25maXJtUHJvbW8nKSwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvbW9FcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGREaXNjb3VudCA9ICRzY29wZS5kaXNjb3VudC5zdW1tO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudCA9IGRhdGEuZGlzY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMgIT0gJ3VuZGVmaW5lZCcgJiYgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGREaXNjb3VudCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQob2xkRGlzY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gLT0gJHNjb3BlLmRpc2NvdW50LnN1bW07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2xkRGlzY291bnQgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQob2xkRGlzY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9tb0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUuZGlzY291bnQuc3VtbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5lcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN1bW0gKz0gcGFyc2VGbG9hdCgkc2NvcGUuZGlzY291bnQuc3VtbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS4kd2F0Y2goJ2Rpc2NvdW50LnByb21vQ29kZScsIGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5zYXZlQ3VzdG9tZXIgPSBmdW5jdGlvbih2YWxpZCkge1xyXG4gICAgICAgIGlmICghdmFsaWQgKSB7IFxyXG4gICAgICAgICAgICAkc2NvcGUuY3VzdG9tZXJFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9ICRzY29wZS5jdXN0b21lckhpbnQ7XHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkc2NvcGUuc3VtbSA9PT0gMCkgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYoISRzY29wZS5pblJlcXVlc3Qpe1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgY3VzdG9tZXI6ICRzY29wZS5jdXN0b21lcn07XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3Qvc2F2ZUN1c3RvbWVyJyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9jZWVkRmluaXNoRm9ybScpLnJlbW92ZUNsYXNzKCdoaWRlLWNvbnRlbnQtYm94Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCcjcHJvY2VlZEZpbmlzaEZvcm0nKS5vZmZzZXQoKS50b3BcclxuICAgICAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VzdG9tZXJFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5lcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLiR3YXRjaCgnY3VzdG9tZXIuZmlyc3RfbmFtZSArIGN1c3RvbWVyLmxhc3RfbmFtZSArIGN1c3RvbWVyLmVtYWlsICsgY3VzdG9tZXIudGFyZ2V0X2ZpcnN0X25hbWUgKyBjdXN0b21lci50YXJnZXRfbGFzdF9uYW1lICsgY3VzdG9tZXIucGhvbmUgKyBjdXN0b21lci5hZGRyZXNzICsgY3VzdG9tZXIuY2l0eSArIGN1c3RvbWVyLnppcCArIGN1c3RvbWVyLmNvdW50cnknLCBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICRzY29wZS5jdXN0b21lckVycm9yID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuYnV5ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5zdW1tID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sXHJcbiAgICAgICAgICAgIGN1c3RvbWVyIDogJHNjb3BlLmN1c3RvbWVyLFxyXG4gICAgICAgICAgICBwcm9kdWN0cyA6ICRzY29wZS5wcm9kdWN0cyxcclxuICAgICAgICAgICAgZGVsaXZlcnkgOiAkc2NvcGUuc2VsZWN0ZWREZWxpdmVyeSxcclxuICAgICAgICAgICAgcGF5bWVudCAgOiAkc2NvcGUuc2VsZWN0ZWRQYXltZW50LFxyXG4gICAgICAgICAgICBkaXNjb3VudCA6ICRzY29wZS5kaXNjb3VudFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L2J1eScpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgICAgIGlmICgnZW1haWwnID09IGRhdGEucGF5bWVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEubWVzc2FnZSwgJHNjb3BlLmhvc3RfdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9zdG9yZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvY2VlZEZpbmlzaEZvcm0nKS5hZnRlcigkY29tcGlsZShkYXRhLmNvbnRlbnQpKCRzY29wZSkpO1xyXG4gICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNmb3JtLXltLXBheScpLnN1Ym1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UubWVzc2FnZU1vZGFsKGRhdGEuZXJyb3IsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudGh1bWJDbGFzcyA9IGZ1bmN0aW9uKGxlbil7XHJcbiAgICAgICAgaWYgKGxlbiA+IDMpXHJcbiAgICAgICAgICAgIHJldHVybiBcInRodW1ic3dyYXBwZXIgeHNjcm9sbGVkXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gXCJ0aHVtYnN3cmFwcGVyXCI7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS52YWxDbGFzcyA9IGZ1bmN0aW9uKGlzVmFsaWQpe1xyXG4gICAgICAgIGlmKGlzVmFsaWQpXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIFwiZXJyb3JcIjtcclxuICAgIH07XHJcbn0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdVc2VyQ29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGNvbXBpbGUsICRjb29raWVzLCBjb250ZW50U2VydmljZSkge1xyXG5cclxuICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuICAkc2NvcGUucmVzdWx0ID0ge307XHJcbiAgJHNjb3BlLm1vZGFsID0gJ25vbmUnO1xyXG4gICRzY29wZS5ob3N0X3R5cGUgPSAnbW9iaWxlJztcclxuXHJcbiAgLy/QntGH0LjRgdGC0LrQsCDQt9C90LDRh9C10L3QuNC5XHJcbiAgJHNjb3BlLnNldEVtcHR5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUudXNlci5wYXNzd29yZCA9ICcnO1xyXG4gICAgJHNjb3BlLnVzZXIudGVybXMgPSAwO1xyXG5cclxuICAgICRzY29wZS5lcnJvciA9IHt9O1xyXG4gICAgJHNjb3BlLnJlc3VsdCA9IHt9O1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5oaWRlTW9kYWwgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5tb2RhbCA9ICdub25lJztcclxuICB9O1xyXG5cclxuICAvL9CY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC00LDRgtCw0L/QuNC60LXRgNCwXHJcbiAgYW5ndWxhci5lbGVtZW50KCcjYmlydGhkYXknKS5kYXRlcGlja2VyKHtcclxuICAgIHllYXJSYW5nZTogJzE5MDA6LTAnLFxyXG4gICAgZGF0ZUZvcm1hdDogJ2RkLm1tLnl5JyxcclxuICAgIG9uU2VsZWN0OiBmdW5jdGlvbiAoZGF0ZVRleHQsIGluc3QpIHtcclxuICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAkc2NvcGUudXNlci5iaXJ0aGRheSA9IGRhdGVUZXh0O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy/QodGC0L7RgNC+0LYg0LzQvtC00LDQu9GM0L3Ri9GFINC+0LrQvtC9XHJcbiAgJHNjb3BlLiR3YXRjaCgnbW9kYWwnLCBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5zZXRFbXB0eSgkc2NvcGUubW9kYWwpO1xyXG4gICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCRzY29wZS5tb2RhbCk7XHJcbiAgfSk7XHJcblxyXG4gIC8v0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAkc2NvcGUuc2V0UHJvZmlsZSA9IGZ1bmN0aW9uKHVzZXIpe1xyXG4gICAgJGh0dHAucG9zdCgnL3VzZXIvZWRpdFByb2ZpbGUnLHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/QkNCy0YLQvtC+0L/RgNC10LTQtdC70LXQvdC40LUg0YDQsNC30YDQtdGJ0LXQvdC40Y9cclxuICAkc2NvcGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHJlc29sdXRpb24gPSAkY29va2llcy5yZXNvbHV0aW9uO1xyXG4gICAgaWYgKCFyZXNvbHV0aW9uKSB7XHJcbiAgICAgIHZhciBjbGllbnRSZXMgPSBNYXRoLm1heChzY3JlZW4ud2lkdGgsc2NyZWVuLmhlaWdodCk7XHJcbiAgICAgIHZhciByZXMgPSBbMTkyMCwgMTQwMCwgMTI4MF07XHJcbiAgICAgIGZvcih2YXIgaT0wOyBpPHJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChjbGllbnRSZXMgPj0gcmVzW2ldKXtcclxuICAgICAgICAgIHJlc29sdXRpb24gPSByZXNbaV07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgJGNvb2tpZXMucmVzb2x1dGlvbiA9ICcnICsgcmVzb2x1dGlvbjtcclxuICAgICAgJHNjb3BlLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8v0JDQstGC0L7RgNC40LfQsNGG0LjRj1xyXG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKSB7XHJcbiAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zZXJ2aWNlL2xvZ2luJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICd5ZXMnKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuZW1haWwgPSB0cnVlO1xyXG4gICAgICAgICAgJHNjb3BlLmVycm9yLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChkYXRhLmFjY2Vzc191cmwpIHx8ICFkYXRhLmFjY2Vzc191cmwubGVuZ3RoKVxyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL3Nwb3QvbGlzdC8nKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLGRhdGEuYWNjZXNzX3VybCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGxvY2F0aW9uKS5hdHRyKCdocmVmJywnLycpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuJHdhdGNoKCd1c2VyLmVtYWlsICsgdXNlci5wYXNzd29yZCArIHVzZXIuY29kZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmVycm9yLmVtYWlsID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IuY29kZSA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmVycm9yLnBhc3N3b3JkID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9ICcnO1xyXG4gIH0pO1xyXG5cclxuICAvLyDQoNC10LPQuNGB0YLRgNCw0YbQuNGPXHJcbiAgJHNjb3BlLmFjdGl2YXRpb24gPSBmdW5jdGlvbih1c2VyLCB2YWxpZCl7XHJcbiAgICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAodXNlci50ZXJtcyA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zZXJ2aWNlL3JlZ2lzdHJhdGlvbicsIHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG5cclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIuZW1haWwgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5wYXNzd29yZCA9ICcnO1xyXG4gICAgICAgICRzY29wZS51c2VyLmFjdGl2X2NvZGUgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci50ZXJtcyA9IDA7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKSB7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbChkYXRhLmNvbnRlbnQsICdub25lJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuY29udGVudDtcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT09ICdlbWFpbCcpIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5lbWFpbCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5jb2RlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmNvbnRlbnQgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKVxyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwoZGF0YS5jb250ZW50LCAnZXJyb3InKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0JLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQtSDQv9Cw0YDQvtC70Y9cclxuICAkc2NvcGUucmVjb3ZlcnkgPSBmdW5jdGlvbih1c2VyLCB2YWxpZCl7XHJcbiAgICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2UvcmVjb3ZlcnknLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuZW1haWwgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5lcnJvci5jb250ZW50ID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJylcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwoZGF0YS5jb250ZW50LCAnZXJyb3InKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS51c2VyLmVtYWlsID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJylcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwoZGF0YS5jb250ZW50LCAnbm9uZScpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0LzQtdC90LAg0L/QsNGA0L7Qu9GPXHJcbiAgJHNjb3BlLmNoYW5nZSA9IGZ1bmN0aW9uKHVzZXIsIHZhbGlkKXtcclxuICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAsIHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvc3BvdC9saXN0LycpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUubWVzc2FnZU1vZGFsID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQodGV4dCkgfHwgIXRleHQubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSB0ZXh0O1xyXG4gICAgaWYgKCRzY29wZS5ob3N0X3R5cGUgPT09ICdtb2JpbGUnKVxyXG4gICAgICBjb250ZW50U2VydmljZS5tb2JpbGVNb2RhbCh0ZXh0LCAnbm9uZScpO1xyXG4gICAgZWxzZVxyXG4gICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5sb2FkRnJvbnQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciByZXNvbHV0aW9uID0gMTkyMDtcclxuICAgIFxyXG4gICAgaWYgKHNjcmVlbi53aWR0aCA8PSAxNDAwKVxyXG4gICAgICAgIHJlc29sdXRpb24gPSAxNDAwO1xyXG4gICAgaWYgKHNjcmVlbi53aWR0aCA8PSAxMjgwKVxyXG4gICAgICAgIHJlc29sdXRpb24gPSAxMjgwO1xyXG4gICAgICAgIFxyXG4gICAgdmFyIGZyb250QmxvY2sgPSBhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2ggLmZpcnN0LXNjcmVlbicpO1xyXG4gICAgICAgXHJcbiAgICBmcm9udEJsb2NrLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoLi4vdGhlbWVzL21vYmlzcG90L2ltZy9pbmZvL2Zyb250XycgKyByZXNvbHV0aW9uICsgJy5qcGcpJyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qXHJcbiAgYW5ndWxhci5lbGVtZW50KHdpbmRvdykuYmluZCgnbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKCFhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2gnKS5sZW5ndGggfHwgIWFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCAjcGF5bWVudCcpLmxlbmd0aClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICB2YXIgcmVzb2x1dGlvbiA9IDE5MjA7XHJcbiAgICBcclxuICAgIGlmIChzY3JlZW4ud2lkdGggPD0gMTQwMClcclxuICAgICAgICByZXNvbHV0aW9uID0gMTQwMDtcclxuICAgIGlmIChzY3JlZW4ud2lkdGggPD0gMTI4MClcclxuICAgICAgICByZXNvbHV0aW9uID0gMTI4MDtcclxuICAgIFxyXG4gICAgYW5ndWxhci5lbGVtZW50KCcuc3BsYXNoICNwYXltZW50JykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCguLi90aGVtZXMvbW9iaXNwb3QvaW1nL2luZm8vcGFzc18nICsgcmVzb2x1dGlvbiArICcuanBnKScpO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcGxhc2ggI3NvYycpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoLi4vdGhlbWVzL21vYmlzcG90L2ltZy9pbmZvL2Rpc2NvdW50XycgKyByZXNvbHV0aW9uICsgJy5qcGcpJyk7XHJcbiAgICBcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCAjY291cG9uJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCguLi90aGVtZXMvbW9iaXNwb3QvaW1nL2luZm8vc29jaWFsXycgKyByZXNvbHV0aW9uICsgJy5qcGcpJyk7XHJcbiAgICBcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCAjdHJhbnNwb3J0JykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCguLi90aGVtZXMvbW9iaXNwb3QvaW1nL2luZm8vdHJhbnNwb3J0XycgKyByZXNvbHV0aW9uICsgJy5qcGcpJyk7XHJcbiAgICBcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwbGFzaCAjZGV2JykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCguLi90aGVtZXMvbW9iaXNwb3QvaW1nL2luZm8vcGFydG5lcl8nICsgcmVzb2x1dGlvbiArICcuanBnKScpO1xyXG4gXHJcbiAgfSk7XHJcbiAgKi9cclxuICBcclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9