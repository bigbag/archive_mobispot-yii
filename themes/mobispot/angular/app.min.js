!function(e,t,o){"use strict";t.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,n){var s,r={},i={},a=!1,c=t.copy,u=t.isUndefined;return n.addPollFn(function(){var t=n.cookies();s!=t&&(s=t,c(t,i),c(t,r),a&&e.$apply())})(),a=!0,e.$watch(function(){var e,s,a;for(e in i)u(r[e])&&n.cookies(e,o);for(e in r)s=r[e],t.isString(s)||(s=""+s,r[e]=s),s!==i[e]&&(n.cookies(e,s),a=!0);if(a)for(e in s=n.cookies(),r)r[e]!==s[e]&&(u(s[e])?delete r[e]:r[e]=s[e])}),r}]).factory("$cookieStore",["$cookies",function(e){return{get:function(o){return(o=e[o])?t.fromJson(o):o},put:function(o,n){e[o]=t.toJson(n)},remove:function(t){delete e[t]}}}])}(window,window.angular),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig",function(e){return{require:"?ngModel",link:function(t,o,n,s){function r(e,t){return t&&"function"==typeof t?function(o,n){e(o,n),t(o,n)}:e}var i={},a={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(i,e),s&&(s.$render=function(){o.sortable(i)},a.start=function(e,t){t.item.sortable={index:t.item.index()}},a.update=function(e,t){t.item.sortable.resort=s},a.receive=function(e,t){t.item.sortable.relocate=!0,s.$modelValue.splice(t.item.index(),0,t.item.sortable.moved)},a.remove=function(e,t){t.item.sortable.moved=1===s.$modelValue.length?s.$modelValue.splice(0,1)[0]:s.$modelValue.splice(t.item.sortable.index,1)[0]},a.stop=function(e,o){if(o.item.sortable.resort&&!o.item.sortable.relocate){var n,s;s=o.item.sortable.index,n=o.item.index(),o.item.sortable.resort.$modelValue.splice(n,0,o.item.sortable.resort.$modelValue.splice(s,1)[0])}(o.item.sortable.resort||o.item.sortable.relocate)&&t.$apply()}),t.$watch(n.uiSortable,function(e){angular.forEach(e,function(e,t){a[t]&&(e=r(a[t],e)),o.sortable("option",t,e)})},!0),angular.forEach(a,function(e,t){i[t]=r(e,i[t])}),o.sortable(i)}}}]),angular.module("mobispot",["ngCookies","ui.sortable"]),angular.module("mobispot").service("contentService",function(){this.desktopModal=function(e,t){if(angular.isUndefined(t)&&(t=500),angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open"),"none"==e)return $(".show-block.active").removeClass("active").fadeOut(t),!1;var o=angular.element("#"+e);$(".show-block").hasClass("active")&&$(".show-block.active").attr("id")!=e?$(".show-block.active").removeClass("active").fadeOut(t,function(){o.fadeIn(t).addClass("active")}):o.fadeIn(t).addClass("active")},this.mobileModal=function(e,t){var o=angular.element(".m-result"),n=o.find("p");o.removeClass("m-negative"),"error"==t&&o.addClass("m-negative"),o.hide(),o.show(),n.text(e),setTimeout(function(){o.hide()},5e3)},this.messageModal=function(e,t){if(speed=500,"mobile"===t)this.mobileModal(e,"none");else{angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var o=angular.element("#message"),n=angular.element("#message p");$(".show-block").hasClass("active")?$(".show-block.active").removeClass("active").fadeOut(speed,function(){n.html(e),o.fadeIn(speed).addClass("active")}):(n.html(e),o.fadeIn(speed).addClass("active"))}},this.scrollPage=function(e,t){angular.isUndefined(t)&&(t=600);var o=$(e).offset().top;$("html, body").animate({scrollTop:o},t)};var e={};this.setSpot=function(t){e=t},this.getSpot=function(){return e}}),angular.module("mobispot").service("dialogService",function(){var e=function(e,t,o,n,s){function r(){e("yes"),a()}function i(){e("no"),a()}function a(){d.unbind("click",r),l.unbind("click",i),$(document).unbind("click",i),c.removeClass("active").fadeOut(speed)}speed=500,angular.element(".lang-list").fadeOut(),angular.element(".lang").removeClass("open");var c=angular.element("#b-dialog"),u=angular.element("#b-dialog p"),d=angular.element("#b-dialog .yes-button"),l=angular.element("#b-dialog .no-button");$(".show-block").hasClass("active")&&$(".show-block.active").removeClass("active").fadeOut(0),u.html(n),d.text(t),l.text(o),c.removeClass("alert"),c.removeClass("negative"),"undefined"!=typeof s&&c.addClass(s),c.fadeIn(speed).addClass("active"),d.bind("click",r),l.bind("click",i),$(document).bind("click",i)};return{yesNoDialog:e}}),angular.module("mobispot").controller("DemokitController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,s){e.error={},e.$watch("order.name + order.email + order.phone + order.address + order.city + order.zip + order.country + order.shipping + order.payment",function(){e.error.field=!1}),e.order={name:"",email:"",phone:"",address:"",city:"",zip:"",country:"",shipping:1,payment:1},e.products={},e.max_product_id=0,e.prices={},e.shippings={},e.payments={},e.total=0,e.toMain=!1,e.registerProduct=function(t,o){e.products[t]=0,t>e.max_product_id&&(e.max_product_id=t),e.prices[t]=o},e.addProduct=function(t){e.products[t]<9&&e.products[t]++,e.calculateSumm()},e.deductProduct=function(t){e.products[t]>0&&e.products[t]--,e.calculateSumm()},e.registerShipping=function(t,o){e.shippings[t]=o},e.setShipping=function(t,o){e.order.shipping=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click(),e.calculateSumm()},e.registerPayment=function(t,o){e.payments[t]=o},e.setPayment=function(t,o){e.order.payment=t,"undefined"!=typeof o&&angular.element(o.currentTarget).click()},e.calculateSumm=function(){e.summ=120,e.total=e.summ,e.order.shipping&&"undefined"!=typeof e.shippings[e.order.shipping]&&(e.total+=e.shippings[e.order.shipping])},e.buyDemoKit=function(n){return e.orderForm.$valid?void(e.toMain?window.location.href="/":(n.products=e.products,t.post("/service/buyDemoKit",n).success(function(t){"no"==t.error?"email"==t.action?(e.result.message=t.message,s.desktopModal("message"),e.toMain=!0,e.finishButton=e.toMainMessage):(angular.element("#demo-kit-block").after(o(t.content)(e)),angular.element("#form-ym-pay").submit()):(e.result.message=t.message,s.desktopModal("message"),e.error.field=!0)}))):(e.error.field=!0,!1)}}]),angular.module("mobispot").controller("HelpController",["$scope","$http","contentService",function(e,t,o){e.error={},e.send=function(n,s){return s?(n.email=n.help_email,void t.post("/service/sendQuestion",n).success(function(t){"no"==t.error&&(e.user.name="",e.user.help_email="",e.user.question="",e.user.phone="",e.result.message=t.content,o.viewModal("message"))})):!1}}]),angular.module("mobispot").controller("PhonesController",["$scope",function(e){e.initPhones=function(t){e.phonesList=t},e.initDevices=function(t){e.devicesList=t},e.phonesList=[],e.devicesList=[]}]),angular.module("mobispot").controller("SlideController",["$scope","$timeout",function(e,t){e.IMAGE_WIDTH=300,e.FADE_SPEED=600,e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.spots={},e.spots.name="spots",e.spots.listposition={left:"0px"},e.spots.slides=[{id:0,img:"brace_black.png",tmb_style:"background: #000"},{id:1,img:"brace_blue.png",tmb_style:"background: #0062FF"},{id:2,img:"brace_green.png",tmb_style:"background: #5AC0B9"},{id:3,img:"brace_patt01.png",tmb_style:"background: #AB2640"},{id:4,img:"brace_patt02.png",tmb_style:"background: #d5d850"},{id:5,img:"brace_patt03.png",tmb_style:"background: #fff"},{id:6,img:"brace_patt04.png",tmb_style:"background: #fff"},{id:7,img:"brace_patt05.png",tmb_style:"background: #fff"},{id:8,img:"brace_patt06.png",tmb_style:"background: #fff"},{id:9,img:"brace_patt07.png",tmb_style:"background: #fff"},{id:10,img:"brace_red.png",tmb_style:"background: #fff"},{id:11,img:"brace_white.png",tmb_style:"background: #fff"},{id:12,img:"card_black.png",tmb_style:"background: #fff"},{id:13,img:"card_blue.png",tmb_style:"background: #fff"},{id:14,img:"card_green.png",tmb_style:"background: #fff"},{id:15,img:"card_red.png",tmb_style:"background: #fff"},{id:16,img:"card_white.png",tmb_style:"background: #fff"},{id:17,img:"card_yellow.png",tmb_style:"background: #fff"},{id:18,img:"key_black.png",tmb_style:"background: #fff"},{id:19,img:"key_blue.png",tmb_style:"background: #fff"},{id:20,img:"key_green.png",tmb_style:"background: #fff"},{id:21,img:"key_red.png",tmb_style:"background: #fff"},{id:22,img:"key_white.png",tmb_style:"background: #fff"},{id:23,img:"key_yellow.png",tmb_style:"background: #fff"}],e.spots.wristbands=[0,1,2,3,4,5,6,7,8,9,10,11],e.spots.wristbands_current=1,e.spots.cards=[12,13,14,15,16,17],e.spots.cards_current=12,e.spots.keys=[18,19,20,21,22,23],e.spots.keys_current=18,e.spots.current=e.spots.wristbands_current,e.spots.current_type="wristband",e.spots.color_rotation=!1,e.spots.timer_rotation=!1,e.scrollTo=function(t,o){t.listposition={left:e.IMAGE_WIDTH*o*-1+"px"}},e.fadeTo=function(t,o){if(t.current==o)return!1;angular.element("#slider-"+t.name+" .f-slide").stop();var n="#"+t.name+"_"+o;console.log(n),t.current=o,angular.element("#slider-"+t.name+" .f-slide[id!="+n+"]").fadeOut(0),angular.element(n).fadeIn(e.FADE_SPEED)},e.fadeToWistbrands=function(){e.spots.current_type="wristband",e.fadeTo(e.spots,e.spots.wristbands_current)},e.fadeToCards=function(){e.spots.current_type="card",e.fadeTo(e.spots,e.spots.cards_current)},e.fadeToKeys=function(){e.spots.current_type="key",e.fadeTo(e.spots,e.spots.keys_current)},e.startColors=function(){return e.spots.color_rotation?!1:e.spots.timer_rotation?!1:(e.spots.color_rotation=!0,e.spots.timer_rotation=!0,void t(function(){e.colorRotation()},1e3))},e.stopColors=function(){e.spots.color_rotation=!1},e.colorRotation=function(){if(!e.spots.color_rotation)return e.spots.timer_rotation=!1,!1;if("wristband"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.wristbands.length;n++)e.spots.wristbands[n]==e.spots.wristbands_current&&(o=n);if(0>o)return!1;e.spots.wristbands_current=e.spots.wristbands.length-1==o?e.spots.wristbands[0]:e.spots.wristbands[o+1],e.fadeToWistbrands()}else if("card"==e.spots.current_type){for(var o=-1,n=0;n<e.spots.cards.length;n++)e.spots.cards[n]==e.spots.cards_current&&(o=n);if(0>o)return!1;e.spots.cards_current=e.spots.cards.length-1==o?e.spots.cards[0]:e.spots.cards[o+1],e.fadeToCards()}else{if("key"!=e.spots.current_type)return!1;for(var o=-1,n=0;n<e.spots.keys.length;n++)e.spots.keys[n]==e.spots.keys_current&&(o=n);if(0>o)return!1;e.spots.keys_current=e.spots.keys.length-1==o?e.spots.keys[0]:e.spots.keys[o+1],e.fadeToKeys()}e.spots.timer_rotation=!0,t(function(){e.colorRotation()},2e3)},e.randomSlide=function(t){e.fadeTo(t,e.getRandomInt(0,t.slides.length-1))}}]),angular.module("mobispot").controller("SpotController",["$scope","$http","$compile","$timeout","contentService","dialogService",function(e,t,o,n,s,r){function i(e){e.stopPropagation(),e.preventDefault(),"dragover"==e.type?angular.element("#dropbox").addClass("hover"):angular.element("#dropbox").removeClass("hover")}function a(t){i(t);for(var o,n=t.target.files||t.dataTransfer.files,s=0;o=n[s];s++)e.uploadFile(o)}function c(t){e.$apply(function(){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"})}e.maxSize=26214400,e.progress=0,e.keys=[],e.action=!1,e.error={},e.result={},e.spot={},e.spot.discodes=0,e.general={},e.general.views=!1,e.host_mobile=0,e.wallet={},e.wallet.cards={},e.scroll_key=-1,e.actions={},e.actions.page="",e.actions.phrase="",e.actions.in_progress=!1,e.actions.offset=0,e.actions.count_all=0,e.text={},e.transport_types=[],e.custom_card={back:"",photo:"",name:"",position:"",logo:"",shipping_name:"",phone:"",address:"",city:"",zip:"",token:"",discodes_id:""},e.selected_type={},e.$watch("spot.code + spot.terms",function(){e.error.code=!1,e.error.terms=!1}),e.addSpot=function(n){return n.code&&e.spot.terms?void t.post("/spot/add",n).success(function(t){"no"==t.error?(e.spot.discodes=t.discodes,angular.element(".spot-list").prepend(o(t.content)(e)),angular.element("#actSpot").click(),delete e.spot.code,delete e.spot.terms,e.host_mobile&&(window.location.href="http://"+window.location.hostname+"/spot/list")):"yes"==t.error&&(e.error.code=!0)}):!1},e.$watch("general.views + spot.discodes",function(){e.actions.page="",angular.element(window).unbind("scroll",e.loadMoreCoupons),"spot"==e.general.views?e.viewSpot(e.spot):"wallet"==e.general.views?e.viewWallet(e.spot):"coupon"==e.general.views?e.viewCoupons(e.spot,e.actions):"settings"==e.general.views?e.viewsSettings(e.spot):"transport"==e.general.views&&e.viewTransport(e.spot)}),e.bodyMinHeight=function(){var e=angular.element(".spot-list").height();angular.element(".spot-content").css("min-height",e+200)},e.viewSpot=function(n){if(0===n.discodes)return!1;var r=angular.element("#spot-block");t.post("/spot/view",n).success(function(t){"no"==t.error&&(r.empty(),r.html(o(t.content)(e)),e.keys=[],e.content_iteration=0,e.fileUploadInit(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500),s.scrollPage(e.scroll_key&&e.scroll_key>1?"#block-"+e.scroll_key:"body"),e.scroll_key=-1)})},e.addContent=function(){e.addValue(e.spot.content)},e.addValue=function(n){e.spot.content=n,t.post("/spot/spotAddContent",e.spot).success(function(t){if("no"==t.error){angular.element("#add-content").append(o(t.content)(e)),e.spot.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),angular.element("#extraMediaForm").hasClass("open")&&(angular.element("#extraMediaForm").slideUp(0,function(){angular.element("#extraMediaForm a").removeClass("blackout"),angular.element("#extraMediaForm a").fadeTo(0,1)}),angular.element("#extraMediaForm").removeClass("open"));var n=angular.element("#block-"+t.key).offset().top;angular.element("html, body").animate({scrollTop:n},600)}}),e.resetCursor()},e.saveOrder=function(){t.post("/spot/saveOrder",e.spot).success(function(e){"no"==e.error})},e.sortableOptions={update:function(){e.saveOrder()},containment:".spot-content",handle:".move",scrollSensitivity:5,tolerance:"pointer",opacity:.8},e.removeContent=function(o,n,s){o.key=n,t.post("/spot/spotRemoveContent",o).success(function(t){if("no"==t.error){var o=angular.element(s.currentTarget).parents(".spot-item");o.remove(),e.keys=t.keys,t.netDown&&e.netDown(t.netDown)}})},e.editContent=function(t,n,s){if(t.content_new)e.hideSpotEdit();else{t.key=n;var r=angular.element(s.currentTarget).parents(".spot-item"),i=angular.element("#spot-edit").clone();if(r.find("a.type-link").size()>0){var a=r.find("a.type-link");e.spot.content_new=a.find("span.link").text()}else{var c=r.find("p.item-type__text");e.spot.content_new=c.text()}i.removeClass("hide"),i.find("textarea").focus(1),r.hide().before(o(i)(e))}},e.saveContent=function(n,s){var r=angular.element(s.currentTarget).parents(".spot-item"),i=r.next();t.post("/spot/spotSaveContent",n).success(function(t){"no"==t.error?(r.before(o(t.content)(e)),r.remove(),i.remove()):(r.remove(),i.show()),delete e.spot.content_new})},e.hideSpotEdit=function(){if(!e.spot.content&&!e.spot.content_new)return!1;var n=angular.element("#spot-edit"),s=n.next();t.post("/spot/spotSaveContent",e.spot).success(function(t){"no"==t.error?(n.before(o(t.content)(e)),n.remove(),s.remove()):(n.remove(),s.show()),delete e.spot.content_new})},e.renameSpot=function(e){return e.name?void t.post("/spot/rename",e).success(function(t){"no"==t.error&&angular.element("#"+e.discodes+" h3").text(e.name)}):!1},e.cleanSpot=function(o){r.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/clean",o).success(function(t){"no"==t.error&&(e.general.views="spot")})},e.text.yes_btn,e.text.no_btn,e.text.clean_spot,"negative")},e.removeSpot=function(o){r.yesNoDialog(function(e){return"yes"!=e?!1:void t.post("/spot/remove",o).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")})},e.text.yes_btn,e.text.no_btn,e.text.rm_spot,"negative")},e.ivisibleSpot=function(o){var n=e.text.mk_invisible,s=e.text.mk_invisible_descr;6==o.status&&(n=e.text.mk_visible,s=e.text.mk_visible_descr),r.yesNoDialog(function(n){return"yes"!=n?!1:void t.post("/spot/invisible",o).success(function(t){"no"==t.error&&(e.spot.status=t.status,angular.element("#"+o.discodes).toggleClass("invisible"))})},e.text.yes_btn,e.text.no_btn,n,"negative")},e.viewsSettings=function(n){var s=angular.element("#spot-block");t.post("/spot/settings",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewWallet=function(n){var s=angular.element("#spot-block");t.post("/spot/wallet",n).success(function(t){"no"==t.error?(s.empty(),s.html(o(t.content)(e)),e.getListCard(),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500)):e.viewSpot(e.spot)})},e.viewCoupons=function(n){var s=angular.element("#spot-block");t.post("/spot/coupons",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.viewTransport=function(n){var s=angular.element("#spot-block");t.post("/spot/transport",n).success(function(t){"no"==t.error&&(s.empty(),s.html(o(t.content)(e)),e.bodyMinHeight(),angular.element(".spot-content_row").show().animate({opacity:1},500))})},e.listCoupons=function(n,s){if(!s.page)return!1;var r=angular.element("#coupons-list"),i={discodes:n.discodes,token:n.token,page:s.page,phrase:s.phrase,offset:s.offset};e.actions.in_progress=!0,t.post("/spot/listCoupons",i).success(function(t){"no"==t.error&&(e.actions.offset+=t.count,e.actions.count_all=t.count_all,r.append(o(t.content)(e)),e.actions.in_progress=!1)}).error(function(){e.actions.in_progress=!1})},e.filterCoupons=function(t,o){e.actions.offset=0,e.actions.count_all=0,e.listCoupons(t,o)},e.getListCard=function(){return"wallet"!=e.general.views?!1:(t.post("/spot/listCard",e.wallet).success(function(t){"no"==t.error&&(e.wallet.cards=t.cards,e.wallet.cards_count=t.cards_count,e.wallet.linking_card=t.linking_card)}),void n(function(){e.getListCard()},5e3))},e.showCustomCard=function(){$("#customCard").addClass("show"),$("body").css("overflow","hidden")},e.hideCustomCard=function(){$("#customCard").removeClass("show"),$("body").css("overflow","")},e.blockedWallet=function(){t.post("/spot/blockedWallet",e.wallet).success(function(t){"no"==t.error&&(e.wallet.status=t.status)})},e.linkingCard=function(e){return e.terms?void angular.element("#linking_card").submit():!1},e.setPaymentCard=function(o,n){var s={token:e.spot.token,card_id:o};t.post("/spot/setPaymentCard",s).success(function(e){"no"==e.error&&(angular.element(".main-card").removeClass("main-card"),angular.element(n.currentTarget).parent().parent().addClass("main-card"))})},e.editCardList=function(){$(".table-card").toggleClass("edit"),e.wallet.card_edit=0===e.wallet.card_edit?1:0},e.removeCard=function(o){var n={token:e.spot.token,card_id:o};t.post("/spot/removeCard",n).success(function(t){"no"==t.error&&(e.wallet.cards_count-=1,delete e.wallet.cards[o])})};var u;e.countReset=function(){e.reset_time="undefined"!=typeof e.reset_time?e.reset_time:30,u=n(function(){0===e.reset_time?$(location).attr("href",window.location.pathname):e.reset_time--,e.countReset()},1e3)},e.fileUploadInit=function(){var e=document.getElementById("dropbox"),t=document.getElementById("add-file");if(e&&t){var o=new XMLHttpRequest;o.upload&&(e.addEventListener("dragover",i,!1),e.addEventListener("dragleave",i,!1),e.addEventListener("drop",a,!1),t.addEventListener("change",a,!1))}},e.uploadComplete=function(t){var n=t.target.responseText;if(n){var s=angular.fromJson(n);if("no"==s.error){angular.element("#progress-content").hide(),angular.element("#add-content").append(o(s.content)(e)),e.keys.push(s.key),angular.element("#add-file").val("");var r=$("#block-"+s.key).offset().top;angular.element("html, body").animate({scrollTop:r},600)}}},e.uploadFailed=function(){angular.element("#error-upload").show().delay(800).slideUp("slow")},e.uploadFile=function(t){var o=new XMLHttpRequest;o.upload&&t.size<=e.maxSize&&(angular.element("#progress-content").show(),o.upload.onprogress=function(t){e.progress=t.lengthComputable?Math.round(100*t.loaded/t.total):"unable to compute"},o.upload.addEventListener("progress",c,!1),o.addEventListener("error",e.uploadFailed,!1),o.addEventListener("load",e.uploadComplete,!1),o.open("POST","/spot/upload",!0),o.setRequestHeader("X-File-Name",unescape(encodeURIComponent(t.name))),o.setRequestHeader("X-Discodes",e.spot.discodes),o.send(t))},e.loadSocContent=function(n){var s={discodes:e.spot.discodes,key:n,token:e.user.token};t.post("/spot/SocNetContent",s).success(function(t){if("no"==t.error){var n=angular.element("#block-"+t.key),s=n.height(),r=n.offset().top;if(n.before(o(t.content)(e)),n.remove(),e.setVideoSize(t.key),r<$("html, body").scrollTop()){var i=$("html, body").scrollTop()+$("#block-"+t.key).height()-s;$("html, body").animate({scrollTop:i},0)}}})},e.netCheck=function(o){var n={token:e.user.token,netName:o};t.post("/spot/netCheck",n).success(function(e){if("no"==e.error){var t=angular.element("#extraMediaForm a[net='"+e.netName+"']");e.binded?t.addClass("binded"):t.removeClass("binded")}})},e.netUp=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.addClass("binded")},e.netDown=function(e){var t=angular.element("#extraMediaForm a[net='"+e+"']");t.removeClass("binded")};var d,l,p,m;e.bindByPanel=function(r){var i=r,a={spot:e.spot,token:e.user.token,netName:i};if("undefined"!=typeof e.spot.content&&e.spot.content.length){a.link=e.spot.content;for(var c=0;c<e.soc_patterns.length;c++)if(-1!=e.spot.content.indexOf(e.soc_patterns[c].baseUrl)){i=e.soc_patterns[c].name,a.netName=e.soc_patterns[c].name;break}}t.post("/spot/BindByPanel",a).success(function(t){if("no"==t.error&&0===t.profileHint.length)if(t.loggedIn)if("ok"==t.linkCorrect){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.setVideoSize(t.key);var r=$("#block-"+t.key).offset().top;$("html, body").animate({scrollTop:r},600),e.netUp(t.socnet);var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else s.messageModal(t.linkCorrect,e.host_type);else{var c=$.extend({id:"",popup:{width:450,height:380}},c),u="http://"+window.location.hostname+"/user/BindSocLogin?service="+i,p=u;p+=p.indexOf("?")>=0?"&":"?",-1===p.indexOf("redirect_uri=")&&(p+="redirect_uri="+encodeURIComponent(u));var m=(window.screen.width-c.popup.width)/2,f=(window.screen.height-c.popup.height)/2;if(e.host_mobile||(d=window.open(p+"&js","yii_eauth_popup","width="+c.popup.width+",height="+c.popup.height+",left="+m+",top="+f+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var g=p+"&discodes="+e.spot.discodes+"&newField=1&synch=true";"undefined"!=typeof e.spot.content&&e.spot.content.length&&(g+="&link="+encodeURIComponent(e.spot.content)),window.location.href=g}else d.focus(),e.bindNet={name:t.socnet,discodes:e.spot.discodes,newField:1},"undefined"!=typeof e.spot.content&&e.spot.content.length&&(e.bindNet.link=e.spot.content),l=n(e.loginTimer,1e3)}})},e.getPatternInd=function(t){for(var o=-1,n=0;n<e.soc_patterns.length;n++)if(e.soc_patterns[n].name==t){o=n;break}return o},e.bindSocial=function(r,i,a){var c=angular.element(a.currentTarget).parents(".spot-item");r.key=i,t.post("/spot/bindSocial",r).success(function(t){if("no"==t.error)if("no"!=t.socnet&&t.socnet.length>0)if(t.loggedIn)if("ok"==t.linkCorrect){c.before(o(t.content)(e)),c.remove();var i=e.getPatternInd(t.socnet);i>-1&&(e.soc_patterns[i].BindByPaste=!0),e.setVideoSize(r.key),e.netUp(t.socnet)}else s.messageModal(t.linkCorrect,e.host_type);else{var u=$.extend({id:"",popup:{width:450,height:380}},u),p="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.socnet,m=p;m+=m.indexOf("?")>=0?"&":"?",-1===m.indexOf("redirect_uri=")&&(m+="redirect_uri="+encodeURIComponent(p));var f=(window.screen.width-u.popup.width)/2,g=(window.screen.height-u.popup.height)/2;d=window.open(m+"&js","yii_eauth_popup","width="+u.popup.width+",height="+u.popup.height+",left="+f+",top="+g+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes"),null===d||"undefined"==typeof d?window.location.href=m+"&discodes="+r.discodes+"&key="+r.key+"&synch=true":(d.focus(),e.bindNet={name:t.socnet,discodes:r.discodes,key:r.key,spotEdit:angular.element(a.currentTarget).parents(".spot-item")},l=n(e.loginTimer,1e3))}else"ok"!=t.linkCorrect&&s.messageModal(t.linkCorrect,e.host_type)})},e.checkLike=function(s,r){var i,a={token:e.user.token,id:s,discodes:e.spot.discodes};t.post("/user/checkLike",a).success(function(t){if("no"==t.error)if(t.isSocLogged)"undefined"!=typeof t.content&&(e.host_mobile||angular.isUndefined(r)?angular.isUndefined(r)||(i=angular.element(r.currentTarget).parent().parent().parent().parent()):i=angular.element(r.currentTarget).parent().parent("div.spot-item"),i.before(o(t.content)(e)),i.remove());else{var a=$.extend({id:"",popup:{width:450,height:380}},a),c="http://"+window.location.hostname+"/user/BindSocLogin?service="+t.service,u=c;u+=u.indexOf("?")>=0?"&":"?",-1===u.indexOf("redirect_uri=")&&(u+="redirect_uri="+encodeURIComponent(c)+"&"),u+="js";var l=(window.screen.width-a.popup.width)/2,m=(window.screen.height-a.popup.height)/2;if(e.host_mobile||(d=window.open(u,"yii_eauth_popup","width="+a.popup.width+",height="+a.popup.height+",left="+l+",top="+m+",resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=yes")),null===d||"undefined"==typeof d){var f=u+"&discodes="+e.spot.discodes+"&chek_like="+s;window.location.href=f}else d.focus(),e.checkingAction={id:s,sharing_ind:t.ind},angular.isUndefined(r)||(e.actionDiv=angular.element(r.currentTarget).parent().parent("div.spot-item")),p=n(e.likesTimer,1e3)}})},e.likesTimer=function(){if(!d.closed){var s={token:e.user.token,id:e.checkingAction.id,sharing_ind:e.checkingAction.sharing_ind,discodes:e.spot.discodes};t.post("/user/checkLike",s).success(function(t){t.isSocLogged?(d.close(),e.actionDiv.before(o(t.content)(e)),e.actionDiv.remove()):t.sharing_logged?(d.close(),e.checkLike(e.checkingAction.id)):p=n(e.likesTimer,1e3)})}},e.loyaltyTimer=function(){for(var t=angular.element(".connecting"),o=0;o<t.length;o++){var s=angular.element(t[o]).attr("id").substring(7);e.checkLoyaltyConnection(s)}m=n(e.loyaltyTimer,1e3)},e.setLoyaltyTimer=function(){m=n(e.loyaltyTimer,1e3)},e.checkLoyaltyConnection=function(n){var s={token:e.user.token,id:n,discodes:e.spot.discodes},r=angular.element("#coupon-"+n);t.post("/user/checkLoyaltyConnection",s).success(function(t){"undefined"!=typeof t.connected&&t.connected&&(r.before(o(t.content)(e)),r.remove())})},e.disableAction=function(n,s){var r,i={token:e.user.token,id:s,discodes:e.spot.discodes};t.post("/user/disableLoyalty",i).success(function(t){"no"==t.error&&(r=e.host_mobile?angular.element(n.currentTarget).parent().parent().parent().parent():angular.element(n.currentTarget).parent().parent("div.spot-item"),r.before(o(t.content)(e)),r.remove())})},e.loginTimer=function(){if(!d.closed){var r={name:e.bindNet.name,discodes:e.bindNet.discodes,key:e.bindNet.key};"undefined"!=typeof e.bindNet.newField&&1==e.bindNet.newField&&(r.newField=1),"undefined"!=typeof e.bindNet.link&&e.bindNet.link.length&&(r.link=e.bindNet.link);var i={token:e.user.token,bindNet:r};t.post("/spot/bindedContent",i).success(function(t){if("undefined"!=typeof t.loggedIn&&"undefined"!=typeof t.linkCorrect)if(t.loggedIn)if(d.close(),"ok"==t.linkCorrect){if(t.newField){angular.element("#add-content").append(o(t.content)(e)),e.keys.push(t.key),e.spot.content="",angular.element("textarea").removeClass("put"),e.resetCursor(),e.netUp(t.socnet),e.setVideoSize(t.key);var r=$("#block-"+t.key).offset().top-100;angular.element("html, body").animate({scrollTop:r},600)}else{var i=e.bindNet.spotEdit;i.before(o(t.content)(e)),i.remove(),e.setVideoSize(t.key),e.netUp(t.socnet)}e.bindNet={};var a=e.getPatternInd(t.socnet);a>-1&&(e.soc_patterns[a].BindByPaste=!0)}else s.messageModal(t.linkCorrect,e.host_type);else l=n(e.loginTimer,1e3)})}},e.unBindSocial=function(n,s,r){n.key=s,t.post("/spot/UnBindSocial",n).success(function(t){if("no"==t.error){var n=angular.element(r.currentTarget).parents(".spot-item");n.before(o(t.content)(e)),n.remove(),t.netDown&&e.netDown(t.netDown)}})},e.getSocPatterns=function(){if(e.freeSocial=!0,"undefined"==typeof e.soc_patterns){var o={token:e.user.token};t.post("/spot/SocPatterns",o).success(function(t){e.soc_patterns=t.soc_patterns;for(var o=0;o<e.soc_patterns.length;o++)"undefined"==typeof e.soc_patterns[o].BindByPaste&&(e.soc_patterns[o].BindByPaste=!1)})}},e.setVideoSize=function(e){var t;1==angular.element("#block-"+e+" .video-vimeo").length?(t=angular.element("#block-"+e+" .video-vimeo"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px")):1==angular.element("#block-"+e+" .yt_player").length&&(t=angular.element("#block-"+e+" .yt_player"),t.css("width","100%"),t.css("height",parseInt(t.css("width"),10)/t.attr("rel")+"px"))},e.setNewPass=function(o){t.post("/spot/setSpotPass",o).success(function(t){"no"==t.error&&"undefined"!=typeof t.saved?(angular.element("#savePassButton").text(t.saved),"undefined"!=typeof e.spot.pass&&o.pass.length?angular.element("#resetPassButton").show():angular.element("#resetPassButton").hide()):"yes"==t.error&&angular.element("#setPassForm input[name=newPass]").addClass("error")})},e.resetPass=function(t){t.pass="",e.setNewPass(t)},e.savePassButtonText=function(e){angular.element("#savePassButton").text(e),angular.element("#setPassForm input[name=newPass]").removeClass("error")},e.checkStatusSpot=function(){return!0},e.resetCursor=function(){"undefined"!=typeof e.cursorBody&&e.cursorBody.length?(angular.element("body").css("cursor",e.cursorBody),delete e.cursorBody):angular.element("body").css("cursor","default"),"undefined"!=typeof e.cursorTextarea&&e.cursorTextarea.length?(angular.element("#dropbox textarea").css("cursor",e.cursorTextarea),delete e.cursorTextarea):angular.element("#dropbox textarea").css("cursor","text")},e.$watch("actions.page",function(){e.actions.offset=0,e.actions.count_all=0;var t=angular.element("#coupons-list");t.empty(),e.listCoupons(e.spot,e.actions)}),e.couponsScroll=function(){e.actions.in_progress=!1,angular.element(window).bind("scroll",e.loadMoreCoupons)},e.loadMoreCoupons=function(){angular.element(window).scrollTop()+angular.element(window).height()>=angular.element(document).height()-200&&!e.actions.in_progress&&e.actions.offset<e.actions.count_all&&e.listCoupons(e.spot,e.actions)},e.initTransportType=function(t,o,n){e.transport_types[e.transport_types.length]={id:t,name:o,img:n}},e.setType=function(t){e.custom_card.back=t.id,t.img&&$("#card-back").css("background-image","url(/uploads/transport/"+t.img+")")},e.sendImg=function(t){var o=$(t).parents("form");if(""===$(t).val())return!1;var n=o.children("input[name=discodes_id]"),r=o.children("input[name=token]"),i=o.children("input[name=img_type]"),a=o.find("span.upload-holder"),c=o.find("i.upload-holder"),u=o.find("img.upload-holder"),d=s.getSpot();n.length&&n.val(d.discodes),r.length&&r.val(d.token),o.ajaxSubmit({type:"POST",success:function(t){var o=angular.fromJson(t);(o.error="no")?(a.length&&a.addClass("hide"),c.length&&c.addClass("hide"),u.removeClass("hide"),u.attr("src",o.path+"?ver="+(new Date).getTime()),e.$apply(function(){"transport_photo"==i.val()?e.custom_card.photo=o.path:"transport_logo"==i.val()&&(e.custom_card.logo=o.path),e.error.custom_card=!1})):e.error.custom_card=!0}})},e.showImageCropper=!1,e.showLogoCropper=!1,e.setSpot=function(){s.setSpot(e.spot)},e.orderTransportCard=function(o,n,r){if(!n)return e.error.custom_card=!0,!1;var i=s.getSpot();o.token=i.token,o.discodes=i.discodes,t.post("/spot/orderTransportCard",o).success(function(t){"no"==t.error?(e.hideCustomCard(),s.messageModal(r,e.host_type)):e.error.custom_card=!0})},e.$watch("custom_card.shipping_name + custom_card.phone + custom_card.address + custom_card.city + custom_card.zip + custom_card.email",function(){e.error.custom_card=!1
})}]),angular.module("mobispot").controller("ProductController",["$scope","$http","$compile","$timeout","contentService",function(e,t){e.StoreInit=function(){var n={token:e.user.token};t.post("/store/product/getPriceList",n).success(function(t){e.products=t.products,e.settings=t.settings;for(var n=0;n<e.products.length;n++)if(e.products[n].jsID=n,e.products[n].selectedSize=e.products[n].size[0],e.products[n].selectedColor=e.products[n].color[0],e.products[n].selectedSurface=e.products[n].surface[0],e.products[n].quantity=1,e.products[n].listposition={left:"0px"},e.products[n].addText=e.settings.addToCart,"undefined"!=typeof e.products[n].selectedColor&&"undefined"!=typeof e.products[n].photo&&e.products[n].photo.length>0)for(var s="_"+e.products[n].selectedColor,r=0;r<e.products[n].photo.length;r++){var i=e.products[n].photo[r].substring(0,e.products[n].photo[r].lastIndexOf("."));if(i.substr(i.length-s.length)==s){e.products[n].listposition={left:o*r*-1+"px"};break}}e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var o=242;e.scrollTo=function(t,n,s){e.products[s].listposition={left:o*n*-1+"px"}},e.addToCart=function(o){if(e.products[o].quantity<1)return!1;if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:parseInt(e.products[o].quantity),selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/addToCart",n).success(function(t){if("no"==t.error){e.products[o].addText=e.settings.added,e.items.count+=parseInt(e.products[o].quantity);var n=angular.element("a.icon-bag-link span");n.text(e.items.count)}}),e.inRequest=!1}},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.setSize=function(t,o){e.products[t].selectedSize=o,e.products[t].addText=e.settings.addToCart},e.setColor=function(t,n){if(e.products[t].selectedColor=n,e.products[t].addText=e.settings.addToCart,"undefined"!=typeof e.products[t].photo&&e.products[t].photo.length>0)for(var s="_"+n,r=0;r<e.products[t].photo.length;r++){var i=e.products[t].photo[r].substring(0,e.products[t].photo[r].lastIndexOf("."));if(i.substr(i.length-s.length)==s){e.products[t].listposition={left:o*r*-1+"px"};break}}},e.setSurface=function(t,o){e.products[t].selectedSurface=o,e.products[t].addText=e.settings.addToCart},e.resetAddedText=function(t){e.products[t].addText=e.settings.addToCart,e.products[t].quantity<0&&(e.products[t].quantity=0)},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"}}]),angular.module("mobispot").controller("CartController",["$scope","$http","$compile","$timeout","contentService",function(e,t,o,n,s){e.promoError=!1,e.customerError=!1,e.CartInit=function(){e.summ=0;var o={token:e.user.token};t.post("/store/product/GetCart",o).success(function(t){e.products=t.products,e.discount=t.discount,e.products.length<=0&&(window.location="/store");for(var o=0;o<e.products.length;o++)if(e.products[o].jsID=o,e.products[o].quantity=parseInt(e.products[o].quantity),e.summ+=parseFloat(e.products[o].selectedSize.price)*e.products[o].quantity,e.products[o].listposition={left:"0px"},"undefined"!=typeof e.products[o].selectedColor&&"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var n="_"+e.products[o].selectedColor,s=0;s<e.products[o].photo.length;s++){var i=e.products[o].photo[s].substring(0,e.products[o].photo[s].lastIndexOf("."));if(i.substr(i.length-n.length)==n){e.products[o].listposition={left:r*s*-1+"px"};break}}if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var o=0;o<e.products.length;o++)for(var s=0;s<e.discount.products.length;s++)if(e.products[o].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[o].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.checkingOut=!1,e.inRequest=!1}),angular.element("body").removeClass("overflow-h"),angular.element(".m-cover-preload").fadeOut(600)};var r=242;e.scrollTo=function(t,o,n){e.products[n].listposition={left:r*o*-1+"px"}},e.emptyClass=function(){return e.products?e.products.length>0?"hide":"":void 0},e.sizeClass=function(e,t){return e===t?"active":""},e.colorClass=function(e,t){return e===t?"active":""},e.surfaceClass=function(e,t){return e===t?"active":""},e.chekingOutClass=function(){return e.checkingOut?"":"hide"},e.setSize=function(t,o){e.summ-=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity,e.products[t].selectedSize=o,e.summ+=parseFloat(e.products[t].selectedSize.price)*e.products[t].quantity},e.setColor=function(o,n){var s={id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor};if("undefined"!=typeof e.products[o].selectedSize&&(s.selectedSize=e.products[o].selectedSize),"undefined"!=typeof e.products[o].selectedSurface&&(s.selectedSurface=e.products[o].selectedSurface),e.products[o].selectedColor=n,"undefined"!=typeof e.products[o].photo&&e.products[o].photo.length>0)for(var i="_"+n,a=0;a<e.products[o].photo.length;a++){var c=e.products[o].photo[a].substring(0,e.products[o].photo[a].lastIndexOf("."));if(c.substr(c.length-i.length)==i){e.products[o].listposition={left:r*a*-1+"px"};break}}var u={token:e.user.token,oldProduct:s,newProduct:e.products[o]};t.post("/store/product/SaveProduct",u).success(function(e){"no"!=e.error})},e.setSurface=function(t,o){e.products[t].selectedSurface=o},e.setDelivery=function(t){e.selectedDelivery=e.deliveries[t]},e.setPayment=function(t){e.selectedPayment=e.payments[t]},e.changeQuantity=function(o){if(parseInt(e.products[o].quantity)<=0)e.deleteItem(o);else{e.summ=0;for(var n=0;n<e.products.length;n++)e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if("undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}var r={token:e.user.token,oldProduct:e.products[o],newProduct:e.products[o]};t.post("/store/product/SaveProduct",r).success(function(e){"no"!=e.error})}},e.checkOut=function(){if(0===e.summ)return!1;if(!e.checkingOut){var o={token:e.user.token};t.post("/store/product/getCustomer",o).success(function(t){e.deliveries=t.delivery,e.payments=t.payment,e.customer=t.customer;for(var o=0;o<e.deliveries.length;o++)e.deliveries[o].jsID=o;for(var o=0;o<e.payments.length;o++)e.payments[o].jsID=o;e.selectedDelivery=e.deliveries[0],e.selectedPayment=e.payments[0]}),e.checkingOut=!0}angular.element("#proceedNextForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedNextForm").offset().top},600)},e.deleteItem=function(o){if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,id:e.products[o].id,quantity:e.products[o].quantity,selectedColor:e.products[o].selectedColor,selectedSurface:e.products[o].selectedSurface,selectedSize:e.products[o].selectedSize};t.post("/store/product/deleteFromCart",n).success(function(t){if("no"==t.error){e.products.splice(o,1),e.summ=0;for(var n=0;n<e.products.length;n++)e.products[n].jsID=n,e.summ+=parseFloat(e.products[n].selectedSize.price)*e.products[n].quantity;if(e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var s=0;s<e.discount.products.length;s++)if(e.products[n].id==e.discount.products[s].id_product){e.discount.summ+=e.discount.products[s].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0&&(e.summ-=e.discount.summ)}e.products.length<=0&&(window.location="/store")}}),e.inRequest=!1}},e.confirmPromo=function(){if(!e.inRequest){e.inRequest=!0;var o={token:e.user.token,promoCode:e.discount.promoCode};t.post("/store/product/ConfirmPromo",o).success(function(t){if("no"==t.error){e.promoError=!1;var o=e.discount.summ;if(e.discount=t.discount,"undefined"!=typeof e.discount.products&&e.discount.products.length>0){e.discount.summ=0;for(var n=0;n<e.products.length;n++)for(var r=0;r<e.discount.products.length;r++)if(e.products[n].id==e.discount.products[r].id_product){e.discount.summ+=e.discount.products[r].discount*parseInt(e.products[n].quantity);break}e.discount.summ>0?(o>0&&(e.summ+=parseFloat(o)),e.summ-=e.discount.summ):o>0&&(e.summ+=parseFloat(o))}}else e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0),e.result.message=t.error,s.desktopModal("message")}).error(function(){e.promoError=!0,e.discount.summ>0&&(e.summ+=parseFloat(e.discount.summ),e.discount.summ=0)})}e.inRequest=!1},e.$watch("discount.promoCode",function(){e.promoError=!1}),e.saveCustomer=function(o){if(!o)return e.customerError=!0,e.result.message=e.customerHint,s.desktopModal("message"),!1;if(0===e.summ)return!1;if(!e.inRequest){e.inRequest=!0;var n={token:e.user.token,customer:e.customer};t.post("/store/product/saveCustomer",n).success(function(t){"no"==t.error?(angular.element("#proceedFinishForm").removeClass("hide-content-box"),$("html, body").animate({scrollTop:$("#proceedFinishForm").offset().top},600)):(e.customerError=!0,e.result.message=t.error,s.desktopModal("message"))}),e.inRequest=!1}},e.$watch("customer.first_name + customer.last_name + customer.email + customer.target_first_name + customer.target_last_name + customer.phone + customer.address + customer.city + customer.zip + customer.country",function(){e.customerError=!1}),e.buy=function(){if(0===e.summ)return!1;var n={token:e.user.token,customer:e.customer,products:e.products,delivery:e.selectedDelivery,payment:e.selectedPayment,discount:e.discount};t.post("/store/product/buy",n).success(function(t){"no"==t.error?"Uniteller"==t.payment&&(angular.element("#proceedFinishForm").after(o(t.content)(e)),angular.element("#payUniteller").submit()):e.result.message=t.error,s.desktopModal("message")})},e.thumbClass=function(e){return e>3?"thumbswrapper xscrolled":"thumbswrapper"},e.valClass=function(e){return e?"":"error"}}]),angular.module("mobispot").controller("UserController",["$scope","$http","$compile","$cookies","contentService",function(e,t,o,n,s){e.error={},e.result={},e.modal="none",e.host_type="mobile",e.setEmpty=function(){e.user.password="",e.user.terms=0,e.error={},e.result={}},e.hideModal=function(){e.modal="none"},angular.element("#birthday").datepicker({yearRange:"1900:-0",dateFormat:"dd.mm.yy",onSelect:function(t){e.$apply(function(){e.user.birthday=t})}}),e.$watch("modal",function(){e.setEmpty(e.modal),s.desktopModal(e.modal)}),e.setProfile=function(o){t.post("/user/editProfile",o).success(function(t){"no"==t.error&&(e.result.message=t.content,s.desktopModal("message"))})},e.getResolution=function(){var t=n.resolution;if(!t){for(var o=Math.max(screen.width,screen.height),s=[1920,1400,1280],r=0;r<s.length;r++)if(o>=s[r]){t=s[r];break}n.resolution=""+t,e.resolution=t}},e.login=function(o,n){return n?void t.post("/service/login",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content):"no"==t.error?angular.isUndefined(t.access_url)||!t.access_url.length?angular.element(location).attr("href","/spot/list/"):angular.element(location).attr("href",t.access_url):angular.element(location).attr("href","/")}):!1},e.$watch("user.email + user.password + user.code",function(){e.error.email=!1,e.error.code=!1,e.error.password=!1,e.error.content=""}),e.activation=function(o,n){return n?0===o.terms?!1:void t.post("/service/registration",o).success(function(t){"no"==t.error?(e.user.email="",e.user.password="",e.user.activ_code="",e.user.terms=0,"mobile"===e.host_type?s.mobileModal(t.content,"none"):(e.result.message=t.content,s.desktopModal("message"))):("email"===t.error?e.error.email=!0:e.error.code=!0,e.error.content=t.content,"mobile"===e.host_type&&s.mobileModal(t.content,"error"))}):!1},e.recovery=function(o,n){return n?void t.post("/service/recovery",o).success(function(t){"yes"==t.error?(e.error.email=!0,e.error.content=t.content,"mobile"===e.host_type&&s.mobileModal(t.content,"error")):"no"==t.error&&(e.user.email="",e.result.message=t.content,"mobile"===e.host_type?s.mobileModal(t.content,"none"):s.desktopModal("message"))}):!1},e.change=function(e,o){return o?void t.post(window.location.pathname,e).success(function(e){"no"==e.error&&angular.element(location).attr("href","/spot/list/")}):!1},e.messageModal=function(t){return angular.isUndefined(t)||!t.length?!1:(e.result.message=t,void("mobile"===e.host_type?s.mobileModal(t,"none"):s.desktopModal("message")))}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXMiOlsiYW5ndWxhci1jb29raWVzLm1pbi5qcyIsInNvcnRhYmxlLmpzIiwiYXBwLmpzIiwic2VydmljZS5qcyIsImRlbW9raXQuanMiLCJoZWxwLmpzIiwicGhvbmUuanMiLCJzbGlkZS5qcyIsInNwb3QuanMiLCJzdG9yZS5qcyIsInVzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBS0EsU0FBQSxFQUFBLEVBQUEsR0FBQSxZQUFBLEdBQUEsT0FBQSxhQUFBLE9BQUEsUUFBQSxZQUFBLGFBQUEsV0FBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsS0FBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLEVBQUEsV0FBQSxPQUFBLEdBQUEsVUFBQSxXQUFBLEdBQUEsR0FBQSxFQUFBLFNBQUEsSUFBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsY0FBQSxHQUFBLEVBQUEsRUFBQSxPQUFBLFdBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxLQUFBLElBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxFQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxVQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsUUFBQSxnQkFDQSxXQUFBLFNBQUEsR0FBQSxPQUFBLElBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEdBQUEsR0FBQSxJQUFBLFNBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsSUFBQSxPQUFBLFNBQUEsU0FBQSxHQUFBLFNBQUEsT0FBQSxPQUFBLFNDREEsUUFBQSxPQUFBLGtCQUNBLE1BQUEsdUJBQ0EsVUFBQSxjQUFBLG1CQUNBLFNBQUEsR0FDQSxPQUNBLFFBQUEsV0FDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxrQkFBQSxHQUNBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxJQUdBLEVBR0EsR0FBQSxNQUVBLEdBQ0EsUUFBQSxLQUNBLE9BQUEsS0FDQSxNQUFBLEtBQ0EsS0FBQSxLQUNBLE9BQUEsS0FHQSxTQUFBLE9BQUEsRUFBQSxHQUVBLElBRUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxTQUFBLElBR0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxVQUFBLE1BQUEsRUFBQSxLQUFBLFVBR0EsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxTQUFBLE9BQUEsR0FHQSxFQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFNBQUEsVUFBQSxFQUVBLEVBQUEsWUFBQSxPQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsRUFBQSxLQUFBLFNBQUEsUUFHQSxFQUFBLE9BQUEsU0FBQSxFQUFBLEdBR0EsRUFBQSxLQUFBLFNBQUEsTUFEQSxJQUFBLEVBQUEsWUFBQSxPQUNBLEVBQUEsWUFBQSxPQUFBLEVBQUEsR0FBQSxHQUVBLEVBQUEsWUFBQSxPQUFBLEVBQUEsS0FBQSxTQUFBLE1BQUEsR0FBQSxJQUlBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsS0FBQSxTQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxDQUdBLEdBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxLQUFBLFNBQUEsTUFDQSxFQUFBLEVBQUEsS0FBQSxRQUdBLEVBQUEsS0FBQSxTQUFBLE9BQUEsWUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsU0FBQSxPQUFBLFlBQUEsT0FBQSxFQUFBLEdBQUEsS0FHQSxFQUFBLEtBQUEsU0FBQSxRQUFBLEVBQUEsS0FBQSxTQUFBLFdBQ0EsRUFBQSxXQU1BLEVBQUEsT0FBQSxFQUFBLFdBQUEsU0FBQSxHQUNBLFFBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FFQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBR0EsRUFBQSxTQUFBLFNBQUEsRUFBQSxPQUVBLEdBRUEsUUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE1BS0EsRUFBQSxTQUFBLFFDeEdBLFFBQUEsT0FBQSxZQUFBLFlBQUEsZ0JDQ0EsUUFBQSxPQUFBLFlBQUEsUUFBQSxpQkFBQSxXQUdBLEtBQUEsYUFBQSxTQUFBLEVBQUEsR0FNQSxHQUxBLFFBQUEsWUFBQSxLQUFBLEVBQUEsS0FFQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsUUFFQSxRQUFBLEVBRUEsTUFEQSxHQUFBLHNCQUFBLFlBQUEsVUFBQSxRQUFBLElBQ0EsQ0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLElBQUEsRUFFQSxHQUFBLGVBQUEsU0FBQSxXQUFBLEVBQUEsc0JBQUEsS0FBQSxPQUFBLEVBQ0EsRUFBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxFQUFBLFdBQ0EsRUFBQSxPQUFBLEdBQUEsU0FBQSxZQUdBLEVBQUEsT0FBQSxHQUFBLFNBQUEsV0FJQSxLQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxhQUNBLEVBQUEsRUFBQSxLQUFBLElBRUEsR0FBQSxZQUFBLGNBQ0EsU0FBQSxHQUNBLEVBQUEsU0FBQSxjQUVBLEVBQUEsT0FDQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLEdBQ0EsV0FBQSxXQUNBLEVBQUEsUUFDQSxNQUdBLEtBQUEsYUFBQSxTQUFBLEVBQUEsR0FFQSxHQURBLE1BQUEsSUFDQSxXQUFBLEVBQ0EsS0FBQSxZQUFBLEVBQUEsWUFDQSxDQUNBLFFBQUEsUUFBQSxjQUFBLFVBQ0EsUUFBQSxRQUFBLFNBQUEsWUFBQSxPQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsWUFDQSxFQUFBLFFBQUEsUUFBQSxhQUVBLEdBQUEsZUFBQSxTQUFBLFVBQ0EsRUFBQSxzQkFBQSxZQUFBLFVBQUEsUUFBQSxNQUFBLFdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxPQUFBLE9BQUEsU0FBQSxhQUdBLEVBQUEsS0FBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLFNBQUEsYUFNQSxLQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxZQUFBLEtBQUEsRUFBQSxJQUNBLElBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxHQUNBLEdBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxHQUdBLElBQUEsS0FFQSxNQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsR0FHQSxLQUFBLFFBQUEsV0FDQSxNQUFBLE1BS0EsUUFBQSxPQUFBLFlBQUEsUUFBQSxnQkFBQSxXQUVBLEdBQUEsR0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0EyQkEsUUFBQSxLQUNBLEVBQUEsT0FDQSxJQUdBLFFBQUEsS0FDQSxFQUFBLE1BQ0EsSUFHQSxRQUFBLEtBQ0EsRUFBQSxPQUFBLFFBQUEsR0FDQSxFQUFBLE9BQUEsUUFBQSxHQUNBLEVBQUEsVUFBQSxPQUFBLFFBQUEsR0FFQSxFQUFBLFlBQUEsVUFBQSxRQUFBLE9BekNBLE1BQUEsSUFFQSxRQUFBLFFBQUEsY0FBQSxVQUNBLFFBQUEsUUFBQSxTQUFBLFlBQUEsT0FFQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGFBQ0EsRUFBQSxRQUFBLFFBQUEsZUFDQSxFQUFBLFFBQUEsUUFBQSx5QkFDQSxFQUFBLFFBQUEsUUFBQSx1QkFFQSxHQUFBLGVBQUEsU0FBQSxXQUNBLEVBQUEsc0JBQUEsWUFBQSxVQUFBLFFBQUEsR0FFQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsR0FDQSxFQUFBLFlBQUEsU0FDQSxFQUFBLFlBQUEsWUFDQSxtQkFBQSxJQUNBLEVBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxPQUFBLFNBQUEsVUFFQSxFQUFBLEtBQUEsUUFBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsRUFBQSxVQUFBLEtBQUEsUUFBQSxHQXNCQSxRQUNBLFlBQUEsS0N0SUEsUUFBQSxPQUFBLFlBQUEsV0FBQSxxQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FFQSxFQUFBLE9BQUEsbUlBQUEsV0FDQSxFQUFBLE1BQUEsT0FBQSxJQUdBLEVBQUEsT0FDQSxLQUFBLEdBQ0EsTUFBQSxHQUNBLE1BQUEsR0FDQSxRQUFBLEdBQ0EsS0FBQSxHQUNBLElBQUEsR0FDQSxRQUFBLEdBQ0EsU0FBQSxFQUNBLFFBQUEsR0FHQSxFQUFBLFlBQ0EsRUFBQSxlQUFBLEVBQ0EsRUFBQSxVQUNBLEVBQUEsYUFDQSxFQUFBLFlBRUEsRUFBQSxNQUFBLEVBQ0EsRUFBQSxRQUFBLEVBRUEsRUFBQSxnQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLGVBQUEsR0FDQSxFQUFBLE9BQUEsR0FBQSxHQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLFNBQUEsS0FDQSxFQUFBLGlCQUdBLEVBQUEsY0FBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FDQSxFQUFBLFNBQUEsS0FDQSxFQUFBLGlCQUdBLEVBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsR0FHQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFDQSxtQkFBQSxJQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFDQSxFQUFBLGlCQUdBLEVBQUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsR0FHQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFFBQUEsRUFDQSxtQkFBQSxJQUNBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FHQSxFQUFBLGNBQUEsV0FDQSxFQUFBLEtBQUEsSUFFQSxFQUFBLE1BQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxVQUFBLG1CQUFBLEdBQUEsVUFBQSxFQUFBLE1BQUEsWUFDQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsTUFBQSxZQUdBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQUEsWUFLQSxFQUFBLE9BQ0EsT0FBQSxTQUFBLEtBQUEsS0FFQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsS0FBQSxzQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxNQUNBLFNBQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFBQSxnQkFFQSxRQUFBLFFBQUEsbUJBQUEsTUFBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLFFBQUEsUUFBQSxnQkFBQSxXQUdBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGFBQUEsV0FDQSxFQUFBLE1BQUEsT0FBQSxRQXRCQSxFQUFBLE1BQUEsT0FBQSxHQUNBLE9DakZBLFFBQUEsT0FBQSxZQUFBLFdBQUEsa0JBQ0EsU0FBQSxRQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEdBRUEsRUFBQSxTQUVBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQ0EsRUFBQSxNQUFBLEVBQUEsZUFDQSxHQUFBLEtBQUEsd0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxXQUFBLEdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxHQUVBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLFVBQUEsZ0JBVkEsTUNQQSxRQUFBLE9BQUEsWUFBQSxXQUFBLG9CQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsV0FBQSxTQUFBLEdBRUEsRUFBQSxXQUFBLEdBR0EsRUFBQSxZQUFBLFNBQUEsR0FFQSxFQUFBLFlBQUEsR0FHQSxFQUFBLGNBRUEsRUFBQSxrQkNkQSxRQUFBLE9BQUEsWUFBQSxXQUFBLG1CQUNBLFNBQUEsV0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLFlBQUEsSUFDQSxFQUFBLFdBQUEsSUFFQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxVQUFBLEVBQUEsRUFBQSxJQUFBLEdBR0EsRUFBQSxTQUNBLEVBQUEsTUFBQSxLQUFBLFFBQ0EsRUFBQSxNQUFBLGNBQUEsS0FBQSxPQUNBLEVBQUEsTUFBQSxTQUNBLEdBQUEsRUFBQSxJQUFBLGtCQUFBLFVBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEsaUJBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSxrQkFBQSxVQUFBLHdCQUNBLEdBQUEsRUFBQSxJQUFBLG1CQUFBLFVBQUEsd0JBQ0EsR0FBQSxFQUFBLElBQUEsbUJBQUEsVUFBQSx3QkFDQSxHQUFBLEVBQUEsSUFBQSxtQkFBQSxVQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLG1CQUFBLFVBQUEscUJBQ0EsR0FBQSxFQUFBLElBQUEsbUJBQUEsVUFBQSxxQkFDQSxHQUFBLEVBQUEsSUFBQSxtQkFBQSxVQUFBLHFCQUNBLEdBQUEsRUFBQSxJQUFBLG1CQUFBLFVBQUEscUJBQ0EsR0FBQSxHQUFBLElBQUEsZ0JBQUEsVUFBQSxxQkFDQSxHQUFBLEdBQUEsSUFBQSxrQkFBQSxVQUFBLHFCQUNBLEdBQUEsR0FBQSxJQUFBLGlCQUFBLFVBQUEscUJBQ0EsR0FBQSxHQUFBLElBQUEsZ0JBQUEsVUFBQSxxQkFDQSxHQUFBLEdBQUEsSUFBQSxpQkFBQSxVQUFBLHFCQUNBLEdBQUEsR0FBQSxJQUFBLGVBQUEsVUFBQSxxQkFDQSxHQUFBLEdBQUEsSUFBQSxpQkFBQSxVQUFBLHFCQUNBLEdBQUEsR0FBQSxJQUFBLGtCQUFBLFVBQUEscUJBQ0EsR0FBQSxHQUFBLElBQUEsZ0JBQUEsVUFBQSxxQkFDQSxHQUFBLEdBQUEsSUFBQSxlQUFBLFVBQUEscUJBQ0EsR0FBQSxHQUFBLElBQUEsZ0JBQUEsVUFBQSxxQkFDQSxHQUFBLEdBQUEsSUFBQSxjQUFBLFVBQUEscUJBQ0EsR0FBQSxHQUFBLElBQUEsZ0JBQUEsVUFBQSxxQkFDQSxHQUFBLEdBQUEsSUFBQSxpQkFBQSxVQUFBLHFCQUdBLEVBQUEsTUFBQSxZQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxJQUNBLEVBQUEsTUFBQSxtQkFBQSxFQUdBLEVBQUEsTUFBQSxPQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUNBLEVBQUEsTUFBQSxjQUFBLEdBRUEsRUFBQSxNQUFBLE1BQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQ0EsRUFBQSxNQUFBLGFBQUEsR0FFQSxFQUFBLE1BQUEsUUFBQSxFQUFBLE1BQUEsbUJBQ0EsRUFBQSxNQUFBLGFBQUEsWUFDQSxFQUFBLE1BQUEsZ0JBQUEsRUFDQSxFQUFBLE1BQUEsZ0JBQUEsRUFHQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxjQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsR0FBQSxPQUdBLEVBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsQ0FFQSxTQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsYUFBQSxNQUNBLElBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxJQUFBLENBQ0EsU0FBQSxJQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQ0EsUUFBQSxRQUFBLFdBQUEsRUFBQSxLQUFBLGlCQUFBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsUUFBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLGFBR0EsRUFBQSxpQkFBQSxXQUNBLEVBQUEsTUFBQSxhQUFBLFlBQ0EsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEscUJBR0EsRUFBQSxZQUFBLFdBQ0EsRUFBQSxNQUFBLGFBQUEsT0FDQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxnQkFHQSxFQUFBLFdBQUEsV0FDQSxFQUFBLE1BQUEsYUFBQSxNQUNBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLGVBR0EsRUFBQSxZQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsZ0JBQ0EsRUFFQSxFQUFBLE1BQUEsZ0JBQ0EsR0FFQSxFQUFBLE1BQUEsZ0JBQUEsRUFDQSxFQUFBLE1BQUEsZ0JBQUEsTUFDQSxHQUFBLFdBQ0EsRUFBQSxpQkFDQSxPQUdBLEVBQUEsV0FBQSxXQUNBLEVBQUEsTUFBQSxnQkFBQSxHQUdBLEVBQUEsY0FBQSxXQUNBLElBQUEsRUFBQSxNQUFBLGVBRUEsTUFEQSxHQUFBLE1BQUEsZ0JBQUEsR0FDQSxDQUdBLElBQUEsYUFBQSxFQUFBLE1BQUEsYUFBQSxDQUdBLElBQUEsR0FGQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLFdBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLElBQUEsRUFBQSxNQUFBLHFCQUNBLEVBQUEsRUFFQSxJQUFBLEVBQUEsRUFDQSxPQUFBLENBSUEsR0FBQSxNQUFBLG1CQURBLEVBQUEsTUFBQSxXQUFBLE9BQUEsR0FBQSxFQUNBLEVBQUEsTUFBQSxXQUFBLEdBRUEsRUFBQSxNQUFBLFdBQUEsRUFBQSxHQUVBLEVBQUEsdUJBRUEsSUFBQSxRQUFBLEVBQUEsTUFBQSxhQUFBLENBR0EsSUFBQSxHQUZBLEdBQUEsR0FFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE1BQUEsTUFBQSxPQUFBLElBQ0EsRUFBQSxNQUFBLE1BQUEsSUFBQSxFQUFBLE1BQUEsZ0JBQ0EsRUFBQSxFQUVBLElBQUEsRUFBQSxFQUNBLE9BQUEsQ0FJQSxHQUFBLE1BQUEsY0FEQSxFQUFBLE1BQUEsTUFBQSxPQUFBLEdBQUEsRUFDQSxFQUFBLE1BQUEsTUFBQSxHQUVBLEVBQUEsTUFBQSxNQUFBLEVBQUEsR0FFQSxFQUFBLGtCQUVBLENBQUEsR0FBQSxPQUFBLEVBQUEsTUFBQSxhQW1CQSxPQUFBLENBaEJBLEtBQUEsR0FGQSxHQUFBLEdBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxNQUFBLEtBQUEsT0FBQSxJQUNBLEVBQUEsTUFBQSxLQUFBLElBQUEsRUFBQSxNQUFBLGVBQ0EsRUFBQSxFQUVBLElBQUEsRUFBQSxFQUNBLE9BQUEsQ0FJQSxHQUFBLE1BQUEsYUFEQSxFQUFBLE1BQUEsS0FBQSxPQUFBLEdBQUEsRUFDQSxFQUFBLE1BQUEsS0FBQSxHQUVBLEVBQUEsTUFBQSxLQUFBLEVBQUEsR0FFQSxFQUFBLGFBS0EsRUFBQSxNQUFBLGdCQUFBLEVBQ0EsRUFBQSxXQUNBLEVBQUEsaUJBQ0EsTUFJQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsT0FBQSxPQUFBLFFDOUtBLFFBQUEsT0FBQSxZQUFBLFdBQUEsa0JBQ0EsU0FBQSxRQUFBLFdBQUEsV0FBQSxpQkFBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQXVnQkEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxrQkFDQSxFQUFBLGlCQUNBLFlBQUEsRUFBQSxLQUNBLFFBQUEsUUFBQSxZQUFBLFNBQUEsU0FFQSxRQUFBLFFBQUEsWUFBQSxZQUFBLFNBS0EsUUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUdBLEtBQUEsR0FBQSxHQUZBLEVBQUEsRUFBQSxPQUFBLE9BQUEsRUFBQSxhQUFBLE1BRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLElBQ0EsRUFBQSxXQUFBLEdBeUJBLFFBQUEsR0FBQSxHQUNBLEVBQUEsT0FBQSxXQUVBLEVBQUEsU0FEQSxFQUFBLGlCQUNBLEtBQUEsTUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BRUEsc0JBampCQSxFQUFBLFFBQUEsU0FDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFFBQ0EsRUFBQSxRQUFBLEVBRUEsRUFBQSxTQUNBLEVBQUEsVUFFQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLFNBQUEsRUFFQSxFQUFBLFdBQ0EsRUFBQSxRQUFBLE9BQUEsRUFDQSxFQUFBLFlBQUEsRUFFQSxFQUFBLFVBQ0EsRUFBQSxPQUFBLFNBRUEsRUFBQSxXQUFBLEdBRUEsRUFBQSxXQUNBLEVBQUEsUUFBQSxLQUFBLEdBQ0EsRUFBQSxRQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsYUFBQSxFQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxRQUFBLFVBQUEsRUFFQSxFQUFBLFFBRUEsRUFBQSxtQkFDQSxFQUFBLGFBQUEsS0FBQSxHQUFBLE1BQUEsR0FBQSxLQUFBLEdBQUEsU0FBQSxHQUFBLEtBQUEsR0FDQSxjQUFBLEdBQUEsTUFBQSxHQUFBLFFBQUEsR0FBQSxLQUFBLEdBQUEsSUFBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLElBQ0EsRUFBQSxpQkFLQSxFQUFBLE9BQUEseUJBQUEsV0FDQSxFQUFBLE1BQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLElBSUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxFQUFBLEtBQUEsVUFDQSxHQUFBLEtBQUEsWUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsU0FDQSxRQUFBLFFBQUEsY0FBQSxRQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsUUFBQSxRQUFBLFlBQUEsY0FDQSxHQUFBLEtBQUEsV0FDQSxHQUFBLEtBQUEsTUFDQSxFQUFBLGNBQ0EsT0FBQSxTQUFBLEtBQUEsVUFBQSxPQUFBLFNBQUEsU0FBQSxlQUNBLE9BQUEsRUFBQSxRQUNBLEVBQUEsTUFBQSxNQUFBLE1BWEEsR0FpQkEsRUFBQSxPQUFBLGdDQUFBLFdBQ0EsRUFBQSxRQUFBLEtBQUEsR0FDQSxRQUFBLFFBQUEsUUFBQSxPQUFBLFNBQUEsRUFBQSxpQkFFQSxRQUFBLEVBQUEsUUFBQSxNQUNBLEVBQUEsU0FBQSxFQUFBLE1BQ0EsVUFBQSxFQUFBLFFBQUEsTUFDQSxFQUFBLFdBQUEsRUFBQSxNQUNBLFVBQUEsRUFBQSxRQUFBLE1BQ0EsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLFNBQ0EsWUFBQSxFQUFBLFFBQUEsTUFDQSxFQUFBLGNBQUEsRUFBQSxNQUNBLGFBQUEsRUFBQSxRQUFBLE9BQ0EsRUFBQSxjQUFBLEVBQUEsUUFJQSxFQUFBLGNBQUEsV0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLGNBQUEsUUFDQSxTQUFBLFFBQUEsaUJBQUEsSUFBQSxhQUFBLEVBQUEsTUFHQSxFQUFBLFNBQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxFQUFBLFNBQUEsT0FBQSxDQUVBLElBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxHQUFBLEtBQUEsYUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLFFBQ0EsRUFBQSxrQkFBQSxFQUNBLEVBQUEsaUJBRUEsRUFBQSxnQkFDQSxRQUFBLFFBQUEscUJBQUEsT0FBQSxTQUNBLFFBQUEsR0FDQSxLQUdBLEVBQUEsV0FEQSxFQUFBLFlBQUEsRUFBQSxXQUFBLEVBQ0EsVUFBQSxFQUFBLFdBRUEsUUFDQSxFQUFBLFdBQUEsT0FNQSxFQUFBLFdBQUEsV0FDQSxFQUFBLFNBQUEsRUFBQSxLQUFBLFVBSUEsRUFBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsUUFBQSxFQUNBLEVBQUEsS0FBQSx1QkFBQSxFQUFBLE1BQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxLQUFBLEtBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsR0FDQSxRQUFBLFFBQUEsWUFBQSxZQUFBLE9BRUEsUUFBQSxRQUFBLG1CQUFBLFNBQUEsVUFFQSxRQUFBLFFBQUEsbUJBQUEsUUFBQSxFQUFBLFdBQUEsUUFBQSxRQUFBLHFCQUFBLFlBQUEsWUFBQSxRQUFBLFFBQUEscUJBQUEsT0FBQSxFQUFBLEtBQ0EsUUFBQSxRQUFBLG1CQUFBLFlBQUEsUUFHQSxJQUFBLEdBQUEsUUFBQSxRQUFBLFVBQUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxTQUFBLFFBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxRQUdBLEVBQUEsZUFJQSxFQUFBLFVBQUEsV0FDQSxFQUFBLEtBQUEsa0JBQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxTQU9BLEVBQUEsaUJBQ0EsT0FBQSxXQUNBLEVBQUEsYUFFQSxZQUFBLGdCQUNBLE9BQUEsUUFDQSxrQkFBQSxFQUNBLFVBQUEsVUFDQSxRQUFBLElBSUEsRUFBQSxjQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLEVBQ0EsRUFBQSxLQUFBLDBCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsYUFDQSxHQUFBLFNBQ0EsRUFBQSxLQUFBLEVBQUEsS0FDQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLEVBQUEsYUFNQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsWUFtQkEsRUFBQSxtQkFuQkEsQ0FDQSxFQUFBLElBQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGNBQ0EsRUFBQSxRQUFBLFFBQUEsY0FBQSxPQUVBLElBQUEsRUFBQSxLQUFBLGVBQUEsT0FBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxjQUNBLEdBQUEsS0FBQSxZQUFBLEVBQUEsS0FBQSxhQUFBLFdBQ0EsQ0FFQSxHQUFBLEdBQUEsRUFBQSxLQUFBLG9CQUNBLEdBQUEsS0FBQSxZQUFBLEVBQUEsT0FHQSxFQUFBLFlBQUEsUUFDQSxFQUFBLEtBQUEsWUFBQSxNQUFBLEdBQ0EsRUFBQSxPQUFBLE9BQUEsRUFBQSxHQUFBLE1BT0EsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFFBQUEsY0FDQSxFQUFBLEVBQUEsTUFFQSxHQUFBLEtBQUEsd0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFNBQ0EsRUFBQSxXQUdBLEVBQUEsU0FDQSxFQUFBLGNBRUEsR0FBQSxLQUFBLGVBS0EsRUFBQSxhQUFBLFdBQ0EsSUFBQSxFQUFBLEtBQUEsVUFBQSxFQUFBLEtBQUEsWUFBQSxPQUFBLENBRUEsSUFBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEVBQUEsRUFBQSxNQUVBLEdBQUEsS0FBQSx3QkFBQSxFQUFBLE1BQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxTQUNBLEVBQUEsV0FHQSxFQUFBLFNBQ0EsRUFBQSxjQUVBLEdBQUEsS0FBQSxlQUtBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQ0EsR0FBQSxLQUFBLGVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsSUFBQSxFQUFBLFNBQUEsT0FBQSxLQUFBLEVBQUEsU0FIQSxHQVNBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFNBQUEsR0FDQSxNQUFBLE9BQUEsR0FDQSxNQUVBLEdBQUEsS0FBQSxjQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxRQUFBLE1BQUEsV0FJQSxFQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEtBQUEsV0FDQSxhQUtBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLFNBQUEsR0FDQSxNQUFBLE9BQUEsR0FDQSxNQUVBLEdBQUEsS0FBQSxlQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLGtCQUlBLEVBQUEsS0FBQSxRQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsS0FBQSxRQUNBLGFBS0EsRUFBQSxhQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLGFBQ0EsRUFBQSxFQUFBLEtBQUEsa0JBRUEsSUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLEtBQUEsV0FDQSxFQUFBLEVBQUEsS0FBQSxrQkFHQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsT0FBQSxHQUNBLE1BRUEsR0FBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxPQUNBLFFBQUEsUUFBQSxJQUFBLEVBQUEsVUFBQSxZQUFBLGlCQUlBLEVBQUEsS0FBQSxRQUNBLEVBQUEsS0FBQSxPQUNBLEVBQ0EsYUFLQSxFQUFBLGNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxHQUFBLEtBQUEsaUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxnQkFDQSxRQUFBLFFBQUEscUJBQUEsT0FBQSxTQUNBLFFBQUEsR0FDQSxTQU1BLEVBQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxlQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsRUFBQSxRQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsU0FBQSxJQUVBLEVBQUEsY0FFQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLE1BRUEsRUFBQSxTQUFBLEVBQUEsU0FPQSxFQUFBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsY0FDQSxHQUFBLEtBQUEsZ0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsRUFBQSxnQkFDQSxRQUFBLFFBQUEscUJBQUEsT0FBQSxTQUNBLFFBQUEsR0FDQSxTQU1BLEVBQUEsY0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxjQUNBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGdCQUNBLFFBQUEsUUFBQSxxQkFBQSxPQUFBLFNBQ0EsUUFBQSxHQUNBLFNBTUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGlCQUVBLEdBQUEsU0FBQSxFQUFBLFNBQUEsTUFBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLE9BQUEsT0FBQSxFQUFBLE9BRUEsR0FBQSxRQUFBLGFBQUEsRUFDQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLFFBQUEsUUFBQSxFQUFBLE1BQ0EsRUFBQSxRQUFBLFVBQUEsRUFBQSxVQUVBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsUUFBQSxhQUFBLEtBRUEsTUFBQSxXQUNBLEVBQUEsUUFBQSxhQUFBLEtBS0EsRUFBQSxjQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxRQUFBLFVBQUEsRUFDQSxFQUFBLFlBQUEsRUFBQSxJQUlBLEVBQUEsWUFBQSxXQUNBLE1BQUEsVUFBQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsS0FBQSxpQkFBQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQ0EsRUFBQSxPQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsT0FBQSxZQUFBLEVBQUEsWUFDQSxFQUFBLE9BQUEsYUFBQSxFQUFBLG9CQUdBLEdBQUEsV0FDQSxFQUFBLGVBQ0EsT0FJQSxFQUFBLGVBQUEsV0FDQSxFQUFBLGVBQUEsU0FBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsV0FHQSxFQUFBLGVBQUEsV0FDQSxFQUFBLGVBQUEsWUFBQSxRQUNBLEVBQUEsUUFBQSxJQUFBLFdBQUEsS0FJQSxFQUFBLGNBQUEsV0FDQSxFQUFBLEtBQUEsc0JBQUEsRUFBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxPQUFBLEVBQUEsV0FNQSxFQUFBLFlBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxVQUNBLFNBQUEsUUFBQSxpQkFBQSxVQURBLEdBS0EsRUFBQSxlQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFDQSxHQUFBLEtBQUEsdUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxRQUFBLFFBQUEsY0FBQSxZQUFBLGFBQ0EsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLFNBQUEsU0FBQSxpQkFLQSxFQUFBLGFBQUEsV0FDQSxFQUFBLGVBQUEsWUFBQSxRQUdBLEVBQUEsT0FBQSxVQURBLElBQUEsRUFBQSxPQUFBLFVBQ0EsRUFFQSxHQUtBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUNBLEdBQUEsS0FBQSxtQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxRQUNBLEVBQUEsT0FBQSxhQUFBLFFBQ0EsR0FBQSxPQUFBLE1BQUEsTUFNQSxJQUFBLEVBQ0EsR0FBQSxXQUFBLFdBQ0EsRUFBQSxXQUFBLG1CQUFBLEdBQUEsV0FBQSxFQUFBLFdBQUEsR0FDQSxFQUFBLEVBQUEsV0FDQSxJQUFBLEVBQUEsV0FDQSxFQUFBLFVBQUEsS0FBQSxPQUFBLE9BQUEsU0FBQSxVQUNBLEVBQUEsYUFDQSxFQUFBLGNBQ0EsTUFPQSxFQUFBLGVBQUEsV0FDQSxHQUFBLEdBQUEsU0FBQSxlQUFBLFdBQ0EsRUFBQSxTQUFBLGVBQUEsV0FDQSxJQUFBLEdBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLGVBQ0EsR0FBQSxTQUNBLEVBQUEsaUJBQUEsV0FBQSxHQUFBLEdBQ0EsRUFBQSxpQkFBQSxZQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUFBLE9BQUEsR0FBQSxHQUNBLEVBQUEsaUJBQUEsU0FBQSxHQUFBLE1BMkJBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxZQUNBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFNBQUEsRUFDQSxJQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsUUFBQSxRQUFBLHFCQUFBLE9BQ0EsUUFBQSxRQUFBLGdCQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEtBRUEsUUFBQSxRQUFBLGFBQUEsSUFBQSxHQUVBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxTQUFBLFFBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxRQWlCQSxFQUFBLGFBQUEsV0FDQSxRQUFBLFFBQUEsaUJBQUEsT0FBQSxNQUFBLEtBQUEsUUFBQSxTQUdBLEVBQUEsV0FBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLEdBQUEsZUFDQSxHQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsVUFDQSxRQUFBLFFBQUEscUJBQUEsT0FFQSxFQUFBLE9BQUEsV0FBQSxTQUFBLEdBRUEsRUFBQSxTQURBLEVBQUEsaUJBQ0EsS0FBQSxNQUFBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FFQSxxQkFJQSxFQUFBLE9BQUEsaUJBQUEsV0FBQSxHQUFBLEdBQ0EsRUFBQSxpQkFBQSxRQUFBLEVBQUEsY0FBQSxHQUNBLEVBQUEsaUJBQUEsT0FBQSxFQUFBLGdCQUFBLEdBQ0EsRUFBQSxLQUFBLE9BQUEsZ0JBQUEsR0FDQSxFQUFBLGlCQUFBLGNBQUEsU0FBQSxtQkFBQSxFQUFBLFFBQ0EsRUFBQSxpQkFBQSxhQUFBLEVBQUEsS0FBQSxVQUNBLEVBQUEsS0FBQSxLQU9BLEVBQUEsZUFBQSxTQUFBLEdBRUEsR0FBQSxJQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLE1BRUEsR0FBQSxLQUFBLHNCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsVUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFNBQUEsR0FLQSxJQUhBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLGFBQUEsRUFBQSxLQUNBLEVBQUEsRUFBQSxjQUFBLFlBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxjQUFBLFlBQ0EsRUFBQSxVQUFBLEVBQUEsS0FBQSxTQUNBLENBRUEsR0FBQSxjQUFBLFNBQ0EsVUFBQSxHQUNBLFFBT0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxRQUFBLEVBQ0EsR0FBQSxLQUFBLGlCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLFFBQUEsMEJBQUEsRUFBQSxRQUFBLEtBQ0EsR0FBQSxPQUNBLEVBQUEsU0FBQSxVQUVBLEVBQUEsWUFBQSxjQU1BLEVBQUEsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSwwQkFBQSxFQUFBLEtBQ0EsR0FBQSxTQUFBLFdBSUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLDBCQUFBLEVBQUEsS0FDQSxHQUFBLFlBQUEsVUFJQSxJQUFBLEdBQ0EsRUFDQSxFQUNBLENBR0EsR0FBQSxZQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxHQUFBLEtBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxFQUVBLElBQUEsbUJBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsT0FDQSxDQUNBLEVBQUEsS0FBQSxFQUFBLEtBQUEsT0FDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxHQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsUUFBQSxFQUFBLGFBQUEsR0FBQSxTQUNBLENBQ0EsRUFBQSxFQUFBLGFBQUEsR0FBQSxLQUNBLEVBQUEsUUFBQSxFQUFBLGFBQUEsR0FBQSxJQUNBLFFBTUEsRUFBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsT0FDQSxJQUFBLEVBQUEsWUFBQSxPQUVBLEdBQUEsRUFBQSxTQTBDQSxHQUFBLE1BQUEsRUFBQSxZQUNBLENBRUEsUUFBQSxRQUFBLGdCQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFFQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsR0FDQSxRQUFBLFFBQUEsWUFBQSxZQUFBLE9BQ0EsRUFBQSxjQUVBLEVBQUEsYUFBQSxFQUFBLElBQ0EsSUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsY0FBQSxTQUNBLFVBQUEsR0FDQSxLQUVBLEVBQUEsTUFBQSxFQUFBLE9BQ0EsSUFBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLE9BQ0EsR0FBQSxLQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsT0FJQSxHQUFBLGFBQUEsRUFBQSxZQUFBLEVBQUEsZUFqRUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEdBQUEsR0FDQSxPQUNBLE1BQUEsSUFDQSxPQUFBLE1BRUEsR0FFQSxFQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsOEJBQUEsRUFDQSxFQUFBLENBRUEsSUFBQSxFQUFBLFFBQUEsTUFBQSxFQUFBLElBQUEsSUFDQSxLQUFBLEVBQUEsUUFBQSxtQkFDQSxHQUFBLGdCQUFBLG1CQUFBLEdBRUEsSUFBQSxJQUFBLE9BQUEsT0FBQSxNQUFBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsR0FBQSxPQUFBLE9BQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxDQU1BLElBSkEsRUFBQSxjQUNBLEVBQUEsT0FBQSxLQUFBLEVBQUEsTUFBQSxrQkFBQSxTQUFBLEVBQUEsTUFBQSxNQUFBLFdBQUEsRUFBQSxNQUFBLE9BQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSw2RkFHQSxPQUFBLEdBQUEsbUJBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGFBQUEsRUFBQSxLQUFBLFNBQUEsd0JBRUEsb0JBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxLQUFBLFFBQUEsU0FDQSxHQUFBLFNBQUEsbUJBQUEsRUFBQSxLQUFBLFVBRUEsT0FBQSxTQUFBLEtBQUEsTUFHQSxHQUFBLFFBRUEsRUFBQSxTQUFBLEtBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxLQUFBLFNBQUEsU0FBQSxHQUNBLG1CQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQSxRQUFBLFNBQ0EsRUFBQSxRQUFBLEtBQUEsRUFBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLEVBQUEsV0FBQSxTQXFDQSxFQUFBLGNBQUEsU0FBQSxHQUVBLElBQUEsR0FEQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE9BQUEsSUFFQSxHQUFBLEVBQUEsYUFBQSxHQUFBLE1BQUEsRUFDQSxDQUNBLEVBQUEsQ0FDQSxPQUdBLE1BQUEsSUFJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsZUFBQSxRQUFBLGFBQ0EsR0FBQSxJQUFBLEVBQ0EsRUFBQSxLQUFBLG1CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxHQUFBLE1BQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxPQUFBLEVBQ0EsR0FBQSxFQUFBLFNBZ0NBLEdBQUEsTUFBQSxFQUFBLFlBQ0EsQ0FDQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFFBQ0EsSUFBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLE9BQ0EsR0FBQSxLQUNBLEVBQUEsYUFBQSxHQUFBLGFBQUEsR0FDQSxFQUFBLGFBQUEsRUFBQSxLQUNBLEVBQUEsTUFBQSxFQUFBLFlBSUEsR0FBQSxhQUFBLEVBQUEsWUFBQSxFQUFBLGVBNUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFDQSxHQUFBLEdBQ0EsT0FDQSxNQUFBLElBQ0EsT0FBQSxNQUVBLEdBRUEsRUFBQSxVQUFBLE9BQUEsU0FBQSxTQUFBLDhCQUFBLEVBQUEsT0FDQSxFQUFBLENBRUEsSUFBQSxFQUFBLFFBQUEsTUFBQSxFQUFBLElBQUEsSUFDQSxLQUFBLEVBQUEsUUFBQSxtQkFDQSxHQUFBLGdCQUFBLG1CQUFBLEdBRUEsSUFBQSxJQUFBLE9BQUEsT0FBQSxNQUFBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsR0FBQSxPQUFBLE9BQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxDQUVBLEdBQUEsT0FBQSxLQUFBLEVBQUEsTUFBQSxrQkFBQSxTQUFBLEVBQUEsTUFBQSxNQUFBLFdBQUEsRUFBQSxNQUFBLE9BQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSw0RkFFQSxPQUFBLEdBQUEsbUJBQUEsR0FDQSxPQUFBLFNBQUEsS0FBQSxFQUFBLGFBQUEsRUFBQSxTQUFBLFFBQUEsRUFBQSxJQUFBLGVBR0EsRUFBQSxRQUVBLEVBQUEsU0FBQSxLQUFBLEVBQUEsT0FBQSxTQUFBLEVBQUEsU0FBQSxJQUFBLEVBQUEsSUFBQSxTQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxlQUNBLEVBQUEsRUFBQSxFQUFBLFdBQUEsVUFtQkEsTUFBQSxFQUFBLGFBQ0EsRUFBQSxhQUFBLEVBQUEsWUFBQSxFQUFBLGNBT0EsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUVBLEdBQ0EsR0FEQSxHQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLFNBR0EsR0FBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBRUEsR0FBQSxNQUFBLEVBQUEsTUFFQSxHQUFBLEVBQUEsWUF5Q0EsbUJBQUEsR0FBQSxVQUVBLEVBQUEsYUFBQSxRQUFBLFlBQUEsR0FFQSxRQUFBLFlBQUEsS0FDQSxFQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxTQUFBLFNBQUEsVUFGQSxFQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxPQUFBLGlCQUlBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsY0FoREEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEdBQUEsR0FDQSxPQUNBLE1BQUEsSUFDQSxPQUFBLE1BRUEsR0FFQSxFQUFBLFVBQUEsT0FBQSxTQUFBLFNBQUEsOEJBQUEsRUFBQSxRQUNBLEVBQUEsQ0FFQSxJQUFBLEVBQUEsUUFBQSxNQUFBLEVBQUEsSUFBQSxJQUNBLEtBQUEsRUFBQSxRQUFBLG1CQUNBLEdBQUEsZ0JBQUEsbUJBQUEsR0FBQSxLQUNBLEdBQUEsSUFFQSxJQUFBLElBQUEsT0FBQSxPQUFBLE1BQUEsRUFBQSxNQUFBLE9BQUEsRUFDQSxHQUFBLE9BQUEsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBLENBTUEsSUFKQSxFQUFBLGNBQ0EsRUFBQSxPQUFBLEtBQUEsRUFBQSxrQkFBQSxTQUFBLEVBQUEsTUFBQSxNQUFBLFdBQUEsRUFBQSxNQUFBLE9BQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSw2RkFHQSxPQUFBLEdBQUEsbUJBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGFBQUEsRUFBQSxLQUFBLFNBQUEsY0FBQSxDQUVBLFFBQUEsU0FBQSxLQUFBLE1BR0EsR0FBQSxRQUVBLEVBQUEsZ0JBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxLQUNBLFFBQUEsWUFBQSxLQUNBLEVBQUEsVUFBQSxRQUFBLFFBQUEsRUFBQSxlQUFBLFNBQUEsT0FBQSxrQkFDQSxFQUFBLEVBQUEsRUFBQSxXQUFBLFNBb0JBLEVBQUEsV0FBQSxXQUVBLElBQUEsRUFBQSxPQUFBLENBQ0EsR0FBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLGVBQUEsR0FBQSxZQUFBLEVBQUEsZUFBQSxZQUFBLFNBQUEsRUFBQSxLQUFBLFNBQ0EsR0FBQSxLQUFBLGtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxhQUVBLEVBQUEsUUFFQSxFQUFBLFVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsVUFBQSxVQUVBLEVBQUEsZ0JBRUEsRUFBQSxRQUNBLEVBQUEsVUFBQSxFQUFBLGVBQUEsS0FJQSxFQUFBLEVBQUEsRUFBQSxXQUFBLFNBT0EsRUFBQSxhQUFBLFdBR0EsSUFBQSxHQURBLEdBQUEsUUFBQSxRQUFBLGVBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsQ0FDQSxHQUFBLEdBQUEsUUFBQSxRQUFBLEVBQUEsSUFBQSxLQUFBLE1BQUEsVUFBQSxFQUNBLEdBQUEsdUJBQUEsR0FFQSxFQUFBLEVBQUEsRUFBQSxhQUFBLE1BR0EsRUFBQSxnQkFBQSxXQUVBLEVBQUEsRUFBQSxFQUFBLGFBQUEsTUFHQSxFQUFBLHVCQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLEtBQUEsVUFDQSxFQUFBLFFBQUEsUUFBQSxXQUFBLEVBQ0EsR0FBQSxLQUFBLCtCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsbUJBQUEsR0FBQSxXQUFBLEVBQUEsWUFFQSxFQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLGFBS0EsRUFBQSxjQUFBLFNBQUEsRUFBQSxHQUVBLEdBQ0EsR0FEQSxHQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLFNBRUEsR0FBQSxLQUFBLHVCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFFBS0EsRUFIQSxFQUFBLFlBR0EsUUFBQSxRQUFBLEVBQUEsZUFBQSxTQUFBLFNBQUEsU0FBQSxTQUZBLFFBQUEsUUFBQSxFQUFBLGVBQUEsU0FBQSxPQUFBLGlCQUlBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsYUFNQSxFQUFBLFdBQUEsV0FFQSxJQUFBLEVBQUEsT0FBQSxDQUNBLEdBQUEsSUFBQSxLQUFBLEVBQUEsUUFBQSxLQUFBLFNBQUEsRUFBQSxRQUFBLFNBQUEsSUFBQSxFQUFBLFFBQUEsSUFDQSxvQkFBQSxHQUFBLFFBQUEsVUFBQSxHQUFBLEVBQUEsUUFBQSxXQUNBLEVBQUEsU0FBQSxHQUNBLG1CQUFBLEdBQUEsUUFBQSxNQUFBLEVBQUEsUUFBQSxLQUFBLFNBQ0EsRUFBQSxLQUFBLEVBQUEsUUFBQSxLQUVBLElBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFFBQUEsRUFDQSxHQUFBLEtBQUEsc0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLG1CQUFBLEdBQUEsVUFBQSxtQkFBQSxHQUFBLFlBQ0EsR0FBQSxFQUFBLFNBRUEsR0FEQSxFQUFBLFFBQ0EsTUFBQSxFQUFBLFlBQUEsQ0FDQSxHQUFBLEVBQUEsU0FBQSxDQUNBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLEVBQUEsRUFBQSxTQUFBLElBRUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEdBQ0EsUUFBQSxRQUFBLFlBQUEsWUFBQSxPQUVBLEVBQUEsY0FFQSxFQUFBLE1BQUEsRUFBQSxRQUNBLEVBQUEsYUFBQSxFQUFBLElBQ0EsSUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEtBQUEsU0FBQSxJQUFBLEdBQ0EsU0FBQSxRQUFBLGNBQUEsU0FDQSxVQUFBLEdBQ0EsU0FDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFFBQUEsUUFDQSxHQUFBLE9BQUEsRUFBQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFNBQ0EsRUFBQSxhQUFBLEVBQUEsS0FDQSxFQUFBLE1BQUEsRUFBQSxRQUdBLEVBQUEsVUFDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLEVBQUEsT0FDQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEdBQUEsYUFBQSxPQUVBLEdBQUEsYUFBQSxFQUFBLFlBQUEsRUFBQSxlQUVBLEdBQUEsRUFBQSxFQUFBLFdBQUEsU0FPQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsRUFDQSxFQUFBLEtBQUEscUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsUUFBQSxFQUFBLGVBQUEsUUFBQSxhQUNBLEdBQUEsT0FBQSxFQUFBLEVBQUEsU0FBQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLEVBQUEsYUFLQSxFQUFBLGVBQUEsV0FFQSxHQURBLEVBQUEsWUFBQSxFQUNBLG1CQUFBLEdBQUEsYUFDQSxDQUNBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUNBLEdBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsYUFBQSxFQUFBLFlBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsYUFBQSxPQUFBLElBRUEsbUJBQUEsR0FBQSxhQUFBLEdBQUEsY0FDQSxFQUFBLGFBQUEsR0FBQSxhQUFBLE9BT0EsRUFBQSxhQUFBLFNBQUEsR0FFQSxHQUFBLEVBQ0EsSUFBQSxRQUFBLFFBQUEsVUFBQSxFQUFBLGlCQUFBLFFBRUEsRUFBQSxRQUFBLFFBQUEsVUFBQSxFQUFBLGlCQUNBLEVBQUEsSUFBQSxRQUFBLFFBQ0EsRUFBQSxJQUFBLFNBQUEsU0FBQSxFQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLE9BQ0EsR0FBQSxRQUFBLFFBQUEsVUFBQSxFQUFBLGVBQUEsU0FDQSxFQUFBLFFBQUEsUUFBQSxVQUFBLEVBQUEsZUFDQSxFQUFBLElBQUEsUUFBQSxRQUNBLEVBQUEsSUFBQSxTQUFBLFNBQUEsRUFBQSxJQUFBLFNBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxRQUlBLEVBQUEsV0FBQSxTQUFBLEdBRUEsRUFBQSxLQUFBLG9CQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQUEsbUJBQUEsR0FBQSxPQUNBLFFBQUEsUUFBQSxtQkFBQSxLQUFBLEVBQUEsT0FDQSxtQkFBQSxHQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsT0FDQSxRQUFBLFFBQUEsb0JBQUEsT0FFQSxRQUFBLFFBQUEsb0JBQUEsUUFDQSxPQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsb0NBQUEsU0FBQSxZQUtBLEVBQUEsVUFBQSxTQUFBLEdBRUEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxXQUFBLElBR0EsRUFBQSxtQkFBQSxTQUFBLEdBRUEsUUFBQSxRQUFBLG1CQUFBLEtBQUEsR0FDQSxRQUFBLFFBQUEsb0NBQUEsWUFBQSxVQUdBLEVBQUEsZ0JBQUEsV0FDQSxPQUFBLEdBR0EsRUFBQSxZQUFBLFdBRUEsbUJBQUEsR0FBQSxZQUFBLEVBQUEsV0FBQSxRQUVBLFFBQUEsUUFBQSxRQUFBLElBQUEsU0FBQSxFQUFBLGtCQUNBLEdBQUEsWUFHQSxRQUFBLFFBQUEsUUFBQSxJQUFBLFNBQUEsV0FFQSxtQkFBQSxHQUFBLGdCQUFBLEVBQUEsZUFBQSxRQUVBLFFBQUEsUUFBQSxxQkFBQSxJQUFBLFNBQUEsRUFBQSxzQkFDQSxHQUFBLGdCQUdBLFFBQUEsUUFBQSxxQkFBQSxJQUFBLFNBQUEsU0FJQSxFQUFBLE9BQUEsZUFBQSxXQUNBLEVBQUEsUUFBQSxPQUFBLEVBQ0EsRUFBQSxRQUFBLFVBQUEsQ0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBLGdCQUNBLEdBQUEsUUFDQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsV0FHQSxFQUFBLGNBQUEsV0FDQSxFQUFBLFFBQUEsYUFBQSxFQUNBLFFBQUEsUUFBQSxRQUFBLEtBQUEsU0FBQSxFQUFBLGtCQUdBLEVBQUEsZ0JBQUEsV0FDQSxRQUFBLFFBQUEsUUFBQSxZQUFBLFFBQUEsUUFBQSxRQUFBLFVBQUEsUUFBQSxRQUFBLFVBQUEsU0FBQSxNQUFBLEVBQUEsUUFBQSxhQUFBLEVBQUEsUUFBQSxPQUFBLEVBQUEsUUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxVQUlBLEVBQUEsa0JBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLGdCQUFBLEVBQUEsZ0JBQUEsU0FBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsSUFJQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxLQUFBLEVBQUEsR0FFQSxFQUFBLEtBQ0EsRUFBQSxjQUFBLElBQUEsbUJBQUEsMEJBQUEsRUFBQSxJQUFBLE1BS0EsRUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsT0FDQSxJQUFBLEtBQUEsRUFBQSxHQUFBLE1BQ0EsT0FBQSxDQUdBLElBQUEsR0FBQSxFQUFBLFNBQUEsMkJBQ0EsRUFBQSxFQUFBLFNBQUEscUJBQ0EsRUFBQSxFQUFBLFNBQUEsd0JBQ0EsRUFBQSxFQUFBLEtBQUEsc0JBQ0EsRUFBQSxFQUFBLEtBQUEsbUJBQ0EsRUFBQSxFQUFBLEtBQUEscUJBRUEsRUFBQSxFQUFBLFNBRUEsR0FBQSxRQUNBLEVBQUEsSUFBQSxFQUFBLFVBRUEsRUFBQSxRQUNBLEVBQUEsSUFBQSxFQUFBLE9BRUEsRUFBQSxZQUNBLEtBQUEsT0FDQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsUUFBQSxTQUFBLElBRUEsRUFBQSxNQUFBLE9BQ0EsRUFBQSxRQUNBLEVBQUEsU0FBQSxRQUNBLEVBQUEsUUFDQSxFQUFBLFNBQUEsUUFFQSxFQUFBLFlBQUEsUUFDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsU0FBQSxHQUFBLE9BQUEsV0FDQSxFQUFBLE9BQUEsV0FDQSxtQkFBQSxFQUFBLE1BQ0EsRUFBQSxZQUFBLE1BQUEsRUFBQSxLQUNBLGtCQUFBLEVBQUEsUUFDQSxFQUFBLFlBQUEsS0FBQSxFQUFBLE1BQ0EsRUFBQSxNQUFBLGFBQUEsS0FHQSxFQUFBLE1BQUEsYUFBQSxNQU1BLEVBQUEsa0JBQUEsRUFDQSxFQUFBLGlCQUFBLEVBRUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxRQUFBLEVBQUEsT0FJQSxFQUFBLG1CQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsSUFBQSxFQUVBLE1BREEsR0FBQSxNQUFBLGFBQUEsR0FDQSxDQUdBLElBQUEsR0FBQSxFQUFBLFNBQ0EsR0FBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLFNBQUEsRUFBQSxTQUVBLEVBQUEsS0FBQSwyQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxPQUNBLEVBQUEsaUJBQ0EsRUFBQSxhQUFBLEVBQUEsRUFBQSxZQUVBLEVBQUEsTUFBQSxhQUFBLEtBTUEsRUFBQSxPQUFBLCtIQUFBLFdBQ0EsRUFBQSxNQUFBLGFBQUE7TUM5c0NBLFFBQUEsT0FBQSxZQUFBLFdBQUEscUJBQ0EsU0FBQSxRQUFBLFdBQUEsV0FBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsV0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFFQSxHQUFBLEtBQUEsOEJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxFQUFBLFFBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBUUEsR0FQQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsYUFBQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsZ0JBQUEsRUFBQSxTQUFBLEdBQUEsUUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsT0FDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxVQUNBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGVBQUEsbUJBQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsRUFHQSxJQUFBLEdBREEsR0FBQSxJQUFBLEVBQUEsU0FBQSxHQUFBLGNBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLElBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxLQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFDQSxDQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxLQUNBLFFBZUEsRUFBQSxXQUFBLElBR0EsUUFBQSxRQUFBLFFBQUEsWUFBQSxjQUNBLFFBQUEsUUFBQSxvQkFBQSxRQUFBLEtBR0EsSUFBQSxHQUFBLEdBRUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLE9BR0EsRUFBQSxVQUFBLFNBQUEsR0FDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLFNBQUEsRUFBQSxPQUFBLENBRUEsS0FBQSxFQUFBLFVBQUEsQ0FDQSxFQUFBLFdBQUEsQ0FFQSxJQUFBLElBQ0EsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQ0EsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFVBQ0EsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGdCQUNBLGFBQUEsRUFBQSxTQUFBLEdBQUEsYUFFQSxHQUFBLEtBQUEsMkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxTQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsTUFDQSxFQUFBLE1BQUEsT0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSx1QkFDQSxHQUFBLEtBQUEsRUFBQSxNQUFBLFVBSUEsRUFBQSxXQUFBLElBSUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGFBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxXQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FJQSxHQUhBLEVBQUEsU0FBQSxHQUFBLGNBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxVQUVBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLEVBRUEsSUFBQSxHQURBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxJQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsS0FDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEVBQ0EsQ0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsS0FDQSxVQU1BLEVBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxnQkFBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLFFBQUEsRUFBQSxTQUFBLFdBR0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxVQUNBLEVBQUEsU0FBQSxHQUFBLFNBQUEsSUFDQSxFQUFBLFNBQUEsR0FBQSxTQUFBLElBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFDQSwwQkFFQSxvQkFhQSxRQUFBLE9BQUEsWUFBQSxXQUFBLGtCQUNBLFNBQUEsUUFBQSxXQUFBLFdBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQ0EsRUFBQSxlQUFBLEVBRUEsRUFBQSxTQUFBLFdBQ0EsRUFBQSxLQUFBLENBQ0EsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BRUEsR0FBQSxLQUFBLHlCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsU0FDQSxFQUFBLFNBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxRQUFBLElBQ0EsT0FBQSxTQUFBLFNBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBS0EsR0FKQSxFQUFBLFNBQUEsR0FBQSxLQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFVBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLE9BQ0EsbUJBQUEsR0FBQSxTQUFBLEdBQUEsZUFBQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxFQUdBLElBQUEsR0FEQSxHQUFBLElBQUEsRUFBQSxTQUFBLEdBQUEsY0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLE9BQUEsSUFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsVUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEtBQ0EsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUNBLENBQ0EsRUFBQSxTQUFBLEdBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEtBQ0EsUUFNQSxHQUFBLEVBQUEsU0FBQSxVQUNBLEVBQUEsU0FBQSxTQUFBLE9BQUEsRUFBQSxDQUNBLEVBQUEsU0FBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsSUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLElBQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxXQUFBLENBQ0EsRUFBQSxTQUFBLE1BQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FDQSxPQUlBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLEVBQUEsU0FBQSxNQUlBLEVBQUEsYUFBQSxFQUNBLEVBQUEsV0FBQSxJQUdBLFFBQUEsUUFBQSxRQUFBLFlBQUEsY0FDQSxRQUFBLFFBQUEsb0JBQUEsUUFBQSxLQUdBLElBQUEsR0FBQSxHQUVBLEdBQUEsU0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsU0FBQSxHQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxPQUdBLEVBQUEsV0FBQSxXQUNBLE1BQUEsR0FBQSxTQUNBLEVBQUEsU0FBQSxPQUFBLEVBQ0EsT0FFQSxHQUpBLFFBU0EsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsS0FBQSxFQUNBLFNBRUEsSUFJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQ0EsU0FFQSxJQUlBLEVBQUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFDQSxTQUVBLElBSUEsRUFBQSxnQkFBQSxXQUNBLE1BQUEsR0FBQSxZQUdBLEdBRkEsUUFNQSxFQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsRUFBQSxTQUFBLEdBQUEsYUFBQSxFQUNBLEVBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLGFBQUEsT0FBQSxFQUFBLFNBQUEsR0FBQSxVQUdBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLElBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FBQSxjQUFBLEVBQUEsU0FBQSxHQUFBLGNBUUEsSUFQQSxtQkFBQSxHQUFBLFNBQUEsR0FBQSxlQUNBLEVBQUEsYUFBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLGtCQUNBLEVBQUEsZ0JBQUEsRUFBQSxTQUFBLEdBQUEsaUJBRUEsRUFBQSxTQUFBLEdBQUEsY0FBQSxFQUVBLG1CQUFBLEdBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxPQUFBLEVBRUEsSUFBQSxHQURBLEdBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsT0FBQSxJQUNBLENBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxVQUFBLEVBQUEsRUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsS0FDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEVBQ0EsQ0FDQSxFQUFBLFNBQUEsR0FBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsS0FDQSxRQUtBLEdBQUEsSUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLFdBQUEsRUFBQSxXQUFBLEVBQUEsU0FBQSxHQUNBLEdBQUEsS0FBQSw2QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxTQUtBLEVBQUEsV0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsR0FBQSxnQkFBQSxHQUdBLEVBQUEsWUFBQSxTQUFBLEdBQ0EsRUFBQSxpQkFBQSxFQUFBLFdBQUEsSUFHQSxFQUFBLFdBQUEsU0FBQSxHQUNBLEVBQUEsZ0JBQUEsRUFBQSxTQUFBLElBR0EsRUFBQSxlQUFBLFNBQUEsR0FDQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsV0FBQSxFQUVBLEVBQUEsV0FBQSxPQUdBLENBQ0EsRUFBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLEdBQUEsYUFBQSxPQUFBLEVBQUEsU0FBQSxHQUFBLFFBR0EsSUFBQSxtQkFBQSxHQUFBLFNBQUEsVUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLEVBQUEsQ0FDQSxFQUFBLFNBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsU0FBQSxPQUFBLElBQ0EsR0FBQSxFQUFBLFNBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsV0FBQSxDQUNBLEVBQUEsU0FBQSxNQUFBLEVBQUEsU0FBQSxTQUFBLEdBQUEsU0FBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsT0FJQSxFQUFBLFNBQUEsS0FBQSxJQUNBLEVBQUEsTUFBQSxFQUFBLFNBQUEsTUFJQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxXQUFBLEVBQUEsU0FBQSxHQUFBLFdBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxLQUFBLDZCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLFVBT0EsRUFBQSxTQUFBLFdBQ0EsR0FBQSxJQUFBLEVBQUEsS0FBQSxPQUFBLENBRUEsS0FBQSxFQUFBLFlBQUEsQ0FDQSxHQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFDQSxHQUFBLEtBQUEsNkJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFdBQUEsRUFBQSxTQUNBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQUEsUUFDQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLE9BQUEsSUFDQSxFQUFBLFdBQUEsR0FBQSxLQUFBLENBRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsRUFBQSxTQUFBLEdBQUEsS0FBQSxDQUVBLEdBQUEsaUJBQUEsRUFBQSxXQUFBLEdBQ0EsRUFBQSxnQkFBQSxFQUFBLFNBQUEsS0FFQSxFQUFBLGFBQUEsRUFFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxvQkFDQSxFQUFBLGNBQUEsU0FDQSxVQUFBLEVBQUEsb0JBQUEsU0FBQSxLQUNBLE1BR0EsRUFBQSxXQUFBLFNBQUEsR0FDQSxJQUFBLEVBQUEsVUFBQSxDQUNBLEVBQUEsV0FBQSxDQUNBLElBQUEsSUFFQSxNQUFBLEVBQUEsS0FBQSxNQUNBLEdBQUEsRUFBQSxTQUFBLEdBQUEsR0FDQSxTQUFBLEVBQUEsU0FBQSxHQUFBLFNBQ0EsY0FBQSxFQUFBLFNBQUEsR0FBQSxjQUNBLGdCQUFBLEVBQUEsU0FBQSxHQUFBLGdCQUNBLGFBQUEsRUFBQSxTQUFBLEdBQUEsYUFHQSxHQUFBLEtBQUEsZ0NBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLENBQ0EsRUFBQSxTQUFBLE9BQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLEVBQUEsU0FBQSxHQUFBLEtBQUEsRUFDQSxFQUFBLE1BQUEsV0FBQSxFQUFBLFNBQUEsR0FBQSxhQUFBLE9BQUEsRUFBQSxTQUFBLEdBQUEsUUFFQSxJQUFBLEVBQUEsU0FBQSxVQUNBLEVBQUEsU0FBQSxTQUFBLE9BQUEsRUFBQSxDQUNBLEVBQUEsU0FBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsSUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLElBQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxXQUFBLENBQ0EsRUFBQSxTQUFBLE1BQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FDQSxPQUlBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLEVBQUEsU0FBQSxNQU1BLEVBQUEsU0FBQSxRQUFBLElBQ0EsT0FBQSxTQUFBLGFBSUEsRUFBQSxXQUFBLElBSUEsRUFBQSxhQUFBLFdBQ0EsSUFBQSxFQUFBLFVBQUEsQ0FDQSxFQUFBLFdBQUEsQ0FFQSxJQUFBLElBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxVQUFBLEVBQUEsU0FBQSxVQUNBLEdBQUEsS0FBQSw4QkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsTUFBQSxFQUFBLE1BQUEsQ0FDQSxFQUFBLFlBQUEsQ0FDQSxJQUFBLEdBQUEsRUFBQSxTQUFBLElBRUEsSUFEQSxFQUFBLFNBQUEsRUFBQSxTQUNBLG1CQUFBLEdBQUEsU0FBQSxVQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsRUFBQSxDQUNBLEVBQUEsU0FBQSxLQUFBLENBQ0EsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxPQUFBLElBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsU0FBQSxTQUFBLE9BQUEsSUFDQSxHQUFBLEVBQUEsU0FBQSxHQUFBLElBQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxXQUFBLENBQ0EsRUFBQSxTQUFBLE1BQUEsRUFBQSxTQUFBLFNBQUEsR0FBQSxTQUFBLFNBQUEsRUFBQSxTQUFBLEdBQUEsU0FDQSxPQUlBLEVBQUEsU0FBQSxLQUFBLEdBQ0EsRUFBQSxJQUNBLEVBQUEsTUFBQSxXQUFBLElBRUEsRUFBQSxNQUFBLEVBQUEsU0FBQSxNQUVBLEVBQUEsSUFDQSxFQUFBLE1BQUEsV0FBQSxTQU1BLEdBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxTQUFBLEtBQUEsR0FFQSxFQUFBLE9BQUEsUUFBQSxFQUFBLE1BQ0EsRUFBQSxhQUFBLGFBRUEsTUFBQSxXQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLElBQ0EsRUFBQSxNQUFBLFdBQUEsRUFBQSxTQUFBLE1BQ0EsRUFBQSxTQUFBLEtBQUEsS0FLQSxFQUFBLFdBQUEsR0FHQSxFQUFBLE9BQUEscUJBQUEsV0FFQSxFQUFBLFlBQUEsSUFHQSxFQUFBLGFBQUEsU0FBQSxHQUNBLElBQUEsRUFJQSxNQUhBLEdBQUEsZUFBQSxFQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsYUFDQSxFQUFBLGFBQUEsWUFDQSxDQUVBLElBQUEsSUFBQSxFQUFBLEtBQUEsT0FBQSxDQUVBLEtBQUEsRUFBQSxVQUFBLENBQ0EsRUFBQSxXQUFBLENBRUEsSUFBQSxJQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsU0FBQSxFQUFBLFNBRUEsR0FBQSxLQUFBLDhCQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxFQUFBLE9BQ0EsUUFBQSxRQUFBLHNCQUFBLFlBQUEsb0JBQ0EsRUFBQSxjQUFBLFNBQ0EsVUFBQSxFQUFBLHNCQUFBLFNBQUEsS0FDQSxPQUdBLEVBQUEsZUFBQSxFQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsTUFDQSxFQUFBLGFBQUEsY0FJQSxFQUFBLFdBQUEsSUFJQSxFQUFBLE9BQUEsMk1BQUEsV0FFQSxFQUFBLGVBQUEsSUFHQSxFQUFBLElBQUEsV0FFQSxHQUFBLElBQUEsRUFBQSxLQUFBLE9BQUEsQ0FFQSxJQUFBLElBQ0EsTUFBQSxFQUFBLEtBQUEsTUFDQSxTQUFBLEVBQUEsU0FDQSxTQUFBLEVBQUEsU0FDQSxTQUFBLEVBQUEsaUJBQ0EsUUFBQSxFQUFBLGdCQUNBLFNBQUEsRUFBQSxTQUVBLEdBQUEsS0FBQSxxQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE1BQUEsRUFBQSxNQUNBLGFBQUEsRUFBQSxVQUNBLFFBQUEsUUFBQSxzQkFBQSxNQUFBLEVBQUEsRUFBQSxTQUFBLElBQ0EsUUFBQSxRQUFBLGlCQUFBLFVBSUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxNQUNBLEVBQUEsYUFBQSxjQUlBLEVBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQ0EsMEJBRUEsaUJBR0EsRUFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEdBQ0EsR0FFQSxZQ3hpQkEsUUFBQSxPQUFBLFlBQUEsV0FBQSxrQkFDQSxTQUFBLFFBQUEsV0FBQSxXQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEVBQUEsU0FDQSxFQUFBLFVBQ0EsRUFBQSxNQUFBLE9BQ0EsRUFBQSxVQUFBLFNBR0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUVBLEVBQUEsU0FDQSxFQUFBLFdBR0EsRUFBQSxVQUFBLFdBQ0EsRUFBQSxNQUFBLFFBSUEsUUFBQSxRQUFBLGFBQUEsWUFDQSxVQUFBLFVBQ0EsV0FBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsS0FBQSxTQUFBLE9BTUEsRUFBQSxPQUFBLFFBQUEsV0FDQSxFQUFBLFNBQUEsRUFBQSxPQUNBLEVBQUEsYUFBQSxFQUFBLFNBSUEsRUFBQSxXQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsb0JBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsUUFDQSxFQUFBLE9BQUEsUUFBQSxFQUFBLFFBQ0EsRUFBQSxhQUFBLGVBTUEsRUFBQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFDQSxLQUFBLEVBQUEsQ0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLElBQUEsT0FBQSxNQUFBLE9BQUEsUUFDQSxHQUFBLEtBQUEsS0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsQ0FDQSxFQUFBLEVBQUEsRUFDQSxPQUdBLEVBQUEsV0FBQSxHQUFBLEVBQ0EsRUFBQSxXQUFBLElBS0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FDQSxHQUFBLEtBQUEsaUJBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxPQUFBLEVBQUEsT0FDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLEVBQUEsU0FFQSxNQUFBLEVBQUEsTUFDQSxRQUFBLFlBQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxPQUNBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxlQUVBLFFBQUEsUUFBQSxVQUFBLEtBQUEsT0FBQSxFQUFBLFlBR0EsUUFBQSxRQUFBLFVBQUEsS0FBQSxPQUFBLFFBYkEsR0FrQkEsRUFBQSxPQUFBLHlDQUFBLFdBQ0EsRUFBQSxNQUFBLE9BQUEsRUFDQSxFQUFBLE1BQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxVQUFBLEVBQ0EsRUFBQSxNQUFBLFFBQUEsS0FJQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUNBLElBQUEsRUFBQSxPQUFBLE1BRUEsR0FBQSxLQUFBLHdCQUFBLEdBQUEsUUFBQSxTQUFBLEdBRUEsTUFBQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxXQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsRUFDQSxXQUFBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLFNBRUEsRUFBQSxPQUFBLFFBQUEsRUFBQSxRQUNBLEVBQUEsYUFBQSxjQUlBLFVBQUEsRUFBQSxNQUNBLEVBQUEsTUFBQSxPQUFBLEVBRUEsRUFBQSxNQUFBLE1BQUEsRUFFQSxFQUFBLE1BQUEsUUFBQSxFQUFBLFFBQ0EsV0FBQSxFQUFBLFdBQ0EsRUFBQSxZQUFBLEVBQUEsUUFBQSxhQXpCQSxHQStCQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxPQUVBLEdBQUEsS0FBQSxvQkFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLE9BQUEsRUFBQSxPQUNBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsRUFBQSxNQUFBLFFBQUEsRUFBQSxRQUNBLFdBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLFFBQUEsVUFFQSxNQUFBLEVBQUEsUUFDQSxFQUFBLEtBQUEsTUFBQSxHQUNBLEVBQUEsT0FBQSxRQUFBLEVBQUEsUUFDQSxXQUFBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLFFBRUEsRUFBQSxhQUFBLGVBZkEsR0FxQkEsRUFBQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsT0FFQSxHQUFBLEtBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEVBQUEsT0FDQSxRQUFBLFFBQUEsVUFBQSxLQUFBLE9BQUEsa0JBSkEsR0FTQSxFQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsU0FBQSxZQUFBLEtBQUEsRUFBQSxRQUNBLEdBRUEsRUFBQSxPQUFBLFFBQUEsT0FDQSxXQUFBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFBQSxRQUVBLEVBQUEsYUFBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiBBbmd1bGFySlMgdjEuMi4yMlxyXG4gKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcclxuIExpY2Vuc2U6IE1JVFxyXG4qL1xyXG4oZnVuY3Rpb24ocCxmLG4peyd1c2Ugc3RyaWN0JztmLm1vZHVsZShcIm5nQ29va2llc1wiLFtcIm5nXCJdKS5mYWN0b3J5KFwiJGNvb2tpZXNcIixbXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGUsYil7dmFyIGM9e30sZz17fSxoLGs9ITEsbD1mLmNvcHksbT1mLmlzVW5kZWZpbmVkO2IuYWRkUG9sbEZuKGZ1bmN0aW9uKCl7dmFyIGE9Yi5jb29raWVzKCk7aCE9YSYmKGg9YSxsKGEsZyksbChhLGMpLGsmJmUuJGFwcGx5KCkpfSkoKTtrPSEwO2UuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGEsZCxlO2ZvcihhIGluIGcpbShjW2FdKSYmYi5jb29raWVzKGEsbik7Zm9yKGEgaW4gYylkPWNbYV0sZi5pc1N0cmluZyhkKXx8KGQ9XCJcIitkLGNbYV09ZCksZCE9PWdbYV0mJihiLmNvb2tpZXMoYSxkKSxlPSEwKTtpZihlKWZvcihhIGluIGQ9Yi5jb29raWVzKCksYyljW2FdIT09ZFthXSYmKG0oZFthXSk/ZGVsZXRlIGNbYV06Y1thXT1kW2FdKX0pO3JldHVybiBjfV0pLmZhY3RvcnkoXCIkY29va2llU3RvcmVcIixcclxuW1wiJGNvb2tpZXNcIixmdW5jdGlvbihlKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKGIpe3JldHVybihiPWVbYl0pP2YuZnJvbUpzb24oYik6Yn0scHV0OmZ1bmN0aW9uKGIsYyl7ZVtiXT1mLnRvSnNvbihjKX0scmVtb3ZlOmZ1bmN0aW9uKGIpe2RlbGV0ZSBlW2JdfX19XSl9KSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLWNvb2tpZXMubWluLmpzLm1hcFxyXG4iLCIvKlxyXG4galF1ZXJ5IFVJIFNvcnRhYmxlIHBsdWdpbiB3cmFwcGVyXHJcblxyXG4gQHBhcmFtIFt1aS1zb3J0YWJsZV0ge29iamVjdH0gT3B0aW9ucyB0byBwYXNzIHRvICQuZm4uc29ydGFibGUoKSBtZXJnZWQgb250byB1aS5jb25maWdcclxuKi9cclxuYW5ndWxhci5tb2R1bGUoJ3VpLnNvcnRhYmxlJywgW10pXHJcbiAgLnZhbHVlKCd1aVNvcnRhYmxlQ29uZmlnJyx7fSlcclxuICAuZGlyZWN0aXZlKCd1aVNvcnRhYmxlJywgWyAndWlTb3J0YWJsZUNvbmZpZycsXHJcbiAgICAgICAgZnVuY3Rpb24odWlTb3J0YWJsZUNvbmZpZykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxyXG4gICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIGNvbWJpbmVDYWxsYmFja3MoZmlyc3Qsc2Vjb25kKXtcclxuICAgICAgICAgICAgICAgICAgaWYoIHNlY29uZCAmJiAodHlwZW9mIHNlY29uZCA9PT0gXCJmdW5jdGlvblwiKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsdWkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0KGUsdWkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZChlLHVpKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBvcHRzID0ge307XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tzID0ge1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHJlbW92ZTpudWxsLFxyXG4gICAgICAgICAgICAgICAgc3RhcnQ6bnVsbCxcclxuICAgICAgICAgICAgICAgIHN0b3A6bnVsbCxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTpudWxsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChvcHRzLCB1aVNvcnRhYmxlQ29uZmlnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zb3J0YWJsZShvcHRzKTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3Muc3RhcnQgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBwb3NpdGlvbiBvZiBkcmFnZ2VkIGl0ZW1cclxuICAgICAgICAgICAgICAgIHVpLml0ZW0uc29ydGFibGUgPSB7IGluZGV4OiB1aS5pdGVtLmluZGV4KCkgfTtcclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3MudXBkYXRlID0gZnVuY3Rpb24oZSwgdWkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiB0aGUgcmVmZXJlbmNlIHRvIG5nTW9kZWwgaW4gc3RvcCgpIGlzIHdyb25nXHJcbiAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlLnJlc29ydCA9IG5nTW9kZWw7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnJlY2VpdmUgPSBmdW5jdGlvbihlLCB1aSkge1xyXG4gICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5yZWxvY2F0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGRlZCBpdGVtIHRvIGFycmF5IGludG8gY29ycmVjdCBwb3NpdGlvbiBhbmQgc2V0IHVwIGZsYWdcclxuICAgICAgICAgICAgICAgIG5nTW9kZWwuJG1vZGVsVmFsdWUuc3BsaWNlKHVpLml0ZW0uaW5kZXgoKSwgMCwgdWkuaXRlbS5zb3J0YWJsZS5tb3ZlZCk7XHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnJlbW92ZSA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb3B5IGRhdGEgaW50byBpdGVtXHJcbiAgICAgICAgICAgICAgICBpZiAobmdNb2RlbC4kbW9kZWxWYWx1ZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5tb3ZlZCA9IG5nTW9kZWwuJG1vZGVsVmFsdWUuc3BsaWNlKDAsIDEpWzBdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdWkuaXRlbS5zb3J0YWJsZS5tb3ZlZCA9ICBuZ01vZGVsLiRtb2RlbFZhbHVlLnNwbGljZSh1aS5pdGVtLnNvcnRhYmxlLmluZGV4LCAxKVswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICBjYWxsYmFja3Muc3RvcCA9IGZ1bmN0aW9uKGUsIHVpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkaWdlc3QgYWxsIHByZXBhcmVkIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIGlmICh1aS5pdGVtLnNvcnRhYmxlLnJlc29ydCAmJiAhdWkuaXRlbS5zb3J0YWJsZS5yZWxvY2F0ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggc2F2ZWQgYW5kIGN1cnJlbnQgcG9zaXRpb24gb2YgZHJvcHBlZCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgIHZhciBlbmQsIHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICBzdGFydCA9IHVpLml0ZW0uc29ydGFibGUuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgIGVuZCA9IHVpLml0ZW0uaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIC8vIFJlb3JkZXIgYXJyYXkgYW5kIGFwcGx5IGNoYW5nZSB0byBzY29wZVxyXG4gICAgICAgICAgICAgICAgICB1aS5pdGVtLnNvcnRhYmxlLnJlc29ydC4kbW9kZWxWYWx1ZS5zcGxpY2UoZW5kLCAwLCB1aS5pdGVtLnNvcnRhYmxlLnJlc29ydC4kbW9kZWxWYWx1ZS5zcGxpY2Uoc3RhcnQsIDEpWzBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodWkuaXRlbS5zb3J0YWJsZS5yZXNvcnQgfHwgdWkuaXRlbS5zb3J0YWJsZS5yZWxvY2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goYXR0cnMudWlTb3J0YWJsZSwgZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpe1xyXG4gICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobmV3VmFsLCBmdW5jdGlvbih2YWx1ZSwga2V5KXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiggY2FsbGJhY2tzW2tleV0gKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3cmFwIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29tYmluZUNhbGxiYWNrcyggY2FsbGJhY2tzW2tleV0sIHZhbHVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zb3J0YWJsZSgnb3B0aW9uJywga2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0sIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goY2FsbGJhY2tzLCBmdW5jdGlvbih2YWx1ZSwga2V5ICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9wdHNba2V5XSA9IGNvbWJpbmVDYWxsYmFja3ModmFsdWUsIG9wdHNba2V5XSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBzb3J0YWJsZVxyXG4gICAgICAgICAgICAvL2VsZW1lbnQuc29ydGFibGUoJ2Rlc3Ryb3knKTtcclxuICAgICAgICAgICAgZWxlbWVudC5zb3J0YWJsZShvcHRzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbl0pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcsIFsnbmdDb29raWVzJywgJ3VpLnNvcnRhYmxlJ10pO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5zZXJ2aWNlKCdjb250ZW50U2VydmljZScsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIC8v0J7RgtC+0LHRgNCw0LbQtdC90LjQtSDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsFxyXG4gICAgdGhpcy5kZXNrdG9wTW9kYWwgPSBmdW5jdGlvbihhY3Rpb24sIHNwZWVkKXtcclxuICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoc3BlZWQpKSBzcGVlZCA9IDUwMDtcclxuXHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmctbGlzdCcpLmZhZGVPdXQoKTtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZycpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcblxyXG4gICAgICBpZiAoYWN0aW9uID09ICdub25lJykge1xyXG4gICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KHNwZWVkKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIG1vZGFsID0gYW5ndWxhci5lbGVtZW50KCcjJyArIGFjdGlvbik7XHJcblxyXG4gICAgICBpZigkKCcuc2hvdy1ibG9jaycpLmhhc0NsYXNzKCdhY3RpdmUnKSAgJiYgKCQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLmF0dHIoJ2lkJykgIT0gYWN0aW9uKSl7XHJcbiAgICAgICAgJCgnLnNob3ctYmxvY2suYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmZhZGVPdXQoc3BlZWQsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlICB7XHJcbiAgICAgICAgbW9kYWwuZmFkZUluKHNwZWVkKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5tb2JpbGVNb2RhbCA9IGZ1bmN0aW9uKGNvbnRlbnQsIHR5cGUpe1xyXG4gICAgICB2YXIgcmVzdWx0TW9kYWwgPSBhbmd1bGFyLmVsZW1lbnQoJy5tLXJlc3VsdCcpO1xyXG4gICAgICB2YXIgcmVzdWx0Q29udGVudCA9IHJlc3VsdE1vZGFsLmZpbmQoJ3AnKTtcclxuXHJcbiAgICAgIHJlc3VsdE1vZGFsLnJlbW92ZUNsYXNzKCdtLW5lZ2F0aXZlJyk7XHJcbiAgICAgIGlmICh0eXBlID09ICdlcnJvcicpIHtcclxuICAgICAgICAgIHJlc3VsdE1vZGFsLmFkZENsYXNzKCdtLW5lZ2F0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzdWx0TW9kYWwuaGlkZSgpO1xyXG4gICAgICByZXN1bHRNb2RhbC5zaG93KCk7XHJcbiAgICAgIHJlc3VsdENvbnRlbnQudGV4dChjb250ZW50KTtcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIHJlc3VsdE1vZGFsLmhpZGUoKTtcclxuICAgICAgfSwgNTAwMCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLm1lc3NhZ2VNb2RhbCA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGhvc3RfdHlwZSl7XHJcbiAgICAgIHNwZWVkID0gNTAwO1xyXG4gICAgICBpZiAoaG9zdF90eXBlID09PSAnbW9iaWxlJykge1xyXG4gICAgICAgICAgdGhpcy5tb2JpbGVNb2RhbChtZXNzYWdlLCAnbm9uZScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmxhbmctbGlzdCcpLmZhZGVPdXQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgXHJcbiAgICAgICAgdmFyIG1vZGFsID0gYW5ndWxhci5lbGVtZW50KCcjbWVzc2FnZScpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gYW5ndWxhci5lbGVtZW50KCcjbWVzc2FnZSBwJyk7XHJcbiAgICAgIFxyXG4gICAgICAgIGlmKCQoJy5zaG93LWJsb2NrJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuICAgICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KHNwZWVkLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjb250ZW50Lmh0bWwobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIG1vZGFsLmZhZGVJbihzcGVlZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlICB7XHJcbiAgICAgICAgICBjb250ZW50Lmh0bWwobWVzc2FnZSk7XHJcbiAgICAgICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9ICAgIFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8v0JDQstGC0L7RgdC60YDQvtC70LjQvdCzINC00L4g0L3Rg9C20L3QvtCz0L4g0LHQu9C+0LrQsFxyXG4gICAgdGhpcy5zY3JvbGxQYWdlID0gZnVuY3Rpb24oaWQsIHNwZWVkKXtcclxuICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoc3BlZWQpKSBzcGVlZCA9IDYwMDtcclxuICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKGlkKS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxfaGVpZ2h0XHJcbiAgICAgICAgfSwgc3BlZWQpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdmFyIGN1cnJlbnRfc3BvdCA9IHt9O1xyXG4gICAgXHJcbiAgICB0aGlzLnNldFNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICAgICAgY3VycmVudF9zcG90ID0gc3BvdDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5nZXRTcG90ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRfc3BvdDtcclxuICAgIH1cclxuICAgIFxyXG59KTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLnNlcnZpY2UoJ2RpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4gICAgdmFyIHllc05vRGlhbG9nID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRleHRZZXMsIHRleHRObywgbWVzc2FnZSwgZGlhbG9nX2NsYXNzKSB7XHJcbiAgICAgIHNwZWVkID0gNTAwO1xyXG5cclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcubGFuZy1saXN0JykuZmFkZU91dCgpO1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJy5sYW5nJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgIFxyXG4gICAgICB2YXIgbW9kYWwgPSBhbmd1bGFyLmVsZW1lbnQoJyNiLWRpYWxvZycpO1xyXG4gICAgICB2YXIgY29udGVudCA9IGFuZ3VsYXIuZWxlbWVudCgnI2ItZGlhbG9nIHAnKTtcclxuICAgICAgdmFyIGJ0blllcyA9IGFuZ3VsYXIuZWxlbWVudCgnI2ItZGlhbG9nIC55ZXMtYnV0dG9uJyk7XHJcbiAgICAgIHZhciBidG5ObyA9IGFuZ3VsYXIuZWxlbWVudCgnI2ItZGlhbG9nIC5uby1idXR0b24nKTtcclxuICAgICAgXHJcbiAgICAgIGlmKCQoJy5zaG93LWJsb2NrJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxyXG4gICAgICAgICQoJy5zaG93LWJsb2NrLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5mYWRlT3V0KDApO1xyXG4gICAgICBcclxuICAgICAgY29udGVudC5odG1sKG1lc3NhZ2UpO1xyXG4gICAgICBidG5ZZXMudGV4dCh0ZXh0WWVzKTtcclxuICAgICAgYnRuTm8udGV4dCh0ZXh0Tm8pO1xyXG4gICAgICBtb2RhbC5yZW1vdmVDbGFzcygnYWxlcnQnKTtcclxuICAgICAgbW9kYWwucmVtb3ZlQ2xhc3MoJ25lZ2F0aXZlJyk7XHJcbiAgICAgIGlmICh0eXBlb2YgZGlhbG9nX2NsYXNzICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICBtb2RhbC5hZGRDbGFzcyhkaWFsb2dfY2xhc3MpO1xyXG4gICAgICBtb2RhbC5mYWRlSW4oc3BlZWQpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgXHJcbiAgICAgIGJ0blllcy5iaW5kKFwiY2xpY2tcIiwgY2JZZXMpOyAgIFxyXG4gICAgICBidG5Oby5iaW5kKFwiY2xpY2tcIiwgY2JObyk7XHJcbiAgICAgICQoZG9jdW1lbnQpLmJpbmQoXCJjbGlja1wiLCBjYk5vKTtcclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGNiWWVzKCkge1xyXG4gICAgICAgIGNhbGxiYWNrKCd5ZXMnKTtcclxuICAgICAgICBjbG9zZURpYWxvZygpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBjYk5vKCkge1xyXG4gICAgICAgIGNhbGxiYWNrKCdubycpO1xyXG4gICAgICAgIGNsb3NlRGlhbG9nKCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkge1xyXG4gICAgICAgIGJ0blllcy51bmJpbmQoXCJjbGlja1wiLCBjYlllcyk7ICBcclxuICAgICAgICBidG5Oby51bmJpbmQoXCJjbGlja1wiLCBjYk5vKTtcclxuICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoXCJjbGlja1wiLCBjYk5vKTtcclxuICAgICAgICBcclxuICAgICAgICBtb2RhbC5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmFkZU91dChzcGVlZCk7ICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHllc05vRGlhbG9nOiB5ZXNOb0RpYWxvZ1xyXG4gICAgfTtcclxuXHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ0RlbW9raXRDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkY29tcGlsZSwgJHRpbWVvdXQsIGNvbnRlbnRTZXJ2aWNlKSB7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG5cclxuICAkc2NvcGUuJHdhdGNoKCdvcmRlci5uYW1lICsgb3JkZXIuZW1haWwgKyBvcmRlci5waG9uZSArIG9yZGVyLmFkZHJlc3MgKyBvcmRlci5jaXR5ICsgb3JkZXIuemlwICsgb3JkZXIuY291bnRyeSArIG9yZGVyLnNoaXBwaW5nICsgb3JkZXIucGF5bWVudCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAkc2NvcGUuZXJyb3IuZmllbGQgPSBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgJHNjb3BlLm9yZGVyID0ge1xyXG4gICAgbmFtZTonJyxcclxuICAgIGVtYWlsOicnLFxyXG4gICAgcGhvbmU6JycsXHJcbiAgICBhZGRyZXNzOicnLFxyXG4gICAgY2l0eTonJyxcclxuICAgIHppcDonJyxcclxuICAgIGNvdW50cnk6JycsXHJcbiAgICBzaGlwcGluZzogMSxcclxuICAgIHBheW1lbnQ6IDFcclxuICB9O1xyXG5cclxuICAkc2NvcGUucHJvZHVjdHMgPSB7fTtcclxuICAkc2NvcGUubWF4X3Byb2R1Y3RfaWQgPSAwO1xyXG4gICRzY29wZS5wcmljZXMgPSB7fTtcclxuICAkc2NvcGUuc2hpcHBpbmdzID0ge307XHJcbiAgJHNjb3BlLnBheW1lbnRzID0ge307XHJcblxyXG4gICRzY29wZS50b3RhbCA9IDA7XHJcbiAgJHNjb3BlLnRvTWFpbiA9IGZhbHNlO1xyXG5cclxuICAkc2NvcGUucmVnaXN0ZXJQcm9kdWN0ID0gZnVuY3Rpb24ocHJvZHVjdF9pZCwgcHJpY2UpIHtcclxuICAgICRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSA9IDA7XHJcbiAgICBpZiAocHJvZHVjdF9pZCA+ICRzY29wZS5tYXhfcHJvZHVjdF9pZClcclxuICAgICAgICAkc2NvcGUubWF4X3Byb2R1Y3RfaWQgPSBwcm9kdWN0X2lkO1xyXG4gICAgJHNjb3BlLnByaWNlc1twcm9kdWN0X2lkXSA9IHByaWNlO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5hZGRQcm9kdWN0ID0gZnVuY3Rpb24ocHJvZHVjdF9pZCkge1xyXG4gICAgaWYgKCRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSA8IDkpXHJcbiAgICAgICRzY29wZS5wcm9kdWN0c1twcm9kdWN0X2lkXSsrO1xyXG4gICAgJHNjb3BlLmNhbGN1bGF0ZVN1bW0oKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZGVkdWN0UHJvZHVjdCA9IGZ1bmN0aW9uKHByb2R1Y3RfaWQpIHtcclxuICAgIGlmICgkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0gPiAwKVxyXG4gICAgICAkc2NvcGUucHJvZHVjdHNbcHJvZHVjdF9pZF0tLTtcclxuICAgICRzY29wZS5jYWxjdWxhdGVTdW1tKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlZ2lzdGVyU2hpcHBpbmcgPSBmdW5jdGlvbihzaGlwcGluZ19pZCwgcHJpY2UpIHtcclxuICAgICRzY29wZS5zaGlwcGluZ3Nbc2hpcHBpbmdfaWRdID0gcHJpY2U7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNldFNoaXBwaW5nID0gZnVuY3Rpb24oc2hpcHBpbmdfaWQsIGUpIHtcclxuICAgICAgJHNjb3BlLm9yZGVyLnNoaXBwaW5nID0gc2hpcHBpbmdfaWQ7XHJcbiAgICAgIGlmICh0eXBlb2YgZSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLmNsaWNrKCk7XHJcbiAgICAgICRzY29wZS5jYWxjdWxhdGVTdW1tKCk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlZ2lzdGVyUGF5bWVudCA9IGZ1bmN0aW9uKHBheW1lbnRfaWQsIGFjdGlvbikge1xyXG4gICAgICAkc2NvcGUucGF5bWVudHNbcGF5bWVudF9pZF0gPSBhY3Rpb247XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnNldFBheW1lbnQgPSBmdW5jdGlvbihwYXltZW50X2lkLCBlKSB7XHJcbiAgICAgICRzY29wZS5vcmRlci5wYXltZW50ID0gcGF5bWVudF9pZDtcclxuICAgICAgaWYgKHR5cGVvZiBlICE9ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkuY2xpY2soKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuY2FsY3VsYXRlU3VtbSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnN1bW0gPSAxMjA7XHJcblxyXG4gICAgJHNjb3BlLnRvdGFsID0gJHNjb3BlLnN1bW07XHJcbiAgICBpZiAoJHNjb3BlLm9yZGVyLnNoaXBwaW5nICYmIHR5cGVvZiAkc2NvcGUuc2hpcHBpbmdzWyRzY29wZS5vcmRlci5zaGlwcGluZ10gIT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAkc2NvcGUudG90YWwgKz0gJHNjb3BlLnNoaXBwaW5nc1skc2NvcGUub3JkZXIuc2hpcHBpbmddO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5idXlEZW1vS2l0ID0gZnVuY3Rpb24ob3JkZXIpIHtcclxuICAgIGlmICghJHNjb3BlLm9yZGVyRm9ybS4kdmFsaWQpIHtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuZmllbGQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoJHNjb3BlLnRvTWFpbilcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XHJcbiAgICBlbHNlIHtcclxuICAgICAgb3JkZXIucHJvZHVjdHM9JHNjb3BlLnByb2R1Y3RzO1xyXG4gICAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9idXlEZW1vS2l0Jywgb3JkZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgaWYgKCdlbWFpbCcgPT0gZGF0YS5hY3Rpb24pIHtcclxuICAgICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICAgJHNjb3BlLnRvTWFpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICRzY29wZS5maW5pc2hCdXR0b24gPSAkc2NvcGUudG9NYWluTWVzc2FnZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2RlbW8ta2l0LWJsb2NrJykuYWZ0ZXIoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZm9ybS15bS1wYXknKS5zdWJtaXQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuZmllbGQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdtb2Jpc3BvdCcpLmNvbnRyb2xsZXIoJ0hlbHBDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBjb250ZW50U2VydmljZSkge1xyXG5cclxuICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuXHJcbiAgJHNjb3BlLnNlbmQgPSBmdW5jdGlvbih1c2VyLCB2YWxpZCl7XHJcbiAgICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcbiAgICB1c2VyLmVtYWlsID0gdXNlci5oZWxwX2VtYWlsO1xyXG4gICAgJGh0dHAucG9zdCgnL3NlcnZpY2Uvc2VuZFF1ZXN0aW9uJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICRzY29wZS51c2VyLm5hbWUgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5oZWxwX2VtYWlsID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIucXVlc3Rpb24gPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5waG9uZSA9ICcnO1xyXG5cclxuICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgY29udGVudFNlcnZpY2Uudmlld01vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignUGhvbmVzQ29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlKSB7XHJcbiAgICAkc2NvcGUuaW5pdFBob25lcyA9IGZ1bmN0aW9uKGluaXRWYWx1ZSlcclxuICAgIHtcclxuICAgICAgICAkc2NvcGUucGhvbmVzTGlzdCA9IGluaXRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmluaXREZXZpY2VzID0gZnVuY3Rpb24oaW5pdFZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgICRzY29wZS5kZXZpY2VzTGlzdCA9IGluaXRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnBob25lc0xpc3QgPSBbXTtcclxuXHJcbiAgICAkc2NvcGUuZGV2aWNlc0xpc3QgPSBbXTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignU2xpZGVDb250cm9sbGVyJyxcclxuICBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0KSB7XHJcblxyXG4gICRzY29wZS5JTUFHRV9XSURUSCA9IDMwMDtcclxuICAkc2NvcGUuRkFERV9TUEVFRCA9IDYwMDtcclxuXHJcbiAgJHNjb3BlLmdldFJhbmRvbUludCA9IGZ1bmN0aW9uKG1pbiwgbWF4KXtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5zcG90cyA9IHt9O1xyXG4gICRzY29wZS5zcG90cy5uYW1lID0gJ3Nwb3RzJztcclxuICAkc2NvcGUuc3BvdHMubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgJHNjb3BlLnNwb3RzLnNsaWRlcyA9IFtcclxuICAgIHtpZDowLCBpbWc6J2JyYWNlX2JsYWNrLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzAwMCd9LFxyXG4gICAge2lkOjEsIGltZzonYnJhY2VfYmx1ZS5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICMwMDYyRkYnfSxcclxuICAgIHtpZDoyLCBpbWc6J2JyYWNlX2dyZWVuLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogIzVBQzBCOSd9LFxyXG4gICAge2lkOjMsIGltZzonYnJhY2VfcGF0dDAxLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI0FCMjY0MCd9LFxyXG4gICAge2lkOjQsIGltZzonYnJhY2VfcGF0dDAyLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2Q1ZDg1MCd9LFxyXG4gICAge2lkOjUsIGltZzonYnJhY2VfcGF0dDAzLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjYsIGltZzonYnJhY2VfcGF0dDA0LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjcsIGltZzonYnJhY2VfcGF0dDA1LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjgsIGltZzonYnJhY2VfcGF0dDA2LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjksIGltZzonYnJhY2VfcGF0dDA3LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjEwLCBpbWc6J2JyYWNlX3JlZC5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICNmZmYnfSxcclxuICAgIHtpZDoxMSwgaW1nOidicmFjZV93aGl0ZS5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICNmZmYnfSxcclxuICAgIHtpZDoxMiwgaW1nOidjYXJkX2JsYWNrLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjEzLCBpbWc6J2NhcmRfYmx1ZS5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICNmZmYnfSxcclxuICAgIHtpZDoxNCwgaW1nOidjYXJkX2dyZWVuLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjE1LCBpbWc6J2NhcmRfcmVkLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjE2LCBpbWc6J2NhcmRfd2hpdGUucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjZmZmJ30sXHJcbiAgICB7aWQ6MTcsIGltZzonY2FyZF95ZWxsb3cucG5nJywgdG1iX3N0eWxlOidiYWNrZ3JvdW5kOiAjZmZmJ30sXHJcbiAgICB7aWQ6MTgsIGltZzona2V5X2JsYWNrLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjE5LCBpbWc6J2tleV9ibHVlLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjIwLCBpbWc6J2tleV9ncmVlbi5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICNmZmYnfSxcclxuICAgIHtpZDoyMSwgaW1nOidrZXlfcmVkLnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gICAge2lkOjIyLCBpbWc6J2tleV93aGl0ZS5wbmcnLCB0bWJfc3R5bGU6J2JhY2tncm91bmQ6ICNmZmYnfSxcclxuICAgIHtpZDoyMywgaW1nOidrZXlfeWVsbG93LnBuZycsIHRtYl9zdHlsZTonYmFja2dyb3VuZDogI2ZmZid9LFxyXG4gIF07XHJcbiAgXHJcbiAgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExXTtcclxuICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50ID0gMTtcclxuICAvLyRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1skc2NvcGUuZ2V0UmFuZG9tSW50KDAsICRzY29wZS5zcG90cy53cmlzdGJhbmRzLmxlbmd0aCAtIDEpXTtcclxuICBcclxuICAkc2NvcGUuc3BvdHMuY2FyZHMgPSBbMTIsIDEzLCAxNCwgMTUsIDE2LCAxN107XHJcbiAgJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQgID0gMTI7XHJcbiAgXHJcbiAgJHNjb3BlLnNwb3RzLmtleXMgPSBbMTgsIDE5LCAyMCwgMjEsIDIyLCAyM107XHJcbiAgJHNjb3BlLnNwb3RzLmtleXNfY3VycmVudCAgPSAxODtcclxuICBcclxuICAkc2NvcGUuc3BvdHMuY3VycmVudCA9ICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQ7XHJcbiAgJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSA9ICd3cmlzdGJhbmQnO1xyXG4gICRzY29wZS5zcG90cy5jb2xvcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gICRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gIC8vJHNjb3BlLmdldFJhbmRvbUludCgwLCAkc2NvcGUud3Jpc3RiYW5kLnNsaWRlcy5sZW5ndGggLSAxKTtcclxuICBcclxuICAkc2NvcGUuc2Nyb2xsVG8gPSBmdW5jdGlvbihzbGlkZXIsIGluZCkge1xyXG4gICAgc2xpZGVyLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0Oigkc2NvcGUuSU1BR0VfV0lEVEggKiBpbmQgKiAtMSkgKyBcInB4XCJ9O1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5mYWRlVG8gPSBmdW5jdGlvbihzbGlkZXIsIGluZCkge1xyXG4gICAgaWYgKHNsaWRlci5jdXJyZW50ID09IGluZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoXCIjc2xpZGVyLVwiICsgc2xpZGVyLm5hbWUgKyBcIiAuZi1zbGlkZVwiKS5zdG9wKCk7XHJcbiAgICB2YXIgaWQgPSBcIiNcIiArIHNsaWRlci5uYW1lICsgXCJfXCIgKyBpbmQ7XHJcbiAgICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgICBzbGlkZXIuY3VycmVudCA9IGluZDtcclxuICAgIGFuZ3VsYXIuZWxlbWVudChcIiNzbGlkZXItXCIgKyBzbGlkZXIubmFtZSArIFwiIC5mLXNsaWRlW2lkIT1cIiAraWQgK1wiXVwiKS5mYWRlT3V0KDApO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KGlkKS5mYWRlSW4oJHNjb3BlLkZBREVfU1BFRUQpO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmZhZGVUb1dpc3RicmFuZHMgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5zcG90cy5jdXJyZW50X3R5cGUgPSAnd3Jpc3RiYW5kJztcclxuICAgICRzY29wZS5mYWRlVG8oJHNjb3BlLnNwb3RzLCAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50KTtcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5mYWRlVG9DYXJkcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSA9ICdjYXJkJztcclxuICAgICRzY29wZS5mYWRlVG8oJHNjb3BlLnNwb3RzLCAkc2NvcGUuc3BvdHMuY2FyZHNfY3VycmVudCk7XHJcbiAgfTtcclxuICBcclxuICAkc2NvcGUuZmFkZVRvS2V5cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSA9ICdrZXknO1xyXG4gICAgJHNjb3BlLmZhZGVUbygkc2NvcGUuc3BvdHMsICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQpO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnN0YXJ0Q29sb3JzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJHNjb3BlLnNwb3RzLmNvbG9yX3JvdGF0aW9uKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBcclxuICAgIGlmICgkc2NvcGUuc3BvdHMudGltZXJfcm90YXRpb24pXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgXHJcbiAgICAkc2NvcGUuc3BvdHMuY29sb3Jfcm90YXRpb24gPSB0cnVlO1xyXG4gICAgJHNjb3BlLnNwb3RzLnRpbWVyX3JvdGF0aW9uID0gdHJ1ZTtcclxuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgJHNjb3BlLmNvbG9yUm90YXRpb24oKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLnN0b3BDb2xvcnMgPSBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5zcG90cy5jb2xvcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmNvbG9yUm90YXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICghJHNjb3BlLnNwb3RzLmNvbG9yX3JvdGF0aW9uKSB7XHJcbiAgICAgICRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbiA9IGZhbHNlO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAgXHJcbiAgICBpZiAoJ3dyaXN0YmFuZCcgPT0gJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSkge1xyXG4gICAgICAgIHZhciBjdXJyZW50X2luZCA9IC0xO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1tpXSA9PSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50KVxyXG4gICAgICAgICAgICAgIGN1cnJlbnRfaW5kID0gaTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRfaW5kIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICgoJHNjb3BlLnNwb3RzLndyaXN0YmFuZHMubGVuZ3RoIC0gMSkgPT0gY3VycmVudF9pbmQpXHJcbiAgICAgICAgICAgICRzY29wZS5zcG90cy53cmlzdGJhbmRzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc1swXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAkc2NvcGUuc3BvdHMud3Jpc3RiYW5kc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLndyaXN0YmFuZHNbY3VycmVudF9pbmQgKyAxXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZhZGVUb1dpc3RicmFuZHMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCdjYXJkJyA9PSAkc2NvcGUuc3BvdHMuY3VycmVudF90eXBlKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRfaW5kID0gLTE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc3BvdHMuY2FyZHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdHMuY2FyZHNbaV0gPT0gJHNjb3BlLnNwb3RzLmNhcmRzX2N1cnJlbnQpXHJcbiAgICAgICAgICAgICAgY3VycmVudF9pbmQgPSBpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudF9pbmQgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCgkc2NvcGUuc3BvdHMuY2FyZHMubGVuZ3RoIC0gMSkgPT0gY3VycmVudF9pbmQpXHJcbiAgICAgICAgICAgICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLmNhcmRzWzBdO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICRzY29wZS5zcG90cy5jYXJkc19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLmNhcmRzW2N1cnJlbnRfaW5kICsgMV07XHJcblxyXG4gICAgICAgICRzY29wZS5mYWRlVG9DYXJkcygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoJ2tleScgPT0gJHNjb3BlLnNwb3RzLmN1cnJlbnRfdHlwZSkge1xyXG4gICAgICAgIHZhciBjdXJyZW50X2luZCA9IC0xO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNwb3RzLmtleXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdHMua2V5c1tpXSA9PSAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50KVxyXG4gICAgICAgICAgICAgIGN1cnJlbnRfaW5kID0gaTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRfaW5kIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICgoJHNjb3BlLnNwb3RzLmtleXMubGVuZ3RoIC0gMSkgPT0gY3VycmVudF9pbmQpXHJcbiAgICAgICAgICAgICRzY29wZS5zcG90cy5rZXlzX2N1cnJlbnQgPSAkc2NvcGUuc3BvdHMua2V5c1swXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAkc2NvcGUuc3BvdHMua2V5c19jdXJyZW50ID0gJHNjb3BlLnNwb3RzLmtleXNbY3VycmVudF9pbmQgKyAxXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmZhZGVUb0tleXMoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICRzY29wZS5zcG90cy50aW1lcl9yb3RhdGlvbiA9IHRydWU7XHJcbiAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgJHNjb3BlLmNvbG9yUm90YXRpb24oKTtcclxuICAgfSwgMjAwMCk7XHJcbiBcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5yYW5kb21TbGlkZSA9IGZ1bmN0aW9uKHNsaWRlcikge1xyXG4gICAgJHNjb3BlLmZhZGVUbyhzbGlkZXIsICRzY29wZS5nZXRSYW5kb21JbnQoMCwgc2xpZGVyLnNsaWRlcy5sZW5ndGggLSAxKSk7XHJcbiAgfTtcclxufSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignU3BvdENvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkdGltZW91dCwgY29udGVudFNlcnZpY2UsIGRpYWxvZ1NlcnZpY2UpIHtcclxuXHJcbi8qINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0LXRgNC10LzQtdC90L3Ri9GFICovXHJcblxyXG4gICRzY29wZS5tYXhTaXplID0gMjUqMTAyNCoxMDI0O1xyXG4gICRzY29wZS5wcm9ncmVzcyA9IDA7XHJcbiAgJHNjb3BlLmtleXMgPSBbXTtcclxuICAkc2NvcGUuYWN0aW9uID0gZmFsc2U7XHJcblxyXG4gICRzY29wZS5lcnJvciA9IHt9O1xyXG4gICRzY29wZS5yZXN1bHQgPSB7fTtcclxuXHJcbiAgJHNjb3BlLnNwb3QgPSB7fTtcclxuICAkc2NvcGUuc3BvdC5kaXNjb2RlcyA9IDA7XHJcblxyXG4gICRzY29wZS5nZW5lcmFsID0ge307XHJcbiAgJHNjb3BlLmdlbmVyYWwudmlld3MgPSBmYWxzZTtcclxuICAkc2NvcGUuaG9zdF9tb2JpbGUgPSAwO1xyXG5cclxuICAkc2NvcGUud2FsbGV0ID0ge307XHJcbiAgJHNjb3BlLndhbGxldC5jYXJkcyA9IHt9O1xyXG5cclxuICAkc2NvcGUuc2Nyb2xsX2tleSA9IC0xO1xyXG5cclxuICAkc2NvcGUuYWN0aW9ucyA9IHt9O1xyXG4gICRzY29wZS5hY3Rpb25zLnBhZ2UgPSAnJztcclxuICAkc2NvcGUuYWN0aW9ucy5waHJhc2UgPSAnJztcclxuICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICRzY29wZS5hY3Rpb25zLm9mZnNldCA9IDA7XHJcbiAgJHNjb3BlLmFjdGlvbnMuY291bnRfYWxsID0gMDtcclxuICBcclxuICAkc2NvcGUudGV4dCA9IHt9O1xyXG4gIFxyXG4gICRzY29wZS50cmFuc3BvcnRfdHlwZXMgPSBbXTtcclxuICAkc2NvcGUuY3VzdG9tX2NhcmQgPSB7YmFjazonJywgcGhvdG86JycsIG5hbWU6JycsIHBvc2l0aW9uOicnLCBsb2dvOicnLCBcclxuICAgIHNoaXBwaW5nX25hbWU6JycsIHBob25lOicnLCBhZGRyZXNzOicnLCBjaXR5OicnLCB6aXA6JycsIHRva2VuOicnLCBkaXNjb2Rlc19pZDonJ31cclxuICAkc2NvcGUuc2VsZWN0ZWRfdHlwZT17fTtcclxuICBcclxuLyogQ1JVRCDQtNC70Y8g0YHQv9C+0YLQsCAqL1xyXG5cclxuICAvL9Ci0YDQuNCz0LXRgCDQvdCwINGB0L3Rj9GC0LjQtSDQvtGI0LjQsdC60Lgg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQv9C+0LvRj1xyXG4gICRzY29wZS4kd2F0Y2goJ3Nwb3QuY29kZSArIHNwb3QudGVybXMnLCBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5lcnJvci5jb2RlID0gZmFsc2U7XHJcbiAgICAkc2NvcGUuZXJyb3IudGVybXMgPSBmYWxzZTtcclxuICB9KTtcclxuXHJcbiAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0YHQv9C+0YLQsFxyXG4gICRzY29wZS5hZGRTcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgaWYgKCFzcG90LmNvZGUgfHwgISRzY29wZS5zcG90LnRlcm1zKSByZXR1cm4gZmFsc2U7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9hZGQnLCBzcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgJHNjb3BlLnNwb3QuZGlzY29kZXMgPSBkYXRhLmRpc2NvZGVzO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtbGlzdCcpLnByZXBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhY3RTcG90JykuY2xpY2soKTtcclxuICAgICAgICBkZWxldGUgJHNjb3BlLnNwb3QuY29kZTtcclxuICAgICAgICBkZWxldGUgJHNjb3BlLnNwb3QudGVybXM7XHJcbiAgICAgICAgaWYgKCRzY29wZS5ob3N0X21vYmlsZSlcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3Nwb3QvbGlzdCc7XHJcbiAgICAgIH1lbHNlIGlmIChkYXRhLmVycm9yID09ICd5ZXMnKSB7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmNvZGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9Cj0L/RgNCw0LLQu9C10L3QuNC1INC+0YHQvdC+0LLQvdGL0LzQuCDQsdC70L7QutCw0LzQuCDRgdC/0L7Rgiwg0LrQvtGI0LXQu9C10LosINC60YPQv9C+0L3Riy5cclxuICAkc2NvcGUuJHdhdGNoKCdnZW5lcmFsLnZpZXdzICsgc3BvdC5kaXNjb2RlcycsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmFjdGlvbnMucGFnZSA9ICcnO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KHdpbmRvdykudW5iaW5kKCdzY3JvbGwnLCAkc2NvcGUubG9hZE1vcmVDb3Vwb25zKTtcclxuXHJcbiAgICBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ3Nwb3QnKXtcclxuICAgICAgJHNjb3BlLnZpZXdTcG90KCRzY29wZS5zcG90KTtcclxuICAgIH0gZWxzZSBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgPT0gJ3dhbGxldCcpe1xyXG4gICAgICAkc2NvcGUudmlld1dhbGxldCgkc2NvcGUuc3BvdCk7XHJcbiAgICB9IGVsc2UgaWYgKCRzY29wZS5nZW5lcmFsLnZpZXdzID09ICdjb3Vwb24nKXtcclxuICAgICAgJHNjb3BlLnZpZXdDb3Vwb25zKCRzY29wZS5zcG90LCAkc2NvcGUuYWN0aW9ucyk7XHJcbiAgICB9IGVsc2UgaWYgKCRzY29wZS5nZW5lcmFsLnZpZXdzID09ICdzZXR0aW5ncycpe1xyXG4gICAgICAkc2NvcGUudmlld3NTZXR0aW5ncygkc2NvcGUuc3BvdCk7XHJcbiAgICB9IGVsc2UgaWYgKCRzY29wZS5nZW5lcmFsLnZpZXdzID09ICd0cmFuc3BvcnQnKXtcclxuICAgICAgJHNjb3BlLnZpZXdUcmFuc3BvcnQoJHNjb3BlLnNwb3QpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkc2NvcGUuYm9keU1pbkhlaWdodCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgbGlzdEhlaWdodCA9IGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtbGlzdCcpLmhlaWdodCgpO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KCcuc3BvdC1jb250ZW50JykuY3NzKCdtaW4taGVpZ2h0JywgbGlzdEhlaWdodCsyMDApO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS52aWV3U3BvdCA9IGZ1bmN0aW9uIChzcG90KSB7XHJcbiAgICBpZiAoc3BvdC5kaXNjb2RlcyA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvdmlldycsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBzcG90X2Jsb2NrLmVtcHR5KCk7XHJcbiAgICAgICAgc3BvdF9ibG9jay5odG1sKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcblxyXG4gICAgICAgICRzY29wZS5rZXlzID0gW107XHJcbiAgICAgICAgJHNjb3BlLmNvbnRlbnRfaXRlcmF0aW9uID0gMDtcclxuICAgICAgICAkc2NvcGUuZmlsZVVwbG9hZEluaXQoKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmJvZHlNaW5IZWlnaHQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWNvbnRlbnRfcm93Jykuc2hvdygpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgIH0sNTAwKTtcclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5zY3JvbGxfa2V5ICYmICRzY29wZS5zY3JvbGxfa2V5ID4gMSlcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLnNjcm9sbFBhZ2UoJyNibG9jay0nICsgJHNjb3BlLnNjcm9sbF9rZXkpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLnNjcm9sbFBhZ2UoJ2JvZHknKTtcclxuICAgICAgICAkc2NvcGUuc2Nyb2xsX2tleSA9IC0xO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtCz0L4g0LHQu9C+0LrQsCDQsiDRgdC/0L7RglxyXG4gICRzY29wZS5hZGRDb250ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuYWRkVmFsdWUoJHNjb3BlLnNwb3QuY29udGVudCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QtdC/0YDQuNCy0Y/Qt9Cw0L3QvdC+0LPQviDQuiDRgdC+0YbRgdC10YLRj9C8INC60L7QvdGC0LXQvdGC0LBcclxuICAkc2NvcGUuYWRkVmFsdWUgPSBmdW5jdGlvbihuZXdWYWx1ZSl7XHJcbiAgICAkc2NvcGUuc3BvdC5jb250ZW50ID0gbmV3VmFsdWU7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zcG90QWRkQ29udGVudCcsICRzY29wZS5zcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjYWRkLWNvbnRlbnQnKS5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNwb3Qua2V5cy5wdXNoKGRhdGEua2V5KTtcclxuICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50ID0gJyc7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCd0ZXh0YXJlYScpLnJlbW92ZUNsYXNzKCdwdXQnKTtcclxuXHJcbiAgICAgICAgaWYgKGFuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtJykuaGFzQ2xhc3MoJ29wZW4nKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZXh0cmFNZWRpYUZvcm0nKS5zbGlkZVVwKDAsIGZ1bmN0aW9uKCl7YW5ndWxhci5lbGVtZW50KCcjZXh0cmFNZWRpYUZvcm0gYScpLnJlbW92ZUNsYXNzKCdibGFja291dCcpO2FuZ3VsYXIuZWxlbWVudCgnI2V4dHJhTWVkaWFGb3JtIGEnKS5mYWRlVG8oMCwgMSk7fSk7XHJcbiAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjZXh0cmFNZWRpYUZvcm0nKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSBhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgZGF0YS5rZXkpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsX2hlaWdodFxyXG4gICAgICAgIH0sIDYwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJHNjb3BlLnJlc2V0Q3Vyc29yKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC/0L7RgNGP0LTQvtC6INCx0LvQvtC60L7QslxyXG4gICRzY29wZS5zYXZlT3JkZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3NhdmVPcmRlcicsICRzY29wZS5zcG90KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcblxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQn9Cw0YDQsNC80LXRgtGA0Ysg0YHQvtGA0YLQuNGA0L7QstC60LhcclxuICAkc2NvcGUuc29ydGFibGVPcHRpb25zID0ge1xyXG4gICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLnNhdmVPcmRlcigpO1xyXG4gICAgfSxcclxuICAgICdjb250YWlubWVudCc6Jy5zcG90LWNvbnRlbnQnLFxyXG4gICAgJ2hhbmRsZSc6ICcubW92ZScsXHJcbiAgICAnc2Nyb2xsU2Vuc2l0aXZpdHknOiA1LFxyXG4gICAgJ3RvbGVyYW5jZSc6ICdwb2ludGVyJyxcclxuICAgICdvcGFjaXR5JzowLjhcclxuICB9O1xyXG5cclxuICAvLyDQo9C00LDQu9C10L3QuNC1INCx0LvQvtC60LAg0LIg0YHQv9C+0YLQtVxyXG4gICRzY29wZS5yZW1vdmVDb250ZW50ID0gZnVuY3Rpb24oc3BvdCwga2V5LCBlKSB7XHJcbiAgICBzcG90LmtleSA9IGtleTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3Nwb3RSZW1vdmVDb250ZW50Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHZhciBzcG90SXRlbSA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgICAgICBzcG90SXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAkc2NvcGUua2V5cz1kYXRhLmtleXM7XHJcbiAgICAgICAgaWYgKGRhdGEubmV0RG93bilcclxuICAgICAgICAgICAgJHNjb3BlLm5ldERvd24oZGF0YS5uZXREb3duKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDRgtC10LrRgdGC0L7QstC+0LPQviDQsdC70L7QutCwINCyINGB0L/QvtGC0LVcclxuICAkc2NvcGUuZWRpdENvbnRlbnQgPSBmdW5jdGlvbihzcG90LCBrZXksIGUpIHtcclxuICAgIGlmICghc3BvdC5jb250ZW50X25ldyl7XHJcbiAgICAgIHNwb3Qua2V5ID0ga2V5O1xyXG4gICAgICB2YXIgc3BvdEl0ZW0gPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuc3BvdC1pdGVtJyk7XHJcbiAgICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudCgnI3Nwb3QtZWRpdCcpLmNsb25lKCk7XHJcblxyXG4gICAgICBpZiAoc3BvdEl0ZW0uZmluZCgnYS50eXBlLWxpbmsnKS5zaXplKCkgPiAwKXtcclxuICAgICAgICAgIC8v0YHRgdGL0LvQutCwXHJcbiAgICAgICAgICB2YXIgc3BvdExpbmsgPSBzcG90SXRlbS5maW5kKCdhLnR5cGUtbGluaycpO1xyXG4gICAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudF9uZXcgPSBzcG90TGluay5maW5kKCdzcGFuLmxpbmsnKS50ZXh0KCk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgICAgLy/RgtC10LrRgdGCXHJcbiAgICAgICAgICB2YXIgc3BvdERhdGEgPSBzcG90SXRlbS5maW5kKCdwLml0ZW0tdHlwZV9fdGV4dCcpO1xyXG4gICAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudF9uZXcgPSBzcG90RGF0YS50ZXh0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNwb3RFZGl0LnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgIHNwb3RFZGl0LmZpbmQoJ3RleHRhcmVhJykuZm9jdXMoMSk7XHJcbiAgICAgIHNwb3RJdGVtLmhpZGUoKS5iZWZvcmUoJGNvbXBpbGUoc3BvdEVkaXQpKCRzY29wZSkpO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICAkc2NvcGUuaGlkZVNwb3RFZGl0KCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHQvtGF0YDQsNC90LXQvdC40LUg0YLQtdC60YHRgtC+0LLQvtCz0L4g0LHQu9C+0LrQsCDQsiDRgdC/0L7RgtC1XHJcbiAgJHNjb3BlLnNhdmVDb250ZW50ID0gZnVuY3Rpb24oc3BvdCwgZSkge1xyXG4gICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgdmFyIHNwb3RJdGVtID0gc3BvdEVkaXQubmV4dCgpO1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zcG90L3Nwb3RTYXZlQ29udGVudCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICBzcG90SXRlbS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICBzcG90SXRlbS5zaG93KCk7XHJcbiAgICAgIH1cclxuICAgICAgZGVsZXRlICRzY29wZS5zcG90LmNvbnRlbnRfbmV3O1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J/RgNGP0YfQtdC8INGC0LXQutGB0YLQvtCy0YvQuSDQsdC70L7QuiDQv9GA0Lgg0LrQu9C40LrQtSDQstC90LUsINC00LDQvdC90YvQtSDRgdC+0YXRgNCw0L3Rj9C10LxcclxuICAkc2NvcGUuaGlkZVNwb3RFZGl0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoISRzY29wZS5zcG90LmNvbnRlbnQgJiYgISRzY29wZS5zcG90LmNvbnRlbnRfbmV3KSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1lZGl0Jyk7XHJcbiAgICB2YXIgc3BvdEl0ZW0gPSBzcG90RWRpdC5uZXh0KCk7XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3Qvc3BvdFNhdmVDb250ZW50JywgJHNjb3BlLnNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICBzcG90SXRlbS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICBzcG90SXRlbS5zaG93KCk7XHJcbiAgICAgIH1cclxuICAgICAgZGVsZXRlICRzY29wZS5zcG90LmNvbnRlbnRfbmV3O1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J/QtdGA0LXQuNC80LXQvdC+0LLRi9Cy0LDQtdC8INGB0L/QvtGCXHJcbiAgJHNjb3BlLnJlbmFtZVNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICBpZiAoIXNwb3QubmFtZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvcmVuYW1lJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnIycgKyBzcG90LmRpc2NvZGVzICsgJyBoMycpLnRleHQoc3BvdC5uYW1lKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0J7Rh9C40YnQsNC10Lwg0YHQv9C+0YJcclxuICAkc2NvcGUuY2xlYW5TcG90ID0gZnVuY3Rpb24oc3BvdCkge1xyXG4gICAgZGlhbG9nU2VydmljZS55ZXNOb0RpYWxvZyhmdW5jdGlvbihkaWFsb2dfcmVzdWx0KSB7XHJcbiAgICAgIGlmIChkaWFsb2dfcmVzdWx0ICE9ICd5ZXMnKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgXHJcbiAgICAgICRodHRwLnBvc3QoJy9zcG90L2NsZWFuJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZ2VuZXJhbC52aWV3cyA9ICdzcG90JztcclxuICAgICAgICB9XHJcbiAgICAgIH0pOyAgXHJcbiAgICB9LFxyXG4gICAgJHNjb3BlLnRleHQueWVzX2J0bixcclxuICAgICRzY29wZS50ZXh0Lm5vX2J0bixcclxuICAgICRzY29wZS50ZXh0LmNsZWFuX3Nwb3QsXHJcbiAgICAnbmVnYXRpdmUnXHJcbiAgICApOyAgXHJcbiAgfTtcclxuXHJcbiAgLy8g0KPQtNCw0LvRj9C10Lwg0YHQv9C+0YJcclxuICAkc2NvcGUucmVtb3ZlU3BvdCA9IGZ1bmN0aW9uKHNwb3QpIHtcclxuICAgIGRpYWxvZ1NlcnZpY2UueWVzTm9EaWFsb2coZnVuY3Rpb24oZGlhbG9nX3Jlc3VsdCkge1xyXG4gICAgICBpZiAoZGlhbG9nX3Jlc3VsdCAhPSAneWVzJylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgXHJcbiAgICAgICRodHRwLnBvc3QoJy9zcG90L3JlbW92ZScsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL3Nwb3QvbGlzdC8nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgICRzY29wZS50ZXh0Lnllc19idG4sXHJcbiAgICAkc2NvcGUudGV4dC5ub19idG4sXHJcbiAgICAkc2NvcGUudGV4dC5ybV9zcG90LFxyXG4gICAgJ25lZ2F0aXZlJ1xyXG4gICAgKTsgIFxyXG4gIH07XHJcblxyXG4gIC8vINCc0LXQvdGP0LXQvCDRgdGC0LDRgtGD0YEg0YHQv9C+0YLQsFxyXG4gICRzY29wZS5pdmlzaWJsZVNwb3QgPSBmdW5jdGlvbihzcG90KSB7XHJcbiAgICB2YXIgdGl0bGUgPSAkc2NvcGUudGV4dC5ta19pbnZpc2libGU7XHJcbiAgICB2YXIgZGVzY3IgPSAkc2NvcGUudGV4dC5ta19pbnZpc2libGVfZGVzY3I7XHJcblxyXG4gICAgaWYgKHNwb3Quc3RhdHVzID09IDYpIHtcclxuICAgICAgICB0aXRsZSA9ICRzY29wZS50ZXh0Lm1rX3Zpc2libGU7XHJcbiAgICAgICAgZGVzY3IgPSAkc2NvcGUudGV4dC5ta192aXNpYmxlX2Rlc2NyO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZGlhbG9nU2VydmljZS55ZXNOb0RpYWxvZyhmdW5jdGlvbihkaWFsb2dfcmVzdWx0KSB7XHJcbiAgICAgIGlmIChkaWFsb2dfcmVzdWx0ICE9ICd5ZXMnKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICBcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvaW52aXNpYmxlJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICAkc2NvcGUuc3BvdC5zdGF0dXMgPSBkYXRhLnN0YXR1cztcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnIycrc3BvdC5kaXNjb2RlcykudG9nZ2xlQ2xhc3MoJ2ludmlzaWJsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgJHNjb3BlLnRleHQueWVzX2J0bixcclxuICAgICRzY29wZS50ZXh0Lm5vX2J0bixcclxuICAgIHRpdGxlLFxyXG4gICAgJ25lZ2F0aXZlJ1xyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICAvLyDQntGC0L7QsdGA0LDQttC10L3QuNC1INC+0LrQvdCwINC90LDRgdGC0YDQvtC10LpcclxuICAkc2NvcGUudmlld3NTZXR0aW5ncyA9IGZ1bmN0aW9uIChzcG90KSB7XHJcbiAgICB2YXIgc3BvdF9ibG9jayA9IGFuZ3VsYXIuZWxlbWVudCgnI3Nwb3QtYmxvY2snKTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3NldHRpbmdzJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQntGC0L7QsdGA0LDQttC10L3QuNC1INC60L7RiNC10LvRjNC60LBcclxuICAkc2NvcGUudmlld1dhbGxldCA9IGZ1bmN0aW9uIChzcG90KSB7XHJcbiAgICB2YXIgc3BvdF9ibG9jayA9IGFuZ3VsYXIuZWxlbWVudCgnI3Nwb3QtYmxvY2snKTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3dhbGxldCcsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBzcG90X2Jsb2NrLmVtcHR5KCk7XHJcbiAgICAgICAgc3BvdF9ibG9jay5odG1sKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcblxyXG4gICAgICAgICRzY29wZS5nZXRMaXN0Q2FyZCgpO1xyXG5cclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRzY29wZS52aWV3U3BvdCgkc2NvcGUuc3BvdCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG5cclxuICAvLyDQntGC0L7QsdGA0LDQttC10L3QuNC1INC60YPQv9C+0L3QvtCyXHJcbiAgJHNjb3BlLnZpZXdDb3Vwb25zID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvY291cG9ucycsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICBzcG90X2Jsb2NrLmVtcHR5KCk7XHJcbiAgICAgICAgc3BvdF9ibG9jay5odG1sKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgJHNjb3BlLmJvZHlNaW5IZWlnaHQoKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5zcG90LWNvbnRlbnRfcm93Jykuc2hvdygpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgb3BhY2l0eTogMVxyXG4gICAgICAgIH0sNTAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuICBcclxuICAvLyDQntGC0L7QsdGA0LDQttC10L3QuNC1INCy0LrQu9Cw0LTQutC4INCi0YDQsNC90YHQv9C+0YDRglxyXG4gICRzY29wZS52aWV3VHJhbnNwb3J0ID0gZnVuY3Rpb24gKHNwb3QpIHtcclxuICAgIHZhciBzcG90X2Jsb2NrID0gYW5ndWxhci5lbGVtZW50KCcjc3BvdC1ibG9jaycpO1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvdHJhbnNwb3J0Jywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIHNwb3RfYmxvY2suZW1wdHkoKTtcclxuICAgICAgICBzcG90X2Jsb2NrLmh0bWwoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYm9keU1pbkhlaWdodCgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnNwb3QtY29udGVudF9yb3cnKS5zaG93KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSw1MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL0PQv9C40YHQvtC6INC60YPQv9C+0L3QvtCyXHJcbiAgJHNjb3BlLmxpc3RDb3Vwb25zID0gZnVuY3Rpb24gKHNwb3QsIGFjdGlvbnMpIHtcclxuICAgIGlmICghYWN0aW9ucy5wYWdlKSByZXR1cm4gZmFsc2U7XHJcbiAgICB2YXIgbGlzdCA9IGFuZ3VsYXIuZWxlbWVudCgnI2NvdXBvbnMtbGlzdCcpO1xyXG5cclxuICAgIHZhciBkYXRhID0geydkaXNjb2Rlcyc6IHNwb3QuZGlzY29kZXMsICd0b2tlbic6IHNwb3QudG9rZW4sICdwYWdlJzogYWN0aW9ucy5wYWdlLCAncGhyYXNlJzogYWN0aW9ucy5waHJhc2UsICdvZmZzZXQnOmFjdGlvbnMub2Zmc2V0fTtcclxuXHJcbiAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IHRydWU7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9saXN0Q291cG9ucycsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgKz0gZGF0YS5jb3VudDtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSBkYXRhLmNvdW50X2FsbDtcclxuXHJcbiAgICAgICAgbGlzdC5hcHBlbmQoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KS5lcnJvcihmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmFjdGlvbnMuaW5fcHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICB9O1xyXG5cclxuICAkc2NvcGUuZmlsdGVyQ291cG9ucyA9IGZ1bmN0aW9uKHNwb3QsIGFjdGlvbnMpIHtcclxuICAgICRzY29wZS5hY3Rpb25zLm9mZnNldCA9IDA7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwgPSAwO1xyXG4gICAgJHNjb3BlLmxpc3RDb3Vwb25zKHNwb3QsIGFjdGlvbnMpO1xyXG4gIH07XHJcblxyXG4gIC8vINCh0L/QuNGB0L7QuiDQutCw0YDRglxyXG4gICRzY29wZS5nZXRMaXN0Q2FyZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZiAoJHNjb3BlLmdlbmVyYWwudmlld3MgIT0gJ3dhbGxldCcpIHJldHVybiBmYWxzZTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L2xpc3RDYXJkJywgJHNjb3BlLndhbGxldCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHMgPSBkYXRhLmNhcmRzO1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuY2FyZHNfY291bnQgPSBkYXRhLmNhcmRzX2NvdW50O1xyXG4gICAgICAgICRzY29wZS53YWxsZXQubGlua2luZ19jYXJkID0gZGF0YS5saW5raW5nX2NhcmQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICRzY29wZS5nZXRMaXN0Q2FyZCgpO1xyXG4gICB9LCA1MDAwKTtcclxuICB9O1xyXG5cclxuICAvL9Ce0YLQvtCx0YDQsNC20LXQvdC40LUg0LrQsNGB0YLQvtC80L3QvtCz0L4g0LzQsNC60LXRgtCwINGC0YDQsNC90YHQv9C+0YLRgNC90L7QuSDQutCw0YDRgtGLXHJcbiAgJHNjb3BlLnNob3dDdXN0b21DYXJkID0gZnVuY3Rpb24oKXtcclxuICAgICQoJyNjdXN0b21DYXJkJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuaGlkZUN1c3RvbUNhcmQgPSBmdW5jdGlvbigpe1xyXG4gICAgJCgnI2N1c3RvbUNhcmQnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vINCR0LvQvtC60LjRgNC+0LLQutCwINC60L7RiNC10LvRjNC60LBcclxuICAkc2NvcGUuYmxvY2tlZFdhbGxldCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9ibG9ja2VkV2FsbGV0JywgJHNjb3BlLndhbGxldCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS53YWxsZXQuc3RhdHVzID0gZGF0YS5zdGF0dXM7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCe0YLQv9GA0LDQstC60LAg0LfQsNC/0YDQvtGB0LAg0L3QsCDQv9GA0LjQstGP0LfQutGDINC60LDRgNGC0YtcclxuICAkc2NvcGUubGlua2luZ0NhcmQgPSBmdW5jdGlvbihjYXJkKXtcclxuICAgIGlmICghY2FyZC50ZXJtcykgcmV0dXJuIGZhbHNlO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KFwiI2xpbmtpbmdfY2FyZFwiICkuc3VibWl0KCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0JTQtdC70LDQtdC8INC60LDRgNGC0YMg0L/Qu9Cw0YLQtdC20L3QvtC5XHJcbiAgJHNjb3BlLnNldFBheW1lbnRDYXJkID0gZnVuY3Rpb24oY2FyZF9pZCwgZSl7XHJcbiAgICB2YXIgZGF0YSA9IHsndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ2NhcmRfaWQnOiBjYXJkX2lkfTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3NldFBheW1lbnRDYXJkJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLm1haW4tY2FyZCcpLnJlbW92ZUNsYXNzKCdtYWluLWNhcmQnKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcygnbWFpbi1jYXJkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRzY29wZS5lZGl0Q2FyZExpc3QgPSBmdW5jdGlvbigpe1xyXG4gICAgJCgnLnRhYmxlLWNhcmQnKS50b2dnbGVDbGFzcygnZWRpdCcpO1xyXG5cclxuICAgIGlmICgkc2NvcGUud2FsbGV0LmNhcmRfZWRpdCA9PT0gMCkge1xyXG4gICAgICAkc2NvcGUud2FsbGV0LmNhcmRfZWRpdCA9IDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkc2NvcGUud2FsbGV0LmNhcmRfZWRpdCA9IDA7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0KPQtNCw0LvRj9C10Lwg0LrQsNGA0YLRg1xyXG4gICRzY29wZS5yZW1vdmVDYXJkID0gZnVuY3Rpb24oY2FyZF9pZCl7XHJcbiAgICB2YXIgZGF0YSA9IHsndG9rZW4nOiAkc2NvcGUuc3BvdC50b2tlbiwgJ2NhcmRfaWQnOiBjYXJkX2lkfTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L3JlbW92ZUNhcmQnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgJHNjb3BlLndhbGxldC5jYXJkc19jb3VudCAtPSAxO1xyXG4gICAgICAgIGRlbGV0ZSAkc2NvcGUud2FsbGV0LmNhcmRzW2NhcmRfaWRdO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQodGH0LXRgtGH0LjQuiDQvdCwINGB0YLRgNCw0L3QuNGG0LUg0YHQvtCz0LvQsNGI0LXQvdC40Y8g0L7QsSDQvtC/0LvQsNGC0LVcclxuICB2YXIgc3RvcHBlZDtcclxuICAkc2NvcGUuY291bnRSZXNldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnJlc2V0X3RpbWUgPSB0eXBlb2YgJHNjb3BlLnJlc2V0X3RpbWUgIT09ICd1bmRlZmluZWQnID8gJHNjb3BlLnJlc2V0X3RpbWU6MzA7XHJcbiAgICBzdG9wcGVkID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICgkc2NvcGUucmVzZXRfdGltZSA9PT0gMCkge1xyXG4gICAgICAgICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7XHJcbiAgICAgIH0gZWxzZSAkc2NvcGUucmVzZXRfdGltZS0tO1xyXG4gICAgICAkc2NvcGUuY291bnRSZXNldCgpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgfTtcclxuXHJcblxyXG4vKtCX0LDQs9GA0YPQt9C60LAg0YTQsNC50LvQvtCyICovXHJcblxyXG4gIC8vINCS0LXRiNCw0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC00LvRjyDQt9Cw0LPRgNGD0LfQutC4INGE0LDQudC70L7QslxyXG4gICRzY29wZS5maWxlVXBsb2FkSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBmaWxlX2RyYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJvcGJveCcpO1xyXG4gICAgdmFyIGZpbGVfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1maWxlJyk7XHJcbiAgICBpZiAoZmlsZV9kcmFnICYmIGZpbGVfYnV0dG9uKSB7XHJcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgaWYgKHhoci51cGxvYWQpIHtcclxuICAgICAgICBmaWxlX2RyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBmaWxlRHJhZ0hvdmVyLCBmYWxzZSk7XHJcbiAgICAgICAgZmlsZV9kcmFnLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGZpbGVEcmFnSG92ZXIsIGZhbHNlKTtcclxuICAgICAgICBmaWxlX2RyYWcuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZpbGVTZWxlY3RIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgZmlsZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZmlsZVNlbGVjdEhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINCX0LDQutCw0YfQutCwINGE0LDQudC70LAgaHRtbDVcclxuICBmdW5jdGlvbiBmaWxlRHJhZ0hvdmVyKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZS50eXBlID09ICdkcmFnb3Zlcicpe1xyXG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNkcm9wYm94JykuYWRkQ2xhc3MoJ2hvdmVyJyk7XHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Ryb3Bib3gnKS5yZW1vdmVDbGFzcygnaG92ZXInKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBmdW5jdGlvbiBmaWxlU2VsZWN0SGFuZGxlcihlKSB7XHJcbiAgICBmaWxlRHJhZ0hvdmVyKGUpO1xyXG4gICAgdmFyIGZpbGVzID0gZS50YXJnZXQuZmlsZXMgfHwgZS5kYXRhVHJhbnNmZXIuZmlsZXM7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGY7IGYgPSBmaWxlc1tpXTsgaSsrKSB7XHJcbiAgICAgICRzY29wZS51cGxvYWRGaWxlKGYpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g0J7RgtC+0LHRgNCw0LbQsNC10Lwg0L/RgNC+0LPRgNC10YHRgSDQsdCw0YAg0Lgg0L/RgNC+0LvQuNGB0YLRi9Cy0LDQtdC8INGN0LrRgNCw0L0g0Log0L3QvtCy0L7QvNGDINCx0LvQvtC60YNcclxuICAkc2NvcGUudXBsb2FkQ29tcGxldGUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gZS50YXJnZXQucmVzcG9uc2VUZXh0O1xyXG4gICAgaWYgKHJlc3VsdCl7XHJcbiAgICAgIHZhciBkYXRhID0gYW5ndWxhci5mcm9tSnNvbihyZXN1bHQpO1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9ncmVzcy1jb250ZW50JykuaGlkZSgpO1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1jb250ZW50JykuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgJHNjb3BlLmtleXMucHVzaChkYXRhLmtleSk7XHJcblxyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1maWxlJykudmFsKCcnKTtcclxuXHJcbiAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICB9LCA2MDApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0KHQu9GD0YfQsNC50L3Ri9C8INC+0LHRgNCw0LfQvtC8INCz0LXQvdC10YDQuNGA0YPQtdC8INC30L3QsNGH0LXQvdC40LUg0LTQu9GPINGN0YTRhNC10LrRgtCwINC30LDQs9GA0YPQt9C60LhcclxuICBmdW5jdGlvbiB1cGxvYWRQcm9ncmVzcyhldnQpIHtcclxuICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcclxuICAgICAgaWYgKGV2dC5sZW5ndGhDb21wdXRhYmxlKSB7XHJcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGV2dC5sb2FkZWQgKiAxMDAgLyBldnQudG90YWwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gJ3VuYWJsZSB0byBjb21wdXRlJztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDQlNC10LnRgdGC0LLQuNC1INC10YHQu9C4INC30LDQs9GA0YPQt9C60LAg0L3QtSDRg9C00LDQu9Cw0YHRjFxyXG4gICRzY29wZS51cGxvYWRGYWlsZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Vycm9yLXVwbG9hZCcpLnNob3coKS5kZWxheSg4MDApLnNsaWRlVXAoJ3Nsb3cnKTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUudXBsb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGUpIHtcclxuXHJcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBpZiAoeGhyLnVwbG9hZCAmJiBmaWxlLnNpemUgPD0gJHNjb3BlLm1heFNpemUpIHtcclxuICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvZ3Jlc3MtY29udGVudCcpLnNob3coKTtcclxuXHJcbiAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XHJcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGUubG9hZGVkICogMTAwIC8gZS50b3RhbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9ICd1bmFibGUgdG8gY29tcHV0ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIHVwbG9hZFByb2dyZXNzLCBmYWxzZSk7XHJcbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICRzY29wZS51cGxvYWRGYWlsZWQsIGZhbHNlKTtcclxuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAkc2NvcGUudXBsb2FkQ29tcGxldGUsIGZhbHNlKTtcclxuICAgICAgeGhyLm9wZW4oJ1BPU1QnLCAnL3Nwb3QvdXBsb2FkJywgdHJ1ZSk7XHJcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUZpbGUtTmFtZScsIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChmaWxlLm5hbWUpKSk7XHJcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLURpc2NvZGVzJywgJHNjb3BlLnNwb3QuZGlzY29kZXMpO1xyXG4gICAgICB4aHIuc2VuZChmaWxlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuLyog0KHQvtGGINGB0LXRgtC4ICovXHJcblxyXG4gIC8v0L/QvtC00LPRgNGD0LfQutCwINCx0LvQvtC60LAg0YEg0LrQvtC90YLQtdC90YLQvtC8INGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLmxvYWRTb2NDb250ZW50ID0gZnVuY3Rpb24oa2V5KVxyXG4gIHtcclxuICAgIHZhciBkYXRhID0ge2Rpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzLCBrZXk6a2V5LCB0b2tlbjokc2NvcGUudXNlci50b2tlbn07XHJcblxyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvU29jTmV0Q29udGVudCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZihkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICAgICB2YXIgc3BvdEVkaXQgPSBhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICB2YXIgb2xkSGVpZ2h0ID0gc3BvdEVkaXQuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciBvbGRTY3JvbGwgPSBzcG90RWRpdC5vZmZzZXQoKS50b3A7XHJcblxyXG4gICAgICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgc3BvdEVkaXQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoZGF0YS5rZXkpO1xyXG4gICAgICAgICAgICBpZiAob2xkU2Nyb2xsIDwgJCgnaHRtbCwgYm9keScpLnNjcm9sbFRvcCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoJ2h0bWwsIGJvZHknKS5zY3JvbGxUb3AoKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNibG9jay0nICsgZGF0YS5rZXkpLmhlaWdodCgpIC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbF9oZWlnaHRcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9GD0YHRgtCw0L3QvtCy0LjRgtGMINC/0L7QtNGB0LLQtdGC0LrRgyDQutC90L7Qv9C60Lgg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUubmV0Q2hlY2sgPSBmdW5jdGlvbihuZXROYW1lKSB7XHJcbiAgICB2YXIgZGF0YSA9IHt0b2tlbjokc2NvcGUudXNlci50b2tlbiwgbmV0TmFtZTpuZXROYW1lfTtcclxuICAgICRodHRwLnBvc3QoJy9zcG90L25ldENoZWNrJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpIHtcclxuICAgICAgICB2YXIgYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KFwiI2V4dHJhTWVkaWFGb3JtIGFbbmV0PSdcIiArIGRhdGEubmV0TmFtZSArIFwiJ11cIik7XHJcbiAgICAgICAgaWYgKGRhdGEuYmluZGVkKVxyXG4gICAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdiaW5kZWQnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ2JpbmRlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9C/0L7QtNGB0LLQtdGC0LjRgtGMINC60L3QvtC/0LrRgyDRgdC+0YbRgdC10YLQuFxyXG4gICRzY29wZS5uZXRVcCA9IGZ1bmN0aW9uKG5ldE5hbWUpIHtcclxuICAgIHZhciBidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoXCIjZXh0cmFNZWRpYUZvcm0gYVtuZXQ9J1wiICsgbmV0TmFtZSArIFwiJ11cIik7XHJcbiAgICBidXR0b24uYWRkQ2xhc3MoJ2JpbmRlZCcpO1xyXG4gIH07XHJcblxyXG4gIC8v0L/QvtCz0LDRgdC40YLRjCDQutC90L7Qv9C60YMg0YHQvtGG0YHQtdGC0LhcclxuICAkc2NvcGUubmV0RG93biA9IGZ1bmN0aW9uKG5ldE5hbWUpIHtcclxuICAgIHZhciBidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoXCIjZXh0cmFNZWRpYUZvcm0gYVtuZXQ9J1wiICsgbmV0TmFtZSArIFwiJ11cIik7XHJcbiAgICBidXR0b24ucmVtb3ZlQ2xhc3MoJ2JpbmRlZCcpO1xyXG4gIH07XHJcblxyXG4gIC8vINCf0YDQuNCy0Y/Qt9C60LAg0YHQvtGG0YHQtdGC0LXQuVxyXG4gIHZhciBwb3B1cDtcclxuICB2YXIgc29jVGltZXI7XHJcbiAgdmFyIGxpa2VUaW1lcjtcclxuICB2YXIgbG95YWx0eVRpbWVyO1xyXG5cclxuICAvL9GH0LXRgNC10Lcg0L/Qu9Cw0YjQutGDXHJcbiAgJHNjb3BlLmJpbmRCeVBhbmVsID0gZnVuY3Rpb24oYnV0dG9uTmFtZSkge1xyXG4gICAgdmFyIG5ldE5hbWUgPSBidXR0b25OYW1lO1xyXG4gICAgdmFyIGRhdGEgPSB7c3BvdDogJHNjb3BlLnNwb3QsIHRva2VuOiRzY29wZS51c2VyLnRva2VuLCBuZXROYW1lOm5ldE5hbWV9O1xyXG4gICAgLy/QvtC/0YDQtdC00LXQu9C10L3QuNC1INGB0LXRgtC4INC/0L4g0YHRgdGL0LvQutC1XHJcbiAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuc3BvdC5jb250ZW50KSAmJiAkc2NvcGUuc3BvdC5jb250ZW50Lmxlbmd0aClcclxuICAgIHtcclxuICAgICAgICBkYXRhLmxpbmsgPSAkc2NvcGUuc3BvdC5jb250ZW50O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNvY19wYXR0ZXJucy5sZW5ndGg7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuc3BvdC5jb250ZW50LmluZGV4T2YoJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5iYXNlVXJsKSAhPSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmV0TmFtZSA9ICRzY29wZS5zb2NfcGF0dGVybnNbaV0ubmFtZTtcclxuICAgICAgICAgICAgICAgIGRhdGEubmV0TmFtZSA9ICRzY29wZS5zb2NfcGF0dGVybnNbaV0ubmFtZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9CaW5kQnlQYW5lbCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgICAgICBpZihkYXRhLnByb2ZpbGVIaW50Lmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmxvZ2dlZEluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwb3B1cDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNDUwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDM4MFxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVkaXJlY3RfdXJpID0gJ2h0dHA6Ly8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJy91c2VyL0JpbmRTb2NMb2dpbj9zZXJ2aWNlPScgKyBuZXROYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZWRpcmVjdF91cmk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHVybCArPSB1cmwuaW5kZXhPZignPycpID49IDAgPyAnJicgOiAnPyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCdyZWRpcmVjdF91cmk9JykgPT09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgdXJsICs9ICdyZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdF91cmkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2VudGVyV2lkdGggPSAod2luZG93LnNjcmVlbi53aWR0aCAtIG9wdGlvbnMucG9wdXAud2lkdGgpIC8gMixcclxuICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckhlaWdodCA9ICh3aW5kb3cuc2NyZWVuLmhlaWdodCAtIG9wdGlvbnMucG9wdXAuaGVpZ2h0KSAvIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwID0gd2luZG93Lm9wZW4odXJsICsgJyZqcycsIFwieWlpX2VhdXRoX3BvcHVwXCIsIFwid2lkdGg9XCIgKyBvcHRpb25zLnBvcHVwLndpZHRoICsgXCIsaGVpZ2h0PVwiICsgb3B0aW9ucy5wb3B1cC5oZWlnaHQgKyBcIixsZWZ0PVwiICsgY2VudGVyV2lkdGggKyBcIix0b3A9XCIgKyBjZW50ZXJIZWlnaHQgKyBcIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9bm8sdG9vbGJhcj1ubyxtZW51YmFyPW5vLGxvY2F0aW9uPW5vLGRpcmVjdG9yaWVzPW5vLHN0YXR1cz15ZXNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9wdXAgPT09IG51bGwgfHwgdHlwZW9mKHBvcHVwKT09J3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgPSB1cmwgKyAnJmRpc2NvZGVzPScgKyAkc2NvcGUuc3BvdC5kaXNjb2RlcyArICcmbmV3RmllbGQ9MScgKyAnJnN5bmNoPXRydWUnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAkc2NvcGUuc3BvdC5jb250ZW50ICE9PSAndW5kZWZpbmVkJyAmJiAkc2NvcGUuc3BvdC5jb250ZW50Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWYgKz0gJyZsaW5rPScgKyBlbmNvZGVVUklDb21wb25lbnQoJHNjb3BlLnNwb3QuY29udGVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJpbmROZXQgPSB7bmFtZTpkYXRhLnNvY25ldCwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXMsIG5ld0ZpZWxkOjF9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuc3BvdC5jb250ZW50KSAmJiAkc2NvcGUuc3BvdC5jb250ZW50Lmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5iaW5kTmV0LmxpbmsgPSAkc2NvcGUuc3BvdC5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb2NUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb2dpblRpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5saW5rQ29ycmVjdCA9PSAnb2snKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1jb250ZW50JykuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUua2V5cy5wdXNoKGRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNwb3QuY29udGVudD0nJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCd0ZXh0YXJlYScpLnJlbW92ZUNsYXNzKCdwdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc2V0Q3Vyc29yKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2V0VmlkZW9TaXplKGRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbF9oZWlnaHQgPSAkKCcjYmxvY2stJyArIGRhdGEua2V5KS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsX2hlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnROZXQgPSAkc2NvcGUuZ2V0UGF0dGVybkluZChkYXRhLnNvY25ldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TmV0ID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2N1cnJlbnROZXRdLkJpbmRCeVBhc3RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmxpbmtDb3JyZWN0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9Cy0L7Qt9Cy0YDQsNGI0LDQtdGCINC40L3QtNC10LrRgSDRgdC+0YbRgdC10YLQuCDQsiDRgdC60L7Qv9C1INC/0L4g0LjQvNC10L3QuFxyXG4gICRzY29wZS5nZXRQYXR0ZXJuSW5kID0gZnVuY3Rpb24obmV0TmFtZSl7XHJcbiAgICAgIHZhciBjdXJyZW50TmV0ID0gLTE7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnNvY19wYXR0ZXJucy5sZW5ndGg7IGkrKylcclxuICAgICAge1xyXG4gICAgICAgICAgaWYgKCRzY29wZS5zb2NfcGF0dGVybnNbaV0ubmFtZSA9PSBuZXROYW1lKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGN1cnJlbnROZXQgPSBpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjdXJyZW50TmV0O1xyXG4gIH07XHJcblxyXG4gIC8v0L/RgNC40LLRj9C30LrQsCDQv9C+INC60L3QvtC/0LrQtVxyXG4gICRzY29wZS5iaW5kU29jaWFsICA9IGZ1bmN0aW9uKHNwb3QsIGtleSwgZSkge1xyXG4gICAgdmFyIHNwb3RFZGl0ID0gYW5ndWxhci5lbGVtZW50KGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnNwb3QtaXRlbScpO1xyXG4gICAgc3BvdC5rZXkgPSBrZXk7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9iaW5kU29jaWFsJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIGlmKChkYXRhLnNvY25ldCAhPSAnbm8nKSAmJiAoZGF0YS5zb2NuZXQubGVuZ3RoID4gMCkpe1xyXG4gICAgICAgICAgaWYgKCFkYXRhLmxvZ2dlZEluKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgIGlkOiAnJyxcclxuICAgICAgICAgICAgICBwb3B1cDoge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDQ1MCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMzgwXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIGRhdGEuc29jbmV0O1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gcmVkaXJlY3RfdXJpO1xyXG5cclxuICAgICAgICAgICAgdXJsICs9IHVybC5pbmRleE9mKCc/JykgPj0gMCA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCdyZWRpcmVjdF91cmk9JykgPT09IC0xKVxyXG4gICAgICAgICAgICAgIHVybCArPSAncmVkaXJlY3RfdXJpPScgKyBlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RfdXJpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjZW50ZXJXaWR0aCA9ICh3aW5kb3cuc2NyZWVuLndpZHRoIC0gb3B0aW9ucy5wb3B1cC53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICAgIGNlbnRlckhlaWdodCA9ICh3aW5kb3cuc2NyZWVuLmhlaWdodCAtIG9wdGlvbnMucG9wdXAuaGVpZ2h0KSAvIDI7XHJcblxyXG4gICAgICAgICAgICBwb3B1cCA9IHdpbmRvdy5vcGVuKHVybCArICcmanMnLCBcInlpaV9lYXV0aF9wb3B1cFwiLCBcIndpZHRoPVwiICsgb3B0aW9ucy5wb3B1cC53aWR0aCArIFwiLGhlaWdodD1cIiArIG9wdGlvbnMucG9wdXAuaGVpZ2h0ICsgXCIsbGVmdD1cIiArIGNlbnRlcldpZHRoICsgXCIsdG9wPVwiICsgY2VudGVySGVpZ2h0ICsgXCIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9eWVzXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvcHVwID09PSBudWxsIHx8IHR5cGVvZihwb3B1cCk9PSd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybCArICcmZGlzY29kZXM9JyArIHNwb3QuZGlzY29kZXMgKyAnJmtleT0nICsgc3BvdC5rZXkgKyAnJnN5bmNoPXRydWUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcG9wdXAuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYmluZE5ldCA9IHtuYW1lOmRhdGEuc29jbmV0LCBkaXNjb2RlczpzcG90LmRpc2NvZGVzLCBrZXk6c3BvdC5rZXksIHNwb3RFZGl0OmFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKX07XHJcbiAgICAgICAgICAgICAgICBzb2NUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb2dpblRpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEubGlua0NvcnJlY3QgPT0gJ29rJylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3BvdEVkaXQuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TmV0ID0gJHNjb3BlLmdldFBhdHRlcm5JbmQoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROZXQgPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zW2N1cnJlbnROZXRdLkJpbmRCeVBhc3RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zZXRWaWRlb1NpemUoc3BvdC5rZXkpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ldFVwKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmxpbmtDb3JyZWN0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNlIGlmKGRhdGEubGlua0NvcnJlY3QgIT0gJ29rJyl7XHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmxpbmtDb3JyZWN0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQsNC60YbQuNC4LCDRgtGA0LXQsdGD0Y7RidC10Lkg0LbQtdGC0L7QvdCwINGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLmNoZWNrTGlrZSA9IGZ1bmN0aW9uKGlkX2FjdGlvbiwgZSlcclxuICB7XHJcbiAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgaWQ6aWRfYWN0aW9uLCBkaXNjb2Rlczokc2NvcGUuc3BvdC5kaXNjb2Rlc307XHJcbiAgICAgIHZhciBhY3Q7XHJcbiAgICAgIFxyXG4gICAgICAkaHR0cC5wb3N0KCcvdXNlci9jaGVja0xpa2UnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlmICghZGF0YS5pc1NvY0xvZ2dlZClcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ1MCxcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzgwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdF91cmkgPSAnaHR0cDovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnL3VzZXIvQmluZFNvY0xvZ2luP3NlcnZpY2U9JyArIGRhdGEuc2VydmljZTtcclxuICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlZGlyZWN0X3VyaTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHVybCArPSB1cmwuaW5kZXhPZignPycpID49IDAgPyAnJicgOiAnPyc7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigncmVkaXJlY3RfdXJpPScpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICB1cmwgKz0gJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0X3VyaSkgKyAnJic7XHJcbiAgICAgICAgICAgICAgICAgIHVybCArPSAnanMnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlcldpZHRoID0gKHdpbmRvdy5zY3JlZW4ud2lkdGggLSBvcHRpb25zLnBvcHVwLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2VudGVySGVpZ2h0ID0gKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC0gb3B0aW9ucy5wb3B1cC5oZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAgPSB3aW5kb3cub3Blbih1cmwsICd5aWlfZWF1dGhfcG9wdXAnLCAnd2lkdGg9JyArIG9wdGlvbnMucG9wdXAud2lkdGggKyAnLGhlaWdodD0nICsgb3B0aW9ucy5wb3B1cC5oZWlnaHQgKyAnLGxlZnQ9JyArIGNlbnRlcldpZHRoICsgJyx0b3A9JyArIGNlbnRlckhlaWdodCArICcscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPW5vLHRvb2xiYXI9bm8sbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9eWVzJyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChwb3B1cCA9PT0gbnVsbCB8fCB0eXBlb2YocG9wdXApPT0ndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gdXJsICsgJyZkaXNjb2Rlcz0nICsgJHNjb3BlLnNwb3QuZGlzY29kZXMgKyAnJmNoZWtfbGlrZT0nICsgaWRfYWN0aW9uO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNraW5nQWN0aW9uID0ge2lkOmlkX2FjdGlvbiwgc2hhcmluZ19pbmQ6ZGF0YS5pbmR9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZChlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdiA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgnZGl2LnNwb3QtaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpa2VUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5saWtlc1RpbWVyLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIChkYXRhLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuaG9zdF9tb2JpbGUgJiYgIWFuZ3VsYXIuaXNVbmRlZmluZWQoZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICBhY3QgPSBhbmd1bGFyLmVsZW1lbnQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5wYXJlbnQoJ2Rpdi5zcG90LWl0ZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYW5ndWxhci5pc1VuZGVmaW5lZChlKSlcclxuICAgICAgICAgICAgICAgICAgICAgIGFjdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhY3QuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAgICRzY29wZS5saWtlc1RpbWVyID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICBpZiAoIXBvcHVwLmNsb3NlZCkge1xyXG4gICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBpZDokc2NvcGUuY2hlY2tpbmdBY3Rpb24uaWQsIHNoYXJpbmdfaW5kOiRzY29wZS5jaGVja2luZ0FjdGlvbi5zaGFyaW5nX2luZCwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXN9O1xyXG4gICAgICAgICAgJGh0dHAucG9zdCgnL3VzZXIvY2hlY2tMaWtlJywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGRhdGEuaXNTb2NMb2dnZWQpIHtcclxuICAgICAgICAgICAgICAgIC8v0LDQutGG0LjRjyDQv9C+0LTQutC70Y7Rh9C10L3QsFxyXG4gICAgICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFjdGlvbkRpdi5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5hY3Rpb25EaXYucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuc2hhcmluZ19sb2dnZWQpIHtcclxuICAgICAgICAgICAgICAgIC8v0LfQsNCy0LXRgNGI0LXQvSDQu9C+0LPQuNC9INC/0L4g0L/QvtGB0LvQtdC00L3QtdC80YMg0YPRgdC70L7QstC40Y5cclxuICAgICAgICAgICAgICAgICAgcG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrTGlrZSgkc2NvcGUuY2hlY2tpbmdBY3Rpb24uaWQpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v0LbQtNC10Lwg0LvQvtCz0LjQvdCwXHJcbiAgICAgICAgICAgICAgICBsaWtlVGltZXIgPSAkdGltZW91dCgkc2NvcGUubGlrZXNUaW1lciwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy/QvtGC0YHQu9C10LbQuNCy0LDQtdGCINC40LfQvNC10L3QtdC90LjQtSDRgdGC0LDRgtGD0YHQsCDQsNC60YbQuNC5LCDQvdCw0YXQvtC00Y/RidC40YXRgdGPINCyINC/0YDQvtGG0LXRgdGB0LUg0L/QvtC00LrQu9GO0YfQtdC90LjRj1xyXG4gICAgJHNjb3BlLmxveWFsdHlUaW1lciA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICB2YXIgaXRlbXMgPSBhbmd1bGFyLmVsZW1lbnQoXCIuY29ubmVjdGluZ1wiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsb3lhbHR5X2lkID0gYW5ndWxhci5lbGVtZW50KGl0ZW1zW2ldKS5hdHRyKCdpZCcpLnN1YnN0cmluZyg3KTtcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrTG95YWx0eUNvbm5lY3Rpb24obG95YWx0eV9pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxveWFsdHlUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb3lhbHR5VGltZXIsIDEwMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkc2NvcGUuc2V0TG95YWx0eVRpbWVyID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGxveWFsdHlUaW1lciA9ICR0aW1lb3V0KCRzY29wZS5sb3lhbHR5VGltZXIsIDEwMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkc2NvcGUuY2hlY2tMb3lhbHR5Q29ubmVjdGlvbiA9IGZ1bmN0aW9uKGlkX2FjdGlvbikge1xyXG4gICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGlkOmlkX2FjdGlvbiwgZGlzY29kZXM6JHNjb3BlLnNwb3QuZGlzY29kZXN9O1xyXG4gICAgICB2YXIgYWN0PWFuZ3VsYXIuZWxlbWVudCgnI2NvdXBvbi0nICsgaWRfYWN0aW9uKTtcclxuICAgICAgJGh0dHAucG9zdCgnL3VzZXIvY2hlY2tMb3lhbHR5Q29ubmVjdGlvbicsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKGRhdGEuY29ubmVjdGVkKSAmJiBkYXRhLmNvbm5lY3RlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBhY3QuYmVmb3JlKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICBhY3QucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgJHNjb3BlLmRpc2FibGVBY3Rpb24gPSBmdW5jdGlvbihlLCBpZF9hY3Rpb24pXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBpZDppZF9hY3Rpb24sIGRpc2NvZGVzOiRzY29wZS5zcG90LmRpc2NvZGVzfTtcclxuICAgICAgICB2YXIgYWN0O1xyXG4gICAgICAgICRodHRwLnBvc3QoJy91c2VyL2Rpc2FibGVMb3lhbHR5JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICgnbm8nID09IGRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghJHNjb3BlLmhvc3RfbW9iaWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgnZGl2LnNwb3QtaXRlbScpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFjdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICAgIGFjdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvL9C/0YDQuNCy0Y/Qt9C60LAg0YHQvtGG0YHQtdGC0Lgg0Lgg0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAsINC10YHQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQt9Cw0LvQvtCz0LjQvdC40LvRgdGPINGH0LXRgNC10Lcg0YHQvtGG0YHQtdGC0YxcclxuICAgICRzY29wZS5sb2dpblRpbWVyID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICBpZiAoIXBvcHVwLmNsb3NlZCkge1xyXG4gICAgICAgIHZhciBuZXRQYXJhbXMgPSB7bmFtZTokc2NvcGUuYmluZE5ldC5uYW1lLCBkaXNjb2Rlczokc2NvcGUuYmluZE5ldC5kaXNjb2Rlcywga2V5OiRzY29wZS5iaW5kTmV0LmtleX07XHJcbiAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoJHNjb3BlLmJpbmROZXQubmV3RmllbGQpICYmIDEgPT0gJHNjb3BlLmJpbmROZXQubmV3RmllbGQpXHJcbiAgICAgICAgICAgIG5ldFBhcmFtcy5uZXdGaWVsZCA9IDE7XHJcbiAgICAgICAgaWYgKCd1bmRlZmluZWQnICE9IHR5cGVvZiAoJHNjb3BlLmJpbmROZXQubGluaykgJiYgJHNjb3BlLmJpbmROZXQubGluay5sZW5ndGgpXHJcbiAgICAgICAgICAgIG5ldFBhcmFtcy5saW5rID0gJHNjb3BlLmJpbmROZXQubGluaztcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBiaW5kTmV0Om5ldFBhcmFtc307XHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvYmluZGVkQ29udGVudCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgKGRhdGEubG9nZ2VkSW4pICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiAoZGF0YS5saW5rQ29ycmVjdCkgIT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgaWYgKGRhdGEubG9nZ2VkSW4pe1xyXG4gICAgICAgICAgICBwb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICBpZihkYXRhLmxpbmtDb3JyZWN0ID09ICdvaycpe1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLm5ld0ZpZWxkKXtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2FkZC1jb250ZW50JykuYXBwZW5kKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmtleXMucHVzaChkYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3BvdC5jb250ZW50PScnO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCd0ZXh0YXJlYScpLnJlbW92ZUNsYXNzKCdwdXQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzZXRDdXJzb3IoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNldFZpZGVvU2l6ZShkYXRhLmtleSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsX2hlaWdodCA9ICQoJyNibG9jay0nICsgZGF0YS5rZXkpLm9mZnNldCgpLnRvcCAtIDEwMDtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsX2hlaWdodFxyXG4gICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB2YXIgc3BvdEVkaXQgPSAkc2NvcGUuYmluZE5ldC5zcG90RWRpdDtcclxuICAgICAgICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuc2V0VmlkZW9TaXplKGRhdGEua2V5KTtcclxuICAgICAgICAgICAgICAkc2NvcGUubmV0VXAoZGF0YS5zb2NuZXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuYmluZE5ldCA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudE5ldCA9ICRzY29wZS5nZXRQYXR0ZXJuSW5kKGRhdGEuc29jbmV0KTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnROZXQgPiAtMSlcclxuICAgICAgICAgICAgICAgICRzY29wZS5zb2NfcGF0dGVybnNbY3VycmVudE5ldF0uQmluZEJ5UGFzdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChkYXRhLmxpbmtDb3JyZWN0LCAkc2NvcGUuaG9zdF90eXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHNvY1RpbWVyID0gJHRpbWVvdXQoJHNjb3BlLmxvZ2luVGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAvL9Ce0YLQstGP0LfQutCwINGB0L7RhtGB0LXRgtC4XHJcbiAgJHNjb3BlLnVuQmluZFNvY2lhbCAgPSBmdW5jdGlvbihzcG90LCBrZXksIGUpIHtcclxuICAgIHNwb3Qua2V5ID0ga2V5O1xyXG4gICAgJGh0dHAucG9zdCgnL3Nwb3QvVW5CaW5kU29jaWFsJywgc3BvdCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmKGRhdGEuZXJyb3IgPT0gJ25vJykge1xyXG4gICAgICAgIHZhciBzcG90RWRpdCA9IGFuZ3VsYXIuZWxlbWVudChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5zcG90LWl0ZW0nKTtcclxuICAgICAgICBzcG90RWRpdC5iZWZvcmUoJGNvbXBpbGUoZGF0YS5jb250ZW50KSgkc2NvcGUpKTtcclxuICAgICAgICBzcG90RWRpdC5yZW1vdmUoKTtcclxuICAgICAgICBpZiAoZGF0YS5uZXREb3duKVxyXG4gICAgICAgICAgICAkc2NvcGUubmV0RG93bihkYXRhLm5ldERvd24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuZ2V0U29jUGF0dGVybnMgPSBmdW5jdGlvbigpe1xyXG4gICAgJHNjb3BlLmZyZWVTb2NpYWwgPSB0cnVlO1xyXG4gICAgaWYgKHR5cGVvZiAoJHNjb3BlLnNvY19wYXR0ZXJucykgPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICB7XHJcbiAgICAgIHZhciBkYXRhID0ge3Rva2VuOiRzY29wZS51c2VyLnRva2VufTtcclxuICAgICAgJGh0dHAucG9zdCgnL3Nwb3QvU29jUGF0dGVybnMnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAkc2NvcGUuc29jX3BhdHRlcm5zID0gZGF0YS5zb2NfcGF0dGVybnM7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuc29jX3BhdHRlcm5zLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgKCRzY29wZS5zb2NfcGF0dGVybnNbaV0uQmluZEJ5UGFzdGUpID09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgJHNjb3BlLnNvY19wYXR0ZXJuc1tpXS5CaW5kQnlQYXN0ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy/Rg9GB0YLQsNC90L7QstC60LAg0YDQsNC30LzQtdGAINC/0YDQvtC40LPRgNGL0LLQsNGC0LXQu9GPIFlvdVR1YmUg0LjQu9C4IFZpbWVvXHJcbiAgJHNjb3BlLnNldFZpZGVvU2l6ZSA9IGZ1bmN0aW9uKGJsb2NrS2V5KVxyXG4gIHtcclxuICAgIHZhciBwbGF5ZXI7XHJcbiAgICBpZiAoYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGJsb2NrS2V5ICsgJyAudmlkZW8tdmltZW8nKS5sZW5ndGggPT0gMSlcclxuICAgIHtcclxuICAgICAgcGxheWVyID0gYW5ndWxhci5lbGVtZW50KCcjYmxvY2stJyArIGJsb2NrS2V5ICsgJyAudmlkZW8tdmltZW8nKTtcclxuICAgICAgcGxheWVyLmNzcygnd2lkdGgnLCAnMTAwJScpO1xyXG4gICAgICBwbGF5ZXIuY3NzKCdoZWlnaHQnLCAocGFyc2VJbnQocGxheWVyLmNzcygnd2lkdGgnKSwgMTApIC8gcGxheWVyLmF0dHIoJ3JlbCcpICsgJ3B4JykpO1xyXG4gICAgfSBlbHNlIGlmIChhbmd1bGFyLmVsZW1lbnQoJyNibG9jay0nICsgYmxvY2tLZXkgKyAnIC55dF9wbGF5ZXInKS5sZW5ndGggPT0gMSl7XHJcbiAgICAgIHBsYXllciA9IGFuZ3VsYXIuZWxlbWVudCgnI2Jsb2NrLScgKyBibG9ja0tleSArICcgLnl0X3BsYXllcicpO1xyXG4gICAgICBwbGF5ZXIuY3NzKCd3aWR0aCcsICcxMDAlJyk7XHJcbiAgICAgIHBsYXllci5jc3MoJ2hlaWdodCcsIChwYXJzZUludChwbGF5ZXIuY3NzKCd3aWR0aCcpLCAxMCkgLyBwbGF5ZXIuYXR0cigncmVsJykgKyAncHgnKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4gICRzY29wZS5zZXROZXdQYXNzID0gZnVuY3Rpb24oc3BvdClcclxuICB7XHJcbiAgICAkaHR0cC5wb3N0KCcvc3BvdC9zZXRTcG90UGFzcycsIHNwb3QpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nICYmIHR5cGVvZiAoZGF0YS5zYXZlZCkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNzYXZlUGFzc0J1dHRvbicpLnRleHQoZGF0YS5zYXZlZCk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoJHNjb3BlLnNwb3QucGFzcykgIT0gJ3VuZGVmaW5lZCcgJiYgc3BvdC5wYXNzLmxlbmd0aClcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcmVzZXRQYXNzQnV0dG9uJykuc2hvdygpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcmVzZXRQYXNzQnV0dG9uJykuaGlkZSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuZXJyb3IgPT0gJ3llcycpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI3NldFBhc3NGb3JtIGlucHV0W25hbWU9bmV3UGFzc10nKS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlc2V0UGFzcyA9IGZ1bmN0aW9uKHNwb3QpXHJcbiAge1xyXG4gICAgc3BvdC5wYXNzID0gJyc7XHJcbiAgICAkc2NvcGUuc2V0TmV3UGFzcyhzcG90KTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuc2F2ZVBhc3NCdXR0b25UZXh0ID0gZnVuY3Rpb24odGV4dClcclxuICB7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNzYXZlUGFzc0J1dHRvbicpLnRleHQodGV4dCk7XHJcbiAgICBhbmd1bGFyLmVsZW1lbnQoJyNzZXRQYXNzRm9ybSBpbnB1dFtuYW1lPW5ld1Bhc3NdJykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmNoZWNrU3RhdHVzU3BvdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLnJlc2V0Q3Vyc29yID0gZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgKCRzY29wZS5jdXJzb3JCb2R5KSAmJiAkc2NvcGUuY3Vyc29yQm9keS5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLmNzcygnY3Vyc29yJywgJHNjb3BlLmN1cnNvckJvZHkpO1xyXG4gICAgICBkZWxldGUgJHNjb3BlLmN1cnNvckJvZHk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnYm9keScpLmNzcygnY3Vyc29yJywgJ2RlZmF1bHQnKTtcclxuXHJcbiAgICBpZiAoJ3VuZGVmaW5lZCcgIT0gdHlwZW9mICgkc2NvcGUuY3Vyc29yVGV4dGFyZWEpICYmICRzY29wZS5jdXJzb3JUZXh0YXJlYS5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Ryb3Bib3ggdGV4dGFyZWEnKS5jc3MoJ2N1cnNvcicsICRzY29wZS5jdXJzb3JUZXh0YXJlYSk7XHJcbiAgICAgIGRlbGV0ZSAkc2NvcGUuY3Vyc29yVGV4dGFyZWE7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgnI2Ryb3Bib3ggdGV4dGFyZWEnKS5jc3MoJ2N1cnNvcicsICd0ZXh0Jyk7XHJcbiAgfTtcclxuXHJcbiAgLy/QuNC30LzQtdC90LXQvdC40LUg0YHRgtGA0LDQvdC40YbRiyDRhNC40LvRjNGC0YDQsCDQutGD0L/QvtC90L7QslxyXG4gICRzY29wZS4kd2F0Y2goJ2FjdGlvbnMucGFnZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLmFjdGlvbnMub2Zmc2V0ID0gMDtcclxuICAgICRzY29wZS5hY3Rpb25zLmNvdW50X2FsbCA9IDA7XHJcbiAgICB2YXIgbGlzdCA9IGFuZ3VsYXIuZWxlbWVudCgnI2NvdXBvbnMtbGlzdCcpO1xyXG4gICAgbGlzdC5lbXB0eSgpO1xyXG4gICAgJHNjb3BlLmxpc3RDb3Vwb25zKCRzY29wZS5zcG90LCAkc2NvcGUuYWN0aW9ucyk7XHJcbiAgfSk7XHJcblxyXG4gICRzY29wZS5jb3Vwb25zU2Nyb2xsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgYW5ndWxhci5lbGVtZW50KHdpbmRvdykuYmluZCgnc2Nyb2xsJywgJHNjb3BlLmxvYWRNb3JlQ291cG9ucyk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLmxvYWRNb3JlQ291cG9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYoYW5ndWxhci5lbGVtZW50KHdpbmRvdykuc2Nyb2xsVG9wKCkgKyBhbmd1bGFyLmVsZW1lbnQod2luZG93KS5oZWlnaHQoKSA+PSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmhlaWdodCgpIC0gMjAwICYmICEkc2NvcGUuYWN0aW9ucy5pbl9wcm9ncmVzcyAmJiAkc2NvcGUuYWN0aW9ucy5vZmZzZXQgPCAkc2NvcGUuYWN0aW9ucy5jb3VudF9hbGwpIHtcclxuICAgICAgICAkc2NvcGUubGlzdENvdXBvbnMoJHNjb3BlLnNwb3QsICRzY29wZS5hY3Rpb25zKTtcclxuICAgICAgfVxyXG4gIH07XHJcbiAgXHJcbiAgJHNjb3BlLmluaXRUcmFuc3BvcnRUeXBlID0gZnVuY3Rpb24odHlwZV9pZCwgdHlwZV9uYW1lLCB0eXBlX2ltZykge1xyXG4gICAgJHNjb3BlLnRyYW5zcG9ydF90eXBlc1skc2NvcGUudHJhbnNwb3J0X3R5cGVzLmxlbmd0aF0gPSB7aWQ6dHlwZV9pZCwgbmFtZTp0eXBlX25hbWUsIGltZzp0eXBlX2ltZ307XHJcbiAgfTtcclxuICBcclxuICAvL9CS0YvQsdC+0YAg0LfQsNC00L3QuNC60LAg0YLRgNCw0L3RgdC/0L7RgNGC0L3QvtC5INC60LDRgNGC0YtcclxuICAkc2NvcGUuc2V0VHlwZSA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICRzY29wZS5jdXN0b21fY2FyZC5iYWNrID0gdHlwZS5pZDtcclxuXHJcbiAgICBpZiAodHlwZS5pbWcpe1xyXG4gICAgICAkKCcjY2FyZC1iYWNrJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCgvdXBsb2Fkcy90cmFuc3BvcnQvJyArIHR5cGUuaW1nICsgJyknKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy/Ql9Cw0LPRgNGD0LfQutCwINC60LDRgNGC0LjQvdC60Lgg0LTQu9GPINC80LDQutC10YLQsCDRgtGA0LDQvdGB0L/QvtGA0YLQvdC+0Lkg0LrQsNGA0YLRi1xyXG4gICRzY29wZS5zZW5kSW1nID0gZnVuY3Rpb24oZWwpIHtcclxuICAgIHZhciBmb3JtID0gJChlbCkucGFyZW50cygnZm9ybScpO1xyXG4gICAgaWYgKCQoZWwpLnZhbCgpID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyIGRpc2NvZGVzX2lucHV0ID0gZm9ybS5jaGlsZHJlbignaW5wdXRbbmFtZT1kaXNjb2Rlc19pZF0nKTtcclxuICAgIHZhciB0b2tlbl9pbnB1dCA9IGZvcm0uY2hpbGRyZW4oJ2lucHV0W25hbWU9dG9rZW5dJyk7XHJcbiAgICB2YXIgdHlwZV9pbnB1dCA9IGZvcm0uY2hpbGRyZW4oJ2lucHV0W25hbWU9aW1nX3R5cGVdJyk7XHJcbiAgICB2YXIgZm9ybV9zcGFuID0gZm9ybS5maW5kKCdzcGFuLnVwbG9hZC1ob2xkZXInKTtcclxuICAgIHZhciBmb3JtX2ljb24gPSBmb3JtLmZpbmQoJ2kudXBsb2FkLWhvbGRlcicpO1xyXG4gICAgdmFyIGZvcm1faW1nID0gZm9ybS5maW5kKCdpbWcudXBsb2FkLWhvbGRlcicpO1xyXG4gICAgXHJcbiAgICB2YXIgc3BvdCA9IGNvbnRlbnRTZXJ2aWNlLmdldFNwb3QoKTtcclxuICAgIFxyXG4gICAgaWYgKGRpc2NvZGVzX2lucHV0Lmxlbmd0aClcclxuICAgICAgICBkaXNjb2Rlc19pbnB1dC52YWwoc3BvdC5kaXNjb2Rlcyk7XHJcbiAgICAgICAgXHJcbiAgICBpZiAodG9rZW5faW5wdXQubGVuZ3RoKVxyXG4gICAgICAgIHRva2VuX2lucHV0LnZhbChzcG90LnRva2VuKTtcclxuXHJcbiAgICBmb3JtLmFqYXhTdWJtaXQoe1xyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihqc29uX2RhdGEsIHN0YXR1c1RleHQsIHhociwgZm9ybSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGFuZ3VsYXIuZnJvbUpzb24oanNvbl9kYXRhKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmVycm9yPVwibm9cIikge1xyXG4gICAgICAgICAgICAgIGlmIChmb3JtX3NwYW4ubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgZm9ybV9zcGFuLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgaWYgKGZvcm1faWNvbi5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICBmb3JtX2ljb24uYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBmb3JtX2ltZy5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgIGZvcm1faW1nLmF0dHIoXCJzcmNcIiwgZGF0YS5wYXRoICsgJz92ZXI9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCd0cmFuc3BvcnRfcGhvdG8nID09IHR5cGVfaW5wdXQudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jdXN0b21fY2FyZC5waG90byA9IGRhdGEucGF0aDtcclxuICAgICAgICAgICAgICAgICBlbHNlIGlmICgndHJhbnNwb3J0X2xvZ28nID09IHR5cGVfaW5wdXQudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jdXN0b21fY2FyZC5sb2dvID0gZGF0YS5wYXRoO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgJHNjb3BlLmVycm9yLmN1c3RvbV9jYXJkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9O1xyXG4gIFxyXG4gICRzY29wZS5zaG93SW1hZ2VDcm9wcGVyID0gZmFsc2U7XHJcbiAgJHNjb3BlLnNob3dMb2dvQ3JvcHBlciA9IGZhbHNlO1xyXG4gIFxyXG4gICRzY29wZS5zZXRTcG90ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb250ZW50U2VydmljZS5zZXRTcG90KCRzY29wZS5zcG90KTtcclxuICB9XHJcbiAgXHJcbiAgLy/Ql9Cw0LrQsNC3INGC0YDQsNC90YHQv9C+0YDRgtC90L7QuSDQutCw0YDRgtGLINC/0L4g0LzQsNC60LXRgtGDXHJcbiAgJHNjb3BlLm9yZGVyVHJhbnNwb3J0Q2FyZCA9IGZ1bmN0aW9uKGN1c3RvbV9jYXJkLCB2YWxpZCwgbWVzc2FnZV90ZXh0KSB7XHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IHRydWU7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyIHNwb3QgPSBjb250ZW50U2VydmljZS5nZXRTcG90KCk7XHJcbiAgICBjdXN0b21fY2FyZC50b2tlbiA9IHNwb3QudG9rZW47XHJcbiAgICBjdXN0b21fY2FyZC5kaXNjb2RlcyA9IHNwb3QuZGlzY29kZXM7XHJcbiAgICBcclxuICAgICRodHRwLnBvc3QoJy9zcG90L29yZGVyVHJhbnNwb3J0Q2FyZCcsIGN1c3RvbV9jYXJkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAoJ25vJyA9PSBkYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAkc2NvcGUuaGlkZUN1c3RvbUNhcmQoKTtcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1lc3NhZ2VNb2RhbChtZXNzYWdlX3RleHQsICRzY29wZS5ob3N0X3R5cGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY3VzdG9tX2NhcmQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/RgtGA0LjQs9C10YAg0L3QsCDRgdC90Y/RgtC40LUg0L7RiNC40LHQutC4INC00LvRjyDQvNCw0LrQtdGC0LAg0YLRgNCw0L3RgdC/0L7RgNGC0L3QvtC5INC60LDRgNGC0YtcclxuICAkc2NvcGUuJHdhdGNoKCdjdXN0b21fY2FyZC5zaGlwcGluZ19uYW1lICsgY3VzdG9tX2NhcmQucGhvbmUgKyBjdXN0b21fY2FyZC5hZGRyZXNzICsgY3VzdG9tX2NhcmQuY2l0eSArIGN1c3RvbV9jYXJkLnppcCArIGN1c3RvbV9jYXJkLmVtYWlsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICRzY29wZS5lcnJvci5jdXN0b21fY2FyZCA9IGZhbHNlO1xyXG4gIH0pO1xyXG4gIFxyXG59KTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdQcm9kdWN0Q29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGNvbXBpbGUsICR0aW1lb3V0LCBjb250ZW50U2VydmljZSkge1xyXG4gICAgJHNjb3BlLlN0b3JlSW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbn07XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9nZXRQcmljZUxpc3QnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MgPSBkYXRhLnNldHRpbmdzO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmpzSUQgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUgPSAkc2NvcGUucHJvZHVjdHNbaV0uc2l6ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRDb2xvciA9ICRzY29wZS5wcm9kdWN0c1tpXS5jb2xvclswXTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRTdXJmYWNlID0gJHNjb3BlLnByb2R1Y3RzW2ldLnN1cmZhY2VbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6XCIwcHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkVG9DYXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3IgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5waG90byAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWZmaXggPSAnXycgKyAkc2NvcGUucHJvZHVjdHNbaV0uc2VsZWN0ZWRDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvW2pdLnN1YnN0cmluZygwLCAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG9bal0ubGFzdEluZGV4T2YoJy4nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSA9PSBzdWZmaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGogKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRzVG9wID0gOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5jb2xvci5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0c1RvcCArPSAxNTU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5waG90by5sZW5ndGggPiAzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0c1RvcCAtPSA1NjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRzVG9wICs9ICgkc2NvcGUucHJvZHVjdHNbaV0uZGVzY3JpcHRpb24ubGVuZ3RoLzc2LjUpICogMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2ldLnRodW1iU2hlbGxTdHlsZSA9IHt0b3A6KHRzVG9wK1wicHhcIil9O1xyXG4gICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5JykucmVtb3ZlQ2xhc3MoJ292ZXJmbG93LWgnKTtcclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcubS1jb3Zlci1wcmVsb2FkJykuZmFkZU91dCg2MDApO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgSU1BR0VfV0lEVEggPSAyNDI7XHJcblxyXG4gICAgJHNjb3BlLnNjcm9sbFRvID0gZnVuY3Rpb24oaW1hZ2UsaW5kLCBqc0lEKSB7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGluZCAqIC0xKSArIFwicHhcIn07XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5hZGRUb0NhcnQgPSBmdW5jdGlvbiBhZGRUb0NhcnQoanNJRCl7XHJcbiAgICAgICAgaWYoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5IDwgMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZighJHNjb3BlLmluUmVxdWVzdCl7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICB0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sXHJcbiAgICAgICAgICAgICAgICBpZCA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5pZCxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5IDogcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5KSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkQ29sb3IgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRDb2xvcixcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU3VyZmFjZSA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2UsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNpemUgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9hZGRUb0NhcnQnKSwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpe1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uYWRkVGV4dCA9ICRzY29wZS5zZXR0aW5ncy5hZGRlZDtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaXRlbXMuY291bnQgKz0gcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFza2V0ID0gYW5ndWxhci5lbGVtZW50KCdhLmljb24tYmFnLWxpbmsgc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2tldC50ZXh0KCRzY29wZS5pdGVtcy5jb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNpemVDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkU2l6ZSwgc2l6ZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFNpemUgPT09IHNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY29sb3JDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkQ29sb3IsIGNvbG9yKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkQ29sb3IgPT09IGNvbG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnN1cmZhY2VDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkU3VyZmFjZSwgc3VyZmFjZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFN1cmZhY2UgPT09IHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0U2l6ZSA9IGZ1bmN0aW9uKGpzSUQsIHNpemUpe1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemUgPSBzaXplO1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldENvbG9yID0gZnVuY3Rpb24oanNJRCwgY29sb3Ipe1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yID0gY29sb3I7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkVG9DYXJ0O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90byAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8ubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIHZhciBzdWZmaXggPSAnXycgKyBjb2xvcjtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG8ubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvW2ldLnN1YnN0cmluZygwLCAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG9baV0ubGFzdEluZGV4T2YoJy4nKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSA9PSBzdWZmaXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmxpc3Rwb3NpdGlvbiA9IHtsZWZ0OihJTUFHRV9XSURUSCAqIGkgKiAtMSkgKyBcInB4XCJ9O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2V0U3VyZmFjZSA9IGZ1bmN0aW9uKGpzSUQsIHN1cmZhY2Upe1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2UgPSBzdXJmYWNlO1xyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5hZGRUZXh0ID0gJHNjb3BlLnNldHRpbmdzLmFkZFRvQ2FydDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnJlc2V0QWRkZWRUZXh0ID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgJHNjb3BlLnByb2R1Y3RzW2pzSURdLmFkZFRleHQgPSAkc2NvcGUuc2V0dGluZ3MuYWRkVG9DYXJ0O1xyXG4gICAgICAgIGlmKCRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eSA8IDApe1xyXG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnRodW1iQ2xhc3MgPSBmdW5jdGlvbihsZW4pe1xyXG4gICAgICAgIGlmIChsZW4gPiAzKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJ0aHVtYnN3cmFwcGVyIHhzY3JvbGxlZFwiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlclwiO1xyXG4gICAgfTtcclxuLypcclxuICAgICRzY29wZS50aHVtYkxpQ2xhc3MgPSBmdW5jdGlvbihpbmQpe1xyXG4gICAgICAgIGlmICgoaW5kICUgMykgPT0gMClcclxuICAgICAgICAgICAgcmV0dXJuIFwiYnJzbGlkZVwiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIFwidGhpbWJzbGlkZVwiO1xyXG4gICAgfVxyXG4qL1xyXG59KTtcclxuXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnbW9iaXNwb3QnKS5jb250cm9sbGVyKCdDYXJ0Q29udHJvbGxlcicsXHJcbiAgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGNvbXBpbGUsICR0aW1lb3V0LCBjb250ZW50U2VydmljZSkge1xyXG4gICAgJHNjb3BlLnByb21vRXJyb3IgPSBmYWxzZTtcclxuICAgICRzY29wZS5jdXN0b21lckVycm9yID0gZmFsc2U7XHJcbiAgXHJcbiAgICAkc2NvcGUuQ2FydEluaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICRzY29wZS5zdW1tID0gMDtcclxuICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW59O1xyXG5cclxuICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9HZXRDYXJ0JywgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGRhdGEucHJvZHVjdHM7XHJcbiAgICAgICAgICAgICRzY29wZS5kaXNjb3VudCA9IGRhdGEuZGlzY291bnQ7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5wcm9kdWN0cy5sZW5ndGggPD0gMCl7XHJcbiAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL3N0b3JlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSA9IHBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tpXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5saXN0cG9zaXRpb24gPSB7bGVmdDpcIjBweFwifTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3IgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mICRzY29wZS5wcm9kdWN0c1tpXS5waG90byAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3VmZml4ID0gJ18nICsgJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUucHJvZHVjdHNbaV0ucGhvdG8ubGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICRzY29wZS5wcm9kdWN0c1tpXS5waG90b1tqXS5zdWJzdHJpbmcoMCwgJHNjb3BlLnByb2R1Y3RzW2ldLnBob3RvW2pdLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSA9PSBzdWZmaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0c1tpXS5saXN0cG9zaXRpb24gPSB7bGVmdDooSU1BR0VfV0lEVEggKiBqICogLTEpICsgXCJweFwifTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzKXtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnByb2R1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzW2ldLmlkID09ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5pZF9wcm9kdWN0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSArPSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uZGlzY291bnQqcGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnN1bW0gPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNraW5nT3V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5JykucmVtb3ZlQ2xhc3MoJ292ZXJmbG93LWgnKTtcclxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5tLWNvdmVyLXByZWxvYWQnKS5mYWRlT3V0KDYwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBJTUFHRV9XSURUSCA9IDI0MjtcclxuXHJcbiAgICAkc2NvcGUuc2Nyb2xsVG8gPSBmdW5jdGlvbihpbWFnZSxpbmQsIGpzSUQpIHtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaW5kICogLTEpICsgXCJweFwifTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmVtcHR5Q2xhc3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJHNjb3BlLnByb2R1Y3RzKXtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJoaWRlXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNpemVDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkU2l6ZSwgc2l6ZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFNpemUgPT09IHNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY29sb3JDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkQ29sb3IsIGNvbG9yKSB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkQ29sb3IgPT09IGNvbG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImFjdGl2ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnN1cmZhY2VDbGFzcyA9IGZ1bmN0aW9uKHNlbGVjdGVkU3VyZmFjZSwgc3VyZmFjZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFN1cmZhY2UgPT09IHN1cmZhY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2hla2luZ091dENsYXNzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBpZighJHNjb3BlLmNoZWNraW5nT3V0KXtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaGlkZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFNpemUgPSBmdW5jdGlvbihqc0lELCBzaXplKXtcclxuICAgICAgICAkc2NvcGUuc3VtbSAtPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eTtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplID0gc2l6ZTtcclxuICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KCRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFNpemUucHJpY2UpKiRzY29wZS5wcm9kdWN0c1tqc0lEXS5xdWFudGl0eTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldENvbG9yID0gZnVuY3Rpb24oanNJRCwgY29sb3Ipe1xyXG4gICAgICAgIHZhciBvbGRQcm9kdWN0ID0ge2lkOiRzY29wZS5wcm9kdWN0c1tqc0lEXS5pZCwgcXVhbnRpdHk6JHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5LCBzZWxlY3RlZENvbG9yOiRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yfTtcclxuICAgICAgICBpZiAodHlwZW9mICgkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplKSAhPSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgb2xkUHJvZHVjdC5zZWxlY3RlZFNpemUgPSAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTaXplO1xyXG4gICAgICAgIGlmICh0eXBlb2YgKCRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2UpICE9ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICBvbGRQcm9kdWN0LnNlbGVjdGVkU3VyZmFjZSA9ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2U7XHJcblxyXG4gICAgICAgICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yID0gY29sb3I7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLnByb2R1Y3RzW2pzSURdLnBob3RvICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90by5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgdmFyIHN1ZmZpeCA9ICdfJyArIGNvbG9yO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90by5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkc2NvcGUucHJvZHVjdHNbanNJRF0ucGhvdG9baV0uc3Vic3RyaW5nKDAsICRzY29wZS5wcm9kdWN0c1tqc0lEXS5waG90b1tpXS5sYXN0SW5kZXhPZignLicpKTtcclxuICAgICAgICAgICAgICAgIGlmIChuYW1lLnN1YnN0cihuYW1lLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpID09IHN1ZmZpeClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0ubGlzdHBvc2l0aW9uID0ge2xlZnQ6KElNQUdFX1dJRFRIICogaSAqIC0xKSArIFwicHhcIn07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge3Rva2VuOiAkc2NvcGUudXNlci50b2tlbiwgb2xkUHJvZHVjdDpvbGRQcm9kdWN0LCBuZXdQcm9kdWN0OiRzY29wZS5wcm9kdWN0c1tqc0lEXX07XHJcbiAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvU2F2ZVByb2R1Y3QnLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgIT0gJ25vJyl7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFN1cmZhY2UgPSBmdW5jdGlvbihqc0lELCBzdXJmYWNlKXtcclxuICAgICAgICAkc2NvcGUucHJvZHVjdHNbanNJRF0uc2VsZWN0ZWRTdXJmYWNlID0gc3VyZmFjZTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldERlbGl2ZXJ5ID0gZnVuY3Rpb24oanNJRCl7XHJcbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkRGVsaXZlcnkgPSAkc2NvcGUuZGVsaXZlcmllc1tqc0lEXTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNldFBheW1lbnQgPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRQYXltZW50ID0gJHNjb3BlLnBheW1lbnRzW2pzSURdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2hhbmdlUXVhbnRpdHkgPSBmdW5jdGlvbihqc0lEKXtcclxuICAgICAgICBpZiAocGFyc2VJbnQoJHNjb3BlLnByb2R1Y3RzW2pzSURdLnF1YW50aXR5KSA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZUl0ZW0oanNJRCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICRzY29wZS5zdW1tID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkU2l6ZS5wcmljZSkqJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cyAhPSAndW5kZWZpbmVkJyAmJiAkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uaWQgPT0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmlkX3Byb2R1Y3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSAtPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBvbGRQcm9kdWN0OiRzY29wZS5wcm9kdWN0c1tqc0lEXSwgbmV3UHJvZHVjdDokc2NvcGUucHJvZHVjdHNbanNJRF19O1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvc3RvcmUvcHJvZHVjdC9TYXZlUHJvZHVjdCcsIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgIT0gJ25vJyl7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jaGVja091dCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKCRzY29wZS5zdW1tID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmKCEkc2NvcGUuY2hlY2tpbmdPdXQpe1xyXG4gICAgICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VufTtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3N0b3JlL3Byb2R1Y3QvZ2V0Q3VzdG9tZXInLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5kZWxpdmVyaWVzID0gZGF0YS5kZWxpdmVyeTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wYXltZW50cyA9IGRhdGEucGF5bWVudDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jdXN0b21lciA9IGRhdGEuY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5kZWxpdmVyaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGl2ZXJpZXNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wYXltZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYXltZW50c1tpXS5qc0lEID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZERlbGl2ZXJ5ID0gJHNjb3BlLmRlbGl2ZXJpZXNbMF07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRQYXltZW50ID0gJHNjb3BlLnBheW1lbnRzWzBdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNraW5nT3V0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvY2VlZE5leHRGb3JtJykucmVtb3ZlQ2xhc3MoJ2hpZGUtY29udGVudC1ib3gnKTtcclxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6ICQoJyNwcm9jZWVkTmV4dEZvcm0nKS5vZmZzZXQoKS50b3BcclxuICAgICAgICB9LCA2MDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlSXRlbSA9IGZ1bmN0aW9uKGpzSUQpe1xyXG4gICAgICAgIGlmKCEkc2NvcGUuaW5SZXF1ZXN0KXtcclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID1cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHkgOiAkc2NvcGUucHJvZHVjdHNbanNJRF0ucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb2xvciA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU3VyZmFjZSA6ICRzY29wZS5wcm9kdWN0c1tqc0lEXS5zZWxlY3RlZFN1cmZhY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTaXplIDogJHNjb3BlLnByb2R1Y3RzW2pzSURdLnNlbGVjdGVkU2l6ZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9kZWxldGVGcm9tQ2FydCcpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzLnNwbGljZShqc0lELCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZHVjdHNbaV0uanNJRCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLnByb2R1Y3RzW2ldLnNlbGVjdGVkU2l6ZS5wcmljZSkqJHNjb3BlLnByb2R1Y3RzW2ldLnF1YW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQucHJvZHVjdHMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wcm9kdWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZHVjdHNbaV0uaWQgPT0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmlkX3Byb2R1Y3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50LnN1bW0gKz0gJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzW2pdLmRpc2NvdW50KnBhcnNlSW50KCRzY29wZS5wcm9kdWN0c1tpXS5xdWFudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tIC09ICRzY29wZS5kaXNjb3VudC5zdW1tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnByb2R1Y3RzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL3N0b3JlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNvbmZpcm1Qcm9tbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKCEkc2NvcGUuaW5SZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgICRzY29wZS5pblJlcXVlc3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7dG9rZW46ICRzY29wZS51c2VyLnRva2VuLCBwcm9tb0NvZGU6ICRzY29wZS5kaXNjb3VudC5wcm9tb0NvZGV9O1xyXG4gICAgICAgICAgICAkaHR0cC5wb3N0KCgnL3N0b3JlL3Byb2R1Y3QvQ29uZmlybVByb21vJyksIGRhdGEpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb21vRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2xkRGlzY291bnQgPSAkc2NvcGUuZGlzY291bnQuc3VtbTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQgPSBkYXRhLmRpc2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzICE9ICd1bmRlZmluZWQnICYmICRzY29wZS5kaXNjb3VudC5wcm9kdWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvZHVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgJHNjb3BlLmRpc2NvdW50LnByb2R1Y3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9kdWN0c1tpXS5pZCA9PSAkc2NvcGUuZGlzY291bnQucHJvZHVjdHNbal0uaWRfcHJvZHVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tICs9ICRzY29wZS5kaXNjb3VudC5wcm9kdWN0c1tqXS5kaXNjb3VudCpwYXJzZUludCgkc2NvcGUucHJvZHVjdHNbaV0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkRGlzY291bnQgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KG9sZERpc2NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tIC09ICRzY29wZS5kaXNjb3VudC5zdW1tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9sZERpc2NvdW50ID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3VtbSArPSBwYXJzZUZsb2F0KG9sZERpc2NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvbW9FcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5kaXNjb3VudC5zdW1tID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLmRpc2NvdW50LnN1bW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGlzY291bnQuc3VtbSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycm9yKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5wcm9tb0Vycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzY291bnQuc3VtbSA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdW1tICs9IHBhcnNlRmxvYXQoJHNjb3BlLmRpc2NvdW50LnN1bW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kaXNjb3VudC5zdW1tID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUuaW5SZXF1ZXN0ID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuJHdhdGNoKCdkaXNjb3VudC5wcm9tb0NvZGUnLCBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICRzY29wZS5wcm9tb0Vycm9yID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuc2F2ZUN1c3RvbWVyID0gZnVuY3Rpb24odmFsaWQpIHtcclxuICAgICAgICBpZiAoIXZhbGlkICkgeyBcclxuICAgICAgICAgICAgJHNjb3BlLmN1c3RvbWVyRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSAkc2NvcGUuY3VzdG9tZXJIaW50O1xyXG4gICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJHNjb3BlLnN1bW0gPT09IDApICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmKCEkc2NvcGUuaW5SZXF1ZXN0KXtcclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt0b2tlbjogJHNjb3BlLnVzZXIudG9rZW4sIGN1c3RvbWVyOiAkc2NvcGUuY3VzdG9tZXJ9O1xyXG5cclxuICAgICAgICAgICAgJGh0dHAucG9zdCgoJy9zdG9yZS9wcm9kdWN0L3NhdmVDdXN0b21lcicpLCBkYXRhKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcHJvY2VlZEZpbmlzaEZvcm0nKS5yZW1vdmVDbGFzcygnaGlkZS1jb250ZW50LWJveCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogJCgnI3Byb2NlZWRGaW5pc2hGb3JtJykub2Zmc2V0KCkudG9wXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNjAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1c3RvbWVyRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmluUmVxdWVzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS4kd2F0Y2goJ2N1c3RvbWVyLmZpcnN0X25hbWUgKyBjdXN0b21lci5sYXN0X25hbWUgKyBjdXN0b21lci5lbWFpbCArIGN1c3RvbWVyLnRhcmdldF9maXJzdF9uYW1lICsgY3VzdG9tZXIudGFyZ2V0X2xhc3RfbmFtZSArIGN1c3RvbWVyLnBob25lICsgY3VzdG9tZXIuYWRkcmVzcyArIGN1c3RvbWVyLmNpdHkgKyBjdXN0b21lci56aXAgKyBjdXN0b21lci5jb3VudHJ5JywgZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAkc2NvcGUuY3VzdG9tZXJFcnJvciA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLmJ1eSA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuc3VtbSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdG9rZW46ICRzY29wZS51c2VyLnRva2VuLFxyXG4gICAgICAgICAgICBjdXN0b21lciA6ICRzY29wZS5jdXN0b21lcixcclxuICAgICAgICAgICAgcHJvZHVjdHMgOiAkc2NvcGUucHJvZHVjdHMsXHJcbiAgICAgICAgICAgIGRlbGl2ZXJ5IDogJHNjb3BlLnNlbGVjdGVkRGVsaXZlcnksXHJcbiAgICAgICAgICAgIHBheW1lbnQgIDogJHNjb3BlLnNlbGVjdGVkUGF5bWVudCxcclxuICAgICAgICAgICAgZGlzY291bnQgOiAkc2NvcGUuZGlzY291bnRcclxuICAgICAgICB9O1xyXG4gICAgICAgICRodHRwLnBvc3QoKCcvc3RvcmUvcHJvZHVjdC9idXknKSwgZGF0YSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5wYXltZW50ID09ICdVbml0ZWxsZXInKXtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNwcm9jZWVkRmluaXNoRm9ybScpLmFmdGVyKCRjb21waWxlKGRhdGEuY29udGVudCkoJHNjb3BlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcjcGF5VW5pdGVsbGVyJykuc3VibWl0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnRodW1iQ2xhc3MgPSBmdW5jdGlvbihsZW4pe1xyXG4gICAgICAgIGlmIChsZW4gPiAzKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJ0aHVtYnN3cmFwcGVyIHhzY3JvbGxlZFwiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIFwidGh1bWJzd3JhcHBlclwiO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudmFsQ2xhc3MgPSBmdW5jdGlvbihpc1ZhbGlkKXtcclxuICAgICAgICBpZihpc1ZhbGlkKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBcImVycm9yXCI7XHJcbiAgICB9O1xyXG59KTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ21vYmlzcG90JykuY29udHJvbGxlcignVXNlckNvbnRyb2xsZXInLFxyXG4gIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRjb21waWxlLCAkY29va2llcywgY29udGVudFNlcnZpY2UpIHtcclxuXHJcbiAgJHNjb3BlLmVycm9yID0ge307XHJcbiAgJHNjb3BlLnJlc3VsdCA9IHt9O1xyXG4gICRzY29wZS5tb2RhbCA9ICdub25lJztcclxuICAkc2NvcGUuaG9zdF90eXBlID0gJ21vYmlsZSc7XHJcblxyXG4gIC8v0J7Rh9C40YHRgtC60LAg0LfQvdCw0YfQtdC90LjQuVxyXG4gICRzY29wZS5zZXRFbXB0eSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgJHNjb3BlLnVzZXIucGFzc3dvcmQgPSAnJztcclxuICAgICRzY29wZS51c2VyLnRlcm1zID0gMDtcclxuXHJcbiAgICAkc2NvcGUuZXJyb3IgPSB7fTtcclxuICAgICRzY29wZS5yZXN1bHQgPSB7fTtcclxuICB9O1xyXG5cclxuICAkc2NvcGUuaGlkZU1vZGFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUubW9kYWwgPSAnbm9uZSc7XHJcbiAgfTtcclxuXHJcbiAgLy/QmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQtNCw0YLQsNC/0LjQutC10YDQsFxyXG4gIGFuZ3VsYXIuZWxlbWVudCgnI2JpcnRoZGF5JykuZGF0ZXBpY2tlcih7XHJcbiAgICB5ZWFyUmFuZ2U6ICcxOTAwOi0wJyxcclxuICAgIGRhdGVGb3JtYXQ6ICdkZC5tbS55eScsXHJcbiAgICBvblNlbGVjdDogZnVuY3Rpb24gKGRhdGVUZXh0LCBpbnN0KSB7XHJcbiAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgJHNjb3BlLnVzZXIuYmlydGhkYXkgPSBkYXRlVGV4dDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8v0KHRgtC+0YDQvtC2INC80L7QtNCw0LvRjNC90YvRhSDQvtC60L7QvVxyXG4gICRzY29wZS4kd2F0Y2goJ21vZGFsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUuc2V0RW1wdHkoJHNjb3BlLm1vZGFsKTtcclxuICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgkc2NvcGUubW9kYWwpO1xyXG4gIH0pO1xyXG5cclxuICAvL9Cg0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0L/RgNC+0YTQuNC70Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgJHNjb3BlLnNldFByb2ZpbGUgPSBmdW5jdGlvbih1c2VyKXtcclxuICAgICRodHRwLnBvc3QoJy91c2VyL2VkaXRQcm9maWxlJyx1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuY29udGVudDtcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0JDQstGC0L7QvtC/0YDQtdC00LXQu9C10L3QuNC1INGA0LDQt9GA0LXRidC10L3QuNGPXHJcbiAgJHNjb3BlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciByZXNvbHV0aW9uID0gJGNvb2tpZXMucmVzb2x1dGlvbjtcclxuICAgIGlmICghcmVzb2x1dGlvbikge1xyXG4gICAgICB2YXIgY2xpZW50UmVzID0gTWF0aC5tYXgoc2NyZWVuLndpZHRoLHNjcmVlbi5oZWlnaHQpO1xyXG4gICAgICB2YXIgcmVzID0gWzE5MjAsIDE0MDAsIDEyODBdO1xyXG4gICAgICBmb3IodmFyIGk9MDsgaTxyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoY2xpZW50UmVzID49IHJlc1tpXSl7XHJcbiAgICAgICAgICByZXNvbHV0aW9uID0gcmVzW2ldO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICRjb29raWVzLnJlc29sdXRpb24gPSAnJyArIHJlc29sdXRpb247XHJcbiAgICAgICRzY29wZS5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9CQ0LLRgtC+0YDQuNC30LDRhtC40Y9cclxuICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbih1c2VyLCB2YWxpZCkge1xyXG4gICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9sb2dpbicsIHVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICBpZiAoZGF0YS5lcnJvciA9PSAneWVzJykge1xyXG4gICAgICAgICAgJHNjb3BlLmVycm9yLmVtYWlsID0gdHJ1ZTtcclxuICAgICAgICAgICRzY29wZS5lcnJvci5jb250ZW50ID0gZGF0YS5jb250ZW50O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoZGF0YS5hY2Nlc3NfdXJsKSB8fCAhZGF0YS5hY2Nlc3NfdXJsLmxlbmd0aClcclxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsJy9zcG90L2xpc3QvJyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGxvY2F0aW9uKS5hdHRyKCdocmVmJyxkYXRhLmFjY2Vzc191cmwpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChsb2NhdGlvbikuYXR0cignaHJlZicsJy8nKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLiR3YXRjaCgndXNlci5lbWFpbCArIHVzZXIucGFzc3dvcmQgKyB1c2VyLmNvZGUnLCBmdW5jdGlvbigpIHtcclxuICAgICRzY29wZS5lcnJvci5lbWFpbCA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmVycm9yLmNvZGUgPSBmYWxzZTtcclxuICAgICRzY29wZS5lcnJvci5wYXNzd29yZCA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmVycm9yLmNvbnRlbnQgPSAnJztcclxuICB9KTtcclxuXHJcbiAgLy8g0KDQtdCz0LjRgdGC0YDQsNGG0LjRj1xyXG4gICRzY29wZS5hY3RpdmF0aW9uID0gZnVuY3Rpb24odXNlciwgdmFsaWQpe1xyXG4gICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKHVzZXIudGVybXMgPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAkaHR0cC5wb3N0KCcvc2VydmljZS9yZWdpc3RyYXRpb24nLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICdubycpe1xyXG4gICAgICAgICRzY29wZS51c2VyLmVtYWlsID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIucGFzc3dvcmQgPSAnJztcclxuICAgICAgICAkc2NvcGUudXNlci5hY3Rpdl9jb2RlID0gJyc7XHJcbiAgICAgICAgJHNjb3BlLnVzZXIudGVybXMgPSAwO1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJykge1xyXG4gICAgICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwoZGF0YS5jb250ZW50LCAnbm9uZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUucmVzdWx0Lm1lc3NhZ2UgPSBkYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgICBjb250ZW50U2VydmljZS5kZXNrdG9wTW9kYWwoJ21lc3NhZ2UnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChkYXRhLmVycm9yID09PSAnZW1haWwnKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuZW1haWwgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuZXJyb3IuY29kZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5lcnJvci5jb250ZW50ID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJylcclxuICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ2Vycm9yJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINCS0L7RgdGB0YLQsNC90L7QstC70LXQvdC40LUg0L/QsNGA0L7Qu9GPXHJcbiAgJHNjb3BlLnJlY292ZXJ5ID0gZnVuY3Rpb24odXNlciwgdmFsaWQpe1xyXG4gICAgaWYgKCF2YWxpZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICRodHRwLnBvc3QoJy9zZXJ2aWNlL3JlY292ZXJ5JywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGlmIChkYXRhLmVycm9yID09ICd5ZXMnKSB7XHJcbiAgICAgICAgJHNjb3BlLmVycm9yLmVtYWlsID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuZXJyb3IuY29udGVudCA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpXHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ2Vycm9yJyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZGF0YS5lcnJvciA9PSAnbm8nKXtcclxuICAgICAgICAkc2NvcGUudXNlci5lbWFpbCA9ICcnO1xyXG4gICAgICAgICRzY29wZS5yZXN1bHQubWVzc2FnZSA9IGRhdGEuY29udGVudDtcclxuICAgICAgICBpZiAoJHNjb3BlLmhvc3RfdHlwZSA9PT0gJ21vYmlsZScpXHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLm1vYmlsZU1vZGFsKGRhdGEuY29udGVudCwgJ25vbmUnKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbnRlbnRTZXJ2aWNlLmRlc2t0b3BNb2RhbCgnbWVzc2FnZScpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQodC80LXQvdCwINC/0LDRgNC+0LvRj1xyXG4gICRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbih1c2VyLCB2YWxpZCl7XHJcbiAgICBpZiAoIXZhbGlkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgJGh0dHAucG9zdCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgaWYgKGRhdGEuZXJyb3IgPT0gJ25vJyl7XHJcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL3Nwb3QvbGlzdC8nKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgJHNjb3BlLm1lc3NhZ2VNb2RhbCA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKHRleHQpIHx8ICF0ZXh0Lmxlbmd0aClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgJHNjb3BlLnJlc3VsdC5tZXNzYWdlID0gdGV4dDtcclxuICAgIGlmICgkc2NvcGUuaG9zdF90eXBlID09PSAnbW9iaWxlJylcclxuICAgICAgY29udGVudFNlcnZpY2UubW9iaWxlTW9kYWwodGV4dCwgJ25vbmUnKTtcclxuICAgIGVsc2VcclxuICAgICAgY29udGVudFNlcnZpY2UuZGVza3RvcE1vZGFsKCdtZXNzYWdlJyk7XHJcbiAgfTtcclxuXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==