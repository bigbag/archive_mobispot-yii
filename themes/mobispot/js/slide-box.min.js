(function (a) {
	var slideHat = {};
	$('.slide-box-close').on("click", function () {
		$('.slide-box').slideUp(400, function () {
			$('.toggle-box').not('.choose-type .toggle-box').removeClass('open');
		});
	});
	a(function () {
		a(".toggle-box").on("click", function (b) {
			var c = a(b.currentTarget);
			var navButtonId = this.id;
			var $anotherButtons;
			var $formSlideButtons;

			$(this).hasClass('toggle-box__sub') ? $anotherButtons = $(this).siblings() : $anotherButtons = $('.nav-bar li a').not(this);
			$formSlideButtons =  $('.form-link');

			if ($anotherButtons.hasClass('open') || $formSlideButtons.hasClass('open') ) {
				slideHat.delay = 400;
				$anotherButtons.removeClass('open');
				$formSlideButtons.removeClass('open');
				$(this).hasClass('toggle-box__sub') ? $('.sub-slide-box').slideUp(400) : $('.slide-box').slideUp(400)
			}else{
				slideHat.delay = 0;
			}

			if (c.hasClass("open")) {
				var verifyFocus = $('.spot-main-input textarea');
				var aaa = $('.spot-main-input textarea:focus');
				 c.hasClass('onlyOpen') || (c.removeClass("open"), a("#" + navButtonId + "Form").slideUp(400));
			} else {
				c.addClass("open"), a("#" + navButtonId + "Form").delay(slideHat.delay).slideDown(480, function(){
					slideHat.height = $('.m-page-hat').outerHeight();
					$(this).css('overflow','visible');

				});

				if (c.hasClass('slideToThis')) {
					var destination = $(this).offset().top;

					$("html, body").animate({
						scrollTop: destination - 20
					}, 600);
				}
				if (c.hasClass('slideTo')) {
					var href = $(this).attr("href");
					var destination = $(href).offset().top;

					$("html, body").animate({
						scrollTop: destination - 20
					}, 600);
				}
				if (c.hasClass('onlyOpen')) {
					$('.onlyOpen').not(c).removeClass('open').find(".slide-content").slideUp(400);
				}
			}

			return false;
		});
	});

	$('.toggle-box', '.header-page').click(function () {
		$('html, body').animate({
			scrollTop: 0
		}, 600);
	});


	$(document).on('click', function(){
		$('.m-page-hat .slide-box').slideUp(400);
		$('a','header .nav-bar ').removeClass('open');
	});

	$(document).on('click','.m-page-hat', function(event){
		event.stopPropagation();
	});


	$(document).scroll(slideHat.height, function(){
		var $aNavBar = $('a','header .nav-bar');
		var scrollTop = $(this).scrollTop();
		var scrollBottom = $(document).height() - $(this).scrollTop();
		  if( $($aNavBar).hasClass('open') ){
				if (scrollTop > slideHat.height){
					var difference = scrollTop - slideHat.height;
					$('html, body').scrollTop(difference);
					$('.slide-box').css('display', 'none');
					$($aNavBar).removeClass('open');
				}

		 }



	});



})(jQuery);